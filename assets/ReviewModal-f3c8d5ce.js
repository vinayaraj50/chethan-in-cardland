import{c as Ne,j as t,m as $,A as Le,C as We,r as k,g as De,a as we,T as qe,h as Oe,L as Pe,i as ze,k as Ye,l as Ve}from"./index-d043e65b.js";import{D as He,I as Ue,d as Ge}from"./ImageViewer-33567447.js";import{B as Be}from"./book-open-8736b1fe.js";import{M as _e}from"./mic-f10071f3.js";import{S as Ze}from"./sparkles-4aa917c1.js";const Qe=Ne("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),$e=Ne("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Fe=Ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Ke="/chethan-in-cardland/assets/congratulations-565fc759.png",Je=({currentIndex:i,totalCards:o,masteredCount:c,totalOriginalCards:x,rating:f,onClose:v,onDuplicate:g,user:u,stack:b,handleDownload:w})=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsxs("div",{className:"neo-button",style:{height:"2.25rem",padding:"0 1rem",fontSize:"1rem",justifyContent:"center",minWidth:"5rem"},children:[i+1," / ",o]}),t.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 20px"},children:t.jsxs("div",{style:{width:"100%",maxWidth:"14rem",height:"1rem",background:"rgba(0,0,0,0.05)",borderRadius:"0.625rem",position:"relative",display:"flex",alignItems:"center",boxShadow:"inset 0.125rem 0.125rem 0.25rem var(--shadow-dark), inset -0.1rem -0.1rem 0.2rem var(--shadow-light)"},children:[t.jsx($.div,{animate:{left:`${x>0?c/x*100:0}%`,y:f===2?[0,-15,0]:f===1?[0,-5,0]:0},transition:{left:{type:"spring",stiffness:50,damping:15},y:{duration:.4,ease:"easeOut"}},style:{position:"absolute",left:0,top:-4,zIndex:10,x:"-50%"},children:t.jsx(Qe,{size:24,color:f===2?"#22c55e":"var(--accent-color)",fill:f===2?"#dcfce7":"none"})}),t.jsx("div",{style:{width:`${x>0?c/x*100:0}%`,height:"100%",background:f===2?"linear-gradient(90deg, var(--accent-color), #22c55e)":"var(--accent-color)",borderRadius:"10px",transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),t.jsx("div",{style:{position:"absolute",right:-12,top:-4,opacity:.9},children:t.jsx(Be,{size:24,color:"var(--accent-color)",fill:"var(--bg-color)"})})]})}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[(u==null?void 0:u.email)===Le&&t.jsx("button",{className:"neo-button icon-btn",style:{width:"36px",height:"36px"},title:"Download Stack",onClick:w,children:t.jsx(He,{size:18})}),t.jsx(We,{onClick:v,size:18})]})]}),Ae=({audioData:i})=>{const[o,c]=k.useState(!1),[x,f]=k.useState(0),v=k.useRef(null),g=k.useRef(),u=k.useRef();v.current||(v.current=new Audio(i)),k.useEffect(()=>{const p=v.current;p.src!==i&&(p.pause(),p.src=i,p.load(),f(0),c(!1))},[i]),k.useEffect(()=>{const p=v.current,I=()=>{p.duration&&f(p.currentTime/p.duration*100),g.current=requestAnimationFrame(I)},H=()=>{c(!0),g.current=requestAnimationFrame(I)},L=()=>{c(!1),cancelAnimationFrame(g.current)},U=()=>{c(!1),f(0),cancelAnimationFrame(g.current)};return p.addEventListener("play",H),p.addEventListener("pause",L),p.addEventListener("ended",U),()=>{p.pause(),p.removeEventListener("play",H),p.removeEventListener("pause",L),p.removeEventListener("ended",U),cancelAnimationFrame(g.current)}},[]);const b=p=>{p.stopPropagation();const I=v.current;o?I.pause():I.play()},w=p=>{p.stopPropagation();const I=v.current;I.pause(),I.currentTime=0,f(0)},T=p=>{p.stopPropagation();const I=u.current.getBoundingClientRect(),H=p.clientX-I.left,L=Math.max(0,Math.min(100,H/I.width*100)),U=v.current;U.duration&&(U.currentTime=L/100*U.duration,f(L))};return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.5rem",width:"100%",maxWidth:"250px"},onClick:p=>p.stopPropagation(),children:[t.jsx("button",{className:"neo-button icon-btn",onClick:b,style:{width:"30px",height:"30px",background:"var(--accent-soft)",color:"var(--accent-color)",borderRadius:"50%",flexShrink:0},children:o?t.jsx($e,{size:12,fill:"currentColor"}):t.jsx(De,{size:12,fill:"currentColor"})}),t.jsx("button",{className:"neo-button icon-btn",onClick:w,style:{width:"30px",height:"30px",borderRadius:"50%",flexShrink:0},children:t.jsx(Fe,{size:10,fill:"currentColor"})}),t.jsx("div",{ref:u,className:"neo-inset",onClick:T,style:{flex:1,height:"6px",borderRadius:"3px",overflow:"hidden",position:"relative",cursor:"pointer"},children:t.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${x}%`,background:"var(--accent-color)",transition:"width 0.1s linear"}})})]})},Xe=({currentCard:i,isFlipped:o,setIsFlipped:c,setViewingImage:x,onRateMCQ:f,feedback:v})=>{var g;return i?i.type==="mcq"?t.jsxs("div",{className:"neo-flat",style:{width:"100%",height:"calc(100% - 2rem)",minHeight:"18rem",maxHeight:"24rem",display:"flex",flexDirection:"column",alignItems:"center",padding:"1.25rem",textAlign:"center",position:"relative"},children:[t.jsxs("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflowY:"auto",marginBottom:"1rem"},className:"custom-scrollbar",children:[i.question.image&&t.jsx("img",{src:i.question.image,style:{maxWidth:"100%",maxHeight:"10rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1rem",cursor:"pointer"},alt:"Q",onClick:()=>x(i.question.image)}),t.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:"800",margin:0},children:i.question.text}),i.question.audio&&t.jsx(Ae,{audioData:i.question.audio})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",width:"100%",marginTop:"auto"},children:(g=i.options)==null?void 0:g.map((u,b)=>{const w=v&&u.isCorrect;return t.jsx("button",{disabled:!!v,className:"neo-button",onClick:()=>f(u),style:{padding:"0.6rem",justifyContent:"center",textAlign:"center",minHeight:"3.5rem",background:w?"#dcfce7":"var(--bg-color)",borderColor:w?"#22c55e":"var(--border-color)",opacity:v&&!w?.5:1,fontSize:"0.9rem",lineHeight:"1.2"},children:u.text},u.id||b)})})]}):t.jsx("div",{style:{perspective:"62.5rem",height:"100%",minHeight:"18rem",maxHeight:"24rem",cursor:"pointer"},onClick:()=>{o&&c(!1)},children:t.jsxs($.div,{style:{width:"100%",height:"100%",position:"relative",transformStyle:"preserve-3d"},animate:{rotateY:o?180:0},transition:{type:"spring",stiffness:260,damping:20},children:[t.jsx("div",{className:"neo-flat",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"1.5rem",textAlign:"center"},children:t.jsx("div",{style:{flex:1,width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center"},className:"custom-scrollbar",children:t.jsxs("div",{style:{margin:"auto 0",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",wordBreak:"break-word",overflowWrap:"anywhere"},children:[t.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.4,marginBottom:"1rem",display:"block"},children:"QUESTION"}),i&&i.question.image&&t.jsx("img",{src:i.question.image,style:{maxWidth:"100%",maxHeight:"10rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1rem",cursor:"pointer"},alt:"Q",onClick:u=>{u.stopPropagation(),x(i.question.image)}}),t.jsx("h2",{style:{fontSize:"1.4rem",fontWeight:"800"},children:i?i.question.text:"No more cards"}),i&&i.question.audio&&t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"1rem"},onClick:u=>u.stopPropagation(),children:t.jsx(Ae,{audioData:i.question.audio})})]})})}),t.jsx("div",{className:"neo-flat",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"1.5rem",textAlign:"center"},children:t.jsx("div",{style:{flex:1,width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center"},className:"custom-scrollbar",children:t.jsxs("div",{style:{margin:"auto 0",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",wordBreak:"break-word",overflowWrap:"anywhere"},children:[t.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.4,marginBottom:"1rem",display:"block"},children:"ANSWER"}),i&&i.answer.image&&t.jsx("img",{src:i.answer.image,style:{maxWidth:"100%",maxHeight:"10rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1rem",cursor:"pointer"},alt:"A",onClick:u=>{u.stopPropagation(),x(i.answer.image)}}),t.jsx("h2",{style:{fontSize:"1.6rem",color:"var(--accent-color)",fontWeight:"800"},children:i?i.answer.text:""}),i&&i.answer.audio&&t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"1rem"},onClick:u=>u.stopPropagation(),children:t.jsx(Ae,{audioData:i.answer.audio})})]})})})]})}):null};let Te=null;const he=()=>(Te||(Te=new(window.AudioContext||window.webkitAudioContext)),Te),ye=()=>localStorage.getItem("soundsEnabled")!=="false",pe=(i,o,c,x,f=.1)=>{const v=he(),g=v.createOscillator(),u=v.createGain();g.type=i,g.frequency.setValueAtTime(o,c),g.connect(u),u.connect(v.destination),u.gain.setValueAtTime(0,c),u.gain.linearRampToValueAtTime(f,c+.05),u.gain.exponentialRampToValueAtTime(.001,c+x),g.start(c),g.stop(c+x)},et=()=>{if(!ye())return;const i=he();i.state==="suspended"&&i.resume();const o=i.currentTime;[523.25,659.25,783.99,1046.5].forEach((x,f)=>{pe("sine",x,o+f*.1,.6,.1)})},tt=()=>{if(!ye())return;const i=he();i.state==="suspended"&&i.resume();const o=i.currentTime,c=.5,x=i.sampleRate*c,f=i.createBuffer(1,x,i.sampleRate),v=f.getChannelData(0);for(let w=0;w<x;w++)v[w]=Math.random()*2-1;const g=i.createBufferSource();g.buffer=f;const u=i.createBiquadFilter();u.type="lowpass",u.frequency.setValueAtTime(200,o),u.frequency.exponentialRampToValueAtTime(4e3,o+c);const b=i.createGain();b.gain.setValueAtTime(.05,o),b.gain.linearRampToValueAtTime(.1,o+c/2),b.gain.linearRampToValueAtTime(0,o+c),g.connect(u),u.connect(b),b.connect(i.destination),g.start(o)},nt=()=>{if(!ye())return;const i=he();i.state==="suspended"&&i.resume();const o=i.currentTime;pe("sine",1975.53,o,.8,.15),pe("sine",3951.07,o,.4,.05)},it=()=>{if(!ye())return;const i=he();i.state==="suspended"&&i.resume();const o=i.currentTime;[{freq:392,time:0,dur:.15},{freq:523.25,time:.15,dur:.15},{freq:659.25,time:.3,dur:.15},{freq:783.99,time:.45,dur:.4}].forEach(({freq:x,time:f,dur:v})=>{const g=i.createOscillator(),u=i.createGain(),b=i.createBiquadFilter();g.type="sawtooth",g.frequency.value=x,b.type="lowpass",b.Q.value=2,g.connect(b),b.connect(u),u.connect(i.destination);const w=o+f,T=w+v;b.frequency.setValueAtTime(500,w),b.frequency.linearRampToValueAtTime(3e3,w+.05),b.frequency.exponentialRampToValueAtTime(500,T),u.gain.setValueAtTime(0,w),u.gain.linearRampToValueAtTime(.2,w+.02),u.gain.linearRampToValueAtTime(.15,w+.05),u.gain.exponentialRampToValueAtTime(.001,T),g.start(w),g.stop(T+.1)})},rt=()=>{if(!ye())return;const i=he();i.state==="suspended"&&i.resume();const o=i.currentTime;[{freq:523.25,delay:0,vol:.1},{freq:659.25,delay:.05,vol:.1},{freq:783.99,delay:.1,vol:.1},{freq:1046.5,delay:.15,vol:.08}].forEach(({freq:x,delay:f,vol:v})=>{pe("sine",x,o+f,1,v)})},at=()=>{if(!ye())return;const i=he();i.state==="suspended"&&i.resume();const o=i.currentTime;pe("triangle",440,o,.3,.04),pe("sine",554.37,o,.3,.04)},ot=({isFlipped:i,currentCard:o,isRecording:c,recordedAudio:x,isPlayingRecorded:f,startRecording:v,stopRecording:g,deleteRecording:u,toggleRecordedPlayback:b,setIsFlipped:w,handleRating:T,feedback:p})=>{if(i||!o||o.type==="mcq"){if(p)return null;if(i)return t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",minHeight:"5rem",justifyContent:"center"},children:t.jsx(we,{mode:"wait",children:o.type!=="mcq"?t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%"},children:[t.jsxs("div",{className:"neo-flat",style:{padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",borderRadius:"1rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.jsx("div",{style:{width:"0.6rem",height:"0.6rem",borderRadius:"50%",background:"var(--accent-color)",opacity:.6}}),t.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold",opacity:.7},children:"SELECT MATCHING ANSWER"})]}),t.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:x&&t.jsx("button",{className:"neo-button icon-btn",onClick:b,style:{color:"var(--accent-color)",width:"2rem",height:"2rem"},children:f?t.jsx(Fe,{size:16,fill:"currentColor"}):t.jsx(De,{size:16,fill:"currentColor"})})})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",width:"100%",justifyContent:"center"},children:[t.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#fee2e2",color:"#dc2626",border:"1px solid #fecaca",minWidth:"4rem",borderRadius:"0.75rem"},onClick:I=>{I.stopPropagation(),T(-1)},children:t.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Wrong"})}),t.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#f3f4f6",color:"#4b5563",border:"1px solid #e5e7eb",minWidth:"4rem",borderRadius:"0.75rem"},onClick:I=>{I.stopPropagation(),T(0)},children:t.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Unsure"})}),t.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#e0f2fe",color:"#0284c7",border:"1px solid #bae6fd",minWidth:"4rem",borderRadius:"0.75rem"},onClick:I=>{I.stopPropagation(),T(1)},children:t.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Partly"})}),t.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#dcfce7",color:"#16a34a",border:"1px solid #bbf7d0",minWidth:"4rem",borderRadius:"0.75rem"},onClick:I=>{I.stopPropagation(),T(2)},children:t.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"By heart"})})]})]}):null})})}return t.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("div",{className:"neo-flat",style:{padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",borderRadius:"1rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.jsx("div",{style:{width:"0.6rem",height:"0.6rem",borderRadius:"50%",background:c?"#ff4444":"#ccc",boxShadow:c?"0 0 0.5rem #ff4444":"none",animation:c?"pulse 1.5s infinite":"none"}}),t.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.7},children:c?"RECORDING ANSWER...":x?"ANSWER RECORDED":"RECORD YOUR ANSWER"})]}),t.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:!c&&!x?t.jsx("button",{className:"neo-button icon-btn",onClick:v,style:{color:"var(--accent-color)",width:"2.25rem",height:"2.25rem"},children:t.jsx(_e,{size:18})}):c?t.jsx("button",{className:"neo-button icon-btn",onClick:g,style:{color:"#ff4444",width:"2.25rem",height:"2.25rem"},children:t.jsx(Fe,{size:18,fill:"currentColor"})}):t.jsx(t.Fragment,{children:t.jsx("button",{className:"neo-button icon-btn",onClick:u,style:{color:"#ff4444",width:"2.25rem",height:"2.25rem"},children:t.jsx(qe,{size:18})})})})]}),t.jsx("button",{className:"neo-button neo-glow-blue",style:{width:"100%",justifyContent:"center",padding:"1rem",fontSize:"1.1rem",background:"var(--accent-color)",color:"white",minHeight:"3.75rem",borderRadius:"1rem"},onClick:()=>{tt(),w(!0),x&&setTimeout(()=>b(),300)},children:"Show Answer"})]})};var Ee={};(function i(o,c,x,f){var v=!!(o.Worker&&o.Blob&&o.Promise&&o.OffscreenCanvas&&o.OffscreenCanvasRenderingContext2D&&o.HTMLCanvasElement&&o.HTMLCanvasElement.prototype.transferControlToOffscreen&&o.URL&&o.URL.createObjectURL),g=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!o.OffscreenCanvas)return!1;try{var n=new OffscreenCanvas(1,1),e=n.getContext("2d");e.fillRect(0,0,1,1);var a=n.transferToImageBitmap();e.createPattern(a,"no-repeat")}catch{return!1}return!0}();function b(){}function w(n){var e=c.exports.Promise,a=e!==void 0?e:o.Promise;return typeof a=="function"?new a(n):(n(b,b),null)}var T=function(n,e){return{transform:function(a){if(n)return a;if(e.has(a))return e.get(a);var s=new OffscreenCanvas(a.width,a.height),h=s.getContext("2d");return h.drawImage(a,0,0),e.set(a,s),s},clear:function(){e.clear()}}}(u,new Map),p=function(){var n=Math.floor(16.666666666666668),e,a,s={},h=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(l){var d=Math.random();return s[d]=requestAnimationFrame(function r(m){h===m||h+n-1<m?(h=m,delete s[d],l()):s[d]=requestAnimationFrame(r)}),d},a=function(l){s[l]&&cancelAnimationFrame(s[l])}):(e=function(l){return setTimeout(l,n)},a=function(l){return clearTimeout(l)}),{frame:e,cancel:a}}(),I=function(){var n,e,a={};function s(h){function l(d,r){h.postMessage({options:d||{},callback:r})}h.init=function(r){var m=r.transferControlToOffscreen();h.postMessage({canvas:m},[m])},h.fire=function(r,m,R){if(e)return l(r,null),e;var C=Math.random().toString(36).slice(2);return e=w(function(M){function A(E){E.data.callback===C&&(delete a[C],h.removeEventListener("message",A),e=null,T.clear(),R(),M())}h.addEventListener("message",A),l(r,C),a[C]=A.bind(null,{data:{callback:C}})}),e},h.reset=function(){h.postMessage({reset:!0});for(var r in a)a[r](),delete a[r]}}return function(){if(n)return n;if(!x&&v){var h=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{n=new Worker(URL.createObjectURL(new Blob([h])))}catch(l){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",l),null}s(n)}return n}}(),H={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(n,e){return e?e(n):n}function U(n){return n!=null}function j(n,e,a){return L(n&&U(n[e])?n[e]:H[e],a)}function ae(n){return n<0?0:Math.floor(n)}function oe(n,e){return Math.floor(Math.random()*(e-n))+n}function N(n){return parseInt(n,16)}function se(n){return n.map(D)}function D(n){var e=String(n).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:N(e.substring(0,2)),g:N(e.substring(2,4)),b:N(e.substring(4,6))}}function le(n){var e=j(n,"origin",Object);return e.x=j(e,"x",Number),e.y=j(e,"y",Number),e}function xe(n){n.width=document.documentElement.clientWidth,n.height=document.documentElement.clientHeight}function J(n){var e=n.getBoundingClientRect();n.width=e.width,n.height=e.height}function ce(n){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=n,e}function me(n,e,a,s,h,l,d,r,m){n.save(),n.translate(e,a),n.rotate(l),n.scale(s,h),n.arc(0,0,1,d,r,m),n.restore()}function ve(n){var e=n.angle*(Math.PI/180),a=n.spread*(Math.PI/180);return{x:n.x,y:n.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:n.startVelocity*.5+Math.random()*n.startVelocity,angle2D:-e+(.5*a-Math.random()*a),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:n.color,shape:n.shape,tick:0,totalTicks:n.ticks,decay:n.decay,drift:n.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:n.gravity*3,ovalScalar:.6,scalar:n.scalar,flat:n.flat}}function X(n,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var a=e.tick++/e.totalTicks,s=e.x+e.random*e.tiltCos,h=e.y+e.random*e.tiltSin,l=e.wobbleX+e.random*e.tiltCos,d=e.wobbleY+e.random*e.tiltSin;if(n.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-a)+")",n.beginPath(),g&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))n.fill(Z(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(l-s)*.1,Math.abs(d-h)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var r=Math.PI/10*e.wobble,m=Math.abs(l-s)*.1,R=Math.abs(d-h)*.1,C=e.shape.bitmap.width*e.scalar,M=e.shape.bitmap.height*e.scalar,A=new DOMMatrix([Math.cos(r)*m,Math.sin(r)*m,-Math.sin(r)*R,Math.cos(r)*R,e.x,e.y]);A.multiplySelf(new DOMMatrix(e.shape.matrix));var E=n.createPattern(T.transform(e.shape.bitmap),"no-repeat");E.setTransform(A),n.globalAlpha=1-a,n.fillStyle=E,n.fillRect(e.x-C/2,e.y-M/2,C,M),n.globalAlpha=1}else if(e.shape==="circle")n.ellipse?n.ellipse(e.x,e.y,Math.abs(l-s)*e.ovalScalar,Math.abs(d-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):me(n,e.x,e.y,Math.abs(l-s)*e.ovalScalar,Math.abs(d-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var y=Math.PI/2*3,z=4*e.scalar,q=8*e.scalar,O=e.x,Y=e.y,ie=5,V=Math.PI/ie;ie--;)O=e.x+Math.cos(y)*q,Y=e.y+Math.sin(y)*q,n.lineTo(O,Y),y+=V,O=e.x+Math.cos(y)*z,Y=e.y+Math.sin(y)*z,n.lineTo(O,Y),y+=V;else n.moveTo(Math.floor(e.x),Math.floor(e.y)),n.lineTo(Math.floor(e.wobbleX),Math.floor(h)),n.lineTo(Math.floor(l),Math.floor(d)),n.lineTo(Math.floor(s),Math.floor(e.wobbleY));return n.closePath(),n.fill(),e.tick<e.totalTicks}function ee(n,e,a,s,h){var l=e.slice(),d=n.getContext("2d"),r,m,R=w(function(C){function M(){r=m=null,d.clearRect(0,0,s.width,s.height),T.clear(),h(),C()}function A(){x&&!(s.width===f.width&&s.height===f.height)&&(s.width=n.width=f.width,s.height=n.height=f.height),!s.width&&!s.height&&(a(n),s.width=n.width,s.height=n.height),d.clearRect(0,0,s.width,s.height),l=l.filter(function(E){return X(d,E)}),l.length?r=p.frame(A):M()}r=p.frame(A),m=M});return{addFettis:function(C){return l=l.concat(C),R},canvas:n,promise:R,reset:function(){r&&p.cancel(r),m&&m()}}}function te(n,e){var a=!n,s=!!j(e||{},"resize"),h=!1,l=j(e,"disableForReducedMotion",Boolean),d=v&&!!j(e||{},"useWorker"),r=d?I():null,m=a?xe:J,R=n&&r?!!n.__confetti_initialized:!1,C=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,M;function A(y,z,q){for(var O=j(y,"particleCount",ae),Y=j(y,"angle",Number),ie=j(y,"spread",Number),V=j(y,"startVelocity",Number),Re=j(y,"decay",Number),S=j(y,"gravity",Number),P=j(y,"drift",Number),F=j(y,"colors",se),G=j(y,"ticks",Number),Q=j(y,"shapes"),K=j(y,"scalar"),re=!!j(y,"flat"),de=le(y),B=O,ge=[],Ce=n.width*de.x,ke=n.height*de.y;B--;)ge.push(ve({x:Ce,y:ke,angle:Y,spread:ie,startVelocity:V,color:F[B%F.length],shape:Q[oe(0,Q.length)],ticks:G,decay:Re,gravity:S,drift:P,scalar:K,flat:re}));return M?M.addFettis(ge):(M=ee(n,ge,m,z,q),M.promise)}function E(y){var z=l||j(y,"disableForReducedMotion",Boolean),q=j(y,"zIndex",Number);if(z&&C)return w(function(V){V()});a&&M?n=M.canvas:a&&!n&&(n=ce(q),document.body.appendChild(n)),s&&!R&&m(n);var O={width:n.width,height:n.height};r&&!R&&r.init(n),R=!0,r&&(n.__confetti_initialized=!0);function Y(){if(r){var V={getBoundingClientRect:function(){if(!a)return n.getBoundingClientRect()}};m(V),r.postMessage({resize:{width:V.width,height:V.height}});return}O.width=O.height=null}function ie(){M=null,s&&(h=!1,o.removeEventListener("resize",Y)),a&&n&&(document.body.contains(n)&&document.body.removeChild(n),n=null,R=!1)}return s&&!h&&(h=!0,o.addEventListener("resize",Y,!1)),r?r.fire(y,O,ie):A(y,O,ie)}return E.reset=function(){r&&r.reset(),M&&M.reset()},E}var _;function ne(){return _||(_=te(null,{useWorker:!0,resize:!0})),_}function Z(n,e,a,s,h,l,d){var r=new Path2D(n),m=new Path2D;m.addPath(r,new DOMMatrix(e));var R=new Path2D;return R.addPath(m,new DOMMatrix([Math.cos(d)*h,Math.sin(d)*h,-Math.sin(d)*l,Math.cos(d)*l,a,s])),R}function fe(n){if(!g)throw new Error("path confetti are not supported in this browser");var e,a;typeof n=="string"?e=n:(e=n.path,a=n.matrix);var s=new Path2D(e),h=document.createElement("canvas"),l=h.getContext("2d");if(!a){for(var d=1e3,r=d,m=d,R=0,C=0,M,A,E=0;E<d;E+=2)for(var y=0;y<d;y+=2)l.isPointInPath(s,E,y,"nonzero")&&(r=Math.min(r,E),m=Math.min(m,y),R=Math.max(R,E),C=Math.max(C,y));M=R-r,A=C-m;var z=10,q=Math.min(z/M,z/A);a=[q,0,0,q,-Math.round(M/2+r)*q,-Math.round(A/2+m)*q]}return{type:"path",path:e,matrix:a}}function je(n){var e,a=1,s="#000000",h='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof n=="string"?e=n:(e=n.text,a="scalar"in n?n.scalar:a,h="fontFamily"in n?n.fontFamily:h,s="color"in n?n.color:s);var l=10*a,d=""+l+"px "+h,r=new OffscreenCanvas(l,l),m=r.getContext("2d");m.font=d;var R=m.measureText(e),C=Math.ceil(R.actualBoundingBoxRight+R.actualBoundingBoxLeft),M=Math.ceil(R.actualBoundingBoxAscent+R.actualBoundingBoxDescent),A=2,E=R.actualBoundingBoxLeft+A,y=R.actualBoundingBoxAscent+A;C+=A+A,M+=A+A,r=new OffscreenCanvas(C,M),m=r.getContext("2d"),m.font=d,m.fillStyle=s,m.fillText(e,E,y);var z=1/a;return{type:"bitmap",bitmap:r.transferToImageBitmap(),matrix:[z,0,0,z,-C*z/2,-M*z/2]}}c.exports=function(){return ne().apply(this,arguments)},c.exports.reset=function(){ne().reset()},c.exports.create=te,c.exports.shapeFromPath=fe,c.exports.shapeFromText=je})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ee,!1);const st=Ee.exports;Ee.exports.create;const lt=["Great job!","Very good!","Super!","You're on fire!","Excellent work!","Spot on!","You've got this by heart!","Brilliant!","Fantastic!","Wonderful progress!","You're doing amazing!","Perfectly done!","That's the spirit!","Keep it up, champion!","You're a natural!","Masterful!","Impressive memory!","You nailed it!","Outstanding!","Way to go!","You're crushing this!","Incredible focus!","Gold star for you!","You're making this look easy!","Top notch!","Simply superb!","Bravo!","You're unstoppable!","Pure genius!","Love that confidence!","Right on the money!","You're a star student!","Marvelous!","High five!","You're getting so good at this!","That's exactly right!","You're a master in the making!","Spectacular!","So proud of your progress!","You're really shining today!","Unbeatable!","You've mastered this one!","Clear and confident - well done!","Your hard work is paying off!","Solid effort, perfect result!","Keep that momentum going!","You're built for this!","A-plus performance!","You're a knowledge wizard!","Victory is yours!"],ct=["Give it another careful read; weâ€™ll revisit this question.","Take your time and read it again â€” Iâ€™ll ask it once more.","No worries! Let's try this one again in a bit.","Almost there! A quick review will help it stick.","Let's keep this one in the loop for a little longer.","Practice makes perfect! We'll come back to this.","Don't lose heart, let's give it another look together.","Every mistake is a step toward mastery. Reviewing now!","Slow and steady wins the race. Read it once more.","I'll ask this again soon to help you remember.","It's okay! Even the best need a second look sometimes.","Let's refine this one. Read carefully and we'll retry.","A little more focus here will do wonders.","Let's polish this answer together. See you again soon!","Deep breaths! Read it again, and we'll revisit.","Learning takes time. Let's keep this one active.","You're doing great, just need to master this specific one.","Give it one more glance. I'll be back with this question.","Let's solidify this. A quick revisit is coming up.","Don't rush! Read it again to let it sink in.","We'll get this one right next time, I promise!","Keep your chin up! Let's re-study this card.","It's just a hurdle, not a wall. Re-reading helps!","Let's refresh your memory on this one shortly.","Stay positive! We'll tackle this again very soon.","A quick recap, and you'll have it in no time.","Let's keep this card in the 'must-know' pile for now.","Reviewing is the key to success. Let's do it again.","One more read-through will make all the difference.","Persistence pays off! We'll cycle back to this.","It's trial and error. Let's try one more trial.","Let's give this one a second chance to shine.","Focus on the details this time. Re-visiting shortly!","You're learning! Let's re-confirm this one later.","A bit more practice is all you need here.","I believe in you! Let's re-read and try again.","Let's not let this one slip away. Re-asking soon!","Each review makes your brain stronger. Ready for round 2?","Patience is a virtue in learning. Re-reading now.","Let's keep the conversation going on this card.","Small steps lead to big jumps. Let's re-step this one.","Almost caught it! Let's throw the question again later.","It's on the tip of your tongue! Let's review to be sure.","Constructive repetition! We'll be back for this.","Let's strengthen this connection in your memory.","Honesty is the first step to learning. Re-trying soon!","A moment of focus now saves a lot of time later.","Let's bridge the gap on this one. Re-reading...","Your friend is here to help! Let's look at this again.","Final check is coming soon. Give it a good read now!"],dt=i=>{const o=i==="mastered"?lt:ct;return o[Math.floor(Math.random()*o.length)]},ut=({stack:i,user:o,onUpdate:c,onClose:x,onDuplicate:f,showAlert:v,isPreviewMode:g=!1,onLoginRequired:u,previewProgress:b=null,onReviewStart:w})=>{var V,Re;const T=((V=i.cards)==null?void 0:V.some(S=>S.lastRating!==void 0))||!1,[p,I]=k.useState(T),[H,L]=k.useState((b==null?void 0:b.currentIndex)||0),[U,j]=k.useState(!1),[ae,oe]=k.useState(0),[N,se]=k.useState((b==null?void 0:b.sessionRatings)||[]),[D,le]=k.useState(T?[]:i.cards||[]),[xe,J]=k.useState(null),[ce,me]=k.useState(null),[ve,X]=k.useState(null),[ee,te]=k.useState(0),[_,ne]=k.useState({}),[Z,fe]=k.useState(T?0:((Re=i.cards)==null?void 0:Re.length)||0),[je,n]=k.useState(0),[e,a]=k.useState(!1),[s,h]=k.useState(null),[l,d]=k.useState(!1),r=k.useRef(null),m=k.useRef(null),R=k.useRef([]),C=D[H];k.useEffect(()=>{N.length>0&&w&&w()},[N,w]),k.useEffect(()=>()=>{r.current&&(r.current.pause(),r.current=null)},[]),k.useEffect(()=>{!p&&!T&&D.length>0&&et()},[p,T,D.length]);const M=k.useCallback(S=>{let P=[...i.cards||[]];P.sort((G,Q)=>{const K=G.lastRating!==void 0?G.lastRating:-2,re=Q.lastRating!==void 0?Q.lastRating:-2;return K-re});let F=[];S==="all"?F=P:S==="difficult"&&(F=P.filter(G=>G.lastRating!==void 0&&G.lastRating<2)),le(F),fe(F.length),I(!1),L(0),se([]),J(null),te(0),ne({}),X(null)},[i.cards]),A=S=>{const P=[1,3,7,30];return S>=P.length-1?30:P[S+1]},E=async()=>{const P=ae===2;X(null);const F=P?ee+1:ee;if(P&&te(F),F===Z){const K=D.slice(0,Z).map(W=>{const ue=W.id||W.question.text;return _[ue]??0}).reduce((W,ue)=>W+ue,0),re=Z*2,de=(K/Z).toFixed(1),B=K===re,ge=i.cards.filter(W=>{const ue=W.id||W.question.text,be=_[ue];return be!==void 0&&be<2});if(J({avg:de,totalMarks:K,maxPossibleMarks:re,fullMarks:B,lowRatedCards:ge}),it(),B&&st({particleCount:200,spread:160,origin:{y:.6},colors:["#FFD700","#FF4500","#00FF7F","#00BFFF","#FF1493"],zIndex:2001}),i.id==="demo-stack"||g||Z<i.cards.length)return;const Ce=i.cards.map(W=>{const ue=W.id||W.question.text,be=_[ue];return be!==void 0?{...W,lastRating:be}:W}),ke=i.reviewStage||-1;let Me=new Date,Se=ke;if(de>=1.5){Se=ke+1;const W=A(Se);Me.setDate(Me.getDate()+W)}else Se=-1;const Ie={...i,cards:Ce,lastMarks:K,cardsCountAtLastReview:Z,lastReviewed:new Date().toLocaleDateString(),nextReview:Me.toISOString(),reviewStage:Se};i.ownedByMe&&o?Oe(o.token,Ie,i.driveFileId).then(()=>c(Ie)).catch(W=>console.warn("Background save failed",W)):c(Ie)}else j(!1),oe(0),Y(),setTimeout(()=>{L(H+1)},100)},y=S=>{le(S),fe(S.length),L(0),j(!1),oe(0),se([]),J(null),te(0),ne({}),X(null),Y()},z=(S,P=null)=>{const F=S===2;F?rt():S===1?at():nt(),oe(S);const Q=C.id||C.question.text;_[Q]===void 0&&ne(B=>({...B,[Q]:S})),F||le(B=>[...B,C]);const K=P||dt(F?"mastered":"retry");X({message:K,type:F?"success":"retry"});const re=i.isPublic||i.id==="demo-stack",de=i.ownedByMe;if(re&&!de){const B=H+1;if(B>=10){o?c&&v({type:"confirm",message:"You've reached the preview limit. Add this stack to 'My Cards' to continue?",onConfirm:()=>{f&&f(i),x()}}):u&&u({stack:i,currentIndex:B,sessionRatings:[...N,S]});return}}n(B=>B+1)},q=async()=>{try{const S=await navigator.mediaDevices.getUserMedia({audio:!0}),P=new MediaRecorder(S);m.current=P,R.current=[],P.ondataavailable=F=>{F.data.size>0&&R.current.push(F.data)},P.onstop=()=>{const F=new Blob(R.current,{type:"audio/webm"}),G=URL.createObjectURL(F);h(G),r.current=new Audio(G),r.current.onended=()=>d(!1),S.getTracks().forEach(Q=>Q.stop())},P.start(),a(!0)}catch{v("Microphone access denied or not available.")}},O=()=>{m.current&&e&&(m.current.stop(),a(!1))},Y=()=>{s&&(r.current&&(r.current.pause(),r.current=null),URL.revokeObjectURL(s),h(null),d(!1))};return{showModeSelection:p,currentIndex:H,currentCard:C,isFlipped:U,rating:ae,sessionResult:xe,viewingImage:ce,feedback:ve,masteredCount:ee,totalOriginalCards:Z,studyCards:D,handleStartReview:M,handleNextSession:E,restartSession:y,handleRating:z,setIsFlipped:j,setViewingImage:me,isRecording:e,recordedAudio:s,isPlayingRecorded:l,startRecording:q,stopRecording:O,deleteRecording:Y,toggleRecordedPlayback:S=>{S&&S.stopPropagation(),r.current&&(l?(r.current.pause(),d(!1)):(r.current.play(),d(!0)))},difficultCardsCount:(i.cards||[]).filter(S=>S.lastRating!==void 0&&S.lastRating<2).length}},yt=({stack:i,user:o,onClose:c,onEdit:x,onUpdate:f,onDuplicate:v,showAlert:g,userCoins:u,onDeductCoins:b,isPreviewMode:w=!1,onLoginRequired:T,previewProgress:p=null,onReviewStart:I,displayName:H})=>{var h;const{showModeSelection:L,currentIndex:U,currentCard:j,isFlipped:ae,rating:oe,sessionResult:N,viewingImage:se,feedback:D,masteredCount:le,totalOriginalCards:xe,studyCards:J,difficultCardsCount:ce,handleStartReview:me,handleNextSession:ve,restartSession:X,handleRating:ee,setIsFlipped:te,setViewingImage:_,isRecording:ne,recordedAudio:Z,isPlayingRecorded:fe,startRecording:je,stopRecording:n,deleteRecording:e,toggleRecordedPlayback:a}=ut({stack:i,user:o,onUpdate:f,onClose:c,onDuplicate:v,showAlert:g,isPreviewMode:w,onLoginRequired:T,previewProgress:p,onReviewStart:I});i.id;const s=async()=>{try{await Ge(i),g("Stack downloaded successfully!")}catch{g("Failed to download stack.")}};return L?t.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:t.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs($.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},style:{background:"var(--bg-color)",width:"100%",maxWidth:"400px",borderRadius:"24px",padding:"1.5rem",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)",position:"relative"},children:[t.jsx(We,{onClose:c,theme:"light"}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[t.jsx("div",{style:{width:"4rem",height:"4rem",background:"var(--accent-color)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"white"},children:t.jsx(Pe,{size:32})}),t.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"How to Review?"}),t.jsx("p",{style:{opacity:.7},children:"Choose your focused session type"})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("button",{className:"neo-button",onClick:()=>me("all"),style:{padding:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"2px solid var(--border-color)",justifyContent:"flex-start"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",overflow:"hidden",flexShrink:0},children:t.jsx("img",{src:ze,alt:"Guide",style:{width:"100%",height:"100%",objectFit:"cover"}})}),t.jsxs("div",{style:{textAlign:"left"},children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Review All Cards"}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.6},children:["Go through entire stack (",((h=i.cards)==null?void 0:h.length)||0," cards)"]})]})]}),t.jsxs("button",{className:"neo-button",disabled:ce===0,onClick:()=>me("difficult"),style:{padding:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"2px solid var(--border-color)",justifyContent:"flex-start",opacity:ce===0?.5:1},children:[t.jsx("div",{style:{padding:"0.5rem",background:"#fee2e2",borderRadius:"12px",color:"#dc2626"},children:t.jsx(Ye,{size:24})}),t.jsxs("div",{style:{textAlign:"left"},children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Focus on Difficult"}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.6},children:["Cards you missed previously (",ce," cards)"]})]})]})]})]})})}):(!J||J.length===0)&&!N?t.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:t.jsxs($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"400px",padding:"2.5rem",display:"flex",flexDirection:"column",gap:"2rem",textAlign:"center"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[t.jsx("div",{className:"neo-inset",style:{padding:"20px",borderRadius:"50%",color:"#94a3b8"},children:t.jsx(Pe,{size:48})}),t.jsx("h2",{style:{fontSize:"1.5rem"},children:"No Cards Found"}),t.jsx("p",{style:{opacity:.6},children:"This stack appears to be empty. Would you like to add some cards?"})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("button",{className:"neo-button neo-glow-blue",style:{justifyContent:"center",padding:"1rem"},onClick:x,children:[t.jsx(Ve,{size:18,style:{marginRight:"8px"}})," Add Cards Now"]}),t.jsx("button",{className:"neo-button",style:{justifyContent:"center",opacity:.6},onClick:c,children:"Close"})]})]},"empty-stack")}):N?t.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:t.jsxs($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"420px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsx("h2",{style:{fontSize:"1.8rem"},children:"Study Summary"}),t.jsxs("div",{className:"neo-flat",style:{padding:"1.5rem",borderRadius:"24px"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.6,marginBottom:"0.5rem",fontWeight:"bold"},children:"SESSION MARKS"}),t.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",color:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[N.totalMarks," ",t.jsxs("span",{style:{fontSize:"1.5rem",opacity:.5},children:["/ ",N.maxPossibleMarks]})]})]}),N.fullMarks?t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",width:"100%"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx($.div,{initial:{scale:0},animate:{scale:[0,1.2,1],rotate:[0,-10,10,0]},transition:{duration:.8,ease:"backOut"},children:t.jsx(Be,{size:64,color:"var(--accent-color)"})}),[...Array(8)].map((l,d)=>t.jsx($.div,{initial:{opacity:0,x:0,y:0,scale:0},animate:{opacity:[0,1,0],x:(Math.random()-.5)*100,y:(Math.random()-.5)*100-50,scale:[0,1,0]},transition:{duration:1.5,delay:.5+Math.random()*.5,repeat:1/0,repeatDelay:1},style:{position:"absolute",top:"50%",left:"50%",zIndex:0,pointerEvents:"none"},children:t.jsx(Ze,{size:20,color:["#FFD700","#FF4500","#00FF7F"][Math.floor(Math.random()*3)]})},d))]}),t.jsx($.img,{src:Ke,alt:"Congratulations",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12,delay:.3},style:{maxWidth:"80%",height:"auto",borderRadius:"12px"}}),t.jsx("div",{className:"neo-inset",style:{padding:"1.5rem",color:"var(--accent-color)",borderRadius:"16px",width:"100%",textAlign:"center"},children:t.jsxs("p",{style:{fontWeight:"bold",fontSize:"1.2rem",lineHeight:"1.6"},children:["Congratulations. ",t.jsx("br",{}),"By royal decree, I name you Master of ",t.jsx("br",{}),t.jsx("span",{style:{color:"var(--accent-color)",fontSize:"1.4rem"},children:i.title})]})})]}):t.jsxs("div",{style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"16px",border:"1px solid #3b82f6"},children:[t.jsx("p",{style:{fontWeight:"bold",color:"#1d4ed8",marginBottom:"0.5rem",fontSize:"1.1rem"},children:"Don't give up!"}),t.jsxs("p",{style:{opacity:.8,fontSize:"0.95rem"},children:["Mastery takes patience. ",t.jsx("br",{}),"Why not try the tough cards again right now?"]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"0.5rem"},children:[!N.fullMarks&&t.jsxs("button",{className:"neo-button",style:{justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none",padding:"1rem"},onClick:()=>X(N.lowRatedCards),children:["Focus on Weak Cards (",N.lowRatedCards.length,")"]}),t.jsx("button",{className:"neo-button",style:{justifyContent:"center",padding:"1rem",background:N.fullMarks?"var(--accent-color)":"transparent",color:N.fullMarks?"white":"inherit",border:N.fullMarks?"none":"1px solid var(--border-color)"},onClick:()=>X(i.cards),children:"Try All Cards Again"}),t.jsx("button",{className:"neo-button",style:{justifyContent:"center",padding:"1rem",opacity:.7},onClick:c,children:"Done for now"})]})]},"session-result")}):t.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(1.2rem)",WebkitBackdropFilter:"blur(1.2rem)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1rem",overflowY:"auto"},children:[t.jsx(we,{mode:"wait",children:t.jsxs("div",{className:"review-container",style:{width:"100%",maxWidth:"35rem",height:"100%",display:"flex",flexDirection:"column",gap:"1rem",position:"relative",padding:"1rem 1rem 3.5rem"},children:[t.jsx(Je,{currentIndex:U,totalCards:J.length,masteredCount:le,totalOriginalCards:xe,rating:oe,onClose:c,onDuplicate:v,user:o,stack:i,handleDownload:s}),t.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",margin:"1rem 0",position:"relative"},children:[t.jsx(we,{mode:"wait",children:t.jsx($.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},style:{width:"100%",height:"100%"},children:t.jsx(Xe,{currentCard:j,isFlipped:ae,setIsFlipped:te,setViewingImage:_,onRateMCQ:l=>{var d;if(l!=null&&l.isCorrect)ee(2);else{const r=((d=j.options.find(m=>m.isCorrect))==null?void 0:d.text)||"Unknown";ee(0,`Incorrect. The right answer is "${r}". I shall ask this again.`)}},feedback:D})},j?j.id:"end")}),t.jsx(we,{children:D&&t.jsxs($.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"neo-flat",style:{position:"absolute",bottom:"4rem",left:"1.25rem",right:"1.25rem",padding:"1.25rem",borderRadius:"1.5rem",background:"var(--bg-color)",boxShadow:"0 0.5rem 2rem rgba(0,0,0,0.2)",zIndex:2100,display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",border:"1px solid var(--border-color)",backdropFilter:"blur(12px)",maxWidth:"calc(100% - 2.5rem)",margin:"0 auto"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%"},children:[t.jsx("img",{src:ze,alt:"Guide",style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",flexShrink:0,border:"2px solid var(--accent-color)"}}),t.jsx("h3",{style:{fontSize:"1rem",color:D.type==="success"?"#16a34a":"#dc2626",margin:0,flex:1,fontWeight:"800"},children:D.message})]}),t.jsx("button",{className:"neo-button neo-glow-blue",onClick:ve,style:{width:"100%",justifyContent:"center",padding:"1rem",fontSize:"1rem",background:D.type==="success"?"#16a34a":"var(--accent-color)",color:"white",fontWeight:"bold",borderRadius:"1rem"},children:"Next Question"})]})})]}),t.jsx(ot,{isFlipped:ae,currentCard:j,isRecording:ne,recordedAudio:Z,isPlayingRecorded:fe,startRecording:je,stopRecording:n,deleteRecording:e,toggleRecordedPlayback:a,setIsFlipped:te,handleRating:(l,d)=>ee(l,d),feedback:D})]})}),t.jsx(we,{children:se&&t.jsx(Ue,{imageUrl:se,onClose:()=>_(null)})})]})};export{yt as default};
