import{c as f,r as d,j as e,m as b,M as u,C as v,b as C}from"./index-9a3e1dd9.js";import{C as k}from"./copy-63b62261.js";const w=f("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),I=({user:c,userProfile:t,onClose:r,onUpdateProfile:p,showAlert:a,onShowFeedback:o})=>{const[i,x]=d.useState(""),[s,l]=d.useState(!1),h=`${window.location.origin}/?ref=${(t==null?void 0:t.referralCode)||""}`,y=`Study smarter.
Remember longer.

${c.name} invites you to join Cardland to start easy, efficient and personalised learning journey.

${h}`,g=()=>{navigator.clipboard.writeText(t.referralCode),a("Referral code copied!")},m=()=>{const n=`https://wa.me/?text=${encodeURIComponent(y)}`;window.open(n,"_blank")},j=async()=>{if(i.trim()){if(i.trim()===t.referralCode){a("You can't refer yourself!");return}l(!0);try{const n={...t,referredBy:i.trim()};await p(n),a("Referral code applied! Your friend will get coins when you finish a review."),r()}catch{a("Failed to apply code.")}finally{l(!1)}}};return e.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.5)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"neo-flat",style:{padding:"2rem",maxWidth:"400px",width:"90%",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",display:"flex",gap:"8px"},children:[o&&e.jsxs("button",{className:"neo-button",onClick:o,style:{padding:"0 12px",height:"36px",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.85rem",fontWeight:"600",borderRadius:"12px",color:"var(--accent-color)",border:"none",cursor:"pointer"},title:"Help & Feedback",children:[e.jsx(u,{size:16}),e.jsx("span",{children:"Help"})]}),e.jsx(v,{onClick:r,size:20})]}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{className:"neo-inset",style:{width:"60px",height:"60px",borderRadius:"50%",margin:"0 auto 1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:e.jsx(w,{size:32})}),e.jsx("h2",{style:{margin:0},children:"Sharing Bonus"}),e.jsxs("p",{style:{opacity:.7,marginTop:"0.5rem"},children:["Invite a friend and receive ",e.jsx("strong",{style:{color:"#f59e0b"},children:"50 Coins"})," when they complete their first review!"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("button",{className:"neo-button",onClick:m,style:{background:"#25D366",color:"white",border:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",fontSize:"1.1rem"},children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),"Share Invite via WhatsApp"]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[e.jsx("div",{style:{height:"1px",flex:1,background:"var(--border-color)"}}),e.jsx("span",{style:{fontSize:"0.8rem",opacity:.5},children:"OR USE CODE"}),e.jsx("div",{style:{height:"1px",flex:1,background:"var(--border-color)"}})]}),e.jsxs("div",{className:"neo-inset",style:{marginTop:"15px",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"12px",fontSize:"1.2rem",fontWeight:"bold",letterSpacing:"1px"},children:[e.jsx("span",{children:(t==null?void 0:t.referralCode)||"----"}),e.jsx("button",{className:"neo-button icon-btn",onClick:g,title:"Copy Code",children:e.jsx(k,{size:20})})]})]}),!(t!=null&&t.referredBy)&&e.jsx("div",{style:{marginTop:"10px"},children:e.jsxs("details",{children:[e.jsx("summary",{style:{cursor:"pointer",fontSize:"0.9rem",opacity:.7,listStyle:"none",textAlign:"center"},children:"Have a referral code? Enter it here"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("input",{className:"neo-input",style:{flex:1},placeholder:"Enter code",value:i,onChange:n=>x(n.target.value)}),e.jsx("button",{className:"neo-button neo-glow-blue",onClick:j,disabled:s||!i,style:{background:"var(--accent-color)",color:"white"},children:s?"...":e.jsx(C,{size:20})})]})]})}),(t==null?void 0:t.referredBy)&&e.jsxs("div",{className:"neo-inset",style:{padding:"0.8rem",textAlign:"center",fontSize:"0.9rem",color:"green"},children:["Referred by: ",t.referredBy]})]})]})})};export{I as default};
