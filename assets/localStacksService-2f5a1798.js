const n=[],c=(t,s)=>{var r,l;const e=o=>o&&o.charAt(0).toUpperCase()+o.slice(1).toLowerCase();return{id:t.id||s.replace(".json",""),title:t.title||"Untitled Stack",titleImage:t.titleImage||"",label:t.label||"No Label",standard:((r=t.standard)==null?void 0:r.toUpperCase())||null,syllabus:e(t.syllabus),medium:e(t.medium),subject:e(t.subject),cost:parseInt(t.cost||0),importantNote:t.importantNote||"",cards:t.cards||[],cardCount:((l=t.cards)==null?void 0:l.length)||0,owner:t.owner||null,avgRating:t.avgRating||null,lastReviewed:t.lastReviewed||null,source:"local",isLocal:!0,isPublic:!0,isPremium:parseInt(t.cost||0)>0}},u=async t=>{try{const s=await fetch(`/stacks/${t}`);if(!s.ok)return console.warn(`[LocalStacks] Failed to load ${t}: HTTP ${s.status}`),null;const e=await s.json();return c(e,t)}catch(s){return console.error(`[LocalStacks] Error loading ${t}:`,s),null}},d=async()=>{console.log("[LocalStacks] Loading local stacks from public/stacks...");try{const s=(await Promise.allSettled(n.map(e=>u(e)))).filter(e=>e.status==="fulfilled"&&e.value!==null).map(e=>e.value);return console.log(`[LocalStacks] Loaded ${s.length} local stacks`),s}catch(t){return console.error("[LocalStacks] Failed to load local stacks:",t),[]}},i=async t=>{const s=n.find(e=>e.includes(t)||e.replace(".json","")===t);if(!s)return console.warn(`[LocalStacks] Stack not found: ${t}`),null;try{const e=await fetch(`/stacks/${s}`);return e.ok?{...await e.json(),source:"local",isLocal:!0}:null}catch(e){return console.error(`[LocalStacks] Error getting content for ${t}:`,e),null}},m=t=>{const s={standards:new Set,syllabuses:new Set,mediums:new Set,subjects:new Set};return t.forEach(e=>{e.standard&&s.standards.add(e.standard),e.syllabus&&s.syllabuses.add(e.syllabus),e.medium&&s.mediums.add(e.medium),e.subject&&s.subjects.add(e.subject)}),{standards:Array.from(s.standards).sort(),syllabuses:Array.from(s.syllabuses).sort(),mediums:Array.from(s.mediums).sort(),subjects:Array.from(s.subjects).sort()}},S={listLocalStacks:d,getLocalStackContent:i,extractFilterOptions:m};export{S as default,m as extractFilterOptions,i as getLocalStackContent,d as listLocalStacks};
