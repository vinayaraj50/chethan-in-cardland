const l=[],u=(s,e)=>{var r,n,a;const t=o=>o&&o.charAt(0).toUpperCase()+o.slice(1).toLowerCase();return{id:s.id||e.replace(".json",""),title:s.title||"Untitled Lesson",titleImage:s.titleImage||"",label:s.label||"No Label",standard:((r=s.standard)==null?void 0:r.toUpperCase())||null,syllabus:t(s.syllabus),medium:t(s.medium),subject:t(s.subject),cost:parseInt(s.cost||0),importantNote:s.importantNote||"",questions:s.questions||s.cards||[],questionCount:((n=s.questions)==null?void 0:n.length)||((a=s.cards)==null?void 0:a.length)||0,owner:s.owner||null,avgRating:s.avgRating||null,lastReviewed:s.lastReviewed||null,source:"local",isLocal:!0,isPublic:!0,isPremium:parseInt(s.cost||0)>0}},i=async s=>{try{const e=await fetch(`/lessons/${s}`);if(!e.ok)return console.warn(`[LocalLessons] Failed to load ${s}: HTTP ${e.status}`),null;const t=await e.json();return u(t,s)}catch(e){return console.error(`[LocalLessons] Error loading ${s}:`,e),null}},d=async()=>{console.log("[LocalLessons] Loading local lessons from public/lessons...");try{const e=(await Promise.allSettled(l.map(t=>i(t)))).filter(t=>t.status==="fulfilled"&&t.value!==null).map(t=>t.value);return console.log(`[LocalLessons] Loaded ${e.length} local lessons`),e}catch(s){return console.error("[LocalLessons] Failed to load local lessons:",s),[]}},L=async s=>{const e=l.find(t=>t.includes(s)||t.replace(".json","")===s);if(!e)return console.warn(`[LocalLessons] Lesson not found: ${s}`),null;try{const t=await fetch(`/lessons/${e}`);return t.ok?{...await t.json(),source:"local",isLocal:!0}:null}catch(t){return console.error(`[LocalLessons] Error getting content for ${s}:`,t),null}},m=s=>{const e={standards:new Set,syllabuses:new Set,mediums:new Set,subjects:new Set};return s.forEach(t=>{t.standard&&e.standards.add(t.standard),t.syllabus&&e.syllabuses.add(t.syllabus),t.medium&&e.mediums.add(t.medium),t.subject&&e.subjects.add(t.subject)}),{standards:Array.from(e.standards).sort(),syllabuses:Array.from(e.syllabuses).sort(),mediums:Array.from(e.mediums).sort(),subjects:Array.from(e.subjects).sort()}},b={listLocalLessons:d,getLocalLessonContent:L,extractFilterOptions:m};export{b as default,m as extractFilterOptions,L as getLocalLessonContent,d as listLocalLessons};
