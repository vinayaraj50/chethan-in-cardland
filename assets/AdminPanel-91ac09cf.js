import{c as R,w as T,r as y,x as E,j as e,X as G,y as Q,z as H,R as F,B as V,D as X,k as O,b as _}from"./index-9a3e1dd9.js";import{U as J,L as K}from"./users-7f8d4369.js";const Z=R("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),W=R("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Y=R("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),$=R("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ee=R("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),te=R("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),se=R("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),re=R("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),I=(s,t)=>{if(!t)return"";const r=String(t).trim();switch(s){case"standard":const m=r.toUpperCase().replace(/^(STANDARD|STD|CLASS|GRADE)\s*/i,"");return{5:"V",V:"V",6:"VI",VI:"VI",7:"VII",VII:"VII",8:"VIII",VIII:"VIII",9:"IX",IX:"IX",10:"X",X:"X"}[m]||m;case"syllabus":const i=r.toUpperCase();return i.includes("NCERT")?"NCERT":i.includes("KERALA")?"Kerala":r;case"medium":const o=r.toLowerCase();return o.includes("malayalam")?"Malayalam":o.includes("english")?"English":r.charAt(0).toUpperCase()+r.slice(1);case"subject":const d=r.toLowerCase();return d.includes("math")?"Maths":d.includes("social")?"Social Science":d.includes("science")?"Science":d.includes("malayalam")?"Malayalam":d.includes("hindi")?"Hindi":d.includes("english")?"English":r.charAt(0).toUpperCase()+r.slice(1);default:return r}},ne=s=>{if(!s||!s.trim())return{title:"",label:"",importantNote:"",cards:[],sections:[]};let t=null,r="",m="",l="",i=[],o="",d="",p="",h="",f=0,w=[];try{const a=s.match(/\[[\s\S]*\]|\{[\s\S]*\}/);a&&(t=JSON.parse(a[0]))}catch{}if(t)Array.isArray(t)?i=t:(r=t.title||"",m=t.label||t.tag||"",l=t.importantNote||t.note||"",o=I("standard",t.standard||t.Standard),d=I("syllabus",t.syllabus||t.Syllabus),p=I("medium",t.medium||t.Medium),h=I("subject",t.subject||t.Subject),f=t.cost||t.Cost||0,w=t.sections||[],i=t.cards||[]);else{const a=s.match(/^(?:Title|Stack Title|Name):\s*(.*)$/im),v=s.match(/^(?:Label|Category|Tag):\s*(.*)$/im),b=s.match(/^(?:Important Note|Note|Description):\s*(.*)$/im);r=a?a[1].trim():"",m=v?v[1].trim():"",l=b?b[1].trim():"";const c=s.match(/^(?:Standard|Class|Grade):\s*(.*)$/im),j=s.match(/^(?:Syllabus|Board):\s*(.*)$/im),g=s.match(/^(?:Medium|Language):\s*(.*)$/im),k=s.match(/^(?:Subject):\s*(.*)$/im),M=s.match(/^(?:Cost|Coins|Price):\s*(\d+)$/im);o=I("standard",c?c[1].trim():""),d=I("syllabus",j?j[1].trim():""),p=I("medium",g?g[1].trim():""),h=I("subject",k?k[1].trim():""),f=M?parseInt(M[1],10):0,s.split(/(?=Q:|Question:|Q\d+:|Question \d+:)/i).forEach(C=>{if(!C.trim())return;const N=C.match(/(?:Q:|Question:|Q\d+:|Question \d+:)\s*([\s\S]*?)(?=A:|Answer:|A\d+:|Answer \d+:|$)/i),P=C.match(/(?:A:|Answer:|A\d+:|Answer \d+:)\s*([\s\S]*?)(?=Q:|Question:|Q\d+:|Question \d+:|$)/i);N&&P&&i.push({question:N[1].trim(),answer:P[1].trim()})})}const S=a=>{const v=a.choices||a.options||[],b=a.type==="mcq"||v&&Array.isArray(v)&&v.length>0,c=b?"mcq":"flashcard";let j=[];if(b){const g=a.correctAnswer||a.answer;j=v.map((k,M)=>{const L=typeof k=="string"?k:k.text||"";let C=!1;return typeof g=="number"?C=M===g:typeof k=="object"&&k.isCorrect!==void 0?C=k.isCorrect:g&&(C=L.trim().toLowerCase()===String(g).trim().toLowerCase()),{id:Math.random(),text:L,isCorrect:C}})}return{id:Math.random(),type:c,question:{text:a.question||a.q||"",image:"",audio:""},answer:{text:a.answer||a.a||"",image:"",audio:""},options:j}},z=w.map(a=>({noteSegment:a.noteSegment||"",cards:(a.cards||[]).map(S)})),A=z.length>0?z.flatMap(a=>a.cards):i.map(S);return{title:r,label:m,importantNote:l,standard:o,syllabus:d,medium:p,subject:h,cost:parseInt(f)||0,sections:z,cards:A}};class ie{static async getUsers(t,r,m=!1){try{return console.log("[AdminService] Fetching authoritative registry from Firestore..."),(await T.listUsers()).map(i=>{var o,d,p;return{id:i.uid||i.email,uid:i.uid,email:i.email,displayName:i.displayName||"Guest User",lastLogin:((p=(d=(o=i.lastSeen)==null?void 0:o.toDate)==null?void 0:d.call(o))==null?void 0:p.toISOString())||null,coins:i.coins||0,loginCount:i.loginCount||0}})}catch(l){throw console.error("[AdminService] Registry Sync Failed:",l),l}}static async grantCoins(t,r,m){var o;const l=r.uid||((o=await T.getProfileByEmail(r.email))==null?void 0:o.uid);if(!l)throw new Error("Could not identify user ID for transaction.");return console.log(`[AdminService] Granting ${m} coins to ${l}...`),{success:!0,newBalance:await T.updateBalance(l,m),email:r.email}}static async getPrompts(){return[]}}const U=ie,q=y.createContext(null),ae=({children:s})=>{const{user:t}=E(),[r,m]=y.useState([]),[l,i]=y.useState(!1),[o,d]=y.useState(new Set),[p,h]=y.useState(new Set),[f,w]=y.useState(null),[S,z]=y.useState({totalReceived:0,lastSync:null}),A=y.useCallback(async()=>{if(!t){w("AUTH_REQUIRED");return}i(!0),w(null);try{const a=await U.getUsers(t.token);m(a||[]),z({totalReceived:(a==null?void 0:a.length)||0,lastSync:new Date().toLocaleTimeString()})}catch(a){console.error("[AdminContext] Discovery Failed:",a),w(a.message||"Failed to synchronize registry.")}finally{i(!1)}},[t]);return y.useEffect(()=>{t&&A()},[A,t]),e.jsx(q.Provider,{value:{users:r,loading:l,error:f,stats:S,processingIds:o,recentlyGranted:p,refresh:()=>A(),grantCoins:async(a,v)=>{const b=a.id||a.uid||a.email;d(c=>new Set(c).add(b));try{const c=await U.grantCoins(t.token,a,v);c&&c.newBalance!==void 0&&m(j=>j.map(g=>(g.id||g.uid||g.email)===b?{...g,coins:c.newBalance}:g)),h(j=>new Set(j).add(b)),setTimeout(()=>{h(j=>{const g=new Set(j);return g.delete(b),g})},3e3),A()}catch(c){throw console.error("[AdminContext] Grant failed",c),c}finally{d(c=>{const j=new Set(c);return j.delete(b),j})}}},children:s})},oe=()=>{const s=y.useContext(q);if(!s)throw new Error("useAdmin must be used within AdminProvider");return s},le=({children:s,activeSection:t,onNavigate:r,onClose:m})=>{const[l,i]=y.useState(!1),[o,d]=y.useState(!1);y.useEffect(()=>{const h=()=>d(window.innerWidth<=768);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const p=()=>i(!l);return e.jsxs("div",{style:x.shell,children:[o&&e.jsxs("div",{style:x.mobileHeader,children:[e.jsx("button",{onClick:p,style:x.iconBtn,children:l?e.jsx(G,{size:20}):e.jsx(Q,{size:20})}),e.jsx("span",{style:x.storeName,children:"Admin Workspace"}),e.jsx("div",{style:{width:32}})," "]}),e.jsxs("aside",{style:{...x.sidebar,transform:o?l?"translateX(0)":"translateX(-100%)":"none",position:o?"absolute":"relative",height:"100%"},className:"admin-sidebar",children:[!o&&e.jsxs("div",{style:x.sidebarHeader,children:[e.jsx("div",{style:x.logoBadge,children:"A"}),e.jsx("span",{style:x.storeName,children:"Admin Workspace"})]}),e.jsxs("nav",{style:x.nav,children:[e.jsx("div",{style:x.sectionLabel,children:"GENERAL"}),e.jsx(D,{icon:e.jsx(J,{size:18}),label:"Registry",active:t==="users",onClick:()=>{r("users"),o&&i(!1)}}),e.jsx(D,{icon:e.jsx($,{size:18}),label:"Smart Paste",active:t==="smart_paste",onClick:()=>{r("smart_paste"),o&&i(!1)}}),e.jsx(D,{icon:e.jsx(ee,{size:18}),label:"Prompts",active:t==="prompts",onClick:()=>{r("prompts"),o&&i(!1)}})]}),e.jsx("div",{style:x.sidebarFooter,children:e.jsxs("button",{onClick:m,style:x.exitBtn,children:[e.jsx(K,{size:16})," Exit Admin"]})})]}),o&&l&&e.jsx("div",{style:x.backdrop,onClick:()=>i(!1)}),e.jsxs("main",{style:{...x.main,paddingTop:o?"60px":"0"},children:[!o&&e.jsxs("header",{style:x.topBar,children:[e.jsxs("div",{style:x.searchWrapper,children:[e.jsx(H,{size:16,style:{opacity:.5}}),e.jsx("input",{type:"text",placeholder:"Search",style:x.globalSearch})]}),e.jsx("div",{style:x.userMenu,children:e.jsx("div",{style:x.avatar,children:"A"})})]}),e.jsx("div",{style:x.contentFrame,children:s})]})]})},D=({icon:s,label:t,active:r,onClick:m})=>e.jsxs("button",{onClick:m,style:{...x.navItem,background:r?"#ffffff":"transparent",color:r?"#008060":"#5c5f62",fontWeight:r?600:500,boxShadow:r?"0 1px 3px rgba(0,0,0,0.1)":"none"},children:[s,e.jsx("span",{children:t})]}),x={shell:{position:"fixed",inset:0,background:"#f6f6f7",zIndex:5e3,display:"flex",fontFamily:'-apple-system, BlinkMacSystemFont, "San Francisco", "Segoe UI", Roboto, "Helvetica Neue", sans-serif'},mobileHeader:{position:"absolute",top:0,left:0,right:0,height:"56px",background:"white",borderBottom:"1px solid #e1e3e5",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:20},sidebar:{width:"240px",background:"#ebebeb",borderRight:"1px solid #e1e3e5",display:"flex",flexDirection:"column",zIndex:30,transition:"transform 0.3s ease-in-out",boxShadow:"2px 0 8px rgba(0,0,0,0.1)"},backdrop:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",zIndex:25},sidebarHeader:{padding:"1rem",display:"flex",alignItems:"center",gap:"0.75rem",borderBottom:"1px solid rgba(0,0,0,0.05)"},logoBadge:{width:"32px",height:"32px",background:"#5c5f62",color:"white",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700},storeName:{fontWeight:600,fontSize:"0.9rem",color:"#202223"},nav:{padding:"1rem 0.5rem",flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},sectionLabel:{fontSize:"0.75rem",fontWeight:600,color:"#444",padding:"0.5rem 0.75rem",marginTop:"0.5rem"},navItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0.75rem",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",marginBottom:"2px"},sidebarFooter:{padding:"1rem",borderTop:"1px solid rgba(0,0,0,0.05)"},exitBtn:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.5rem",background:"white",border:"1px solid #c9cccf",borderRadius:"4px",fontWeight:500,cursor:"pointer",color:"#202223"},main:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},topBar:{height:"56px",background:"white",borderBottom:"1px solid #e1e3e5",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem"},searchWrapper:{width:"400px",height:"36px",background:"#f1f2f3",borderRadius:"4px",display:"flex",alignItems:"center",padding:"0 0.75rem",gap:"0.5rem",border:"1px solid #e1e3e5"},globalSearch:{border:"none",background:"transparent",outline:"none",width:"100%",fontSize:"0.9rem"},contentFrame:{flex:1,overflowY:"auto",padding:"2rem",maxWidth:"1100px",margin:"0 auto",width:"100%"},userMenu:{display:"flex",alignItems:"center",gap:"1rem"},avatar:{width:"32px",height:"32px",borderRadius:"50%",background:"#008060",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:600},iconBtn:{background:"none",border:"none",cursor:"pointer",padding:"4px"}},ce=()=>{const{users:s,loading:t,error:r,stats:m,refresh:l,grantCoins:i,processingIds:o,recentlyGranted:d}=oe();return t&&s.length===0?e.jsx(me,{}):r==="AUTH_REQUIRED"?e.jsx(de,{}):r?e.jsx(pe,{error:r,retry:l}):e.jsxs("div",{style:n.container,children:[e.jsxs("div",{style:n.header,children:[e.jsx("h1",{style:n.title,children:"Users"}),e.jsxs("div",{style:n.actions,children:[e.jsxs("span",{style:n.badge,children:[s.length," Records"]}),e.jsx("button",{onClick:l,style:n.iconBtn,title:"Refresh Index",children:e.jsx(F,{size:16})})]})]}),m.lastSync&&e.jsxs("div",{style:n.diagnosticBanner,children:[e.jsx(W,{size:14,color:"#008060"}),e.jsxs("span",{children:["Directory Synced at ",m.lastSync,". Status: Live from Firestore"]})]}),s.length===0?e.jsx(he,{retry:l}):e.jsx("div",{style:n.card,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{style:n.table,children:[e.jsx("thead",{children:e.jsxs("tr",{style:n.theadRow,children:[e.jsx("th",{style:n.th,children:"Name"}),e.jsx("th",{style:n.th,children:"Email"}),e.jsx("th",{style:n.th,children:"Last Active"}),e.jsx("th",{style:n.th,children:"Logins"}),e.jsx("th",{style:n.th,children:"Coins"}),e.jsx("th",{style:n.th,children:"Actions"})]})}),e.jsx("tbody",{children:s.map(p=>{const h=p.id||p.uid||p.email,f=o==null?void 0:o.has(h),w=d==null?void 0:d.has(h);return e.jsxs("tr",{style:n.tr,children:[e.jsx("td",{style:n.td,children:e.jsx("span",{style:n.nameText,children:p.displayName})}),e.jsx("td",{style:n.td,children:p.email}),e.jsx("td",{style:n.td,children:p.lastLogin?new Date(p.lastLogin).toLocaleDateString():"-"}),e.jsx("td",{style:n.td,children:p.loginCount||0}),e.jsx("td",{style:n.td,children:e.jsx("span",{style:{color:"#008060",fontWeight:700,background:"#e3f1df",padding:"2px 8px",borderRadius:"10px",fontSize:"0.85rem"},children:p.coins||0})}),e.jsx("td",{style:n.td,children:e.jsx("button",{disabled:f,onClick:()=>{const S=prompt("Enter amount of coins to grant:","100");S&&!isNaN(S)&&i(p,parseInt(S))},style:{...n.actionLink,color:w?"#008060":f?"#6d7175":"#101010",opacity:f?.5:1,cursor:f?"wait":"pointer",textDecoration:f?"none":"underline",display:"flex",alignItems:"center",gap:"4px"},children:w?e.jsxs(e.Fragment,{children:[e.jsx(W,{size:14})," Success"]}):f?"Granting...":"Grant Coins"})})]},h)})})]})})}),e.jsx("style",{children:`
                .table-responsive { overflow-x: auto; }
                @media (max-width: 600px) {
                    /* Mobile styles can be enhanced here */
                }
            `})]})},de=()=>{const[s,t]=V.useState(!1);return e.jsxs("div",{style:n.errorBox,children:[e.jsx(te,{size:32,color:"#5c5f62"}),e.jsx("h3",{style:n.errorTitle,children:"Authorization Required"}),e.jsx("p",{style:n.errorDesc,children:"Admin access requires Google Drive permissions."}),e.jsx("button",{disabled:s,onClick:async()=>{t(!0);try{console.log("[AdminAuth] Requesting Drive Access..."),await X(),console.log("[AdminAuth] Access Granted. Refreshing context...")}catch(r){console.error("[AdminAuth] Access Denied:",r),alert(`Authorization Failed: ${r.message||r}`)}finally{t(!1)}},style:{...n.primaryBtn,opacity:s?.7:1,cursor:s?"wait":"pointer"},children:s?"Authorizing...":"Authorize Admin Access"})]})},me=()=>e.jsxs("div",{style:n.centerBox,children:[e.jsx("div",{className:"polaris-spinner",style:n.spinner}),e.jsx("p",{style:{marginTop:"1rem",color:"#6d7175"},children:"Loading Users from Firestore..."})]}),pe=({error:s,retry:t})=>e.jsxs("div",{style:n.errorBox,children:[e.jsx(Z,{size:32,color:"#d82c0d"}),e.jsx("h3",{style:n.errorTitle,children:"Directory Access Failed"}),e.jsx("p",{style:n.errorDesc,children:s}),e.jsx("button",{onClick:t,style:n.primaryBtn,children:"Retry Sync"})]}),he=({retry:s})=>{const{user:t}=E(),[r,m]=V.useState(!1),l=async()=>{if(t){m(!0);try{await T.syncProfile(t),s()}catch(i){console.error(i),alert("Registration failed: "+i.message)}finally{m(!1)}}};return e.jsxs("div",{style:n.centerBox,children:[e.jsx($,{size:48,color:"#babec3"}),e.jsx("h2",{style:n.emptyTitle,children:"No Users Found"}),e.jsx("p",{style:n.emptyDesc,children:"The user directory is currently empty."}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("button",{onClick:s,style:n.primaryBtn,children:[e.jsx(F,{size:14,style:{marginRight:"8px"}})," Refresh List"]}),e.jsxs("button",{onClick:l,disabled:r||!t,style:{...n.primaryBtn,background:"white",color:"#008060",border:"1px solid #008060",display:"flex",alignItems:"center"},children:[e.jsx(re,{size:14,style:{marginRight:"8px"}}),r?"Registering...":"Register Me"]})]})]})},n={container:{display:"flex",flexDirection:"column",gap:"1rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},title:{fontSize:"1.5rem",fontWeight:700,color:"#202223",margin:0},actions:{display:"flex",gap:"1rem",alignItems:"center"},badge:{background:"#dfe3e8",color:"#202223",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:600},iconBtn:{background:"white",border:"1px solid #e1e3e5",borderRadius:"4px",padding:"0.5rem",cursor:"pointer",color:"#5c5f62"},diagnosticBanner:{background:"#e3f1df",color:"#008060",padding:"0.75rem 1rem",borderRadius:"4px",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"1px solid #1a1a1a0d"},card:{background:"white",borderRadius:"8px",boxShadow:"0 0 0 1px rgba(63, 63, 68, 0.05), 0 1px 3px 0 rgba(63, 63, 68, 0.15)",overflow:"hidden"},table:{width:"100%",borderCollapse:"collapse",textAlign:"left"},theadRow:{background:"#f9fafb",borderBottom:"1px solid #e1e3e5"},th:{padding:"1rem",fontSize:"0.8rem",fontWeight:600,color:"#6d7175",textTransform:"uppercase"},tr:{borderBottom:"1px solid #e1e3e5"},td:{padding:"1rem",fontSize:"0.9rem",color:"#202223"},nameText:{fontWeight:600},actionLink:{background:"none",border:"none",color:"#008060",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",textDecoration:"underline"},centerBox:{padding:"4rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},primaryBtn:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#008060",color:"white",border:"none",borderRadius:"4px",fontWeight:600,cursor:"pointer"},errorBox:{padding:"2rem",background:"#fff4f4",border:"1px solid #eecaca",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",color:"#8f2316"},errorTitle:{marginTop:"1rem",fontSize:"1.2rem"},errorDesc:{opacity:.8}},ye=({onClose:s,showAlert:t,onEditStack:r,initialSection:m="users"})=>{var v,b;const{user:l}=E(),[i,o]=y.useState(m),[d,p]=y.useState(""),[h,f]=y.useState(null),[w,S]=y.useState(null),z=c=>{o(c),S(null)},A=()=>{try{S(null);const c=ne(d);if(!c.title&&c.cards.length===0&&c.sections.length===0)throw new Error("Could not find any valid lesson data in the paste.");f(c),t("Content processed successfully!")}catch(c){S(c.message)}},a=()=>{if(h&&r){const c={...h,id:`draft-${Date.now()}`,isPublic:!0,owner:l==null?void 0:l.email};r(c),s()}};return e.jsx(ae,{children:e.jsxs(le,{activeSection:i,onNavigate:z,onClose:s,children:[i==="users"&&e.jsx(ce,{}),i==="smart_paste"&&e.jsxs("div",{style:u.card,children:[e.jsx("h2",{style:u.cardTitle,children:"Smart Paste (New Schema Support)"}),e.jsx("p",{style:u.cardDesc,children:"Paste lesson JSON following the new hierarchical schema (sections, noteSegments, etc.). The system will automatically recognize the structure."}),e.jsxs("div",{style:u.pasteWrapper,children:[e.jsx("textarea",{style:u.textarea,placeholder:"Paste JSON here...",value:d,onChange:c=>p(c.target.value)}),e.jsxs("div",{style:u.pasteActions,children:[e.jsxs("button",{onClick:A,style:u.primaryBtn,disabled:!d.trim(),children:[e.jsx(Y,{size:16,style:{marginRight:"8px"}}),"Analyze & Process"]}),d&&e.jsx("button",{onClick:()=>{p(""),f(null)},style:u.secondaryBtn,children:"Clear"})]})]}),w&&e.jsxs("div",{style:u.errorBanner,children:[e.jsx(O,{size:18}),e.jsx("span",{children:w})]}),h&&e.jsxs("div",{style:u.previewBox,children:[e.jsxs("div",{style:u.previewHeader,children:[e.jsx(_,{size:18,color:"#008060"}),e.jsx("h3",{style:u.previewTitle,children:"Analysis Complete"})]}),e.jsxs("div",{style:u.metaGrid,children:[e.jsx(B,{label:"Title",value:h.title}),e.jsx(B,{label:"Subject",value:h.subject}),e.jsx(B,{label:"Standard",value:h.standard}),e.jsx(B,{label:"Syllabus",value:h.syllabus}),e.jsx(B,{label:"Cards",value:(v=h.cards)==null?void 0:v.length}),e.jsx(B,{label:"Sections",value:(b=h.sections)==null?void 0:b.length})]}),e.jsxs("button",{onClick:a,style:u.editBtn,children:[e.jsx(se,{size:16}),"Open in Lesson Editor"]})]})]}),i==="prompts"&&e.jsxs("div",{style:u.card,children:[e.jsx("h2",{style:u.cardTitle,children:"Prompt Library"}),e.jsx("p",{children:"Manage system prompts for AI generation."})]})]})})},B=({label:s,value:t})=>e.jsxs("div",{style:u.metaItem,children:[e.jsxs("span",{style:u.metaLabel,children:[s,":"]}),e.jsx("span",{style:u.metaValue,children:t||"N/A"})]}),u={card:{background:"white",padding:"2rem",borderRadius:"8px",border:"1px solid #e1e3e5",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},cardTitle:{marginBottom:"0.5rem",fontSize:"1.25rem",fontWeight:600,color:"#202223"},cardDesc:{marginBottom:"1.5rem",fontSize:"0.9rem",color:"#6d7175"},pasteWrapper:{display:"flex",flexDirection:"column",gap:"1rem"},textarea:{width:"100%",height:"200px",padding:"1rem",borderRadius:"4px",border:"1.5px solid #dcdfe3",fontFamily:"monospace",fontSize:"0.85rem",outline:"none",resize:"vertical"},pasteActions:{display:"flex",gap:"1rem"},primaryBtn:{padding:"0.75rem 1.5rem",background:"#008060",color:"white",border:"none",borderRadius:"4px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center"},secondaryBtn:{padding:"0.75rem 1rem",background:"transparent",color:"#5c5f62",border:"1px solid #c9cccf",borderRadius:"4px",cursor:"pointer"},errorBanner:{marginTop:"1rem",padding:"1rem",background:"#fff4f4",color:"#8f2316",borderRadius:"4px",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.9rem"},previewBox:{marginTop:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e1e3e5"},previewHeader:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},previewTitle:{margin:0,fontSize:"1rem",fontWeight:600,color:"#008060"},metaGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},metaItem:{display:"flex",flexDirection:"column",gap:"0.25rem"},metaLabel:{fontSize:"0.75rem",fontWeight:600,color:"#6d7175",textTransform:"uppercase"},metaValue:{fontSize:"0.95rem",fontWeight:500,color:"#202223"},editBtn:{width:"100%",padding:"0.75rem",background:"white",color:"#2c6ecb",border:"1px solid #2c6ecb",borderRadius:"4px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}};export{ye as default};
