var Hf=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var ue=(t,e,n)=>(Hf(t,e,"read from private field"),n?n.call(t):e.get(t)),it=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ze=(t,e,n,r)=>(Hf(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var It=(t,e,n)=>(Hf(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Mk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rT={exports:{}},Ah={},iT={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=Symbol.for("react.element"),Vk=Symbol.for("react.portal"),Ok=Symbol.for("react.fragment"),Fk=Symbol.for("react.strict_mode"),Uk=Symbol.for("react.profiler"),zk=Symbol.for("react.provider"),Bk=Symbol.for("react.context"),$k=Symbol.for("react.forward_ref"),Wk=Symbol.for("react.suspense"),qk=Symbol.for("react.memo"),Hk=Symbol.for("react.lazy"),Jv=Symbol.iterator;function Gk(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var sT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oT=Object.assign,aT={};function $a(t,e,n){this.props=t,this.context=e,this.refs=aT,this.updater=n||sT}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lT(){}lT.prototype=$a.prototype;function Bg(t,e,n){this.props=t,this.context=e,this.refs=aT,this.updater=n||sT}var $g=Bg.prototype=new lT;$g.constructor=Bg;oT($g,$a.prototype);$g.isPureReactComponent=!0;var Zv=Array.isArray,cT=Object.prototype.hasOwnProperty,Wg={current:null},uT={key:!0,ref:!0,__self:!0,__source:!0};function dT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cT.call(e,r)&&!uT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dc,type:t,key:s,ref:o,props:i,_owner:Wg.current}}function Kk(t,e){return{$$typeof:Dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dc}function Qk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e1=/\/+/g;function Gf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qk(""+t.key):e.toString(36)}function Gu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dc:case Vk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gf(o,0):r,Zv(i)?(n="",t!=null&&(n=t.replace(e1,"$&/")+"/"),Gu(i,e,n,"",function(d){return d})):i!=null&&(qg(i)&&(i=Kk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(e1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gf(s,a);o+=Gu(s,e,n,l,i)}else if(l=Gk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gf(s,a++),o+=Gu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pu(t,e,n){if(t==null)return t;var r=[],i=0;return Gu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Yk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},Ku={transition:null},Xk={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Ku,ReactCurrentOwner:Wg};function hT(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:pu,forEach:function(t,e,n){pu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pu(t,function(){e++}),e},toArray:function(t){return pu(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=$a;Pe.Fragment=Ok;Pe.Profiler=Uk;Pe.PureComponent=Bg;Pe.StrictMode=Fk;Pe.Suspense=Wk;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xk;Pe.act=hT;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cT.call(e,l)&&!uT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Dc,type:t.type,key:i,ref:s,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:Bk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zk,_context:t},t.Consumer=t};Pe.createElement=dT;Pe.createFactory=function(t){var e=dT.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:$k,render:t}};Pe.isValidElement=qg;Pe.lazy=function(t){return{$$typeof:Hk,_payload:{_status:-1,_result:t},_init:Yk}};Pe.memo=function(t,e){return{$$typeof:qk,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Ku.transition;Ku.transition={};try{t()}finally{Ku.transition=e}};Pe.unstable_act=hT;Pe.useCallback=function(t,e){return vn.current.useCallback(t,e)};Pe.useContext=function(t){return vn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return vn.current.useEffect(t,e)};Pe.useId=function(){return vn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return vn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Pe.useRef=function(t){return vn.current.useRef(t)};Pe.useState=function(t){return vn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return vn.current.useTransition()};Pe.version="18.3.1";iT.exports=Pe;var R=iT.exports;const Qr=Mk(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=R,Zk=Symbol.for("react.element"),eA=Symbol.for("react.fragment"),tA=Object.prototype.hasOwnProperty,nA=Jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rA={key:!0,ref:!0,__self:!0,__source:!0};function fT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tA.call(e,r)&&!rA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Zk,type:t,key:s,ref:o,props:i,_owner:nA.current}}Ah.Fragment=eA;Ah.jsx=fT;Ah.jsxs=fT;rT.exports=Ah;var u=rT.exports,Zp={},pT={exports:{}},qn={},mT={exports:{}},gT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var M=z.length;z.push(H);e:for(;0<M;){var D=M-1>>>1,q=z[D];if(0<i(q,H))z[D]=H,z[M]=q,M=D;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],M=z.pop();if(M!==H){z[0]=M;e:for(var D=0,q=z.length,Q=q>>>1;D<Q;){var J=2*(D+1)-1,re=z[J],Z=J+1,G=z[Z];if(0>i(re,M))Z<q&&0>i(G,re)?(z[D]=G,z[Z]=M,D=Z):(z[D]=re,z[J]=M,D=J);else if(Z<q&&0>i(G,M))z[D]=G,z[Z]=M,D=Z;else break e}}return H}function i(z,H){var M=z.sortIndex-H.sortIndex;return M!==0?M:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],d=[],h=1,f=null,p=3,g=!1,w=!1,_=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(d)}}function j(z){if(_=!1,x(z),!w)if(n(l)!==null)w=!0,oe(L);else{var H=n(d);H!==null&&X(j,H.startTime-z)}}function L(z,H){w=!1,_&&(_=!1,E(T),T=-1),g=!0;var M=p;try{for(x(H),f=n(l);f!==null&&(!(f.expirationTime>H)||z&&!k());){var D=f.callback;if(typeof D=="function"){f.callback=null,p=f.priorityLevel;var q=D(f.expirationTime<=H);H=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(l)&&r(l),x(H)}else r(l);f=n(l)}if(f!==null)var Q=!0;else{var J=n(d);J!==null&&X(j,J.startTime-H),Q=!1}return Q}finally{f=null,p=M,g=!1}}var O=!1,S=null,T=-1,C=5,A=-1;function k(){return!(t.unstable_now()-A<C)}function N(){if(S!==null){var z=t.unstable_now();A=z;var H=!0;try{H=S(!0,z)}finally{H?I():(O=!1,S=null)}}else O=!1}var I;if(typeof v=="function")I=function(){v(N)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=N,I=function(){me.postMessage(null)}}else I=function(){P(N,0)};function oe(z){S=z,O||(O=!0,I())}function X(z,H){T=P(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,oe(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var M=p;p=H;try{return z()}finally{p=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var M=p;p=z;try{return H()}finally{p=M}},t.unstable_scheduleCallback=function(z,H,M){var D=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?D+M:D):M=D,z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=M+q,z={id:h++,callback:H,priorityLevel:z,startTime:M,expirationTime:q,sortIndex:-1},M>D?(z.sortIndex=M,e(d,z),n(l)===null&&z===n(d)&&(_?(E(T),T=-1):_=!0,X(j,M-D))):(z.sortIndex=q,e(l,z),w||g||(w=!0,oe(L))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var H=p;return function(){var M=p;p=H;try{return z.apply(this,arguments)}finally{p=M}}}})(gT);mT.exports=gT;var iA=mT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=R,$n=iA;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yT=new Set,Zl={};function wo(t,e){Ea(t,e),Ea(t+"Capture",e)}function Ea(t,e){for(Zl[t]=e,t=0;t<e.length;t++)yT.add(e[t])}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),em=Object.prototype.hasOwnProperty,oA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t1={},n1={};function aA(t){return em.call(n1,t)?!0:em.call(t1,t)?!1:oA.test(t)?n1[t]=!0:(t1[t]=!0,!1)}function lA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cA(t,e,n,r){if(e===null||typeof e>"u"||lA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hg=/[\-:]([a-z])/g;function Gg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hg,Gg);Jt[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hg,Gg);Jt[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hg,Gg);Jt[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kg(t,e,n,r){var i=Jt.hasOwnProperty(e)?Jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cA(e,n,i,r)&&(n=null),r||i===null?aA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bi=sA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),Qg=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),vT=Symbol.for("react.provider"),wT=Symbol.for("react.context"),Yg=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),rm=Symbol.for("react.suspense_list"),Xg=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),xT=Symbol.for("react.offscreen"),r1=Symbol.iterator;function dl(t){return t===null||typeof t!="object"?null:(t=r1&&t[r1]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Kf;function El(t){if(Kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kf=e&&e[1]||""}return`
`+Kf+t}var Qf=!1;function Yf(t,e){if(!t||Qf)return"";Qf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Qf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?El(t):""}function uA(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=Yf(t.type,!1),t;case 11:return t=Yf(t.type.render,!1),t;case 1:return t=Yf(t.type,!0),t;default:return""}}function im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fo:return"Fragment";case Oo:return"Portal";case tm:return"Profiler";case Qg:return"StrictMode";case nm:return"Suspense";case rm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wT:return(t.displayName||"Context")+".Consumer";case vT:return(t._context.displayName||"Context")+".Provider";case Yg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xg:return e=t.displayName||null,e!==null?e:im(t.type)||"Memo";case Oi:e=t._payload,t=t._init;try{return im(t(e))}catch{}}return null}function dA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return im(e);case 8:return e===Qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _T(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hA(t){var e=_T(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gu(t){t._valueTracker||(t._valueTracker=hA(t))}function TT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_T(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sm(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ET(t,e){e=e.checked,e!=null&&Kg(t,"checked",e,!1)}function om(t,e){ET(t,e);var n=gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?am(t,e.type,n):e.hasOwnProperty("defaultValue")&&am(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function s1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function am(t,e,n){(e!=="number"||xd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function ia(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function lm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Sl(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function ST(t,e){var n=gs(e.value),r=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yu,IT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yu=yu||document.createElement("div"),yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ec(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fA=["Webkit","ms","Moz","O"];Object.keys(Dl).forEach(function(t){fA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dl[e]=Dl[t]})});function CT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dl.hasOwnProperty(t)&&Dl[t]?(""+e).trim():e+"px"}function kT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=CT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pA=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function um(t,e){if(e){if(pA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function dm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hm=null;function Jg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fm=null,sa=null,oa=null;function l1(t){if(t=Lc(t)){if(typeof fm!="function")throw Error(K(280));var e=t.stateNode;e&&(e=jh(e),fm(t.stateNode,t.type,e))}}function AT(t){sa?oa?oa.push(t):oa=[t]:sa=t}function RT(){if(sa){var t=sa,e=oa;if(oa=sa=null,l1(t),e)for(t=0;t<e.length;t++)l1(e[t])}}function PT(t,e){return t(e)}function DT(){}var Xf=!1;function NT(t,e,n){if(Xf)return t(e,n);Xf=!0;try{return PT(t,e,n)}finally{Xf=!1,(sa!==null||oa!==null)&&(DT(),RT())}}function tc(t,e){var n=t.stateNode;if(n===null)return null;var r=jh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var pm=!1;if(pi)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){pm=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{pm=!1}function mA(t,e,n,r,i,s,o,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Nl=!1,_d=null,Td=!1,mm=null,gA={onError:function(t){Nl=!0,_d=t}};function yA(t,e,n,r,i,s,o,a,l){Nl=!1,_d=null,mA.apply(gA,arguments)}function vA(t,e,n,r,i,s,o,a,l){if(yA.apply(this,arguments),Nl){if(Nl){var d=_d;Nl=!1,_d=null}else throw Error(K(198));Td||(Td=!0,mm=d)}}function xo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c1(t){if(xo(t)!==t)throw Error(K(188))}function wA(t){var e=t.alternate;if(!e){if(e=xo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c1(i),t;if(s===r)return c1(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function LT(t){return t=wA(t),t!==null?MT(t):null}function MT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MT(t);if(e!==null)return e;t=t.sibling}return null}var VT=$n.unstable_scheduleCallback,u1=$n.unstable_cancelCallback,xA=$n.unstable_shouldYield,_A=$n.unstable_requestPaint,Tt=$n.unstable_now,TA=$n.unstable_getCurrentPriorityLevel,Zg=$n.unstable_ImmediatePriority,OT=$n.unstable_UserBlockingPriority,Ed=$n.unstable_NormalPriority,EA=$n.unstable_LowPriority,FT=$n.unstable_IdlePriority,Rh=null,Br=null;function SA(t){if(Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(Rh,t,void 0,(t.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:CA,bA=Math.log,IA=Math.LN2;function CA(t){return t>>>=0,t===0?32:31-(bA(t)/IA|0)|0}var vu=64,wu=4194304;function bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bl(a):(s&=o,s!==0&&(r=bl(s)))}else o=n&~i,o!==0?r=bl(o):s!==0&&(r=bl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tr(e),i=1<<n,r|=t[n],e&=~i;return r}function kA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Tr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=kA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function gm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UT(){var t=vu;return vu<<=1,!(vu&4194240)&&(vu=64),t}function Jf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tr(e),t[e]=n}function RA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ze=0;function zT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BT,ty,$T,WT,qT,ym=!1,xu=[],ts=null,ns=null,rs=null,nc=new Map,rc=new Map,zi=[],PA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d1(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(e.pointerId)}}function fl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Lc(e),e!==null&&ty(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DA(t,e,n,r,i){switch(e){case"focusin":return ts=fl(ts,t,e,n,r,i),!0;case"dragenter":return ns=fl(ns,t,e,n,r,i),!0;case"mouseover":return rs=fl(rs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return nc.set(s,fl(nc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rc.set(s,fl(rc.get(s)||null,t,e,n,r,i)),!0}return!1}function HT(t){var e=Qs(t.target);if(e!==null){var n=xo(e);if(n!==null){if(e=n.tag,e===13){if(e=jT(n),e!==null){t.blockedOn=e,qT(t.priority,function(){$T(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hm=r,n.target.dispatchEvent(r),hm=null}else return e=Lc(n),e!==null&&ty(e),t.blockedOn=n,!1;e.shift()}return!0}function h1(t,e,n){Qu(t)&&n.delete(e)}function NA(){ym=!1,ts!==null&&Qu(ts)&&(ts=null),ns!==null&&Qu(ns)&&(ns=null),rs!==null&&Qu(rs)&&(rs=null),nc.forEach(h1),rc.forEach(h1)}function pl(t,e){t.blockedOn===e&&(t.blockedOn=null,ym||(ym=!0,$n.unstable_scheduleCallback($n.unstable_NormalPriority,NA)))}function ic(t){function e(i){return pl(i,t)}if(0<xu.length){pl(xu[0],t);for(var n=1;n<xu.length;n++){var r=xu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&pl(ts,t),ns!==null&&pl(ns,t),rs!==null&&pl(rs,t),nc.forEach(e),rc.forEach(e),n=0;n<zi.length;n++)r=zi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zi.length&&(n=zi[0],n.blockedOn===null);)HT(n),n.blockedOn===null&&zi.shift()}var aa=bi.ReactCurrentBatchConfig,bd=!0;function jA(t,e,n,r){var i=ze,s=aa.transition;aa.transition=null;try{ze=1,ny(t,e,n,r)}finally{ze=i,aa.transition=s}}function LA(t,e,n,r){var i=ze,s=aa.transition;aa.transition=null;try{ze=4,ny(t,e,n,r)}finally{ze=i,aa.transition=s}}function ny(t,e,n,r){if(bd){var i=vm(t,e,n,r);if(i===null)lp(t,e,r,Id,n),d1(t,r);else if(DA(i,t,e,n,r))r.stopPropagation();else if(d1(t,r),e&4&&-1<PA.indexOf(t)){for(;i!==null;){var s=Lc(i);if(s!==null&&BT(s),s=vm(t,e,n,r),s===null&&lp(t,e,r,Id,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lp(t,e,r,null,n)}}var Id=null;function vm(t,e,n,r){if(Id=null,t=Jg(r),t=Qs(t),t!==null)if(e=xo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Id=t,null}function GT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TA()){case Zg:return 1;case OT:return 4;case Ed:case EA:return 16;case FT:return 536870912;default:return 16}default:return 16}}var Qi=null,ry=null,Yu=null;function KT(){if(Yu)return Yu;var t,e=ry,n=e.length,r,i="value"in Qi?Qi.value:Qi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Yu=i.slice(t,1<r?1-r:void 0)}function Xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _u(){return!0}function f1(){return!1}function Hn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_u:f1,this.isPropagationStopped=f1,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iy=Hn(Wa),jc=ut({},Wa,{view:0,detail:0}),MA=Hn(jc),Zf,ep,ml,Ph=ut({},jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ml&&(ml&&t.type==="mousemove"?(Zf=t.screenX-ml.screenX,ep=t.screenY-ml.screenY):ep=Zf=0,ml=t),Zf)},movementY:function(t){return"movementY"in t?t.movementY:ep}}),p1=Hn(Ph),VA=ut({},Ph,{dataTransfer:0}),OA=Hn(VA),FA=ut({},jc,{relatedTarget:0}),tp=Hn(FA),UA=ut({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),zA=Hn(UA),BA=ut({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$A=Hn(BA),WA=ut({},Wa,{data:0}),m1=Hn(WA),qA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GA[t])?!!e[t]:!1}function sy(){return KA}var QA=ut({},jc,{key:function(t){if(t.key){var e=qA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sy,charCode:function(t){return t.type==="keypress"?Xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YA=Hn(QA),XA=ut({},Ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g1=Hn(XA),JA=ut({},jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sy}),ZA=Hn(JA),eR=ut({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),tR=Hn(eR),nR=ut({},Ph,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rR=Hn(nR),iR=[9,13,27,32],oy=pi&&"CompositionEvent"in window,jl=null;pi&&"documentMode"in document&&(jl=document.documentMode);var sR=pi&&"TextEvent"in window&&!jl,QT=pi&&(!oy||jl&&8<jl&&11>=jl),y1=String.fromCharCode(32),v1=!1;function YT(t,e){switch(t){case"keyup":return iR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function oR(t,e){switch(t){case"compositionend":return XT(e);case"keypress":return e.which!==32?null:(v1=!0,y1);case"textInput":return t=e.data,t===y1&&v1?null:t;default:return null}}function aR(t,e){if(Uo)return t==="compositionend"||!oy&&YT(t,e)?(t=KT(),Yu=ry=Qi=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QT&&e.locale!=="ko"?null:e.data;default:return null}}var lR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lR[t.type]:e==="textarea"}function JT(t,e,n,r){AT(r),e=Cd(e,"onChange"),0<e.length&&(n=new iy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ll=null,sc=null;function cR(t){cE(t,0)}function Dh(t){var e=$o(t);if(TT(e))return t}function uR(t,e){if(t==="change")return e}var ZT=!1;if(pi){var np;if(pi){var rp="oninput"in document;if(!rp){var x1=document.createElement("div");x1.setAttribute("oninput","return;"),rp=typeof x1.oninput=="function"}np=rp}else np=!1;ZT=np&&(!document.documentMode||9<document.documentMode)}function _1(){Ll&&(Ll.detachEvent("onpropertychange",eE),sc=Ll=null)}function eE(t){if(t.propertyName==="value"&&Dh(sc)){var e=[];JT(e,sc,t,Jg(t)),NT(cR,e)}}function dR(t,e,n){t==="focusin"?(_1(),Ll=e,sc=n,Ll.attachEvent("onpropertychange",eE)):t==="focusout"&&_1()}function hR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dh(sc)}function fR(t,e){if(t==="click")return Dh(e)}function pR(t,e){if(t==="input"||t==="change")return Dh(e)}function mR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ir=typeof Object.is=="function"?Object.is:mR;function oc(t,e){if(Ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!em.call(e,i)||!Ir(t[i],e[i]))return!1}return!0}function T1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E1(t,e){var n=T1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=T1(n)}}function tE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nE(){for(var t=window,e=xd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xd(t.document)}return e}function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gR(t){var e=nE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tE(n.ownerDocument.documentElement,n)){if(r!==null&&ay(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=E1(n,s);var o=E1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yR=pi&&"documentMode"in document&&11>=document.documentMode,zo=null,wm=null,Ml=null,xm=!1;function S1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xm||zo==null||zo!==xd(r)||(r=zo,"selectionStart"in r&&ay(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ml&&oc(Ml,r)||(Ml=r,r=Cd(wm,"onSelect"),0<r.length&&(e=new iy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zo)))}function Tu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bo={animationend:Tu("Animation","AnimationEnd"),animationiteration:Tu("Animation","AnimationIteration"),animationstart:Tu("Animation","AnimationStart"),transitionend:Tu("Transition","TransitionEnd")},ip={},rE={};pi&&(rE=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Nh(t){if(ip[t])return ip[t];if(!Bo[t])return t;var e=Bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rE)return ip[t]=e[n];return t}var iE=Nh("animationend"),sE=Nh("animationiteration"),oE=Nh("animationstart"),aE=Nh("transitionend"),lE=new Map,b1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){lE.set(t,e),wo(e,[t])}for(var sp=0;sp<b1.length;sp++){var op=b1[sp],vR=op.toLowerCase(),wR=op[0].toUpperCase()+op.slice(1);Cs(vR,"on"+wR)}Cs(iE,"onAnimationEnd");Cs(sE,"onAnimationIteration");Cs(oE,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(aE,"onTransitionEnd");Ea("onMouseEnter",["mouseout","mouseover"]);Ea("onMouseLeave",["mouseout","mouseover"]);Ea("onPointerEnter",["pointerout","pointerover"]);Ea("onPointerLeave",["pointerout","pointerover"]);wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function I1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vA(r,e,void 0,t),t.currentTarget=null}function cE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;I1(i,a,d),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,d=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;I1(i,a,d),s=l}}}if(Td)throw t=mm,Td=!1,mm=null,t}function et(t,e){var n=e[bm];n===void 0&&(n=e[bm]=new Set);var r=t+"__bubble";n.has(r)||(uE(e,t,2,!1),n.add(r))}function ap(t,e,n){var r=0;e&&(r|=4),uE(n,t,r,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function ac(t){if(!t[Eu]){t[Eu]=!0,yT.forEach(function(n){n!=="selectionchange"&&(xR.has(n)||ap(n,!1,t),ap(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,ap("selectionchange",!1,e))}}function uE(t,e,n,r){switch(GT(e)){case 1:var i=jA;break;case 4:i=LA;break;default:i=ny}n=i.bind(null,e,n,t),i=void 0,!pm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}NT(function(){var d=s,h=Jg(n),f=[];e:{var p=lE.get(t);if(p!==void 0){var g=iy,w=t;switch(t){case"keypress":if(Xu(n)===0)break e;case"keydown":case"keyup":g=YA;break;case"focusin":w="focus",g=tp;break;case"focusout":w="blur",g=tp;break;case"beforeblur":case"afterblur":g=tp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=p1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=OA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ZA;break;case iE:case sE:case oE:g=zA;break;case aE:g=tR;break;case"scroll":g=MA;break;case"wheel":g=rR;break;case"copy":case"cut":case"paste":g=$A;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=g1}var _=(e&4)!==0,P=!_&&t==="scroll",E=_?p!==null?p+"Capture":null:p;_=[];for(var v=d,x;v!==null;){x=v;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,E!==null&&(j=tc(v,E),j!=null&&_.push(lc(v,j,x)))),P)break;v=v.return}0<_.length&&(p=new g(p,w,null,n,h),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==hm&&(w=n.relatedTarget||n.fromElement)&&(Qs(w)||w[mi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=d,w=w?Qs(w):null,w!==null&&(P=xo(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=d),g!==w)){if(_=p1,j="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=g1,j="onPointerLeave",E="onPointerEnter",v="pointer"),P=g==null?p:$o(g),x=w==null?p:$o(w),p=new _(j,v+"leave",g,n,h),p.target=P,p.relatedTarget=x,j=null,Qs(h)===d&&(_=new _(E,v+"enter",w,n,h),_.target=x,_.relatedTarget=P,j=_),P=j,g&&w)t:{for(_=g,E=w,v=0,x=_;x;x=Po(x))v++;for(x=0,j=E;j;j=Po(j))x++;for(;0<v-x;)_=Po(_),v--;for(;0<x-v;)E=Po(E),x--;for(;v--;){if(_===E||E!==null&&_===E.alternate)break t;_=Po(_),E=Po(E)}_=null}else _=null;g!==null&&C1(f,p,g,_,!1),w!==null&&P!==null&&C1(f,P,w,_,!0)}}e:{if(p=d?$o(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var L=uR;else if(w1(p))if(ZT)L=pR;else{L=hR;var O=dR}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=fR);if(L&&(L=L(t,d))){JT(f,L,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&am(p,"number",p.value)}switch(O=d?$o(d):window,t){case"focusin":(w1(O)||O.contentEditable==="true")&&(zo=O,wm=d,Ml=null);break;case"focusout":Ml=wm=zo=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,S1(f,n,h);break;case"selectionchange":if(yR)break;case"keydown":case"keyup":S1(f,n,h)}var S;if(oy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Uo?YT(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(QT&&n.locale!=="ko"&&(Uo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Uo&&(S=KT()):(Qi=h,ry="value"in Qi?Qi.value:Qi.textContent,Uo=!0)),O=Cd(d,T),0<O.length&&(T=new m1(T,t,null,n,h),f.push({event:T,listeners:O}),S?T.data=S:(S=XT(n),S!==null&&(T.data=S)))),(S=sR?oR(t,n):aR(t,n))&&(d=Cd(d,"onBeforeInput"),0<d.length&&(h=new m1("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=S))}cE(f,e)})}function lc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tc(t,n),s!=null&&r.unshift(lc(t,s,i)),s=tc(t,e),s!=null&&r.push(lc(t,s,i))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&d!==null&&(a=d,i?(l=tc(n,s),l!=null&&o.unshift(lc(n,l,a))):i||(l=tc(n,s),l!=null&&o.push(lc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _R=/\r\n?/g,TR=/\u0000|\uFFFD/g;function k1(t){return(typeof t=="string"?t:""+t).replace(_R,`
`).replace(TR,"")}function Su(t,e,n){if(e=k1(e),k1(t)!==e&&n)throw Error(K(425))}function kd(){}var _m=null,Tm=null;function Em(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sm=typeof setTimeout=="function"?setTimeout:void 0,ER=typeof clearTimeout=="function"?clearTimeout:void 0,A1=typeof Promise=="function"?Promise:void 0,SR=typeof queueMicrotask=="function"?queueMicrotask:typeof A1<"u"?function(t){return A1.resolve(null).then(t).catch(bR)}:Sm;function bR(t){setTimeout(function(){throw t})}function cp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ic(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ic(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Or="__reactFiber$"+qa,cc="__reactProps$"+qa,mi="__reactContainer$"+qa,bm="__reactEvents$"+qa,IR="__reactListeners$"+qa,CR="__reactHandles$"+qa;function Qs(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mi]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=R1(t);t!==null;){if(n=t[Or])return n;t=R1(t)}return e}t=n,n=t.parentNode}return null}function Lc(t){return t=t[Or]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function jh(t){return t[cc]||null}var Im=[],Wo=-1;function ks(t){return{current:t}}function nt(t){0>Wo||(t.current=Im[Wo],Im[Wo]=null,Wo--)}function Qe(t,e){Wo++,Im[Wo]=t.current,t.current=e}var ys={},cn=ks(ys),kn=ks(!1),ao=ys;function Sa(t,e){var n=t.type.contextTypes;if(!n)return ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function An(t){return t=t.childContextTypes,t!=null}function Ad(){nt(kn),nt(cn)}function P1(t,e,n){if(cn.current!==ys)throw Error(K(168));Qe(cn,e),Qe(kn,n)}function dE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,dA(t)||"Unknown",i));return ut({},n,r)}function Rd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,ao=cn.current,Qe(cn,t),Qe(kn,kn.current),!0}function D1(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=dE(t,e,ao),r.__reactInternalMemoizedMergedChildContext=t,nt(kn),nt(cn),Qe(cn,t)):nt(kn),Qe(kn,n)}var ri=null,Lh=!1,up=!1;function hE(t){ri===null?ri=[t]:ri.push(t)}function kR(t){Lh=!0,hE(t)}function As(){if(!up&&ri!==null){up=!0;var t=0,e=ze;try{var n=ri;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ri=null,Lh=!1}catch(i){throw ri!==null&&(ri=ri.slice(t+1)),VT(Zg,As),i}finally{ze=e,up=!1}}return null}var qo=[],Ho=0,Pd=null,Dd=0,nr=[],rr=0,lo=null,si=1,oi="";function Bs(t,e){qo[Ho++]=Dd,qo[Ho++]=Pd,Pd=t,Dd=e}function fE(t,e,n){nr[rr++]=si,nr[rr++]=oi,nr[rr++]=lo,lo=t;var r=si;t=oi;var i=32-Tr(r)-1;r&=~(1<<i),n+=1;var s=32-Tr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,si=1<<32-Tr(e)+i|n<<i|r,oi=s+t}else si=1<<s|n<<i|r,oi=t}function ly(t){t.return!==null&&(Bs(t,1),fE(t,1,0))}function cy(t){for(;t===Pd;)Pd=qo[--Ho],qo[Ho]=null,Dd=qo[--Ho],qo[Ho]=null;for(;t===lo;)lo=nr[--rr],nr[rr]=null,oi=nr[--rr],nr[rr]=null,si=nr[--rr],nr[rr]=null}var zn=null,On=null,st=!1,mr=null;function pE(t,e){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function N1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,On=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lo!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,On=null,!0):!1;default:return!1}}function Cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function km(t){if(st){var e=On;if(e){var n=e;if(!N1(t,e)){if(Cm(t))throw Error(K(418));e=is(n.nextSibling);var r=zn;e&&N1(t,e)?pE(r,n):(t.flags=t.flags&-4097|2,st=!1,zn=t)}}else{if(Cm(t))throw Error(K(418));t.flags=t.flags&-4097|2,st=!1,zn=t}}}function j1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function bu(t){if(t!==zn)return!1;if(!st)return j1(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Em(t.type,t.memoizedProps)),e&&(e=On)){if(Cm(t))throw mE(),Error(K(418));for(;e;)pE(t,e),e=is(e.nextSibling)}if(j1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){On=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}On=null}}else On=zn?is(t.stateNode.nextSibling):null;return!0}function mE(){for(var t=On;t;)t=is(t.nextSibling)}function ba(){On=zn=null,st=!1}function uy(t){mr===null?mr=[t]:mr.push(t)}var AR=bi.ReactCurrentBatchConfig;function gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Iu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L1(t){var e=t._init;return e(t._payload)}function gE(t){function e(E,v){if(t){var x=E.deletions;x===null?(E.deletions=[v],E.flags|=16):x.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=ls(E,v),E.index=0,E.sibling=null,E}function s(E,v,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<v?(E.flags|=2,v):x):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,x,j){return v===null||v.tag!==6?(v=yp(x,E.mode,j),v.return=E,v):(v=i(v,x),v.return=E,v)}function l(E,v,x,j){var L=x.type;return L===Fo?h(E,v,x.props.children,j,x.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Oi&&L1(L)===v.type)?(j=i(v,x.props),j.ref=gl(E,v,x),j.return=E,j):(j=id(x.type,x.key,x.props,null,E.mode,j),j.ref=gl(E,v,x),j.return=E,j)}function d(E,v,x,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=vp(x,E.mode,j),v.return=E,v):(v=i(v,x.children||[]),v.return=E,v)}function h(E,v,x,j,L){return v===null||v.tag!==7?(v=ro(x,E.mode,j,L),v.return=E,v):(v=i(v,x),v.return=E,v)}function f(E,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=yp(""+v,E.mode,x),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case mu:return x=id(v.type,v.key,v.props,null,E.mode,x),x.ref=gl(E,null,v),x.return=E,x;case Oo:return v=vp(v,E.mode,x),v.return=E,v;case Oi:var j=v._init;return f(E,j(v._payload),x)}if(Sl(v)||dl(v))return v=ro(v,E.mode,x,null),v.return=E,v;Iu(E,v)}return null}function p(E,v,x,j){var L=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return L!==null?null:a(E,v,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mu:return x.key===L?l(E,v,x,j):null;case Oo:return x.key===L?d(E,v,x,j):null;case Oi:return L=x._init,p(E,v,L(x._payload),j)}if(Sl(x)||dl(x))return L!==null?null:h(E,v,x,j,null);Iu(E,x)}return null}function g(E,v,x,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(x)||null,a(v,E,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case mu:return E=E.get(j.key===null?x:j.key)||null,l(v,E,j,L);case Oo:return E=E.get(j.key===null?x:j.key)||null,d(v,E,j,L);case Oi:var O=j._init;return g(E,v,x,O(j._payload),L)}if(Sl(j)||dl(j))return E=E.get(x)||null,h(v,E,j,L,null);Iu(v,j)}return null}function w(E,v,x,j){for(var L=null,O=null,S=v,T=v=0,C=null;S!==null&&T<x.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var A=p(E,S,x[T],j);if(A===null){S===null&&(S=C);break}t&&S&&A.alternate===null&&e(E,S),v=s(A,v,T),O===null?L=A:O.sibling=A,O=A,S=C}if(T===x.length)return n(E,S),st&&Bs(E,T),L;if(S===null){for(;T<x.length;T++)S=f(E,x[T],j),S!==null&&(v=s(S,v,T),O===null?L=S:O.sibling=S,O=S);return st&&Bs(E,T),L}for(S=r(E,S);T<x.length;T++)C=g(S,E,T,x[T],j),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),v=s(C,v,T),O===null?L=C:O.sibling=C,O=C);return t&&S.forEach(function(k){return e(E,k)}),st&&Bs(E,T),L}function _(E,v,x,j){var L=dl(x);if(typeof L!="function")throw Error(K(150));if(x=L.call(x),x==null)throw Error(K(151));for(var O=L=null,S=v,T=v=0,C=null,A=x.next();S!==null&&!A.done;T++,A=x.next()){S.index>T?(C=S,S=null):C=S.sibling;var k=p(E,S,A.value,j);if(k===null){S===null&&(S=C);break}t&&S&&k.alternate===null&&e(E,S),v=s(k,v,T),O===null?L=k:O.sibling=k,O=k,S=C}if(A.done)return n(E,S),st&&Bs(E,T),L;if(S===null){for(;!A.done;T++,A=x.next())A=f(E,A.value,j),A!==null&&(v=s(A,v,T),O===null?L=A:O.sibling=A,O=A);return st&&Bs(E,T),L}for(S=r(E,S);!A.done;T++,A=x.next())A=g(S,E,T,A.value,j),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),v=s(A,v,T),O===null?L=A:O.sibling=A,O=A);return t&&S.forEach(function(N){return e(E,N)}),st&&Bs(E,T),L}function P(E,v,x,j){if(typeof x=="object"&&x!==null&&x.type===Fo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case mu:e:{for(var L=x.key,O=v;O!==null;){if(O.key===L){if(L=x.type,L===Fo){if(O.tag===7){n(E,O.sibling),v=i(O,x.props.children),v.return=E,E=v;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Oi&&L1(L)===O.type){n(E,O.sibling),v=i(O,x.props),v.ref=gl(E,O,x),v.return=E,E=v;break e}n(E,O);break}else e(E,O);O=O.sibling}x.type===Fo?(v=ro(x.props.children,E.mode,j,x.key),v.return=E,E=v):(j=id(x.type,x.key,x.props,null,E.mode,j),j.ref=gl(E,v,x),j.return=E,E=j)}return o(E);case Oo:e:{for(O=x.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(E,v.sibling),v=i(v,x.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=vp(x,E.mode,j),v.return=E,E=v}return o(E);case Oi:return O=x._init,P(E,v,O(x._payload),j)}if(Sl(x))return w(E,v,x,j);if(dl(x))return _(E,v,x,j);Iu(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,x),v.return=E,E=v):(n(E,v),v=yp(x,E.mode,j),v.return=E,E=v),o(E)):n(E,v)}return P}var Ia=gE(!0),yE=gE(!1),Nd=ks(null),jd=null,Go=null,dy=null;function hy(){dy=Go=jd=null}function fy(t){var e=Nd.current;nt(Nd),t._currentValue=e}function Am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function la(t,e){jd=t,dy=Go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bn=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(dy!==t)if(t={context:t,memoizedValue:e,next:null},Go===null){if(jd===null)throw Error(K(308));Go=t,jd.dependencies={lanes:0,firstContext:t}}else Go=Go.next=t;return e}var Ys=null;function py(t){Ys===null?Ys=[t]:Ys.push(t)}function vE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,py(e)):(n.next=i.next,i.next=n),e.interleaved=n,gi(t,r)}function gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fi=!1;function my(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gi(t,n)}return i=r.interleaved,i===null?(e.next=e,py(r)):(e.next=i.next,i.next=e),r.interleaved=e,gi(t,n)}function Ju(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ey(t,n)}}function M1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ld(t,e,n,r){var i=t.updateQueue;Fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,d=l.next;l.next=null,o===null?s=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=d=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(p=e,g=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){f=w.call(g,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,p=typeof w=="function"?w.call(g,f,p):w,p==null)break e;f=ut({},f,p);break e;case 2:Fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);uo|=o,t.lanes=o,t.memoizedState=f}}function V1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var Mc={},$r=ks(Mc),uc=ks(Mc),dc=ks(Mc);function Xs(t){if(t===Mc)throw Error(K(174));return t}function gy(t,e){switch(Qe(dc,e),Qe(uc,t),Qe($r,Mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cm(e,t)}nt($r),Qe($r,e)}function Ca(){nt($r),nt(uc),nt(dc)}function xE(t){Xs(dc.current);var e=Xs($r.current),n=cm(e,t.type);e!==n&&(Qe(uc,t),Qe($r,n))}function yy(t){uc.current===t&&(nt($r),nt(uc))}var at=ks(0);function Md(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dp=[];function vy(){for(var t=0;t<dp.length;t++)dp[t]._workInProgressVersionPrimary=null;dp.length=0}var Zu=bi.ReactCurrentDispatcher,hp=bi.ReactCurrentBatchConfig,co=0,ct=null,Lt=null,Bt=null,Vd=!1,Vl=!1,hc=0,RR=0;function tn(){throw Error(K(321))}function wy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ir(t[n],e[n]))return!1;return!0}function xy(t,e,n,r,i,s){if(co=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zu.current=t===null||t.memoizedState===null?jR:LR,t=n(r,i),Vl){s=0;do{if(Vl=!1,hc=0,25<=s)throw Error(K(301));s+=1,Bt=Lt=null,e.updateQueue=null,Zu.current=MR,t=n(r,i)}while(Vl)}if(Zu.current=Od,e=Lt!==null&&Lt.next!==null,co=0,Bt=Lt=ct=null,Vd=!1,e)throw Error(K(300));return t}function _y(){var t=hc!==0;return hc=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ct.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function lr(){if(Lt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=Bt===null?ct.memoizedState:Bt.next;if(e!==null)Bt=e,Lt=t;else{if(t===null)throw Error(K(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Bt===null?ct.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function fc(t,e){return typeof e=="function"?e(t):e}function fp(t){var e=lr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,d=s;do{var h=d.lane;if((co&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ct.lanes|=h,uo|=h}d=d.next}while(d!==null&&d!==s);l===null?o=r:l.next=a,Ir(r,e.memoizedState)||(bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ct.lanes|=s,uo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pp(t){var e=lr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ir(s,e.memoizedState)||(bn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _E(){}function TE(t,e){var n=ct,r=lr(),i=e(),s=!Ir(r.memoizedState,i);if(s&&(r.memoizedState=i,bn=!0),r=r.queue,Ty(bE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,pc(9,SE.bind(null,n,r,i,e),void 0,null),Wt===null)throw Error(K(349));co&30||EE(n,e,i)}return i}function EE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SE(t,e,n,r){e.value=n,e.getSnapshot=r,IE(e)&&CE(t)}function bE(t,e,n){return n(function(){IE(e)&&CE(t)})}function IE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ir(t,n)}catch{return!0}}function CE(t){var e=gi(t,1);e!==null&&Er(e,t,1,-1)}function O1(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fc,lastRenderedState:t},e.queue=t,t=t.dispatch=NR.bind(null,ct,t),[e.memoizedState,t]}function pc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kE(){return lr().memoizedState}function ed(t,e,n,r){var i=Lr();ct.flags|=t,i.memoizedState=pc(1|e,n,void 0,r===void 0?null:r)}function Mh(t,e,n,r){var i=lr();r=r===void 0?null:r;var s=void 0;if(Lt!==null){var o=Lt.memoizedState;if(s=o.destroy,r!==null&&wy(r,o.deps)){i.memoizedState=pc(e,n,s,r);return}}ct.flags|=t,i.memoizedState=pc(1|e,n,s,r)}function F1(t,e){return ed(8390656,8,t,e)}function Ty(t,e){return Mh(2048,8,t,e)}function AE(t,e){return Mh(4,2,t,e)}function RE(t,e){return Mh(4,4,t,e)}function PE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DE(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4,4,PE.bind(null,e,t),n)}function Ey(){}function NE(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jE(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function LE(t,e,n){return co&21?(Ir(n,e)||(n=UT(),ct.lanes|=n,uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=n)}function PR(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=hp.transition;hp.transition={};try{t(!1),e()}finally{ze=n,hp.transition=r}}function ME(){return lr().memoizedState}function DR(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VE(t))OE(e,n);else if(n=vE(t,e,n,r),n!==null){var i=yn();Er(n,t,r,i),FE(n,e,r)}}function NR(t,e,n){var r=as(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VE(t))OE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ir(a,o)){var l=e.interleaved;l===null?(i.next=i,py(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=vE(t,e,i,r),n!==null&&(i=yn(),Er(n,t,r,i),FE(n,e,r))}}function VE(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function OE(t,e){Vl=Vd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ey(t,n)}}var Od={readContext:ar,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},jR={readContext:ar,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:F1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ed(4194308,4,PE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ed(4194308,4,t,e)},useInsertionEffect:function(t,e){return ed(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DR.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:O1,useDebugValue:Ey,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=O1(!1),e=t[0];return t=PR.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,i=Lr();if(st){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Wt===null)throw Error(K(349));co&30||EE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,F1(bE.bind(null,r,s,t),[t]),r.flags|=2048,pc(9,SE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Lr(),e=Wt.identifierPrefix;if(st){var n=oi,r=si;n=(r&~(1<<32-Tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LR={readContext:ar,useCallback:NE,useContext:ar,useEffect:Ty,useImperativeHandle:DE,useInsertionEffect:AE,useLayoutEffect:RE,useMemo:jE,useReducer:fp,useRef:kE,useState:function(){return fp(fc)},useDebugValue:Ey,useDeferredValue:function(t){var e=lr();return LE(e,Lt.memoizedState,t)},useTransition:function(){var t=fp(fc)[0],e=lr().memoizedState;return[t,e]},useMutableSource:_E,useSyncExternalStore:TE,useId:ME,unstable_isNewReconciler:!1},MR={readContext:ar,useCallback:NE,useContext:ar,useEffect:Ty,useImperativeHandle:DE,useInsertionEffect:AE,useLayoutEffect:RE,useMemo:jE,useReducer:pp,useRef:kE,useState:function(){return pp(fc)},useDebugValue:Ey,useDeferredValue:function(t){var e=lr();return Lt===null?e.memoizedState=t:LE(e,Lt.memoizedState,t)},useTransition:function(){var t=pp(fc)[0],e=lr().memoizedState;return[t,e]},useMutableSource:_E,useSyncExternalStore:TE,useId:ME,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vh={isMounted:function(t){return(t=t._reactInternals)?xo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),i=as(t),s=ui(r,i);s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Er(e,t,i,r),Ju(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),i=as(t),s=ui(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Er(e,t,i,r),Ju(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=as(t),i=ui(n,r);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,r),e!==null&&(Er(e,t,r,n),Ju(e,t,r))}};function U1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!oc(n,r)||!oc(i,s):!0}function UE(t,e,n){var r=!1,i=ys,s=e.contextType;return typeof s=="object"&&s!==null?s=ar(s):(i=An(e)?ao:cn.current,r=e.contextTypes,s=(r=r!=null)?Sa(t,i):ys),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function z1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vh.enqueueReplaceState(e,e.state,null)}function Pm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},my(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ar(s):(s=An(e)?ao:cn.current,i.context=Sa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vh.enqueueReplaceState(i,i.state,null),Ld(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var n="",r=e;do n+=uA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VR=typeof WeakMap=="function"?WeakMap:Map;function zE(t,e,n){n=ui(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ud||(Ud=!0,Bm=r),Dm(t,e)},n}function BE(t,e,n){n=ui(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Dm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dm(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XR.bind(null,t,e,n),e.then(t,t))}function $1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ui(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var OR=bi.ReactCurrentOwner,bn=!1;function pn(t,e,n,r){e.child=t===null?yE(e,null,n,r):Ia(e,t.child,n,r)}function q1(t,e,n,r,i){n=n.render;var s=e.ref;return la(e,i),r=xy(t,e,n,r,s,i),n=_y(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yi(t,e,i)):(st&&n&&ly(e),e.flags|=1,pn(t,e,r,i),e.child)}function H1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Py(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$E(t,e,s,r,i)):(t=id(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:oc,n(o,r)&&t.ref===e.ref)return yi(t,e,i)}return e.flags|=1,t=ls(s,r),t.ref=e.ref,t.return=e,e.child=t}function $E(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(oc(s,r)&&t.ref===e.ref)if(bn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(bn=!0);else return e.lanes=t.lanes,yi(t,e,i)}return Nm(t,e,n,r,i)}function WE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Qo,Ln),Ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(Qo,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qe(Qo,Ln),Ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qe(Qo,Ln),Ln|=r;return pn(t,e,i,n),e.child}function qE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nm(t,e,n,r,i){var s=An(n)?ao:cn.current;return s=Sa(e,s),la(e,i),n=xy(t,e,n,r,s,i),r=_y(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yi(t,e,i)):(st&&r&&ly(e),e.flags|=1,pn(t,e,n,i),e.child)}function G1(t,e,n,r,i){if(An(n)){var s=!0;Rd(e)}else s=!1;if(la(e,i),e.stateNode===null)td(t,e),UE(e,n,r),Pm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ar(d):(d=An(n)?ao:cn.current,d=Sa(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==d)&&z1(e,o,r,d),Fi=!1;var p=e.memoizedState;o.state=p,Ld(e,r,o,i),l=e.memoizedState,a!==r||p!==l||kn.current||Fi?(typeof h=="function"&&(Rm(e,n,h,r),l=e.memoizedState),(a=Fi||U1(e,n,a,r,p,l,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wE(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:ur(e.type,a),o.props=d,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=An(n)?ao:cn.current,l=Sa(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&z1(e,o,r,l),Fi=!1,p=e.memoizedState,o.state=p,Ld(e,r,o,i);var w=e.memoizedState;a!==f||p!==w||kn.current||Fi?(typeof g=="function"&&(Rm(e,n,g,r),w=e.memoizedState),(d=Fi||U1(e,n,d,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return jm(t,e,n,r,s,i)}function jm(t,e,n,r,i,s){qE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&D1(e,n,!1),yi(t,e,s);r=e.stateNode,OR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ia(e,t.child,null,s),e.child=Ia(e,null,a,s)):pn(t,e,a,s),e.memoizedState=r.state,i&&D1(e,n,!0),e.child}function HE(t){var e=t.stateNode;e.pendingContext?P1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P1(t,e.context,!1),gy(t,e.containerInfo)}function K1(t,e,n,r,i){return ba(),uy(i),e.flags|=256,pn(t,e,n,r),e.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Mm(t){return{baseLanes:t,cachePool:null,transitions:null}}function GE(t,e,n){var r=e.pendingProps,i=at.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Qe(at,i&1),t===null)return km(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uh(o,r,0,null),t=ro(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mm(n),e.memoizedState=Lm,t):Sy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return FR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ls(a,s):(s=ro(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Mm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Lm,r}return s=t.child,t=s.sibling,r=ls(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sy(t,e){return e=Uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cu(t,e,n,r){return r!==null&&uy(r),Ia(e,t.child,null,n),t=Sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mp(Error(K(422))),Cu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Uh({mode:"visible",children:r.children},i,0,null),s=ro(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ia(e,t.child,null,o),e.child.memoizedState=Mm(o),e.memoizedState=Lm,s);if(!(e.mode&1))return Cu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=mp(s,r,void 0),Cu(t,e,o,r)}if(a=(o&t.childLanes)!==0,bn||a){if(r=Wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gi(t,i),Er(r,t,i,-1))}return Ry(),r=mp(Error(K(421))),Cu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=JR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,On=is(i.nextSibling),zn=e,st=!0,mr=null,t!==null&&(nr[rr++]=si,nr[rr++]=oi,nr[rr++]=lo,si=t.id,oi=t.overflow,lo=e),e=Sy(e,r.children),e.flags|=4096,e)}function Q1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Am(t.return,e,n)}function gp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function KE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pn(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q1(t,n,e);else if(t.tag===19)Q1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(at,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Md(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Md(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gp(e,!0,n,null,s);break;case"together":gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UR(t,e,n){switch(e.tag){case 3:HE(e),ba();break;case 5:xE(e);break;case 1:An(e.type)&&Rd(e);break;case 4:gy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qe(Nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?GE(t,e,n):(Qe(at,at.current&1),t=yi(t,e,n),t!==null?t.sibling:null);Qe(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return KE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qe(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,WE(t,e,n)}return yi(t,e,n)}var QE,Vm,YE,XE;QE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vm=function(){};YE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xs($r.current);var s=null;switch(n){case"input":i=sm(t,i),r=sm(t,r),s=[];break;case"select":i=ut({},i,{value:void 0}),r=ut({},r,{value:void 0}),s=[];break;case"textarea":i=lm(t,i),r=lm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kd)}um(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zl.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&et("scroll",t),s||a===l||(s=[])):(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};XE=function(t,e,n,r){n!==r&&(e.flags|=4)};function yl(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zR(t,e,n){var r=e.pendingProps;switch(cy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return An(e.type)&&Ad(),nn(e),null;case 3:return r=e.stateNode,Ca(),nt(kn),nt(cn),vy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(qm(mr),mr=null))),Vm(t,e),nn(e),null;case 5:yy(e);var i=Xs(dc.current);if(n=e.type,t!==null&&e.stateNode!=null)YE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return nn(e),null}if(t=Xs($r.current),bu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Or]=e,r[cc]=s,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(i=0;i<Il.length;i++)et(Il[i],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":i1(r,s),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},et("invalid",r);break;case"textarea":o1(r,s),et("invalid",r)}um(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Su(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Su(r.textContent,a,t),i=["children",""+a]):Zl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",r)}switch(n){case"input":gu(r),s1(r,s,!0);break;case"textarea":gu(r),a1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=kd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Or]=e,t[cc]=r,QE(t,e,!1,!1),e.stateNode=t;e:{switch(o=dm(n,r),n){case"dialog":et("cancel",t),et("close",t),i=r;break;case"iframe":case"object":case"embed":et("load",t),i=r;break;case"video":case"audio":for(i=0;i<Il.length;i++)et(Il[i],t);i=r;break;case"source":et("error",t),i=r;break;case"img":case"image":case"link":et("error",t),et("load",t),i=r;break;case"details":et("toggle",t),i=r;break;case"input":i1(t,r),i=sm(t,r),et("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ut({},r,{value:void 0}),et("invalid",t);break;case"textarea":o1(t,r),i=lm(t,r),et("invalid",t);break;default:i=r}um(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?kT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ec(t,l):typeof l=="number"&&ec(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&et("scroll",t):l!=null&&Kg(t,s,l,o))}switch(n){case"input":gu(t),s1(t,r,!1);break;case"textarea":gu(t),a1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ia(t,!!r.multiple,s,!1):r.defaultValue!=null&&ia(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=kd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)XE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Xs(dc.current),Xs($r.current),bu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Or]=e,(s=r.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:Su(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Su(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=e,e.stateNode=r}return nn(e),null;case 13:if(nt(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&On!==null&&e.mode&1&&!(e.flags&128))mE(),ba(),e.flags|=98560,s=!1;else if(s=bu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Or]=e}else ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),s=!1}else mr!==null&&(qm(mr),mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?Mt===0&&(Mt=3):Ry())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return Ca(),Vm(t,e),t===null&&ac(e.stateNode.containerInfo),nn(e),null;case 10:return fy(e.type._context),nn(e),null;case 17:return An(e.type)&&Ad(),nn(e),null;case 19:if(nt(at),s=e.memoizedState,s===null)return nn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)yl(s,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Md(t),o!==null){for(e.flags|=128,yl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(at,at.current&1|2),e.child}t=t.sibling}s.tail!==null&&Tt()>Aa&&(e.flags|=128,r=!0,yl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Md(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!st)return nn(e),null}else 2*Tt()-s.renderingStartTime>Aa&&n!==1073741824&&(e.flags|=128,r=!0,yl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tt(),e.sibling=null,n=at.current,Qe(at,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return Ay(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ln&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function BR(t,e){switch(cy(e),e.tag){case 1:return An(e.type)&&Ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ca(),nt(kn),nt(cn),vy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yy(e),null;case 13:if(nt(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(at),null;case 4:return Ca(),null;case 10:return fy(e.type._context),null;case 22:case 23:return Ay(),null;case 24:return null;default:return null}}var ku=!1,ln=!1,$R=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function Om(t,e,n){try{n()}catch(r){pt(t,e,r)}}var Y1=!1;function WR(t,e){if(_m=bd,t=nE(),ay(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++d===i&&(a=o),p===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tm={focusedElem:t,selectionRange:n},bd=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,P=w.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?_:ur(e.type,_),P);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(j){pt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return w=Y1,Y1=!1,w}function Ol(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Om(e,n,s)}i=i.next}while(i!==r)}}function Oh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JE(t){var e=t.alternate;e!==null&&(t.alternate=null,JE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Or],delete e[cc],delete e[bm],delete e[IR],delete e[CR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZE(t){return t.tag===5||t.tag===3||t.tag===4}function X1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Um(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kd));else if(r!==4&&(t=t.child,t!==null))for(Um(t,e,n),t=t.sibling;t!==null;)Um(t,e,n),t=t.sibling}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}var Gt=null,pr=!1;function Di(t,e,n){for(n=n.child;n!==null;)eS(t,e,n),n=n.sibling}function eS(t,e,n){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(Rh,n)}catch{}switch(n.tag){case 5:ln||Ko(n,e);case 6:var r=Gt,i=pr;Gt=null,Di(t,e,n),Gt=r,pr=i,Gt!==null&&(pr?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(pr?(t=Gt,n=n.stateNode,t.nodeType===8?cp(t.parentNode,n):t.nodeType===1&&cp(t,n),ic(t)):cp(Gt,n.stateNode));break;case 4:r=Gt,i=pr,Gt=n.stateNode.containerInfo,pr=!0,Di(t,e,n),Gt=r,pr=i;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Om(n,e,o),i=i.next}while(i!==r)}Di(t,e,n);break;case 1:if(!ln&&(Ko(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}Di(t,e,n);break;case 21:Di(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,Di(t,e,n),ln=r):Di(t,e,n);break;default:Di(t,e,n)}}function J1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $R),e.forEach(function(r){var i=ZR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,pr=!1;break e;case 3:Gt=a.stateNode.containerInfo,pr=!0;break e;case 4:Gt=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(Gt===null)throw Error(K(160));eS(s,o,i),Gt=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(d){pt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tS(e,t),e=e.sibling}function tS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),Dr(t),r&4){try{Ol(3,t,t.return),Oh(3,t)}catch(_){pt(t,t.return,_)}try{Ol(5,t,t.return)}catch(_){pt(t,t.return,_)}}break;case 1:cr(e,t),Dr(t),r&512&&n!==null&&Ko(n,n.return);break;case 5:if(cr(e,t),Dr(t),r&512&&n!==null&&Ko(n,n.return),t.flags&32){var i=t.stateNode;try{ec(i,"")}catch(_){pt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ET(i,s),dm(a,o);var d=dm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?kT(i,f):h==="dangerouslySetInnerHTML"?IT(i,f):h==="children"?ec(i,f):Kg(i,h,f,d)}switch(a){case"input":om(i,s);break;case"textarea":ST(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ia(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?ia(i,!!s.multiple,s.defaultValue,!0):ia(i,!!s.multiple,s.multiple?[]:"",!1))}i[cc]=s}catch(_){pt(t,t.return,_)}}break;case 6:if(cr(e,t),Dr(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){pt(t,t.return,_)}}break;case 3:if(cr(e,t),Dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ic(e.containerInfo)}catch(_){pt(t,t.return,_)}break;case 4:cr(e,t),Dr(t);break;case 13:cr(e,t),Dr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cy=Tt())),r&4&&J1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(d=ln)||h,cr(e,t),ln=d):cr(e,t),Dr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ce=t,h=t.child;h!==null;){for(f=ce=h;ce!==null;){switch(p=ce,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ol(4,p,p.return);break;case 1:Ko(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){pt(r,n,_)}}break;case 5:Ko(p,p.return);break;case 22:if(p.memoizedState!==null){ew(f);continue}}g!==null?(g.return=p,ce=g):ew(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=CT("display",o))}catch(_){pt(t,t.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){pt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cr(e,t),Dr(t),r&4&&J1(t);break;case 21:break;default:cr(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZE(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ec(i,""),r.flags&=-33);var s=X1(t);zm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=X1(t);Um(t,a,o);break;default:throw Error(K(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qR(t,e,n){ce=t,nS(t)}function nS(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var i=ce,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ku;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ln;a=ku;var d=ln;if(ku=o,(ln=l)&&!d)for(ce=i;ce!==null;)o=ce,l=o.child,o.tag===22&&o.memoizedState!==null?tw(i):l!==null?(l.return=o,ce=l):tw(i);for(;s!==null;)ce=s,nS(s),s=s.sibling;ce=i,ku=a,ln=d}Z1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ce=s):Z1(t)}}function Z1(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||Oh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&V1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}V1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ic(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}ln||e.flags&512&&Fm(e)}catch(p){pt(e,e.return,p)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function ew(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function tw(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Oh(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){pt(e,i,l)}}var s=e.return;try{Fm(e)}catch(l){pt(e,s,l)}break;case 5:var o=e.return;try{Fm(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var HR=Math.ceil,Fd=bi.ReactCurrentDispatcher,by=bi.ReactCurrentOwner,sr=bi.ReactCurrentBatchConfig,Oe=0,Wt=null,At=null,Xt=0,Ln=0,Qo=ks(0),Mt=0,mc=null,uo=0,Fh=0,Iy=0,Fl=null,Sn=null,Cy=0,Aa=1/0,ni=null,Ud=!1,Bm=null,os=null,Au=!1,Yi=null,zd=0,Ul=0,$m=null,nd=-1,rd=0;function yn(){return Oe&6?Tt():nd!==-1?nd:nd=Tt()}function as(t){return t.mode&1?Oe&2&&Xt!==0?Xt&-Xt:AR.transition!==null?(rd===0&&(rd=UT()),rd):(t=ze,t!==0||(t=window.event,t=t===void 0?16:GT(t.type)),t):1}function Er(t,e,n,r){if(50<Ul)throw Ul=0,$m=null,Error(K(185));Nc(t,n,r),(!(Oe&2)||t!==Wt)&&(t===Wt&&(!(Oe&2)&&(Fh|=n),Mt===4&&Bi(t,Xt)),Rn(t,r),n===1&&Oe===0&&!(e.mode&1)&&(Aa=Tt()+500,Lh&&As()))}function Rn(t,e){var n=t.callbackNode;AA(t,e);var r=Sd(t,t===Wt?Xt:0);if(r===0)n!==null&&u1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u1(n),e===1)t.tag===0?kR(nw.bind(null,t)):hE(nw.bind(null,t)),SR(function(){!(Oe&6)&&As()}),n=null;else{switch(zT(r)){case 1:n=Zg;break;case 4:n=OT;break;case 16:n=Ed;break;case 536870912:n=FT;break;default:n=Ed}n=uS(n,rS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rS(t,e){if(nd=-1,rd=0,Oe&6)throw Error(K(327));var n=t.callbackNode;if(ca()&&t.callbackNode!==n)return null;var r=Sd(t,t===Wt?Xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bd(t,r);else{e=r;var i=Oe;Oe|=2;var s=sS();(Wt!==t||Xt!==e)&&(ni=null,Aa=Tt()+500,no(t,e));do try{QR();break}catch(a){iS(t,a)}while(1);hy(),Fd.current=s,Oe=i,At!==null?e=0:(Wt=null,Xt=0,e=Mt)}if(e!==0){if(e===2&&(i=gm(t),i!==0&&(r=i,e=Wm(t,i))),e===1)throw n=mc,no(t,0),Bi(t,r),Rn(t,Tt()),n;if(e===6)Bi(t,r);else{if(i=t.current.alternate,!(r&30)&&!GR(i)&&(e=Bd(t,r),e===2&&(s=gm(t),s!==0&&(r=s,e=Wm(t,s))),e===1))throw n=mc,no(t,0),Bi(t,r),Rn(t,Tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:$s(t,Sn,ni);break;case 3:if(Bi(t,r),(r&130023424)===r&&(e=Cy+500-Tt(),10<e)){if(Sd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sm($s.bind(null,t,Sn,ni),e);break}$s(t,Sn,ni);break;case 4:if(Bi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Tr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HR(r/1960))-r,10<r){t.timeoutHandle=Sm($s.bind(null,t,Sn,ni),r);break}$s(t,Sn,ni);break;case 5:$s(t,Sn,ni);break;default:throw Error(K(329))}}}return Rn(t,Tt()),t.callbackNode===n?rS.bind(null,t):null}function Wm(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=Bd(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&qm(e)),t}function qm(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function GR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ir(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bi(t,e){for(e&=~Iy,e&=~Fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tr(e),r=1<<n;t[n]=-1,e&=~r}}function nw(t){if(Oe&6)throw Error(K(327));ca();var e=Sd(t,0);if(!(e&1))return Rn(t,Tt()),null;var n=Bd(t,e);if(t.tag!==0&&n===2){var r=gm(t);r!==0&&(e=r,n=Wm(t,r))}if(n===1)throw n=mc,no(t,0),Bi(t,e),Rn(t,Tt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Sn,ni),Rn(t,Tt()),null}function ky(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Aa=Tt()+500,Lh&&As())}}function ho(t){Yi!==null&&Yi.tag===0&&!(Oe&6)&&ca();var e=Oe;Oe|=1;var n=sr.transition,r=ze;try{if(sr.transition=null,ze=1,t)return t()}finally{ze=r,sr.transition=n,Oe=e,!(Oe&6)&&As()}}function Ay(){Ln=Qo.current,nt(Qo)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ER(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(cy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ad();break;case 3:Ca(),nt(kn),nt(cn),vy();break;case 5:yy(r);break;case 4:Ca();break;case 13:nt(at);break;case 19:nt(at);break;case 10:fy(r.type._context);break;case 22:case 23:Ay()}n=n.return}if(Wt=t,At=t=ls(t.current,null),Xt=Ln=e,Mt=0,mc=null,Iy=Fh=uo=0,Sn=Fl=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ys=null}return t}function iS(t,e){do{var n=At;try{if(hy(),Zu.current=Od,Vd){for(var r=ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vd=!1}if(co=0,Bt=Lt=ct=null,Vl=!1,hc=0,by.current=null,n===null||n.return===null){Mt=1,mc=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=$1(o);if(g!==null){g.flags&=-257,W1(g,o,a,s,e),g.mode&1&&B1(s,d,e),e=g,l=d;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){B1(s,d,e),Ry();break e}l=Error(K(426))}}else if(st&&a.mode&1){var P=$1(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),W1(P,o,a,s,e),uy(ka(l,a));break e}}s=l=ka(l,a),Mt!==4&&(Mt=2),Fl===null?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=zE(s,l,e);M1(s,E);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(os===null||!os.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=BE(s,a,e);M1(s,j);break e}}s=s.return}while(s!==null)}aS(n)}catch(L){e=L,At===n&&n!==null&&(At=n=n.return);continue}break}while(1)}function sS(){var t=Fd.current;return Fd.current=Od,t===null?Od:t}function Ry(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Wt===null||!(uo&268435455)&&!(Fh&268435455)||Bi(Wt,Xt)}function Bd(t,e){var n=Oe;Oe|=2;var r=sS();(Wt!==t||Xt!==e)&&(ni=null,no(t,e));do try{KR();break}catch(i){iS(t,i)}while(1);if(hy(),Oe=n,Fd.current=r,At!==null)throw Error(K(261));return Wt=null,Xt=0,Mt}function KR(){for(;At!==null;)oS(At)}function QR(){for(;At!==null&&!xA();)oS(At)}function oS(t){var e=cS(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?aS(t):At=e,by.current=null}function aS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BR(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,At=null;return}}else if(n=zR(n,e,Ln),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Mt===0&&(Mt=5)}function $s(t,e,n){var r=ze,i=sr.transition;try{sr.transition=null,ze=1,YR(t,e,n,r)}finally{sr.transition=i,ze=r}return null}function YR(t,e,n,r){do ca();while(Yi!==null);if(Oe&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RA(t,s),t===Wt&&(At=Wt=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Au||(Au=!0,uS(Ed,function(){return ca(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sr.transition,sr.transition=null;var o=ze;ze=1;var a=Oe;Oe|=4,by.current=null,WR(t,n),tS(n,t),gR(Tm),bd=!!_m,Tm=_m=null,t.current=n,qR(n),_A(),Oe=a,ze=o,sr.transition=s}else t.current=n;if(Au&&(Au=!1,Yi=t,zd=i),s=t.pendingLanes,s===0&&(os=null),SA(n.stateNode),Rn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ud)throw Ud=!1,t=Bm,Bm=null,t;return zd&1&&t.tag!==0&&ca(),s=t.pendingLanes,s&1?t===$m?Ul++:(Ul=0,$m=t):Ul=0,As(),null}function ca(){if(Yi!==null){var t=zT(zd),e=sr.transition,n=ze;try{if(sr.transition=null,ze=16>t?16:t,Yi===null)var r=!1;else{if(t=Yi,Yi=null,zd=0,Oe&6)throw Error(K(331));var i=Oe;for(Oe|=4,ce=t.current;ce!==null;){var s=ce,o=s.child;if(ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(ce=d;ce!==null;){var h=ce;switch(h.tag){case 0:case 11:case 15:Ol(8,h,s)}var f=h.child;if(f!==null)f.return=h,ce=f;else for(;ce!==null;){h=ce;var p=h.sibling,g=h.return;if(JE(h),h===d){ce=null;break}if(p!==null){p.return=g,ce=p;break}ce=g}}}var w=s.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var P=_.sibling;_.sibling=null,_=P}while(_!==null)}}ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ce=o;else e:for(;ce!==null;){if(s=ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ol(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ce=E;break e}ce=s.return}}var v=t.current;for(ce=v;ce!==null;){o=ce;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ce=x;else e:for(o=v;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Oh(9,a)}}catch(L){pt(a,a.return,L)}if(a===o){ce=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,ce=j;break e}ce=a.return}}if(Oe=i,As(),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(Rh,t)}catch{}r=!0}return r}finally{ze=n,sr.transition=e}}return!1}function rw(t,e,n){e=ka(n,e),e=zE(t,e,1),t=ss(t,e,1),e=yn(),t!==null&&(Nc(t,1,e),Rn(t,e))}function pt(t,e,n){if(t.tag===3)rw(t,t,n);else for(;e!==null;){if(e.tag===3){rw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=ka(n,t),t=BE(e,t,1),e=ss(e,t,1),t=yn(),e!==null&&(Nc(e,1,t),Rn(e,t));break}}e=e.return}}function XR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(Xt&n)===n&&(Mt===4||Mt===3&&(Xt&130023424)===Xt&&500>Tt()-Cy?no(t,0):Iy|=n),Rn(t,e)}function lS(t,e){e===0&&(t.mode&1?(e=wu,wu<<=1,!(wu&130023424)&&(wu=4194304)):e=1);var n=yn();t=gi(t,e),t!==null&&(Nc(t,e,n),Rn(t,n))}function JR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lS(t,n)}function ZR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),lS(t,n)}var cS;cS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kn.current)bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bn=!1,UR(t,e,n);bn=!!(t.flags&131072)}else bn=!1,st&&e.flags&1048576&&fE(e,Dd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;td(t,e),t=e.pendingProps;var i=Sa(e,cn.current);la(e,n),i=xy(null,e,r,t,i,n);var s=_y();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(r)?(s=!0,Rd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,my(e),i.updater=Vh,e.stateNode=i,i._reactInternals=e,Pm(e,r,t,n),e=jm(null,e,r,!0,s,n)):(e.tag=0,st&&s&&ly(e),pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(td(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tP(r),t=ur(r,t),i){case 0:e=Nm(null,e,r,t,n);break e;case 1:e=G1(null,e,r,t,n);break e;case 11:e=q1(null,e,r,t,n);break e;case 14:e=H1(null,e,r,ur(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),Nm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),G1(t,e,r,i,n);case 3:e:{if(HE(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,wE(t,e),Ld(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ka(Error(K(423)),e),e=K1(t,e,r,n,i);break e}else if(r!==i){i=ka(Error(K(424)),e),e=K1(t,e,r,n,i);break e}else for(On=is(e.stateNode.containerInfo.firstChild),zn=e,st=!0,mr=null,n=yE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ba(),r===i){e=yi(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return xE(e),t===null&&km(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Em(r,i)?o=null:s!==null&&Em(r,s)&&(e.flags|=32),qE(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&km(e),null;case 13:return GE(t,e,n);case 4:return gy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ia(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),q1(t,e,r,i,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Qe(Nd,r._currentValue),r._currentValue=o,s!==null)if(Ir(s.value,o)){if(s.children===i.children&&!kn.current){e=yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ui(-1,n&-n),l.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Am(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Am(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,la(e,n),i=ar(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,i=ur(r,e.pendingProps),i=ur(r.type,i),H1(t,e,r,i,n);case 15:return $E(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),td(t,e),e.tag=1,An(r)?(t=!0,Rd(e)):t=!1,la(e,n),UE(e,r,i),Pm(e,r,i,n),jm(null,e,r,!0,t,n);case 19:return KE(t,e,n);case 22:return WE(t,e,n)}throw Error(K(156,e.tag))};function uS(t,e){return VT(t,e)}function eP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(t,e,n,r){return new eP(t,e,n,r)}function Py(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tP(t){if(typeof t=="function")return Py(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yg)return 11;if(t===Xg)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function id(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Py(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fo:return ro(n.children,i,s,e);case Qg:o=8,i|=8;break;case tm:return t=ir(12,n,e,i|2),t.elementType=tm,t.lanes=s,t;case nm:return t=ir(13,n,e,i),t.elementType=nm,t.lanes=s,t;case rm:return t=ir(19,n,e,i),t.elementType=rm,t.lanes=s,t;case xT:return Uh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vT:o=10;break e;case wT:o=9;break e;case Yg:o=11;break e;case Xg:o=14;break e;case Oi:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=ir(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ro(t,e,n,r){return t=ir(7,t,r,e),t.lanes=n,t}function Uh(t,e,n,r){return t=ir(22,t,r,e),t.elementType=xT,t.lanes=n,t.stateNode={isHidden:!1},t}function yp(t,e,n){return t=ir(6,t,null,e),t.lanes=n,t}function vp(t,e,n){return e=ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jf(0),this.expirationTimes=Jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dy(t,e,n,r,i,s,o,a,l){return t=new nP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ir(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},my(s),t}function rP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dS(t){if(!t)return ys;t=t._reactInternals;e:{if(xo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(An(n))return dE(t,n,e)}return e}function hS(t,e,n,r,i,s,o,a,l){return t=Dy(n,r,!0,t,i,s,o,a,l),t.context=dS(null),n=t.current,r=yn(),i=as(n),s=ui(r,i),s.callback=e??null,ss(n,s,i),t.current.lanes=i,Nc(t,i,r),Rn(t,r),t}function zh(t,e,n,r){var i=e.current,s=yn(),o=as(i);return n=dS(n),e.context===null?e.context=n:e.pendingContext=n,e=ui(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(i,e,o),t!==null&&(Er(t,i,o,s),Ju(t,i,o)),o}function $d(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ny(t,e){iw(t,e),(t=t.alternate)&&iw(t,e)}function iP(){return null}var fS=typeof reportError=="function"?reportError:function(t){console.error(t)};function jy(t){this._internalRoot=t}Bh.prototype.render=jy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));zh(t,e,null,null)};Bh.prototype.unmount=jy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ho(function(){zh(null,t,null,null)}),e[mi]=null}};function Bh(t){this._internalRoot=t}Bh.prototype.unstable_scheduleHydration=function(t){if(t){var e=WT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zi.length&&e!==0&&e<zi[n].priority;n++);zi.splice(n,0,t),n===0&&HT(t)}};function Ly(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sw(){}function sP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=$d(o);s.call(d)}}var o=hS(e,r,t,0,null,!1,!1,"",sw);return t._reactRootContainer=o,t[mi]=o.current,ac(t.nodeType===8?t.parentNode:t),ho(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=$d(l);a.call(d)}}var l=Dy(t,0,!1,null,null,!1,!1,"",sw);return t._reactRootContainer=l,t[mi]=l.current,ac(t.nodeType===8?t.parentNode:t),ho(function(){zh(e,l,n,r)}),l}function Wh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$d(o);a.call(l)}}zh(e,o,t,i)}else o=sP(n,e,t,i,r);return $d(o)}BT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bl(e.pendingLanes);n!==0&&(ey(e,n|1),Rn(e,Tt()),!(Oe&6)&&(Aa=Tt()+500,As()))}break;case 13:ho(function(){var r=gi(t,1);if(r!==null){var i=yn();Er(r,t,1,i)}}),Ny(t,1)}};ty=function(t){if(t.tag===13){var e=gi(t,134217728);if(e!==null){var n=yn();Er(e,t,134217728,n)}Ny(t,134217728)}};$T=function(t){if(t.tag===13){var e=as(t),n=gi(t,e);if(n!==null){var r=yn();Er(n,t,e,r)}Ny(t,e)}};WT=function(){return ze};qT=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};fm=function(t,e,n){switch(e){case"input":if(om(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jh(r);if(!i)throw Error(K(90));TT(r),om(r,i)}}}break;case"textarea":ST(t,n);break;case"select":e=n.value,e!=null&&ia(t,!!n.multiple,e,!1)}};PT=ky;DT=ho;var oP={usingClientEntryPoint:!1,Events:[Lc,$o,jh,AT,RT,ky]},vl={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aP={bundleType:vl.bundleType,version:vl.version,rendererPackageName:vl.rendererPackageName,rendererConfig:vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LT(t),t===null?null:t.stateNode},findFiberByHostInstance:vl.findFiberByHostInstance||iP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Rh=Ru.inject(aP),Br=Ru}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oP;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ly(e))throw Error(K(200));return rP(t,e,null,n)};qn.createRoot=function(t,e){if(!Ly(t))throw Error(K(299));var n=!1,r="",i=fS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Dy(t,1,!1,null,null,n,!1,r,i),t[mi]=e.current,ac(t.nodeType===8?t.parentNode:t),new jy(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=LT(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return ho(t)};qn.hydrate=function(t,e,n){if(!$h(e))throw Error(K(200));return Wh(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!Ly(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hS(e,null,t,1,n??null,i,!1,s,o),t[mi]=e.current,ac(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bh(e)};qn.render=function(t,e,n){if(!$h(e))throw Error(K(200));return Wh(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!$h(t))throw Error(K(40));return t._reactRootContainer?(ho(function(){Wh(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};qn.unstable_batchedUpdates=ky;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$h(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Wh(t,e,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function pS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pS)}catch(t){console.error(t)}}pS(),pT.exports=qn;var lP=pT.exports,ow=lP;Zp.createRoot=ow.createRoot,Zp.hydrateRoot=ow.hydrateRoot;const mS=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),qh=R.createContext({}),Hh=R.createContext(null),Gh=typeof document<"u",My=Gh?R.useLayoutEffect:R.useEffect,gS=R.createContext({strict:!1}),Vy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),cP="framerAppearId",yS="data-"+Vy(cP);function uP(t,e,n,r){const{visualElement:i}=R.useContext(qh),s=R.useContext(gS),o=R.useContext(Hh),a=R.useContext(mS).reducedMotion,l=R.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const d=l.current;R.useInsertionEffect(()=>{d&&d.update(n,o)});const h=R.useRef(!!(n[yS]&&!window.HandoffComplete));return My(()=>{d&&(d.render(),h.current&&d.animationState&&d.animationState.animateChanges())}),R.useEffect(()=>{d&&(d.updateFeatures(),!h.current&&d.animationState&&d.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),d}function Yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dP(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yo(n)&&(n.current=r))},[e])}function gc(t){return typeof t=="string"||Array.isArray(t)}function Kh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Oy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fy=["initial",...Oy];function Qh(t){return Kh(t.animate)||Fy.some(e=>gc(t[e]))}function vS(t){return!!(Qh(t)||t.variants)}function hP(t,e){if(Qh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gc(n)?n:void 0,animate:gc(r)?r:void 0}}return t.inherit!==!1?e:{}}function fP(t){const{initial:e,animate:n}=hP(t,R.useContext(qh));return R.useMemo(()=>({initial:e,animate:n}),[aw(e),aw(n)])}function aw(t){return Array.isArray(t)?t.join(" "):t}const lw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yc={};for(const t in lw)yc[t]={isEnabled:e=>lw[t].some(n=>!!e[n])};function pP(t){for(const e in t)yc[e]={...yc[e],...t[e]}}const Uy=R.createContext({}),wS=R.createContext({}),mP=Symbol.for("motionComponentSymbol");function gP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&pP(t);function s(a,l){let d;const h={...R.useContext(mS),...a,layoutId:yP(a)},{isStatic:f}=h,p=fP(a),g=r(a,f);if(!f&&Gh){p.visualElement=uP(i,g,h,e);const w=R.useContext(wS),_=R.useContext(gS).strict;p.visualElement&&(d=p.visualElement.loadFeatures(h,_,t,w))}return R.createElement(qh.Provider,{value:p},d&&p.visualElement?R.createElement(d,{visualElement:p.visualElement,...h}):null,n(i,a,dP(g,p.visualElement,l),g,f,p.visualElement))}const o=R.forwardRef(s);return o[mP]=i,o}function yP({layoutId:t}){const e=R.useContext(Uy).id;return e&&t!==void 0?e+"-"+t:t}function vP(t){function e(r,i={}){return gP(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const wP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zy(t){return typeof t!="string"||t.includes("-")?!1:!!(wP.indexOf(t)>-1||/[A-Z]/.test(t))}const Wd={};function xP(t){Object.assign(Wd,t)}const Vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_o=new Set(Vc);function xS(t,{layout:e,layoutId:n}){return _o.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wd[t]||t==="opacity")}const Pn=t=>!!(t&&t.getVelocity),_P={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TP=Vc.length;function EP(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<TP;o++){const a=Vc[o];if(t[a]!==void 0){const l=_P[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const _S=t=>e=>typeof e=="string"&&e.startsWith(t),TS=_S("--"),Hm=_S("var(--"),SP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,bP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vs=(t,e,n)=>Math.min(Math.max(n,t),e),To={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zl={...To,transform:t=>vs(0,1,t)},Pu={...To,default:1},Bl=t=>Math.round(t*1e5)/1e5,Yh=/(-)?([\d]*\.?[\d])+/g,ES=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,IP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Oc(t){return typeof t=="string"}const Fc=t=>({test:e=>Oc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vi=Fc("deg"),Wr=Fc("%"),_e=Fc("px"),CP=Fc("vh"),kP=Fc("vw"),cw={...Wr,parse:t=>Wr.parse(t)/100,transform:t=>Wr.transform(t*100)},uw={...To,transform:Math.round},SS={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,size:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,rotate:Vi,rotateX:Vi,rotateY:Vi,rotateZ:Vi,scale:Pu,scaleX:Pu,scaleY:Pu,scaleZ:Pu,skew:Vi,skewX:Vi,skewY:Vi,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:zl,originX:cw,originY:cw,originZ:_e,zIndex:uw,fillOpacity:zl,strokeOpacity:zl,numOctaves:uw};function By(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,d=!1,h=!0;for(const f in e){const p=e[f];if(TS(f)){s[f]=p;continue}const g=SS[f],w=bP(p,g);if(_o.has(f)){if(l=!0,o[f]=w,!h)continue;p!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(d=!0,a[f]=w):i[f]=w}if(e.transform||(l||r?i.transform=EP(t.transform,n,h,r):i.transform&&(i.transform="none")),d){const{originX:f="50%",originY:p="50%",originZ:g=0}=a;i.transformOrigin=`${f} ${p} ${g}`}}const $y=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bS(t,e,n){for(const r in e)!Pn(e[r])&&!xS(r,n)&&(t[r]=e[r])}function AP({transformTemplate:t},e,n){return R.useMemo(()=>{const r=$y();return By(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function RP(t,e,n){const r=t.style||{},i={};return bS(i,r,t),Object.assign(i,AP(t,e,n)),t.transformValues?t.transformValues(i):i}function PP(t,e,n){const r={},i=RP(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const DP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||DP.has(t)}let IS=t=>!qd(t);function NP(t){t&&(IS=e=>e.startsWith("on")?!qd(e):t(e))}try{NP(require("@emotion/is-prop-valid").default)}catch{}function jP(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(IS(i)||n===!0&&qd(i)||!e&&!qd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function dw(t,e,n){return typeof t=="string"?t:_e.transform(e+n*t)}function LP(t,e,n){const r=dw(e,t.x,t.width),i=dw(n,t.y,t.height);return`${r} ${i}`}const MP={offset:"stroke-dashoffset",array:"stroke-dasharray"},VP={offset:"strokeDashoffset",array:"strokeDasharray"};function OP(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?MP:VP;t[s.offset]=_e.transform(-r);const o=_e.transform(e),a=_e.transform(n);t[s.array]=`${o} ${a}`}function Wy(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...d},h,f,p){if(By(t,d,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:w,dimensions:_}=t;g.transform&&(_&&(w.transform=g.transform),delete g.transform),_&&(i!==void 0||s!==void 0||w.transform)&&(w.transformOrigin=LP(_,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&OP(g,o,a,l,!1)}const CS=()=>({...$y(),attrs:{}}),qy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function FP(t,e,n,r){const i=R.useMemo(()=>{const s=CS();return Wy(s,e,{enableHardwareAcceleration:!1},qy(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};bS(s,t.style,t),i.style={...s,...i.style}}return i}function UP(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(zy(n)?FP:PP)(r,s,o,n),h={...jP(r,typeof n=="string",t),...l,ref:i},{children:f}=r,p=R.useMemo(()=>Pn(f)?f.get():f,[f]);return R.createElement(n,{...h,children:p})}}function kS(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const AS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RS(t,e,n,r){kS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(AS.has(i)?i:Vy(i),e.attrs[i])}function Hy(t,e){const{style:n}=t,r={};for(const i in n)(Pn(n[i])||e.style&&Pn(e.style[i])||xS(i,t))&&(r[i]=n[i]);return r}function PS(t,e){const n=Hy(t,e);for(const r in t)if(Pn(t[r])||Pn(e[r])){const i=Vc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Gy(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function DS(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const Hd=t=>Array.isArray(t),zP=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),BP=t=>Hd(t)?t[t.length-1]||0:t;function sd(t){const e=Pn(t)?t.get():t;return zP(e)?e.toValue():e}function $P({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:WP(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const NS=t=>(e,n)=>{const r=R.useContext(qh),i=R.useContext(Hh),s=()=>$P(t,e,r,i);return n?s():DS(s)};function WP(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=sd(s[p]);let{initial:o,animate:a}=t;const l=Qh(t),d=vS(t);e&&d&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!Kh(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const w=Gy(t,g);if(!w)return;const{transitionEnd:_,transition:P,...E}=w;for(const v in E){let x=E[v];if(Array.isArray(x)){const j=h?x.length-1:0;x=x[j]}x!==null&&(i[v]=x)}for(const v in _)i[v]=_[v]}),i}const mt=t=>t;class hw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function qP(t){let e=new hw,n=new hw,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,d=!1,h=!1)=>{const f=h&&i,p=f?e:n;return d&&o.add(l),p.add(l)&&f&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let d=0;d<r;d++){const h=e.order[d];h(l),o.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const Du=["prepare","read","update","preRender","render","postRender"],HP=40;function GP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Du.reduce((f,p)=>(f[p]=qP(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,HP),1),i.timestamp=f,i.isProcessing=!0,Du.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Du.reduce((f,p)=>{const g=s[p];return f[p]=(w,_=!1,P=!1)=>(n||l(),g.schedule(w,_,P)),f},{}),cancel:f=>Du.forEach(p=>s[p].cancel(f)),state:i,steps:s}}const{schedule:Ye,cancel:vi,state:on,steps:wp}=GP(typeof requestAnimationFrame<"u"?requestAnimationFrame:mt,!0),KP={useVisualState:NS({scrapeMotionValuesFromProps:PS,createRenderState:CS,onMount:(t,e,{renderState:n,latestValues:r})=>{Ye.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ye.render(()=>{Wy(n,r,{enableHardwareAcceleration:!1},qy(e.tagName),t.transformTemplate),RS(e,n)})}})},QP={useVisualState:NS({scrapeMotionValuesFromProps:Hy,createRenderState:$y})};function YP(t,{forwardMotionProps:e=!1},n,r){return{...zy(t)?KP:QP,preloadedFeatures:n,useRender:UP(e),createVisualElement:r,Component:t}}function ai(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const jS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Xh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const XP=t=>e=>jS(e)&&t(e,Xh(e));function di(t,e,n,r){return ai(t,e,XP(n),r)}const JP=(t,e)=>n=>e(t(n)),cs=(...t)=>t.reduce(JP);function LS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const fw=LS("dragHorizontal"),pw=LS("dragVertical");function MS(t){let e=!1;if(t==="y")e=pw();else if(t==="x")e=fw();else{const n=fw(),r=pw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function VS(){const t=MS(!0);return t?(t(),!1):!0}class Rs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function mw(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||VS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ye.update(()=>a[r](s,o))};return di(t.current,n,i,{passive:!t.getProps()[r]})}class ZP extends Rs{mount(){this.unmount=cs(mw(this.node,!0),mw(this.node,!1))}unmount(){}}class e5 extends Rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cs(ai(this.node.current,"focus",()=>this.onFocus()),ai(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const OS=(t,e)=>e?t===e?!0:OS(t,e.parentElement):!1;function xp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Xh(n))}class t5 extends Rs{constructor(){super(...arguments),this.removeStartListeners=mt,this.removeEndListeners=mt,this.removeAccessibleListeners=mt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=di(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Ye.update(()=>{!f&&!OS(this.node.current,a.target)?h&&h(a,l):d&&d(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=di(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cs(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||xp("up",(l,d)=>{const{onTap:h}=this.node.getProps();h&&Ye.update(()=>h(l,d))})};this.removeEndListeners(),this.removeEndListeners=ai(this.node.current,"keyup",o),xp("down",(a,l)=>{this.startPress(a,l)})},n=ai(this.node.current,"keydown",e),r=()=>{this.isPressing&&xp("cancel",(s,o)=>this.cancelPress(s,o))},i=ai(this.node.current,"blur",r);this.removeAccessibleListeners=cs(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ye.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!VS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ye.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=di(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ai(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cs(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Gm=new WeakMap,_p=new WeakMap,n5=t=>{const e=Gm.get(t.target);e&&e(t)},r5=t=>{t.forEach(n5)};function i5({root:t,...e}){const n=t||document;_p.has(n)||_p.set(n,{});const r=_p.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(r5,{root:t,...e})),r[i]}function s5(t,e,n){const r=i5(e);return Gm.set(t,n),r.observe(t),()=>{Gm.delete(t),r.unobserve(t)}}const o5={some:0,all:1};class a5 extends Rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:o5[i]},a=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=d?h:f;p&&p(l)};return s5(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(l5(e,n))&&this.startObserver()}unmount(){}}function l5({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const c5={inView:{Feature:a5},tap:{Feature:t5},focus:{Feature:e5},hover:{Feature:ZP}};function FS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function u5(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function d5(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Jh(t,e,n){const r=t.getProps();return Gy(r,e,n!==void 0?n:r.custom,u5(t),d5(t))}let h5=mt,Ky=mt;const us=t=>t*1e3,hi=t=>t/1e3,f5={current:!1},US=t=>Array.isArray(t)&&typeof t[0]=="number";function zS(t){return!!(!t||typeof t=="string"&&BS[t]||US(t)||Array.isArray(t)&&t.every(zS))}const Cl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,BS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cl([0,.65,.55,1]),circOut:Cl([.55,0,1,.45]),backIn:Cl([.31,.01,.66,-.59]),backOut:Cl([.33,1.53,.69,.99])};function $S(t){if(t)return US(t)?Cl(t):Array.isArray(t)?t.map($S):BS[t]}function p5(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const d={[e]:n};l&&(d.offset=l);const h=$S(a);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function m5(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const WS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,g5=1e-7,y5=12;function v5(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=WS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>g5&&++a<y5);return o}function Uc(t,e,n,r){if(t===e&&n===r)return mt;const i=s=>v5(s,0,1,t,n);return s=>s===0||s===1?s:WS(i(s),e,r)}const w5=Uc(.42,0,1,1),x5=Uc(0,0,.58,1),qS=Uc(.42,0,.58,1),_5=t=>Array.isArray(t)&&typeof t[0]!="number",HS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,GS=t=>e=>1-t(1-e),Qy=t=>1-Math.sin(Math.acos(t)),KS=GS(Qy),T5=HS(Qy),QS=Uc(.33,1.53,.69,.99),Yy=GS(QS),E5=HS(Yy),S5=t=>(t*=2)<1?.5*Yy(t):.5*(2-Math.pow(2,-10*(t-1))),b5={linear:mt,easeIn:w5,easeInOut:qS,easeOut:x5,circIn:Qy,circInOut:T5,circOut:KS,backIn:Yy,backInOut:E5,backOut:QS,anticipate:S5},gw=t=>{if(Array.isArray(t)){Ky(t.length===4);const[e,n,r,i]=t;return Uc(e,n,r,i)}else if(typeof t=="string")return b5[t];return t},Xy=(t,e)=>n=>!!(Oc(n)&&IP.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),YS=(t,e,n)=>r=>{if(!Oc(r))return r;const[i,s,o,a]=r.match(Yh);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},I5=t=>vs(0,255,t),Tp={...To,transform:t=>Math.round(I5(t))},Js={test:Xy("rgb","red"),parse:YS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Tp.transform(t)+", "+Tp.transform(e)+", "+Tp.transform(n)+", "+Bl(zl.transform(r))+")"};function C5(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Km={test:Xy("#"),parse:C5,transform:Js.transform},Xo={test:Xy("hsl","hue"),parse:YS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wr.transform(Bl(e))+", "+Wr.transform(Bl(n))+", "+Bl(zl.transform(r))+")"},fn={test:t=>Js.test(t)||Km.test(t)||Xo.test(t),parse:t=>Js.test(t)?Js.parse(t):Xo.test(t)?Xo.parse(t):Km.parse(t),transform:t=>Oc(t)?t:t.hasOwnProperty("red")?Js.transform(t):Xo.transform(t)},lt=(t,e,n)=>-n*t+n*e+t;function Ep(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function k5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Ep(l,a,t+1/3),s=Ep(l,a,t),o=Ep(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Sp=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},A5=[Km,Js,Xo],R5=t=>A5.find(e=>e.test(t));function yw(t){const e=R5(t);let n=e.parse(t);return e===Xo&&(n=k5(n)),n}const XS=(t,e)=>{const n=yw(t),r=yw(e),i={...n};return s=>(i.red=Sp(n.red,r.red,s),i.green=Sp(n.green,r.green,s),i.blue=Sp(n.blue,r.blue,s),i.alpha=lt(n.alpha,r.alpha,s),Js.transform(i))};function P5(t){var e,n;return isNaN(t)&&Oc(t)&&(((e=t.match(Yh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ES))===null||n===void 0?void 0:n.length)||0)>0}const JS={regex:SP,countKey:"Vars",token:"${v}",parse:mt},ZS={regex:ES,countKey:"Colors",token:"${c}",parse:fn.parse},eb={regex:Yh,countKey:"Numbers",token:"${n}",parse:To.parse};function bp(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Gd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&bp(n,JS),bp(n,ZS),bp(n,eb),n}function tb(t){return Gd(t).values}function nb(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Gd(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(JS.token,o[l]):l<r+n?a=a.replace(ZS.token,fn.transform(o[l])):a=a.replace(eb.token,Bl(o[l]));return a}}const D5=t=>typeof t=="number"?0:t;function N5(t){const e=tb(t);return nb(t)(e.map(D5))}const ws={test:P5,parse:tb,createTransformer:nb,getAnimatableNone:N5},rb=(t,e)=>n=>`${n>0?e:t}`;function ib(t,e){return typeof t=="number"?n=>lt(t,e,n):fn.test(t)?XS(t,e):t.startsWith("var(")?rb(t,e):ob(t,e)}const sb=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>ib(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},j5=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ib(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},ob=(t,e)=>{const n=ws.createTransformer(e),r=Gd(t),i=Gd(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?cs(sb(r.values,i.values),n):rb(t,e)},vc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},vw=(t,e)=>n=>lt(t,e,n);function L5(t){return typeof t=="number"?vw:typeof t=="string"?fn.test(t)?XS:ob:Array.isArray(t)?sb:typeof t=="object"?j5:vw}function M5(t,e,n){const r=[],i=n||L5(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||mt:e;a=cs(l,a)}r.push(a)}return r}function ab(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Ky(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=M5(e,r,i),a=o.length,l=d=>{let h=0;if(a>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=vc(t[h],t[h+1],d);return o[h](f)};return n?d=>l(vs(t[0],t[s-1],d)):l}function V5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=vc(0,e,r);t.push(lt(n,1,i))}}function O5(t){const e=[0];return V5(e,t.length-1),e}function F5(t,e){return t.map(n=>n*e)}function U5(t,e){return t.map(()=>e||qS).splice(0,t.length-1)}function Kd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=_5(r)?r.map(gw):gw(r),s={done:!1,value:e[0]},o=F5(n&&n.length===e.length?n:O5(e),t),a=ab(o,e,{ease:Array.isArray(i)?i:U5(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function lb(t,e){return e?t*(1e3/e):0}const z5=5;function cb(t,e,n){const r=Math.max(e-z5,0);return lb(n-t(r),e-r)}const Ip=.001,B5=.01,ww=10,$5=.05,W5=1;function q5({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;h5(t<=us(ww));let o=1-e;o=vs($5,W5,o),t=vs(B5,ww,hi(t)),o<1?(i=d=>{const h=d*o,f=h*t,p=h-n,g=Qm(d,o),w=Math.exp(-f);return Ip-p/g*w},s=d=>{const f=d*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(d,2)*t,w=Math.exp(-f),_=Qm(Math.pow(d,2),o);return(-i(d)+Ip>0?-1:1)*((p-g)*w)/_}):(i=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-Ip+h*f},s=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const a=5/t,l=G5(i,s,a);if(t=us(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const d=Math.pow(l,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const H5=12;function G5(t,e,n){let r=n;for(let i=1;i<H5;i++)r=r-t(r)/e(r);return r}function Qm(t,e){return t*Math.sqrt(1-e*e)}const K5=["duration","bounce"],Q5=["stiffness","damping","mass"];function xw(t,e){return e.some(n=>t[n]!==void 0)}function Y5(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!xw(t,Q5)&&xw(t,K5)){const n=q5(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function ub({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=Y5({...r,velocity:-hi(r.velocity||0)}),g=f||0,w=l/(2*Math.sqrt(a*d)),_=s-i,P=hi(Math.sqrt(a/d)),E=Math.abs(_)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let v;if(w<1){const x=Qm(P,w);v=j=>{const L=Math.exp(-w*P*j);return s-L*((g+w*P*_)/x*Math.sin(x*j)+_*Math.cos(x*j))}}else if(w===1)v=x=>s-Math.exp(-P*x)*(_+(g+P*_)*x);else{const x=P*Math.sqrt(w*w-1);v=j=>{const L=Math.exp(-w*P*j),O=Math.min(x*j,300);return s-L*((g+w*P*_)*Math.sinh(O)+x*_*Math.cosh(O))/x}}return{calculatedDuration:p&&h||null,next:x=>{const j=v(x);if(p)o.done=x>=h;else{let L=g;x!==0&&(w<1?L=cb(v,x,j):L=0);const O=Math.abs(L)<=n,S=Math.abs(s-j)<=e;o.done=O&&S}return o.value=o.done?s:j,o}}}function _w({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:d=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=T=>a!==void 0&&T<a||l!==void 0&&T>l,w=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let _=n*e;const P=f+_,E=o===void 0?P:o(P);E!==P&&(_=E-f);const v=T=>-_*Math.exp(-T/r),x=T=>E+v(T),j=T=>{const C=v(T),A=x(T);p.done=Math.abs(C)<=d,p.value=p.done?E:A};let L,O;const S=T=>{g(p.value)&&(L=T,O=ub({keyframes:[p.value,w(p.value)],velocity:cb(x,T,p.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return S(0),{calculatedDuration:null,next:T=>{let C=!1;return!O&&L===void 0&&(C=!0,j(T),S(T)),L!==void 0&&T>L?O.next(T-L):(!C&&j(T),p)}}}const X5=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ye.update(e,!0),stop:()=>vi(e),now:()=>on.isProcessing?on.timestamp:performance.now()}},Tw=2e4;function Ew(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Tw;)e+=n,r=t.next(e);return e>=Tw?1/0:e}const J5={decay:_w,inertia:_w,tween:Kd,keyframes:Kd,spring:ub};function Qd({autoplay:t=!0,delay:e=0,driver:n=X5,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:d,onComplete:h,onUpdate:f,...p}){let g=1,w=!1,_,P;const E=()=>{P=new Promise(D=>{_=D})};E();let v;const x=J5[i]||Kd;let j;x!==Kd&&typeof r[0]!="number"&&(j=ab([0,100],r,{clamp:!1}),r=[0,100]);const L=x({...p,keyframes:r});let O;a==="mirror"&&(O=x({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let S="idle",T=null,C=null,A=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=Ew(L));const{calculatedDuration:k}=L;let N=1/0,I=1/0;k!==null&&(N=k+o,I=N*(s+1)-o);let Y=0;const me=D=>{if(C===null)return;g>0&&(C=Math.min(C,D)),g<0&&(C=Math.min(D-I/g,C)),T!==null?Y=T:Y=Math.round(D-C)*g;const q=Y-e*(g>=0?1:-1),Q=g>=0?q<0:q>I;Y=Math.max(q,0),S==="finished"&&T===null&&(Y=I);let J=Y,re=L;if(s){const ye=Math.min(Y,I)/N;let Se=Math.floor(ye),ge=ye%1;!ge&&ye>=1&&(ge=1),ge===1&&Se--,Se=Math.min(Se,s+1),!!(Se%2)&&(a==="reverse"?(ge=1-ge,o&&(ge-=o/N)):a==="mirror"&&(re=O)),J=vs(0,1,ge)*N}const Z=Q?{done:!1,value:r[0]}:re.next(J);j&&(Z.value=j(Z.value));let{done:G}=Z;!Q&&k!==null&&(G=g>=0?Y>=I:Y<=0);const de=T===null&&(S==="finished"||S==="running"&&G);return f&&f(Z.value),de&&z(),Z},oe=()=>{v&&v.stop(),v=void 0},X=()=>{S="idle",oe(),_(),E(),C=A=null},z=()=>{S="finished",h&&h(),oe(),_()},H=()=>{if(w)return;v||(v=n(me));const D=v.now();l&&l(),T!==null?C=D-T:(!C||S==="finished")&&(C=D),S==="finished"&&E(),A=C,T=null,S="running",v.start()};t&&H();const M={then(D,q){return P.then(D,q)},get time(){return hi(Y)},set time(D){D=us(D),Y=D,T!==null||!v||g===0?T=D:C=v.now()-D/g},get duration(){const D=L.calculatedDuration===null?Ew(L):L.calculatedDuration;return hi(D)},get speed(){return g},set speed(D){D===g||!v||(g=D,M.time=hi(Y))},get state(){return S},play:H,pause:()=>{S="paused",T=Y},stop:()=>{w=!0,S!=="idle"&&(S="idle",d&&d(),X())},cancel:()=>{A!==null&&me(A),X()},complete:()=>{S="finished"},sample:D=>(C=0,me(D))};return M}function Z5(t){let e;return()=>(e===void 0&&(e=t()),e)}const e4=Z5(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),t4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Nu=10,n4=2e4,r4=(t,e)=>e.type==="spring"||t==="backgroundColor"||!zS(e.ease);function i4(t,e,{onUpdate:n,onComplete:r,...i}){if(!(e4()&&t4.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,d=!1;const h=()=>{l=new Promise(x=>{a=x})};h();let{keyframes:f,duration:p=300,ease:g,times:w}=i;if(r4(e,i)){const x=Qd({...i,repeat:0,delay:0});let j={done:!1,value:f[0]};const L=[];let O=0;for(;!j.done&&O<n4;)j=x.sample(O),L.push(j.value),O+=Nu;w=void 0,f=L,p=O-Nu,g="linear"}const _=p5(t.owner.current,e,f,{...i,duration:p,ease:g,times:w}),P=()=>{d=!1,_.cancel()},E=()=>{d=!0,Ye.update(P),a(),h()};return _.onfinish=()=>{d||(t.set(m5(f,i)),r&&r(),E())},{then(x,j){return l.then(x,j)},attachTimeline(x){return _.timeline=x,_.onfinish=null,mt},get time(){return hi(_.currentTime||0)},set time(x){_.currentTime=us(x)},get speed(){return _.playbackRate},set speed(x){_.playbackRate=x},get duration(){return hi(p)},play:()=>{o||(_.play(),vi(P))},pause:()=>_.pause(),stop:()=>{if(o=!0,_.playState==="idle")return;const{currentTime:x}=_;if(x){const j=Qd({...i,autoplay:!1});t.setWithVelocity(j.sample(x-Nu).value,j.sample(x).value,Nu)}E()},complete:()=>{d||_.finish()},cancel:E}}function s4({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:mt,pause:mt,stop:mt,then:s=>(s(),Promise.resolve()),cancel:mt,complete:mt});return e?Qd({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const o4={type:"spring",stiffness:500,damping:25,restSpeed:10},a4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l4={type:"keyframes",duration:.8},c4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u4=(t,{keyframes:e})=>e.length>2?l4:_o.has(t)?t.startsWith("scale")?a4(e[1]):o4:c4,Ym=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ws.test(e)||e==="0")&&!e.startsWith("url(")),d4=new Set(["brightness","contrast","saturate","opacity"]);function h4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Yh)||[];if(!r)return t;const i=n.replace(r,"");let s=d4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const f4=/([a-z-]*)\(.*?\)/g,Xm={...ws,getAnimatableNone:t=>{const e=t.match(f4);return e?e.map(h4).join(" "):t}},p4={...SS,color:fn,backgroundColor:fn,outlineColor:fn,fill:fn,stroke:fn,borderColor:fn,borderTopColor:fn,borderRightColor:fn,borderBottomColor:fn,borderLeftColor:fn,filter:Xm,WebkitFilter:Xm},Jy=t=>p4[t];function db(t,e){let n=Jy(t);return n!==Xm&&(n=ws),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hb=t=>/^0[^.\s]+$/.test(t);function m4(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||hb(t)}function g4(t,e,n,r){const i=Ym(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let d=0;d<s.length;d++)s[d]===null&&(s[d]=d===0?o:s[d-1]),m4(s[d])&&l.push(d),typeof s[d]=="string"&&s[d]!=="none"&&s[d]!=="0"&&(a=s[d]);if(i&&l.length&&a)for(let d=0;d<l.length;d++){const h=l[d];s[h]=db(e,a)}return s}function y4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:d,...h}){return!!Object.keys(h).length}function Zy(t,e){return t[e]||t.default||t}const v4={skipAnimations:!1},e0=(t,e,n,r={})=>i=>{const s=Zy(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-us(o);const l=g4(e,t,n,s),d=l[0],h=l[l.length-1],f=Ym(t,d),p=Ym(t,h);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:w=>{e.set(w),s.onUpdate&&s.onUpdate(w)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(y4(s)||(g={...g,...u4(t,g)}),g.duration&&(g.duration=us(g.duration)),g.repeatDelay&&(g.repeatDelay=us(g.repeatDelay)),!f||!p||f5.current||s.type===!1||v4.skipAnimations)return s4(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const w=i4(e,t,g);if(w)return w}return Qd(g)};function Yd(t){return!!(Pn(t)&&t.add)}const fb=t=>/^\-?\d*\.?\d+$/.test(t);function t0(t,e){t.indexOf(e)===-1&&t.push(e)}function n0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class r0{constructor(){this.subscriptions=[]}add(e){return t0(this.subscriptions,e),()=>n0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const w4=t=>!isNaN(parseFloat(t));class x4{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=on;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=w4(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new r0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?lb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ra(t,e){return new x4(t,e)}const pb=t=>e=>e.test(t),_4={test:t=>t==="auto",parse:t=>t},mb=[To,_e,Wr,Vi,kP,CP,_4],wl=t=>mb.find(pb(t)),T4=[...mb,fn,ws],E4=t=>T4.find(pb(t));function S4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ra(n))}function b4(t,e){const n=Jh(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=BP(s[o]);S4(t,o,a)}}function I4(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],d=e[l];let h=null;Array.isArray(d)&&(h=d[0]),h===null&&(h=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(fb(h)||hb(h))?h=parseFloat(h):!E4(h)&&ws.test(d)&&(h=db(l,d)),t.addValue(l,Ra(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function C4(t,e){return e?(e[t]||e.default||e).from:void 0}function k4(t,e,n){const r={};for(const i in t){const s=C4(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function A4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function R4(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function gb(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f),g=a[f];if(!p||g===void 0||h&&A4(h,f))continue;const w={delay:n,elapsed:0,...Zy(s||{},f)};if(window.HandoffAppearAnimations){const E=t.getProps()[yS];if(E){const v=window.HandoffAppearAnimations(E,f,p,Ye);v!==null&&(w.elapsed=v,w.isHandoff=!0)}}let _=!w.isHandoff&&!R4(p,g);if(w.type==="spring"&&(p.getVelocity()||w.velocity)&&(_=!1),p.animation&&(_=!1),_)continue;p.start(e0(f,p,g,t.shouldReduceMotion&&_o.has(f)?{type:!1}:w));const P=p.animation;Yd(l)&&(l.add(f),P.then(()=>l.remove(f))),d.push(P)}return o&&Promise.all(d).then(()=>{o&&b4(t,o)}),d}function Jm(t,e,n={}){const r=Jh(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(gb(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return P4(t,e,d+l,h,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,d]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function P4(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(d=0)=>d*r:(d=0)=>a-d*r;return Array.from(t.variantChildren).sort(D4).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(Jm(d,e,{...s,delay:n+l(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function D4(t,e){return t.sortNodePosition(e)}function N4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Jm(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Jm(t,e,n);else{const i=typeof e=="function"?Jh(t,e,n.custom):e;r=Promise.all(gb(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const j4=[...Oy].reverse(),L4=Oy.length;function M4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>N4(t,n,r)))}function V4(t){let e=M4(t);const n=F4();let r=!0;const i=(l,d)=>{const h=Jh(t,d);if(h){const{transition:f,transitionEnd:p,...g}=h;l={...l,...g,...p}}return l};function s(l){e=l(t)}function o(l,d){const h=t.getProps(),f=t.getVariantContext(!0)||{},p=[],g=new Set;let w={},_=1/0;for(let E=0;E<L4;E++){const v=j4[E],x=n[v],j=h[v]!==void 0?h[v]:f[v],L=gc(j),O=v===d?x.isActive:null;O===!1&&(_=E);let S=j===f[v]&&j!==h[v]&&L;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...w},!x.isActive&&O===null||!j&&!x.prevProp||Kh(j)||typeof j=="boolean")continue;let C=O4(x.prevProp,j)||v===d&&x.isActive&&!S&&L||E>_&&L,A=!1;const k=Array.isArray(j)?j:[j];let N=k.reduce(i,{});O===!1&&(N={});const{prevResolvedValues:I={}}=x,Y={...I,...N},me=oe=>{C=!0,g.has(oe)&&(A=!0,g.delete(oe)),x.needsAnimating[oe]=!0};for(const oe in Y){const X=N[oe],z=I[oe];if(w.hasOwnProperty(oe))continue;let H=!1;Hd(X)&&Hd(z)?H=!FS(X,z):H=X!==z,H?X!==void 0?me(oe):g.add(oe):X!==void 0&&g.has(oe)?me(oe):x.protectedKeys[oe]=!0}x.prevProp=j,x.prevResolvedValues=N,x.isActive&&(w={...w,...N}),r&&t.blockInitialAnimation&&(C=!1),C&&(!S||A)&&p.push(...k.map(oe=>({animation:oe,options:{type:v,...l}})))}if(g.size){const E={};g.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(E[v]=x)}),p.push({animation:E})}let P=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(p):Promise.resolve()}function a(l,d,h){var f;if(n[l].isActive===d)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var w;return(w=g.animationState)===null||w===void 0?void 0:w.setActive(l,d)}),n[l].isActive=d;const p=o(h,l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function O4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FS(e,t):!1}function Fs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function F4(){return{animate:Fs(!0),whileInView:Fs(),whileHover:Fs(),whileTap:Fs(),whileDrag:Fs(),whileFocus:Fs(),exit:Fs()}}class U4 extends Rs{constructor(e){super(e),e.animationState||(e.animationState=V4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Kh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let z4=0;class B4 extends Rs{constructor(){super(...arguments),this.id=z4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $4={animation:{Feature:U4},exit:{Feature:B4}},Sw=(t,e)=>Math.abs(t-e);function W4(t,e){const n=Sw(t.x,e.x),r=Sw(t.y,e.y);return Math.sqrt(n**2+r**2)}class yb{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=kp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=W4(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:w}=f,{timestamp:_}=on;this.history.push({...w,timestamp:_});const{onStart:P,onMove:E}=this.handlers;p||(P&&P(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Cp(p,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=kp(f.type==="pointercancel"?this.lastMoveEventInfo:Cp(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,P),w&&w(f,P)},!jS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Xh(e),a=Cp(o,this.transformPagePoint),{point:l}=a,{timestamp:d}=on;this.history=[{...l,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,kp(a,this.history)),this.removeListeners=cs(di(this.contextWindow,"pointermove",this.handlePointerMove),di(this.contextWindow,"pointerup",this.handlePointerUp),di(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vi(this.updatePoint)}}function Cp(t,e){return e?{point:e(t.point)}:t}function bw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kp({point:t},e){return{point:t,delta:bw(t,vb(e)),offset:bw(t,q4(e)),velocity:H4(e,.1)}}function q4(t){return t[0]}function vb(t){return t[t.length-1]}function H4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vb(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>us(e)));)n--;if(!r)return{x:0,y:0};const s=hi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Wn(t){return t.max-t.min}function Zm(t,e=0,n=.01){return Math.abs(t-e)<=n}function Iw(t,e,n,r=.5){t.origin=r,t.originPoint=lt(e.min,e.max,t.origin),t.scale=Wn(n)/Wn(e),(Zm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=lt(n.min,n.max,t.origin)-t.originPoint,(Zm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function $l(t,e,n,r){Iw(t.x,e.x,n.x,r?r.originX:void 0),Iw(t.y,e.y,n.y,r?r.originY:void 0)}function Cw(t,e,n){t.min=n.min+e.min,t.max=t.min+Wn(e)}function G4(t,e,n){Cw(t.x,e.x,n.x),Cw(t.y,e.y,n.y)}function kw(t,e,n){t.min=e.min-n.min,t.max=t.min+Wn(e)}function Wl(t,e,n){kw(t.x,e.x,n.x),kw(t.y,e.y,n.y)}function K4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?lt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?lt(n,t,r.max):Math.min(t,n)),t}function Aw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Q4(t,{top:e,left:n,bottom:r,right:i}){return{x:Aw(t.x,n,i),y:Aw(t.y,e,r)}}function Rw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Y4(t,e){return{x:Rw(t.x,e.x),y:Rw(t.y,e.y)}}function X4(t,e){let n=.5;const r=Wn(t),i=Wn(e);return i>r?n=vc(e.min,e.max-r,t.min):r>i&&(n=vc(t.min,t.max-i,e.min)),vs(0,1,n)}function J4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const eg=.35;function Z4(t=eg){return t===!1?t=0:t===!0&&(t=eg),{x:Pw(t,"left","right"),y:Pw(t,"top","bottom")}}function Pw(t,e,n){return{min:Dw(t,e),max:Dw(t,n)}}function Dw(t,e){return typeof t=="number"?t:t[e]||0}const Nw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jo=()=>({x:Nw(),y:Nw()}),jw=()=>({min:0,max:0}),kt=()=>({x:jw(),y:jw()});function Zn(t){return[t("x"),t("y")]}function wb({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function eD({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tD(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ap(t){return t===void 0||t===1}function tg({scale:t,scaleX:e,scaleY:n}){return!Ap(t)||!Ap(e)||!Ap(n)}function Ws(t){return tg(t)||xb(t)||t.z||t.rotate||t.rotateX||t.rotateY}function xb(t){return Lw(t.x)||Lw(t.y)}function Lw(t){return t&&t!=="0%"}function Xd(t,e,n){const r=t-n,i=e*r;return n+i}function Mw(t,e,n,r,i){return i!==void 0&&(t=Xd(t,i,r)),Xd(t,n,r)+e}function ng(t,e=0,n=1,r,i){t.min=Mw(t.min,e,n,r,i),t.max=Mw(t.max,e,n,r,i)}function _b(t,{x:e,y:n}){ng(t.x,e.translate,e.scale,e.originPoint),ng(t.y,n.translate,n.scale,n.originPoint)}function nD(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Zo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,_b(t,o)),r&&Ws(s.latestValues)&&Zo(t,s.latestValues))}e.x=Vw(e.x),e.y=Vw(e.y)}function Vw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ui(t,e){t.min=t.min+e,t.max=t.max+e}function Ow(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=lt(t.min,t.max,s);ng(t,e[n],e[r],o,e.scale)}const rD=["x","scaleX","originX"],iD=["y","scaleY","originY"];function Zo(t,e){Ow(t.x,e,rD),Ow(t.y,e,iD)}function Tb(t,e){return wb(tD(t.getBoundingClientRect(),e))}function sD(t,e,n){const r=Tb(t,n),{scroll:i}=e;return i&&(Ui(r.x,i.offset.x),Ui(r.y,i.offset.y)),r}const Eb=({current:t})=>t?t.ownerDocument.defaultView:null,oD=new WeakMap;class aD{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xh(h,"page").point)},s=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:w}=this.getProps();if(p&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=MS(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(P=>{let E=this.getAxisMotionValue(P).get()||0;if(Wr.test(E)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[P];x&&(E=Wn(x)*(parseFloat(E)/100))}}this.originPoint[P]=E}),w&&Ye.update(()=>w(h,f),!1,!0);const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:w,onDrag:_}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:P}=f;if(g&&this.currentDirection===null){this.currentDirection=lD(P),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,P),this.updateAxis("y",f.point,P),this.visualElement.render(),_&&_(h,f)},a=(h,f)=>this.stop(h,f),l=()=>Zn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new yb(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Eb(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ye.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ju(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=K4(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Yo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Q4(i.layoutBox,n):this.constraints=!1,this.elastic=Z4(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Zn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=J4(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=sD(r,i.root,this.visualElement.getTransformPagePoint());let o=Y4(i.layout.layoutBox,s);if(n){const a=n(eD(o));this.hasMutatedConstraints=!!a,a&&(o=wb(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},d=Zn(h=>{if(!ju(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(e0(e,r,0,n))}stopAnimation(){Zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zn(n=>{const{drag:r}=this.getProps();if(!ju(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-lt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=X4({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(o=>{if(!ju(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:d}=this.constraints[o];a.set(lt(l,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;oD.set(this.visualElement,this);const e=this.visualElement.current,n=di(e,"pointerdown",l=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Yo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=ai(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(Zn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=eg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ju(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lD(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cD extends Rs{constructor(e){super(e),this.removeGroupControls=mt,this.removeListeners=mt,this.controls=new aD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Fw=t=>(e,n)=>{t&&Ye.update(()=>t(e,n))};class uD extends Rs{constructor(){super(...arguments),this.removePointerDownListener=mt}onPointerDown(e){this.session=new yb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Eb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Fw(e),onStart:Fw(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ye.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=di(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function dD(){const t=R.useContext(Hh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();return R.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const od={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Uw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(_e.test(t))t=parseFloat(t);else return t;const n=Uw(t,e.target.x),r=Uw(t,e.target.y);return`${n}% ${r}%`}},hD={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ws.parse(t);if(i.length>5)return r;const s=ws.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const d=lt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class fD extends Qr.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;xP(pD),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),od.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ye.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Sb(t){const[e,n]=dD(),r=R.useContext(Uy);return Qr.createElement(fD,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(wS),isPresent:e,safeToRemove:n})}const pD={borderRadius:{...xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xl,borderTopRightRadius:xl,borderBottomLeftRadius:xl,borderBottomRightRadius:xl,boxShadow:hD},bb=["TopLeft","TopRight","BottomLeft","BottomRight"],mD=bb.length,zw=t=>typeof t=="string"?parseFloat(t):t,Bw=t=>typeof t=="number"||_e.test(t);function gD(t,e,n,r,i,s){i?(t.opacity=lt(0,n.opacity!==void 0?n.opacity:1,yD(r)),t.opacityExit=lt(e.opacity!==void 0?e.opacity:1,0,vD(r))):s&&(t.opacity=lt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<mD;o++){const a=`border${bb[o]}Radius`;let l=$w(e,a),d=$w(n,a);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||Bw(l)===Bw(d)?(t[a]=Math.max(lt(zw(l),zw(d),r),0),(Wr.test(d)||Wr.test(l))&&(t[a]+="%")):t[a]=d}(e.rotate||n.rotate)&&(t.rotate=lt(e.rotate||0,n.rotate||0,r))}function $w(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const yD=Ib(0,.5,KS),vD=Ib(.5,.95,mt);function Ib(t,e,n){return r=>r<t?0:r>e?1:n(vc(t,e,r))}function Ww(t,e){t.min=e.min,t.max=e.max}function Yn(t,e){Ww(t.x,e.x),Ww(t.y,e.y)}function qw(t,e,n,r,i){return t-=e,t=Xd(t,1/n,r),i!==void 0&&(t=Xd(t,1/i,r)),t}function wD(t,e=0,n=1,r=.5,i,s=t,o=t){if(Wr.test(e)&&(e=parseFloat(e),e=lt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=lt(s.min,s.max,r);t===s&&(a-=e),t.min=qw(t.min,e,n,a,i),t.max=qw(t.max,e,n,a,i)}function Hw(t,e,[n,r,i],s,o){wD(t,e[n],e[r],e[i],e.scale,s,o)}const xD=["x","scaleX","originX"],_D=["y","scaleY","originY"];function Gw(t,e,n,r){Hw(t.x,e,xD,n?n.x:void 0,r?r.x:void 0),Hw(t.y,e,_D,n?n.y:void 0,r?r.y:void 0)}function Kw(t){return t.translate===0&&t.scale===1}function Cb(t){return Kw(t.x)&&Kw(t.y)}function TD(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function kb(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Qw(t){return Wn(t.x)/Wn(t.y)}class ED{constructor(){this.members=[]}add(e){t0(this.members,e),e.scheduleRender()}remove(e){if(n0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Yw(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:d,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const SD=(t,e)=>t.depth-e.depth;class bD{constructor(){this.children=[],this.isDirty=!1}add(e){t0(this.children,e),this.isDirty=!0}remove(e){n0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SD),this.isDirty=!1,this.children.forEach(e)}}function ID(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vi(r),t(s-e))};return Ye.read(r,!0),()=>vi(r)}function CD(t){window.MotionDebug&&window.MotionDebug.record(t)}function kD(t){return t instanceof SVGElement&&t.tagName!=="svg"}function AD(t,e,n){const r=Pn(t)?t:Ra(t);return r.start(e0("",r,e,n)),r.animation}const Xw=["","X","Y","Z"],RD={visibility:"hidden"},Jw=1e3;let PD=0;const qs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ab({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=PD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qs.totalNodes=qs.resolvedTargetDeltas=qs.recalculatedProjection=0,this.nodes.forEach(jD),this.nodes.forEach(FD),this.nodes.forEach(UD),this.nodes.forEach(LD),CD(qs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bD)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new r0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=kD(o),this.instance=o;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(d||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=ID(p,250),od.hasAnimatedSinceResize&&(od.hasAnimatedSinceResize=!1,this.nodes.forEach(ex))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||qD,{onLayoutAnimationStart:P,onLayoutAnimationComplete:E}=h.getProps(),v=!this.targetLayout||!kb(this.targetLayout,w)||g,x=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const j={...Zy(_,"layout"),onPlay:P,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else p||ex(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zD),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zw);return}this.isUpdating||this.nodes.forEach(VD),this.isUpdating=!1,this.nodes.forEach(OD),this.nodes.forEach(DD),this.nodes.forEach(ND),this.clearAllSnapshots();const a=performance.now();on.delta=vs(0,1e3/60,a-on.timestamp),on.timestamp=a,on.isProcessing=!0,wp.update.process(on),wp.preRender.process(on),wp.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(MD),this.sharedNodes.forEach(BD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Cb(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(a||Ws(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),HD(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return kt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ui(a.x,l.offset.x),Ui(a.y,l.offset.y)),a}removeElementScroll(o){const a=kt();Yn(a,o);for(let l=0;l<this.path.length;l++){const d=this.path[l],{scroll:h,options:f}=d;if(d!==this.root&&h&&f.layoutScroll){if(h.isRoot){Yn(a,o);const{scroll:p}=this.root;p&&(Ui(a.x,-p.offset.x),Ui(a.y,-p.offset.y))}Ui(a.x,h.offset.x),Ui(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=kt();Yn(l,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Zo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ws(h.latestValues)&&Zo(l,h.latestValues)}return Ws(this.latestValues)&&Zo(l,this.latestValues),l}removeTransform(o){const a=kt();Yn(a,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!Ws(d.latestValues))continue;tg(d.latestValues)&&d.updateSnapshot();const h=kt(),f=d.measurePageBox();Yn(h,f),Gw(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Ws(this.latestValues)&&Gw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Wl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),_b(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Wl(this.relativeTargetOrigin,this.target,g.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tg(this.parent.latestValues)||xb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===on.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Yn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;nD(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:w}=a;if(!w){this.projectionTransform&&(this.projectionDelta=Jo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jo(),this.projectionDeltaWithTransform=Jo());const _=this.projectionTransform;$l(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=Yw(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==p||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),qs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,d=l?l.latestValues:{},h={...this.latestValues},f=Jo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=kt(),g=l?l.source:void 0,w=this.layout?this.layout.source:void 0,_=g!==w,P=this.getStack(),E=!P||P.members.length<=1,v=!!(_&&!E&&this.options.crossfade===!0&&!this.path.some(WD));this.animationProgress=0;let x;this.mixTargetDelta=j=>{const L=j/1e3;tx(f.x,o.x,L),tx(f.y,o.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$D(this.relativeTarget,this.relativeTargetOrigin,p,L),x&&TD(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=kt()),Yn(x,this.relativeTarget)),_&&(this.animationValues=h,gD(h,d,this.latestValues,L,v,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{od.hasAnimatedSinceResize=!0,this.currentAnimation=AD(0,Jw,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:d,latestValues:h}=o;if(!(!a||!l||!d)){if(this!==o&&this.layout&&d&&Rb(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||kt();const f=Wn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Wn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Yn(a,l),Zo(a,h),$l(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ED),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const d={};for(let h=0;h<Xw.length;h++){const f="rotate"+Xw[h];l[f]&&(d[f]=l[f],o.setStaticValue(f,0))}o.render();for(const h in d)o.setStaticValue(h,d[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return RD;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=sd(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=sd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ws(this.latestValues)&&(_.transform=h?h({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=Yw(this.projectionDeltaWithTransform,this.treeScale,p),h&&(d.transform=h(p,d.transform));const{x:g,y:w}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,f.animationValues?d.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Wd){if(p[_]===void 0)continue;const{correct:P,applyTo:E}=Wd[_],v=d.transform==="none"?p[_]:P(p[_],f);if(E){const x=E.length;for(let j=0;j<x;j++)d[E[j]]=v}else d[_]=v}return this.options.layoutId&&(d.pointerEvents=f===this?sd(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Zw),this.root.sharedNodes.clear()}}}function DD(t){t.updateLayout()}function ND(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Zn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=Wn(p);p.min=r[f].min,p.max=p.min+g}):Rb(s,n.layoutBox,r)&&Zn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=Wn(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Jo();$l(a,r,n.layoutBox);const l=Jo();o?$l(l,t.applyTransform(i,!0),n.measuredBox):$l(l,r,n.layoutBox);const d=!Cb(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const w=kt();Wl(w,n.layoutBox,p.layoutBox);const _=kt();Wl(_,r,g.layoutBox),kb(w,_)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function jD(t){qs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function LD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MD(t){t.clearSnapshot()}function Zw(t){t.clearMeasurements()}function VD(t){t.isLayoutDirty=!1}function OD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ex(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FD(t){t.resolveTargetDelta()}function UD(t){t.calcProjection()}function zD(t){t.resetRotation()}function BD(t){t.removeLeadSnapshot()}function tx(t,e,n){t.translate=lt(e.translate,0,n),t.scale=lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function nx(t,e,n,r){t.min=lt(e.min,n.min,r),t.max=lt(e.max,n.max,r)}function $D(t,e,n,r){nx(t.x,e.x,n.x,r),nx(t.y,e.y,n.y,r)}function WD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const qD={duration:.45,ease:[.4,0,.1,1]},rx=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),ix=rx("applewebkit/")&&!rx("chrome/")?Math.round:mt;function sx(t){t.min=ix(t.min),t.max=ix(t.max)}function HD(t){sx(t.x),sx(t.y)}function Rb(t,e,n){return t==="position"||t==="preserve-aspect"&&!Zm(Qw(e),Qw(n),.2)}const GD=Ab({attachResizeListener:(t,e)=>ai(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rp={current:void 0},Pb=Ab({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rp.current){const t=new GD({});t.mount(window),t.setOptions({layoutScroll:!0}),Rp.current=t}return Rp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),KD={pan:{Feature:uD},drag:{Feature:cD,ProjectionNode:Pb,MeasureLayout:Sb}},QD=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function YD(t){const e=QD.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function rg(t,e,n=1){const[r,i]=YD(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return fb(o)?parseFloat(o):o}else return Hm(i)?rg(i,e,n+1):i}function XD(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Hm(s))return;const o=rg(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Hm(s))continue;const o=rg(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const JD=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Db=t=>JD.has(t),ZD=t=>Object.keys(t).some(Db),ox=t=>t===To||t===_e,ax=(t,e)=>parseFloat(t.split(", ")[e]),lx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return ax(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?ax(s[1],t):0}},eN=new Set(["x","y","z"]),tN=Vc.filter(t=>!eN.has(t));function nN(t){const e=[];return tN.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Pa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:lx(4,13),y:lx(5,14)};Pa.translateX=Pa.x;Pa.translateY=Pa.y;const rN=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(d=>{a[d]=Pa[d](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(d=>{const h=e.getValue(d);h&&h.jump(a[d]),t[d]=Pa[d](l,s)}),t},iN=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Db);let s=[],o=!1;const a=[];if(i.forEach(l=>{const d=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],f=wl(h);const p=e[l];let g;if(Hd(p)){const w=p.length,_=p[0]===null?1:0;h=p[_],f=wl(h);for(let P=_;P<w&&p[P]!==null;P++)g?Ky(wl(p[P])===g):g=wl(p[P])}else g=wl(p);if(f!==g)if(ox(f)&&ox(g)){const w=d.get();typeof w=="string"&&d.set(parseFloat(w)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&g===_e&&(e[l]=p.map(parseFloat))}else f!=null&&f.transform&&(g!=null&&g.transform)&&(h===0||p===0)?h===0?d.set(g.transform(h)):e[l]=f.transform(p):(o||(s=nN(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],d.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,d=rN(e,t,a);return s.length&&s.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),Gh&&l!==null&&window.scrollTo({top:l}),{target:d,transitionEnd:r}}else return{target:e,transitionEnd:r}};function sN(t,e,n,r){return ZD(e)?iN(t,e,n,r):{target:e,transitionEnd:r}}const oN=(t,e,n,r)=>{const i=XD(t,e,r);return e=i.target,r=i.transitionEnd,sN(t,e,n,r)},ig={current:null},Nb={current:!1};function aN(){if(Nb.current=!0,!!Gh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ig.current=t.matches;t.addListener(e),e()}else ig.current=!1}function lN(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Pn(s))t.addValue(i,s),Yd(r)&&r.add(i);else if(Pn(o))t.addValue(i,Ra(s,{owner:t})),Yd(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Ra(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const cx=new WeakMap,jb=Object.keys(yc),cN=jb.length,ux=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],uN=Fy.length;class dN{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ye.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Qh(n),this.isVariantNode=vS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const p=h[f];a[f]!==void 0&&Pn(p)&&(p.set(a[f],!1),Yd(d)&&d.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,cx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Nb.current||aN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ig.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cx.delete(this.current),this.projection&&this.projection.unmount(),vi(this.notifyUpdate),vi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=_o.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ye.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<cN;l++){const d=jb[l],{isEnabled:h,Feature:f,ProjectionNode:p,MeasureLayout:g}=yc[d];p&&(o=p),h(n)&&(!this.features[d]&&f&&(this.features[d]=new f(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:d,drag:h,dragConstraints:f,layoutScroll:p,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:d,alwaysMeasureLayout:!!h||f&&Yo(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ux.length;r++){const i=ux[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=lN(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<uN;r++){const i=Fy[r],s=this.props[i];(gc(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ra(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Gy(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Pn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new r0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Lb extends dN{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=k4(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){I4(this,r,o);const a=oN(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function hN(t){return window.getComputedStyle(t)}class fN extends Lb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(_o.has(n)){const r=Jy(n);return r&&r.default||0}else{const r=hN(e),i=(TS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Tb(e,n)}build(e,n,r,i){By(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Hy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){kS(e,n,r,i)}}class pN extends Lb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_o.has(n)){const r=Jy(n);return r&&r.default||0}return n=AS.has(n)?n:Vy(n),e.getAttribute(n)}measureInstanceViewportBox(){return kt()}scrapeMotionValuesFromProps(e,n){return PS(e,n)}build(e,n,r,i){Wy(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){RS(e,n,r,i)}mount(e){this.isSVGTag=qy(e.tagName),super.mount(e)}}const mN=(t,e)=>zy(t)?new pN(e,{enableHardwareAcceleration:!1}):new fN(e,{enableHardwareAcceleration:!0}),gN={layout:{ProjectionNode:Pb,MeasureLayout:Sb}},yN={...$4,...c5,...KD,...gN},Ue=vP((t,e)=>YP(t,e,yN,mN));function Mb(){const t=R.useRef(!1);return My(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function vN(){const t=Mb(),[e,n]=R.useState(0),r=R.useCallback(()=>{t.current&&n(e+1)},[e]);return[R.useCallback(()=>Ye.postRender(r),[r]),e]}class wN extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xN({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0});return R.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),R.createElement(wN,{isPresent:e,childRef:r,sizeRef:i},R.cloneElement(t,{ref:r}))}const Pp=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=DS(_N),l=R.useId(),d=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return R.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=R.createElement(xN,{isPresent:n},t)),R.createElement(Hh.Provider,{value:d},t)};function _N(){return new Map}function TN(t){return R.useEffect(()=>()=>t(),[])}const Hs=t=>t.key||"";function EN(t,e){t.forEach(n=>{const r=Hs(n);e.set(r,n)})}function SN(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const In=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=R.useContext(Uy).forceRender||vN()[0],l=Mb(),d=SN(t);let h=d;const f=R.useRef(new Map).current,p=R.useRef(h),g=R.useRef(new Map).current,w=R.useRef(!0);if(My(()=>{w.current=!1,EN(d,g),p.current=h}),TN(()=>{w.current=!0,g.clear(),f.clear()}),w.current)return R.createElement(R.Fragment,null,h.map(v=>R.createElement(Pp,{key:Hs(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},v)));h=[...h];const _=p.current.map(Hs),P=d.map(Hs),E=_.length;for(let v=0;v<E;v++){const x=_[v];P.indexOf(x)===-1&&!f.has(x)&&f.set(x,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((v,x)=>{if(P.indexOf(x)!==-1)return;const j=g.get(x);if(!j)return;const L=_.indexOf(x);let O=v;if(!O){const S=()=>{f.delete(x);const T=Array.from(g.keys()).filter(C=>!P.includes(C));if(T.forEach(C=>g.delete(C)),p.current=d.filter(C=>{const A=Hs(C);return A===x||T.includes(A)}),!f.size){if(l.current===!1)return;a(),r&&r()}};O=R.createElement(Pp,{key:Hs(j),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:s,mode:o},j),f.set(x,O)}h.splice(L,0,O)}),h=h.map(v=>{const x=v.key;return f.has(x)?v:R.createElement(Pp,{key:Hs(v),isPresent:!0,presenceAffectsLayout:s,mode:o},v)}),R.createElement(R.Fragment,null,f.size?h:h.map(v=>R.cloneElement(v)))},bN=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ob={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,d=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|d>>6,g=d&63;l||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||d==null||f==null)throw new CN;const p=s<<2|a>>4;if(r.push(p),d!==64){const g=a<<4&240|d>>2;if(r.push(g),f!==64){const w=d<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(t){const e=Vb(t);return Ob.encodeByteArray(e,!0)},Jd=function(t){return kN(t).replace(/\./g,"")},Fb=function(t){try{return Ob.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=()=>AN().__FIREBASE_DEFAULTS__,PN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fb(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return bN()||RN()||PN()||DN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ub=t=>{var e,n;return(n=(e=Zh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},i0=t=>{const e=Ub(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zb=()=>{var t;return(t=Zh())==null?void 0:t.config},Bb=t=>{var e;return(e=Zh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ef(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Jd(JSON.stringify(n)),Jd(JSON.stringify(o)),a].join(".")}const ql={};function jN(){const t={prod:[],emulator:[]};for(const e of Object.keys(ql))ql[e]?t.emulator.push(e):t.prod.push(e);return t}function LN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dx=!1;function tf(t,e){if(typeof window>"u"||typeof document>"u"||!Zr(window.location.host)||ql[t]===e||ql[t]||dx)return;ql[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=jN().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{dx=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=LN(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),P=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(P,_);const j=d();l(v,E),x.append(v,w,P,j),document.body.appendChild(x)}s?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function VN(){var e;const t=(e=Zh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ON(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const t=un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BN(){return!VN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $N(){try{return typeof indexedDB=="object"}catch{return!1}}function WN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qN,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kr(i,a,r)}}function HN(t,e){return t.replace(GN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GN=/\{\$([^}]+)}/g;function KN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hx(s)&&hx(o)){if(!fo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function QN(t,e){const n=new YN(t,e);return n.subscribe.bind(n)}class YN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dp),i.error===void 0&&(i.error=Dp),i.complete===void 0&&(i.complete=Dp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class wi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ej(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZN(t){return t===Gs?void 0:t}function ej(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const nj={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},rj=Ne.INFO,ij={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},sj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ij[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s0{constructor(e){this.name=e,this._logLevel=rj,this._logHandler=sj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const oj=(t,e)=>e.some(n=>t instanceof n);let fx,px;function aj(){return fx||(fx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lj(){return px||(px=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wb=new WeakMap,sg=new WeakMap,qb=new WeakMap,Np=new WeakMap,o0=new WeakMap;function cj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ds(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wb.set(n,t)}).catch(()=>{}),o0.set(e,t),e}function uj(t){if(sg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sg.set(t,e)}let og={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dj(t){og=t(og)}function hj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jp(this),e,...n);return qb.set(r,e.sort?e.sort():[e]),ds(r)}:lj().includes(t)?function(...e){return t.apply(jp(this),e),ds(Wb.get(this))}:function(...e){return ds(t.apply(jp(this),e))}}function fj(t){return typeof t=="function"?hj(t):(t instanceof IDBTransaction&&uj(t),oj(t,aj())?new Proxy(t,og):t)}function ds(t){if(t instanceof IDBRequest)return cj(t);if(Np.has(t))return Np.get(t);const e=fj(t);return e!==t&&(Np.set(t,e),o0.set(e,t)),e}const jp=t=>o0.get(t);function pj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ds(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ds(o.result),l.oldVersion,l.newVersion,ds(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const mj=["get","getKey","getAll","getAllKeys","count"],gj=["put","add","delete","clear"],Lp=new Map;function mx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mj.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let d=l.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),i&&l.done]))[0]};return Lp.set(e,s),s}dj(t=>({...t,get:(e,n,r)=>mx(e,n)||t.get(e,n,r),has:(e,n)=>!!mx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ag="@firebase/app",gx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new s0("@firebase/app"),wj="@firebase/app-compat",xj="@firebase/analytics-compat",_j="@firebase/analytics",Tj="@firebase/app-check-compat",Ej="@firebase/app-check",Sj="@firebase/auth",bj="@firebase/auth-compat",Ij="@firebase/database",Cj="@firebase/data-connect",kj="@firebase/database-compat",Aj="@firebase/functions",Rj="@firebase/functions-compat",Pj="@firebase/installations",Dj="@firebase/installations-compat",Nj="@firebase/messaging",jj="@firebase/messaging-compat",Lj="@firebase/performance",Mj="@firebase/performance-compat",Vj="@firebase/remote-config",Oj="@firebase/remote-config-compat",Fj="@firebase/storage",Uj="@firebase/storage-compat",zj="@firebase/firestore",Bj="@firebase/ai",$j="@firebase/firestore-compat",Wj="firebase",qj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="[DEFAULT]",Hj={[ag]:"fire-core",[wj]:"fire-core-compat",[_j]:"fire-analytics",[xj]:"fire-analytics-compat",[Ej]:"fire-app-check",[Tj]:"fire-app-check-compat",[Sj]:"fire-auth",[bj]:"fire-auth-compat",[Ij]:"fire-rtdb",[Cj]:"fire-data-connect",[kj]:"fire-rtdb-compat",[Aj]:"fire-fn",[Rj]:"fire-fn-compat",[Pj]:"fire-iid",[Dj]:"fire-iid-compat",[Nj]:"fire-fcm",[jj]:"fire-fcm-compat",[Lj]:"fire-perf",[Mj]:"fire-perf-compat",[Vj]:"fire-rc",[Oj]:"fire-rc-compat",[Fj]:"fire-gcs",[Uj]:"fire-gcs-compat",[zj]:"fire-fst",[$j]:"fire-fst-compat",[Bj]:"fire-vertex","fire-js":"fire-js",[Wj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Map,Gj=new Map,cg=new Map;function yx(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xs(t){const e=t.name;if(cg.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;cg.set(e,t);for(const n of Zd.values())yx(n,t);for(const n of Gj.values())yx(n,t);return!0}function $c(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new zc("app","Firebase",Kj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=qj;function Hb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw hs.create("bad-app-name",{appName:String(i)});if(n||(n=zb()),!n)throw hs.create("no-options");const s=Zd.get(i);if(s){if(fo(n,s.options)&&fo(r,s.config))return s;throw hs.create("duplicate-app",{appName:i})}const o=new tj(i);for(const l of cg.values())o.addComponent(l);const a=new Qj(n,r,o);return Zd.set(i,a),a}function nf(t=lg){const e=Zd.get(t);if(!e&&t===lg&&zb())return Hb();if(!e)throw hs.create("no-app",{appName:t});return e}function or(t,e,n){let r=Hj[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(o.join(" "));return}xs(new wi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="firebase-heartbeat-database",Xj=1,wc="firebase-heartbeat-store";let Mp=null;function Gb(){return Mp||(Mp=pj(Yj,Xj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wc)}catch(n){console.warn(n)}}}}).catch(t=>{throw hs.create("idb-open",{originalErrorMessage:t.message})})),Mp}async function Jj(t){try{const n=(await Gb()).transaction(wc),r=await n.objectStore(wc).get(Kb(t));return await n.done,r}catch(e){if(e instanceof kr)xi.warn(e.message);else{const n=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function vx(t,e){try{const r=(await Gb()).transaction(wc,"readwrite");await r.objectStore(wc).put(e,Kb(t)),await r.done}catch(n){if(n instanceof kr)xi.warn(n.message);else{const r=hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(r.message)}}}function Kb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=1024,eL=30;class tL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>eL){const o=iL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wx(),{heartbeatsToSend:r,unsentEntries:i}=nL(this._heartbeatsCache.heartbeats),s=Jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xi.warn(n),""}}}function wx(){return new Date().toISOString().substring(0,10)}function nL(t,e=Zj){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $N()?WN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xx(t){return Jd(JSON.stringify({version:2,heartbeats:t})).length}function iL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){xs(new wi("platform-logger",e=>new yj(e),"PRIVATE")),xs(new wi("heartbeat",e=>new tL(e),"PRIVATE")),or(ag,gx,t),or(ag,gx,"esm2020"),or("fire-js","")}sL("");var oL="firebase",aL="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(oL,aL,"app");var _x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,Qb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function C(){}C.prototype=T.prototype,S.F=T.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(A,k,N){for(var I=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)I[Y-2]=arguments[Y];return T.prototype[k].apply(A,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,C){C||(C=0);const A=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)A[k]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(k=0;k<16;++k)A[k]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=S.g[0],C=S.g[1],k=S.g[2];let N=S.g[3],I;I=T+(N^C&(k^N))+A[0]+3614090360&4294967295,T=C+(I<<7&4294967295|I>>>25),I=N+(k^T&(C^k))+A[1]+3905402710&4294967295,N=T+(I<<12&4294967295|I>>>20),I=k+(C^N&(T^C))+A[2]+606105819&4294967295,k=N+(I<<17&4294967295|I>>>15),I=C+(T^k&(N^T))+A[3]+3250441966&4294967295,C=k+(I<<22&4294967295|I>>>10),I=T+(N^C&(k^N))+A[4]+4118548399&4294967295,T=C+(I<<7&4294967295|I>>>25),I=N+(k^T&(C^k))+A[5]+1200080426&4294967295,N=T+(I<<12&4294967295|I>>>20),I=k+(C^N&(T^C))+A[6]+2821735955&4294967295,k=N+(I<<17&4294967295|I>>>15),I=C+(T^k&(N^T))+A[7]+4249261313&4294967295,C=k+(I<<22&4294967295|I>>>10),I=T+(N^C&(k^N))+A[8]+1770035416&4294967295,T=C+(I<<7&4294967295|I>>>25),I=N+(k^T&(C^k))+A[9]+2336552879&4294967295,N=T+(I<<12&4294967295|I>>>20),I=k+(C^N&(T^C))+A[10]+4294925233&4294967295,k=N+(I<<17&4294967295|I>>>15),I=C+(T^k&(N^T))+A[11]+2304563134&4294967295,C=k+(I<<22&4294967295|I>>>10),I=T+(N^C&(k^N))+A[12]+1804603682&4294967295,T=C+(I<<7&4294967295|I>>>25),I=N+(k^T&(C^k))+A[13]+4254626195&4294967295,N=T+(I<<12&4294967295|I>>>20),I=k+(C^N&(T^C))+A[14]+2792965006&4294967295,k=N+(I<<17&4294967295|I>>>15),I=C+(T^k&(N^T))+A[15]+1236535329&4294967295,C=k+(I<<22&4294967295|I>>>10),I=T+(k^N&(C^k))+A[1]+4129170786&4294967295,T=C+(I<<5&4294967295|I>>>27),I=N+(C^k&(T^C))+A[6]+3225465664&4294967295,N=T+(I<<9&4294967295|I>>>23),I=k+(T^C&(N^T))+A[11]+643717713&4294967295,k=N+(I<<14&4294967295|I>>>18),I=C+(N^T&(k^N))+A[0]+3921069994&4294967295,C=k+(I<<20&4294967295|I>>>12),I=T+(k^N&(C^k))+A[5]+3593408605&4294967295,T=C+(I<<5&4294967295|I>>>27),I=N+(C^k&(T^C))+A[10]+38016083&4294967295,N=T+(I<<9&4294967295|I>>>23),I=k+(T^C&(N^T))+A[15]+3634488961&4294967295,k=N+(I<<14&4294967295|I>>>18),I=C+(N^T&(k^N))+A[4]+3889429448&4294967295,C=k+(I<<20&4294967295|I>>>12),I=T+(k^N&(C^k))+A[9]+568446438&4294967295,T=C+(I<<5&4294967295|I>>>27),I=N+(C^k&(T^C))+A[14]+3275163606&4294967295,N=T+(I<<9&4294967295|I>>>23),I=k+(T^C&(N^T))+A[3]+4107603335&4294967295,k=N+(I<<14&4294967295|I>>>18),I=C+(N^T&(k^N))+A[8]+1163531501&4294967295,C=k+(I<<20&4294967295|I>>>12),I=T+(k^N&(C^k))+A[13]+2850285829&4294967295,T=C+(I<<5&4294967295|I>>>27),I=N+(C^k&(T^C))+A[2]+4243563512&4294967295,N=T+(I<<9&4294967295|I>>>23),I=k+(T^C&(N^T))+A[7]+1735328473&4294967295,k=N+(I<<14&4294967295|I>>>18),I=C+(N^T&(k^N))+A[12]+2368359562&4294967295,C=k+(I<<20&4294967295|I>>>12),I=T+(C^k^N)+A[5]+4294588738&4294967295,T=C+(I<<4&4294967295|I>>>28),I=N+(T^C^k)+A[8]+2272392833&4294967295,N=T+(I<<11&4294967295|I>>>21),I=k+(N^T^C)+A[11]+1839030562&4294967295,k=N+(I<<16&4294967295|I>>>16),I=C+(k^N^T)+A[14]+4259657740&4294967295,C=k+(I<<23&4294967295|I>>>9),I=T+(C^k^N)+A[1]+2763975236&4294967295,T=C+(I<<4&4294967295|I>>>28),I=N+(T^C^k)+A[4]+1272893353&4294967295,N=T+(I<<11&4294967295|I>>>21),I=k+(N^T^C)+A[7]+4139469664&4294967295,k=N+(I<<16&4294967295|I>>>16),I=C+(k^N^T)+A[10]+3200236656&4294967295,C=k+(I<<23&4294967295|I>>>9),I=T+(C^k^N)+A[13]+681279174&4294967295,T=C+(I<<4&4294967295|I>>>28),I=N+(T^C^k)+A[0]+3936430074&4294967295,N=T+(I<<11&4294967295|I>>>21),I=k+(N^T^C)+A[3]+3572445317&4294967295,k=N+(I<<16&4294967295|I>>>16),I=C+(k^N^T)+A[6]+76029189&4294967295,C=k+(I<<23&4294967295|I>>>9),I=T+(C^k^N)+A[9]+3654602809&4294967295,T=C+(I<<4&4294967295|I>>>28),I=N+(T^C^k)+A[12]+3873151461&4294967295,N=T+(I<<11&4294967295|I>>>21),I=k+(N^T^C)+A[15]+530742520&4294967295,k=N+(I<<16&4294967295|I>>>16),I=C+(k^N^T)+A[2]+3299628645&4294967295,C=k+(I<<23&4294967295|I>>>9),I=T+(k^(C|~N))+A[0]+4096336452&4294967295,T=C+(I<<6&4294967295|I>>>26),I=N+(C^(T|~k))+A[7]+1126891415&4294967295,N=T+(I<<10&4294967295|I>>>22),I=k+(T^(N|~C))+A[14]+2878612391&4294967295,k=N+(I<<15&4294967295|I>>>17),I=C+(N^(k|~T))+A[5]+4237533241&4294967295,C=k+(I<<21&4294967295|I>>>11),I=T+(k^(C|~N))+A[12]+1700485571&4294967295,T=C+(I<<6&4294967295|I>>>26),I=N+(C^(T|~k))+A[3]+2399980690&4294967295,N=T+(I<<10&4294967295|I>>>22),I=k+(T^(N|~C))+A[10]+4293915773&4294967295,k=N+(I<<15&4294967295|I>>>17),I=C+(N^(k|~T))+A[1]+2240044497&4294967295,C=k+(I<<21&4294967295|I>>>11),I=T+(k^(C|~N))+A[8]+1873313359&4294967295,T=C+(I<<6&4294967295|I>>>26),I=N+(C^(T|~k))+A[15]+4264355552&4294967295,N=T+(I<<10&4294967295|I>>>22),I=k+(T^(N|~C))+A[6]+2734768916&4294967295,k=N+(I<<15&4294967295|I>>>17),I=C+(N^(k|~T))+A[13]+1309151649&4294967295,C=k+(I<<21&4294967295|I>>>11),I=T+(k^(C|~N))+A[4]+4149444226&4294967295,T=C+(I<<6&4294967295|I>>>26),I=N+(C^(T|~k))+A[11]+3174756917&4294967295,N=T+(I<<10&4294967295|I>>>22),I=k+(T^(N|~C))+A[2]+718787259&4294967295,k=N+(I<<15&4294967295|I>>>17),I=C+(N^(k|~T))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const C=T-this.blockSize,A=this.C;let k=this.h,N=0;for(;N<T;){if(k==0)for(;N<=C;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(A[k++]=S.charCodeAt(N++),k==this.blockSize){i(this,A),k=0;break}}else for(;N<T;)if(A[k++]=S[N++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,C=0;C<4;++C)for(let A=0;A<32;A+=8)S[T++]=this.g[C]>>>A&255;return S};function s(S,T){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=T(S)}function o(S,T){this.h=T;const C=[];let A=!0;for(let k=S.length-1;k>=0;k--){const N=S[k]|0;A&&N==T||(C[k]=N,A=!1)}this.g=C}var a={};function l(S){return-128<=S&&S<128?s(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return P(d(-S));const T=[];let C=1;for(let A=0;S>=C;A++)T[A]=S/C|0,C*=4294967296;return new o(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return P(h(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(T,8));let A=f;for(let N=0;N<S.length;N+=8){var k=Math.min(8,S.length-N);const I=parseInt(S.substring(N,N+k),T);k<8?(k=d(Math.pow(T,k)),A=A.j(k).add(d(I))):(A=A.j(C),A=A.add(d(I)))}return A}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-P(this).m();let S=0,T=1;for(let C=0;C<this.g.length;C++){const A=this.i(C);S+=(A>=0?A:4294967296+A)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(_(this))return"-"+P(this).toString(S);const T=d(Math.pow(S,6));var C=this;let A="";for(;;){const k=j(C,T).g;C=E(C,k.j(T));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=k,w(C))return N+A;for(;N.length<6;)N="0"+N;A=N+A}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function _(S){return S.h==-1}t.l=function(S){return S=E(this,S),_(S)?-1:w(S)?0:1};function P(S){const T=S.g.length,C=[];for(let A=0;A<T;A++)C[A]=~S.g[A];return new o(C,~S.h).add(p)}t.abs=function(){return _(this)?P(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),C=[];let A=0;for(let k=0;k<=T;k++){let N=A+(this.i(k)&65535)+(S.i(k)&65535),I=(N>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);A=I>>>16,N&=65535,I&=65535,C[k]=I<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(S,T){return S.add(P(T))}t.j=function(S){if(w(this)||w(S))return f;if(_(this))return _(S)?P(this).j(P(S)):P(P(this).j(S));if(_(S))return P(this.j(P(S)));if(this.l(g)<0&&S.l(g)<0)return d(this.m()*S.m());const T=this.g.length+S.g.length,C=[];for(var A=0;A<2*T;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(let k=0;k<S.g.length;k++){const N=this.i(A)>>>16,I=this.i(A)&65535,Y=S.i(k)>>>16,me=S.i(k)&65535;C[2*A+2*k]+=I*me,v(C,2*A+2*k),C[2*A+2*k+1]+=N*me,v(C,2*A+2*k+1),C[2*A+2*k+1]+=I*Y,v(C,2*A+2*k+1),C[2*A+2*k+2]+=N*Y,v(C,2*A+2*k+2)}for(S=0;S<T;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=T;S<2*T;S++)C[S]=0;return new o(C,0)};function v(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function x(S,T){this.g=S,this.h=T}function j(S,T){if(w(T))throw Error("division by zero");if(w(S))return new x(f,f);if(_(S))return T=j(P(S),T),new x(P(T.g),P(T.h));if(_(T))return T=j(S,P(T)),new x(P(T.g),T.h);if(S.g.length>30){if(_(S)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var C=p,A=T;A.l(S)<=0;)C=L(C),A=L(A);var k=O(C,1),N=O(A,1);for(A=O(A,2),C=O(C,2);!w(A);){var I=N.add(A);I.l(S)<=0&&(k=k.add(C),N=I),A=O(A,1),C=O(C,1)}return T=E(S,k.j(T)),new x(k,T)}for(k=f;S.l(T)>=0;){for(C=Math.max(1,Math.floor(S.m()/T.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),N=d(C),I=N.j(T);_(I)||I.l(S)>0;)C-=A,N=d(C),I=N.j(T);w(N)&&(N=p),k=k.add(N),S=E(S,I)}return new x(k,S)}t.B=function(S){return j(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),C=[];for(let A=0;A<T;A++)C[A]=this.i(A)&S.i(A);return new o(C,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),C=[];for(let A=0;A<T;A++)C[A]=this.i(A)|S.i(A);return new o(C,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),C=[];for(let A=0;A<T;A++)C[A]=this.i(A)^S.i(A);return new o(C,this.h^S.h)};function L(S){const T=S.g.length+1,C=[];for(let A=0;A<T;A++)C[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(C,S.h)}function O(S,T){const C=T>>5;T%=32;const A=S.g.length-C,k=[];for(let N=0;N<A;N++)k[N]=T>0?S.i(N+C)>>>T|S.i(N+C+1)<<32-T:S.i(N+C);return new o(k,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Qb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,fs=o}).apply(typeof _x<"u"?_x:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yb,kl,Xb,ad,ug,Jb,Zb,e2;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var V=c[b];if(!(V in y))break e;y=y[V]}c=c[c.length-1],b=y[c],m=m(b),m!=b&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(m){var y=[],b;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&y.push([b,m[b]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function l(c,m,y){return c.call.apply(c.bind,arguments)}function d(c,m,y){return d=l,d.apply(null,arguments)}function h(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function f(c,m){function y(){}y.prototype=m.prototype,c.Z=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Ob=function(b,V,U){for(var ne=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ne[Ce-2]=arguments[Ce];return m.prototype[V].apply(b,ne)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const m=c.length;if(m>0){const y=Array(m);for(let b=0;b<m;b++)y[b]=c[b];return y}return[]}function w(c,m){for(let b=1;b<arguments.length;b++){const V=arguments[b];var y=typeof V;if(y=y!="object"?y:V?Array.isArray(V)?"array":y:"null",y=="array"||y=="object"&&typeof V.length=="number"){y=c.length||0;const U=V.length||0;c.length=y+U;for(let ne=0;ne<U;ne++)c[y+ne]=V[ne]}else c.push(V)}}class _{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function P(c){o.setTimeout(()=>{throw c},0)}function E(){var c=S;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,y){const b=x.get();b.set(m,y),this.h?this.h.next=b:this.g=b,this.h=b}}var x=new _(()=>new j,c=>c.reset());class j{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,O=!1,S=new v,T=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(C)}};function C(){for(var c;c=E();){try{c.h.call(c.g)}catch(y){P(y)}var m=x;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}O=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return c}();function I(c){return/^[\s\xa0]*$/.test(c)}function Y(c,m){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}f(Y,k),Y.prototype.init=function(c,m){const y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),oe=0;function X(c,m,y,b,V){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!b,this.ha=V,this.key=++oe,this.da=this.fa=!1}function z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function H(c,m,y){for(const b in c)m.call(y,c[b],b,c)}function M(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function D(c){const m={};for(const y in c)m[y]=c[y];return m}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(c,m){let y,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(y in b)c[y]=b[y];for(let U=0;U<q.length;U++)y=q[U],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function J(c){this.src=c,this.g={},this.h=0}J.prototype.add=function(c,m,y,b,V){const U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);const ne=Z(c,m,b,V);return ne>-1?(m=c[ne],y||(m.fa=!1)):(m=new X(m,this.src,U,!!b,V),m.fa=y,c.push(m)),m};function re(c,m){const y=m.type;if(y in c.g){var b=c.g[y],V=Array.prototype.indexOf.call(b,m,void 0),U;(U=V>=0)&&Array.prototype.splice.call(b,V,1),U&&(z(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Z(c,m,y,b){for(let V=0;V<c.length;++V){const U=c[V];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==b)return V}return-1}var G="closure_lm_"+(Math.random()*1e6|0),de={};function ye(c,m,y,b,V){if(b&&b.once)return Ae(c,m,y,b,V);if(Array.isArray(m)){for(let U=0;U<m.length;U++)ye(c,m[U],y,b,V);return null}return y=ot(y),c&&c[me]?c.J(m,y,a(b)?!!b.capture:!!b,V):Se(c,m,y,!1,b,V)}function Se(c,m,y,b,V,U){if(!m)throw Error("Invalid event type");const ne=a(V)?!!V.capture:!!V;let Ce=Re(c);if(Ce||(c[G]=Ce=new J(c)),y=Ce.add(m,y,b,ne,U),y.proxy)return y;if(b=ge(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)N||(V=ne),V===void 0&&(V=!1),c.addEventListener(m.toString(),b,V);else if(c.attachEvent)c.attachEvent(Fe(m.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ge(){function c(y){return m.call(c.src,c.listener,y)}const m=Ge;return c}function Ae(c,m,y,b,V){if(Array.isArray(m)){for(let U=0;U<m.length;U++)Ae(c,m[U],y,b,V);return null}return y=ot(y),c&&c[me]?c.K(m,y,a(b)?!!b.capture:!!b,V):Se(c,m,y,!0,b,V)}function F(c,m,y,b,V){if(Array.isArray(m))for(var U=0;U<m.length;U++)F(c,m[U],y,b,V);else b=a(b)?!!b.capture:!!b,y=ot(y),c&&c[me]?(c=c.i,U=String(m).toString(),U in c.g&&(m=c.g[U],y=Z(m,y,b,V),y>-1&&(z(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete c.g[U],c.h--)))):c&&(c=Re(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Z(m,y,b,V)),(y=c>-1?m[c]:null)&&ee(y))}function ee(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[me])re(m.i,c);else{var y=c.type,b=c.proxy;m.removeEventListener?m.removeEventListener(y,b,c.capture):m.detachEvent?m.detachEvent(Fe(y),b):m.addListener&&m.removeListener&&m.removeListener(b),(y=Re(m))?(re(y,c),y.h==0&&(y.src=null,m[G]=null)):z(c)}}}function Fe(c){return c in de?de[c]:de[c]="on"+c}function Ge(c,m){if(c.da)c=!0;else{m=new Y(m,this);const y=c.listener,b=c.ha||c.src;c.fa&&ee(c),c=y.call(b,m)}return c}function Re(c){return c=c[G],c instanceof J?c:null}var qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(c){return typeof c=="function"?c:(c[qe]||(c[qe]=function(m){return c.handleEvent(m)}),c[qe])}function De(){A.call(this),this.i=new J(this),this.M=this,this.G=null}f(De,A),De.prototype[me]=!0,De.prototype.removeEventListener=function(c,m,y,b){F(this,c,m,y,b)};function we(c,m){var y,b=c.G;if(b)for(y=[];b;b=b.G)y.push(b);if(c=c.M,b=m.type||m,typeof m=="string")m=new k(m,c);else if(m instanceof k)m.target=m.target||c;else{var V=m;m=new k(b,c),Q(m,V)}V=!0;let U,ne;if(y)for(ne=y.length-1;ne>=0;ne--)U=m.g=y[ne],V=Be(U,b,!0,m)&&V;if(U=m.g=c,V=Be(U,b,!0,m)&&V,V=Be(U,b,!1,m)&&V,y)for(ne=0;ne<y.length;ne++)U=m.g=y[ne],V=Be(U,b,!1,m)&&V}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const y=c.g[m];for(let b=0;b<y.length;b++)z(y[b]);delete c.g[m],c.h--}}this.G=null},De.prototype.J=function(c,m,y,b){return this.i.add(String(c),m,!1,y,b)},De.prototype.K=function(c,m,y,b){return this.i.add(String(c),m,!0,y,b)};function Be(c,m,y,b){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let U=0;U<m.length;++U){const ne=m[U];if(ne&&!ne.da&&ne.capture==y){const Ce=ne.listener,Nt=ne.ha||ne.src;ne.fa&&re(c.i,ne),V=Ce.call(Nt,b)!==!1&&V}}return V&&!b.defaultPrevented}function Ke(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function Et(c){c.g=Ke(()=>{c.g=null,c.i&&(c.i=!1,Et(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Ot extends A{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function St(c){A.call(this),this.h=c,this.g={}}f(St,A);var Ft=[];function qt(c){H(c.g,function(m,y){this.g.hasOwnProperty(y)&&ee(m)},c),c.g={}}St.prototype.N=function(){St.Z.N.call(this),qt(this)},St.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=o.JSON.stringify,xn=o.JSON.parse,dn=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Ee(){}function $e(){}var bt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ei(){k.call(this,"d")}f(ei,k);function Ar(){k.call(this,"c")}f(Ar,k);var Qn={},W=null;function se(){return W=W||new De}Qn.Ia="serverreachability";function le(c){k.call(this,Qn.Ia,c)}f(le,k);function te(c){const m=se();we(m,new le(m))}Qn.STAT_EVENT="statevent";function xe(c,m){k.call(this,Qn.STAT_EVENT,c),this.stat=m}f(xe,k);function fe(c){const m=se();we(m,new xe(m,c))}Qn.Ja="timingevent";function Dt(c,m){k.call(this,Qn.Ja,c),this.size=m}f(Dt,k);function Xe(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function js(c,m,y,b,V,U){c.info(function(){if(c.g)if(U){var ne="",Ce=U.split("&");for(let He=0;He<Ce.length;He++){var Nt=Ce[He].split("=");if(Nt.length>1){const Ut=Nt[0];Nt=Nt[1];const Pr=Ut.split("_");ne=Pr.length>=2&&Pr[1]=="type"?ne+(Ut+"="+Nt+"&"):ne+(Ut+"=redacted&")}}}else ne=null;else ne=U;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+m+`
`+y+`
`+ne})}function ko(c,m,y,b,V,U,ne){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+m+`
`+y+`
`+U+" "+ne})}function en(c,m,y,b){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+yk(c,y)+(b?" "+b:"")})}function gk(c,m){c.info(function(){return"TIMEOUT: "+m})}wt.prototype.info=function(){};function yk(c,m){if(!c.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(c=0;c<U.length;c++)if(Array.isArray(U[c])){var y=U[c];if(!(y.length<2)){var b=y[1];if(Array.isArray(b)&&!(b.length<1)){var V=b[0];if(V!="noop"&&V!="stop"&&V!="close")for(let ne=1;ne<b.length;ne++)b[ne]=""}}}}return ht(U)}catch{return m}}var iu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pv;function Df(){}f(Df,Ee),Df.prototype.g=function(){return new XMLHttpRequest},pv=new Df;function el(c){return encodeURIComponent(String(c))}function vk(c){var m=1;c=c.split(":");const y=[];for(;m>0&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function Ii(c,m,y,b){this.j=c,this.i=m,this.l=y,this.S=b||1,this.V=new St(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mv}function mv(){this.i=null,this.g="",this.h=!1}var gv={},Nf={};function jf(c,m,y){c.M=1,c.A=ou(Rr(m)),c.u=y,c.R=!0,yv(c,null)}function yv(c,m){c.F=Date.now(),su(c),c.B=Rr(c.A);var y=c.B,b=c.S;Array.isArray(b)||(b=[String(b)]),Rv(y.i,"t",b),c.C=0,y=c.j.L,c.h=new mv,c.g=Kv(c.j,y?m:null,!c.u),c.P>0&&(c.O=new Ot(d(c.Y,c,c.g),c.P)),m=c.V,y=c.g,b=c.ba;var V="readystatechange";Array.isArray(V)||(V&&(Ft[0]=V.toString()),V=Ft);for(let U=0;U<V.length;U++){const ne=ye(y,V[U],b||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=c.J?D(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),te(),js(c.i,c.v,c.B,c.l,c.S,c.u)}Ii.prototype.ba=function(c){c=c.target;const m=this.O;m&&Ai(c)==3?m.j():this.Y(c)},Ii.prototype.Y=function(c){try{if(c==this.g)e:{const Ce=Ai(this.g),Nt=this.g.ya(),He=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Vv(this.g)))){this.K||Ce!=4||Nt==7||(Nt==8||He<=0?te(3):te(2)),Lf(this);var m=this.g.ca();this.X=m;var y=wk(this);if(this.o=m==200,ko(this.i,this.v,this.B,this.l,this.S,Ce,m),this.o){if(this.U&&!this.L){t:{if(this.g){var b,V=this.g;if((b=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(b)){var U=b;break t}}U=null}if(c=U)en(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mf(this,c);else{this.o=!1,this.m=3,fe(12),Ls(this),tl(this);break e}}if(this.R){c=!0;let Ut;for(;!this.K&&this.C<y.length;)if(Ut=xk(this,y),Ut==Nf){Ce==4&&(this.m=4,fe(14),c=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==gv){this.m=4,fe(15),en(this.i,this.l,y,"[Invalid Chunk]"),c=!1;break}else en(this.i,this.l,Ut,null),Mf(this,Ut);if(vv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||y.length!=0||this.h.h||(this.m=1,fe(16),c=!1),this.o=this.o&&c,!c)en(this.i,this.l,y,"[Invalid Chunked Response]"),Ls(this),tl(this);else if(y.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Wf(ne),ne.P=!0,fe(11))}}else en(this.i,this.l,y,null),Mf(this,y);Ce==4&&Ls(this),this.o&&!this.K&&(Ce==4?Wv(this.j,this):(this.o=!1,su(this)))}else jk(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,fe(12)):(this.m=0,fe(13)),Ls(this),tl(this)}}}catch{}finally{}};function wk(c){if(!vv(c))return c.g.la();const m=Vv(c.g);if(m==="")return"";let y="";const b=m.length,V=Ai(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ls(c),tl(c),"";c.h.i=new o.TextDecoder}for(let U=0;U<b;U++)c.h.h=!0,y+=c.h.i.decode(m[U],{stream:!(V&&U==b-1)});return m.length=0,c.h.g+=y,c.C=0,c.h.g}function vv(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function xk(c,m){var y=c.C,b=m.indexOf(`
`,y);return b==-1?Nf:(y=Number(m.substring(y,b)),isNaN(y)?gv:(b+=1,b+y>m.length?Nf:(m=m.slice(b,b+y),c.C=b+y,m)))}Ii.prototype.cancel=function(){this.K=!0,Ls(this)};function su(c){c.T=Date.now()+c.H,wv(c,c.H)}function wv(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Xe(d(c.aa,c),m)}function Lf(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Ii.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(gk(this.i,this.B),this.M!=2&&(te(),fe(17)),Ls(this),this.m=2,tl(this)):wv(this,this.T-c)};function tl(c){c.j.I==0||c.K||Wv(c.j,c)}function Ls(c){Lf(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,qt(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Mf(c,m){try{var y=c.j;if(y.I!=0&&(y.g==c||Vf(y.h,c))){if(!c.L&&Vf(y.h,c)&&y.I==3){try{var b=y.Ba.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<c.F)du(y),cu(y);else break e;$f(y),fe(18)}}else y.xa=V[1],0<y.xa-y.K&&V[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Xe(d(y.Va,y),6e3));Tv(y.h)<=1&&y.ta&&(y.ta=void 0)}else Vs(y,11)}else if((c.L||y.g==c)&&du(y),!I(m))for(V=y.Ba.g.parse(m),m=0;m<V.length;m++){let He=V[m];const Ut=He[0];if(!(Ut<=y.K))if(y.K=Ut,He=He[1],y.I==2)if(He[0]=="c"){y.M=He[1],y.ba=He[2];const Pr=He[3];Pr!=null&&(y.ka=Pr,y.j.info("VER="+y.ka));const Os=He[4];Os!=null&&(y.za=Os,y.j.info("SVER="+y.za));const Ri=He[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(b=1.5*Ri,y.O=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const Pi=c.g;if(Pi){const fu=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fu){var U=b.h;U.g||fu.indexOf("spdy")==-1&&fu.indexOf("quic")==-1&&fu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Of(U,U.h),U.h=null))}if(b.G){const qf=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;qf&&(b.wa=qf,Je(b.J,b.G,qf))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-c.F,y.j.info("Handshake RTT: "+y.T+"ms")),b=y;var ne=c;if(b.na=Gv(b,b.L?b.ba:null,b.W),ne.L){Ev(b.h,ne);var Ce=ne,Nt=b.O;Nt&&(Ce.H=Nt),Ce.D&&(Lf(Ce),su(Ce)),b.g=ne}else Bv(b);y.i.length>0&&uu(y)}else He[0]!="stop"&&He[0]!="close"||Vs(y,7);else y.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Vs(y,7):Bf(y):He[0]!="noop"&&y.l&&y.l.qa(He),y.A=0)}}te(4)}catch{}}var _k=class{constructor(c,m){this.g=c,this.map=m}};function xv(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _v(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tv(c){return c.h?1:c.g?c.g.size:0}function Vf(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Of(c,m){c.g?c.g.add(m):c.h=m}function Ev(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}xv.prototype.cancel=function(){if(this.i=Sv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Sv(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.G);return m}return g(c.i)}var bv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tk(c,m){if(c){c=c.split("&");for(let y=0;y<c.length;y++){const b=c[y].indexOf("=");let V,U=null;b>=0?(V=c[y].substring(0,b),U=c[y].substring(b+1)):V=c[y],m(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ci(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Ci?(this.l=c.l,nl(this,c.j),this.o=c.o,this.g=c.g,rl(this,c.u),this.h=c.h,Ff(this,Pv(c.i)),this.m=c.m):c&&(m=String(c).match(bv))?(this.l=!1,nl(this,m[1]||"",!0),this.o=il(m[2]||""),this.g=il(m[3]||"",!0),rl(this,m[4]),this.h=il(m[5]||"",!0),Ff(this,m[6]||"",!0),this.m=il(m[7]||"")):(this.l=!1,this.i=new ol(null,this.l))}Ci.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(sl(m,Iv,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(sl(m,Iv,!0),"@"),c.push(el(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&c.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(sl(y,y.charAt(0)=="/"?bk:Sk,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",sl(y,Ck)),c.join("")},Ci.prototype.resolve=function(c){const m=Rr(this);let y=!!c.j;y?nl(m,c.j):y=!!c.o,y?m.o=c.o:y=!!c.g,y?m.g=c.g:y=c.u!=null;var b=c.h;if(y)rl(m,c.u);else if(y=!!c.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var V=m.h.lastIndexOf("/");V!=-1&&(b=m.h.slice(0,V+1)+b)}if(V=b,V==".."||V==".")b="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){b=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let ne=0;ne<V.length;){const Ce=V[ne++];Ce=="."?b&&ne==V.length&&U.push(""):Ce==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),b&&ne==V.length&&U.push("")):(U.push(Ce),b=!0)}b=U.join("/")}else b=V}return y?m.h=b:y=c.i.toString()!=="",y?Ff(m,Pv(c.i)):y=!!c.m,y&&(m.m=c.m),m};function Rr(c){return new Ci(c)}function nl(c,m,y){c.j=y?il(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function rl(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Ff(c,m,y){m instanceof ol?(c.i=m,kk(c.i,c.l)):(y||(m=sl(m,Ik)),c.i=new ol(m,c.l))}function Je(c,m,y){c.i.set(m,y)}function ou(c){return Je(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function il(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function sl(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,Ek),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ek(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Iv=/[#\/\?@]/g,Sk=/[#\?:]/g,bk=/[#\?]/g,Ik=/[#\?@]/g,Ck=/#/g;function ol(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Ms(c){c.g||(c.g=new Map,c.h=0,c.i&&Tk(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=ol.prototype,t.add=function(c,m){Ms(this),this.i=null,c=Ao(this,c);let y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function Cv(c,m){Ms(c),m=Ao(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function kv(c,m){return Ms(c),m=Ao(c,m),c.g.has(m)}t.forEach=function(c,m){Ms(this),this.g.forEach(function(y,b){y.forEach(function(V){c.call(m,V,b,this)},this)},this)};function Av(c,m){Ms(c);let y=[];if(typeof m=="string")kv(c,m)&&(y=y.concat(c.g.get(Ao(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)y=y.concat(c[m]);return y}t.set=function(c,m){return Ms(this),this.i=null,c=Ao(this,c),kv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=Av(this,c),c.length>0?String(c[0]):m):m};function Rv(c,m,y){Cv(c,m),y.length>0&&(c.i=null,c.g.set(Ao(c,m),g(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let b=0;b<m.length;b++){var y=m[b];const V=el(y);y=Av(this,y);for(let U=0;U<y.length;U++){let ne=V;y[U]!==""&&(ne+="="+el(y[U])),c.push(ne)}}return this.i=c.join("&")};function Pv(c){const m=new ol;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Ao(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function kk(c,m){m&&!c.j&&(Ms(c),c.i=null,c.g.forEach(function(y,b){const V=b.toLowerCase();b!=V&&(Cv(this,b),Rv(this,V,y))},c)),c.j=m}function Ak(c,m){const y=new wt;if(o.Image){const b=new Image;b.onload=h(ki,y,"TestLoadImage: loaded",!0,m,b),b.onerror=h(ki,y,"TestLoadImage: error",!1,m,b),b.onabort=h(ki,y,"TestLoadImage: abort",!1,m,b),b.ontimeout=h(ki,y,"TestLoadImage: timeout",!1,m,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else m(!1)}function Rk(c,m){const y=new wt,b=new AbortController,V=setTimeout(()=>{b.abort(),ki(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:b.signal}).then(U=>{clearTimeout(V),U.ok?ki(y,"TestPingServer: ok",!0,m):ki(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),ki(y,"TestPingServer: error",!1,m)})}function ki(c,m,y,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(y)}catch{}}function Pk(){this.g=new dn}function Uf(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Uf,Ee),Uf.prototype.g=function(){return new au(this.i,this.h)};function au(c,m){De.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(au,De),t=au.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,ll(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,al(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ll(this)),this.g&&(this.readyState=3,ll(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dv(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dv(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?al(this):ll(this),this.readyState==3&&Dv(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,al(this))},t.Na=function(c){this.g&&(this.response=c,al(this))},t.ga=function(){this.g&&al(this)};function al(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ll(c)}t.setRequestHeader=function(c,m){this.A.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function ll(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nv(c){let m="";return H(c,function(y,b){m+=b,m+=":",m+=y,m+=`\r
`}),m}function zf(c,m,y){e:{for(b in y){var b=!1;break e}b=!0}b||(y=Nv(y),typeof c=="string"?y!=null&&el(y):Je(c,m,y))}function ft(c){De.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ft,De);var Dk=/^https?$/i,Nk=["POST","PUT"];t=ft.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,m,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pv.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(U){jv(this,U);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)y.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const U of b.keys())y.set(U,b.get(U));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),V=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(Nk,m,void 0)>=0)||b||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ne]of y)this.g.setRequestHeader(U,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(U){jv(this,U)}};function jv(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Lv(c),lu(c)}function Lv(c){c.A||(c.A=!0,we(c,"complete"),we(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,we(this,"complete"),we(this,"abort"),lu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lu(this,!0)),ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mv(this):this.Xa())},t.Xa=function(){Mv(this)};function Mv(c){if(c.h&&typeof s<"u"){if(c.v&&Ai(c)==4)setTimeout(c.Ca.bind(c),0);else if(we(c,"readystatechange"),Ai(c)==4){c.h=!1;try{const U=c.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var b;if(b=U===0){let ne=String(c.D).match(bv)[1]||null;!ne&&o.self&&o.self.location&&(ne=o.self.location.protocol.slice(0,-1)),b=!Dk.test(ne?ne.toLowerCase():"")}y=b}if(y)we(c,"complete"),we(c,"success");else{c.o=6;try{var V=Ai(c)>2?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.ca()+"]",Lv(c)}}finally{lu(c)}}}}function lu(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const y=c.g;c.g=null,m||we(c,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ai(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),xn(m)}};function Vv(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function jk(c){const m={};c=(c.g&&Ai(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(I(c[b]))continue;var y=vk(c[b]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[V]||[];m[V]=U,U.push(y)}M(m,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function Ov(c){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=cl("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=cl("baseRetryDelayMs",5e3,c),this.Za=cl("retryDelaySeedMs",1e4,c),this.Ta=cl("forwardChannelMaxRetries",2,c),this.va=cl("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new xv(c&&c.concurrentRequestLimit),this.Ba=new Pk,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ov.prototype,t.ka=8,t.I=1,t.connect=function(c,m,y,b){fe(0),this.W=c,this.H=m||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.J=Gv(this,null,this.W),uu(this)};function Bf(c){if(Fv(c),c.I==3){var m=c.V++,y=Rr(c.J);if(Je(y,"SID",c.M),Je(y,"RID",m),Je(y,"TYPE","terminate"),ul(c,y),m=new Ii(c,c.j,m),m.M=2,m.A=ou(Rr(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=Kv(m.j,null),m.g.ea(m.A)),m.F=Date.now(),su(m)}Hv(c)}function cu(c){c.g&&(Wf(c),c.g.cancel(),c.g=null)}function Fv(c){cu(c),c.v&&(o.clearTimeout(c.v),c.v=null),du(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function uu(c){if(!_v(c.h)&&!c.m){c.m=!0;var m=c.Ea;L||T(),O||(L(),O=!0),S.add(m,c),c.D=0}}function Lk(c,m){return Tv(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Xe(d(c.Ea,c,m),qv(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const V=new Ii(this,this.j,c);let U=this.o;if(this.U&&(U?(U=D(U),Q(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=zv(this,V,m),y=Rr(this.J),Je(y,"RID",c),Je(y,"CVER",22),this.G&&Je(y,"X-HTTP-Session-Id",this.G),ul(this,y),U&&(this.R?m="headers="+el(Nv(U))+"&"+m:this.u&&zf(y,this.u,U)),Of(this.h,V),this.Ra&&Je(y,"TYPE","init"),this.S?(Je(y,"$req",m),Je(y,"SID","null"),V.U=!0,jf(V,y,null)):jf(V,y,m),this.I=2}}else this.I==3&&(c?Uv(this,c):this.i.length==0||_v(this.h)||Uv(this))};function Uv(c,m){var y;m?y=m.l:y=c.V++;const b=Rr(c.J);Je(b,"SID",c.M),Je(b,"RID",y),Je(b,"AID",c.K),ul(c,b),c.u&&c.o&&zf(b,c.u,c.o),y=new Ii(c,c.j,y,c.D+1),c.u===null&&(y.J=c.o),m&&(c.i=m.G.concat(c.i)),m=zv(c,y,1e3),y.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Of(c.h,y),jf(y,b,m)}function ul(c,m){c.H&&H(c.H,function(y,b){Je(m,b,y)}),c.l&&H({},function(y,b){Je(m,b,y)})}function zv(c,m,y){y=Math.min(c.i.length,y);const b=c.l?d(c.l.Ka,c.l,c):null;e:{var V=c.i;let Ce=-1;for(;;){const Nt=["count="+y];Ce==-1?y>0?(Ce=V[0].g,Nt.push("ofs="+Ce)):Ce=0:Nt.push("ofs="+Ce);let He=!0;for(let Ut=0;Ut<y;Ut++){var U=V[Ut].g;const Pr=V[Ut].map;if(U-=Ce,U<0)Ce=Math.max(0,V[Ut].g-100),He=!1;else try{U="req"+U+"_"||"";try{var ne=Pr instanceof Map?Pr:Object.entries(Pr);for(const[Os,Ri]of ne){let Pi=Ri;a(Ri)&&(Pi=ht(Ri)),Nt.push(U+Os+"="+encodeURIComponent(Pi))}}catch(Os){throw Nt.push(U+"type="+encodeURIComponent("_badmap")),Os}}catch{b&&b(Pr)}}if(He){ne=Nt.join("&");break e}}ne=void 0}return c=c.i.splice(0,y),m.G=c,ne}function Bv(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;L||T(),O||(L(),O=!0),S.add(m,c),c.A=0}}function $f(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Xe(d(c.Da,c),qv(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,$v(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Xe(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fe(10),cu(this),$v(this))};function Wf(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function $v(c){c.g=new Ii(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Rr(c.na);Je(m,"RID","rpc"),Je(m,"SID",c.M),Je(m,"AID",c.K),Je(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Je(m,"TO",c.ia),Je(m,"TYPE","xmlhttp"),ul(c,m),c.u&&c.o&&zf(m,c.u,c.o),c.O&&(c.g.H=c.O);var y=c.g;c=c.ba,y.M=1,y.A=ou(Rr(m)),y.u=null,y.R=!0,yv(y,c)}t.Va=function(){this.C!=null&&(this.C=null,cu(this),$f(this),fe(19))};function du(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Wv(c,m){var y=null;if(c.g==m){du(c),Wf(c),c.g=null;var b=2}else if(Vf(c.h,m))y=m.G,Ev(c.h,m),b=1;else return;if(c.I!=0){if(m.o)if(b==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var V=c.D;b=se(),we(b,new Dt(b,y)),uu(c)}else Bv(c);else if(V=m.m,V==3||V==0&&m.X>0||!(b==1&&Lk(c,m)||b==2&&$f(c)))switch(y&&y.length>0&&(m=c.h,m.i=m.i.concat(y)),V){case 1:Vs(c,5);break;case 4:Vs(c,10);break;case 3:Vs(c,6);break;default:Vs(c,2)}}}function qv(c,m){let y=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(y*=2),y*m}function Vs(c,m){if(c.j.info("Error code "+m),m==2){var y=d(c.bb,c),b=c.Ua;const V=!b;b=new Ci(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||nl(b,"https"),ou(b),V?Ak(b.toString(),y):Rk(b.toString(),y)}else fe(2);c.I=0,c.l&&c.l.pa(m),Hv(c),Fv(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Hv(c){if(c.I=0,c.ja=[],c.l){const m=Sv(c.h);(m.length!=0||c.i.length!=0)&&(w(c.ja,m),w(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Gv(c,m,y){var b=y instanceof Ci?Rr(y):new Ci(y);if(b.g!="")m&&(b.g=m+"."+b.g),rl(b,b.u);else{var V=o.location;b=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const U=new Ci(null);b&&nl(U,b),m&&(U.g=m),V&&rl(U,V),y&&(U.h=y),b=U}return y=c.G,m=c.wa,y&&m&&Je(b,y,m),Je(b,"VER",c.ka),ul(c,b),b}function Kv(c,m,y){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new ft(new Uf({ab:y})):new ft(c.ma),m.Fa(c.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qv(){}t=Qv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function hu(){}hu.prototype.g=function(c,m){return new Dn(c,m)};function Dn(c,m){De.call(this),this.g=new Ov(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!I(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ro(this)}f(Dn,De),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Bf(this.g)},Dn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.v&&(y={},y.__data__=ht(c),c=y);m.i.push(new _k(m.Ya++,c)),m.I==3&&uu(m)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Bf(this.g),delete this.g,Dn.Z.N.call(this)};function Yv(c){ei.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}f(Yv,ei);function Xv(){Ar.call(this),this.status=1}f(Xv,Ar);function Ro(c){this.g=c}f(Ro,Qv),Ro.prototype.ra=function(){we(this.g,"a")},Ro.prototype.qa=function(c){we(this.g,new Yv(c))},Ro.prototype.pa=function(c){we(this.g,new Xv)},Ro.prototype.oa=function(){we(this.g,"b")},hu.prototype.createWebChannel=hu.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,e2=function(){return new hu},Zb=function(){return se()},Jb=Qn,ug={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},iu.NO_ERROR=0,iu.TIMEOUT=8,iu.HTTP_ERROR=6,ad=iu,fv.COMPLETE="complete",Xb=fv,$e.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",De.prototype.listen=De.prototype.J,kl=$e,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,Yb=ft}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="12.8.0";function lL(t){Ha=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new s0("@firebase/firestore");function jo(){return po.logLevel}function ae(t,...e){if(po.logLevel<=Ne.DEBUG){const n=e.map(a0);po.debug(`Firestore (${Ha}): ${t}`,...n)}}function _i(t,...e){if(po.logLevel<=Ne.ERROR){const n=e.map(a0);po.error(`Firestore (${Ha}): ${t}`,...n)}}function Da(t,...e){if(po.logLevel<=Ne.WARN){const n=e.map(a0);po.warn(`Firestore (${Ha}): ${t}`,...n)}}function a0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,t2(t,r,n)}function t2(t,e,n){let r=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _i(r),new Error(r)}function Ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||t2(e,i,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(an.UNAUTHENTICATED))}shutdown(){}}class uL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dL{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new n2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class hL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Tx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Tx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=mL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function dg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Vp(i)===Vp(s)?je(i,s):Vp(i)?1:-1}return je(t.length,e.length)}const gL=55296,yL=57343;function Vp(t){const e=t.charCodeAt(0);return e>=gL&&e<=yL}function Na(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="__name__";class Mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Mr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return je(e.length,n.length)}static compareSegments(e,n){const r=Mr.isNumericId(e),i=Mr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):dg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class We extends Mr{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const vL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Mr{construct(e,n,r){return new Yt(e,n,r)}static isValidIdentifier(e){return vL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ex}static keyField(){return new Yt([Ex])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ie(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ie(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(We.fromString(e))}static fromName(e){return new pe(We.fromString(e).popFirst(5))}static empty(){return new pe(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t,e,n){if(!n)throw new ie(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wL(t,e,n,r){if(e===!0&&r===!0)throw new ie(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sx(t){if(!pe.isDocumentKey(t))throw new ie(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bx(t){if(pe.isDocumentKey(t))throw new ie(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function Yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(t);throw new ie(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wc(t,e){if(!i2(t))throw new ie(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ie(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=-62135596800,Cx=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Cx);return new tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ix)throw new ie(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cx}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ix;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Pt("string",tt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new tt(0,0))}static max(){return new Te(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=-1;function xL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new _s(i,pe.empty(),e)}function _L(t){return new _s(t.readTime,t.key,xc)}class _s{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _s(Te.min(),pe.empty(),xc)}static max(){return new _s(Te.max(),pe.empty(),xc)}}function TL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==EL)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const d=l;n(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ka(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=-1;function qc(t){return t==null}function eh(t){return t===0&&1/t==-1/0}function IL(t){return typeof t=="number"&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="";function CL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kx(e)),e=kL(t.get(n),e);return kx(e)}function kL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case s2:n+="";break;default:n+=s}}return n}function kx(t){return t+s2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kt.EMPTY,this.right=s??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rx(this.data.getIterator())}getIteratorFrom(e){return new Rx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class Rx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Vt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new a2("Invalid base64 string: "+s):s}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const AL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=AL.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(t.seconds),nanos:_t(t.nanos)}}function _t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="server_timestamp",c2="__type__",u2="__previous_value__",d2="__local_write_time__";function u0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c2])==null?void 0:r.stringValue)===l2}function of(t){const e=t.mapValue.fields[u2];return u0(e)?of(e):e}function _c(t){const e=Ts(t.mapValue.fields[d2].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n,r,i,s,o,a,l,d,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=f}}const th="(default)";class Tc{constructor(e,n){this.projectId=e,this.database=n||th}static empty(){return new Tc("","")}get isDefaultDatabase(){return this.database===th}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}function PL(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ie(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="__type__",f2="__max__",Vu={mapValue:{fields:{__type__:{stringValue:f2}}}},p2="__vector__",nh="value";function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u0(t)?4:NL(t)?9007199254740991:DL(t)?10:11:ve(28295,{value:t})}function Xr(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _c(t).isEqual(_c(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ts(i.timestampValue),a=Ts(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Es(i.bytesValue).isEqual(Es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _t(i.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _t(i.integerValue)===_t(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_t(i.doubleValue),a=_t(s.doubleValue);return o===a?eh(o)===eh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ax(o)!==Ax(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Xr(o[l],a[l])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function Ec(t,e){return(t.values||[]).find(n=>Xr(n,e))!==void 0}function ja(t,e){if(t===e)return 0;const n=Ss(t),r=Ss(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_t(s.integerValue||s.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Px(t.timestampValue,e.timestampValue);case 4:return Px(_c(t),_c(e));case 5:return dg(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Es(s),l=Es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let d=0;d<a.length&&d<l.length;d++){const h=je(a[d],l[d]);if(h!==0)return h}return je(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=je(_t(s.latitude),_t(o.latitude));return a!==0?a:je(_t(s.longitude),_t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,g,w,_;const a=s.fields||{},l=o.fields||{},d=(p=a[nh])==null?void 0:p.arrayValue,h=(g=l[nh])==null?void 0:g.arrayValue,f=je(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return f!==0?f:Dx(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Vu.mapValue&&o===Vu.mapValue)return 0;if(s===Vu.mapValue)return 1;if(o===Vu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=dg(l[f],h[f]);if(p!==0)return p;const g=ja(a[l[f]],d[h[f]]);if(g!==0)return g}return je(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function Px(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Ts(t),r=Ts(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function Dx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ja(n[i],r[i]);if(s)return s}return je(n.length,r.length)}function La(t){return hg(t)}function hg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ts(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=hg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${hg(n.fields[o])}`;return i+"}"}(t.mapValue):ve(61005,{value:t})}function ld(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(t);return e?16+ld(e):16;case 5:return 2*t.stringValue.length;case 6:return Es(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ld(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ps(r.fields,(s,o)=>{i+=s.length+ld(o)}),i}(t.mapValue);default:throw ve(13486,{value:t})}}function Nx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fg(t){return!!t&&"integerValue"in t}function d0(t){return!!t&&"arrayValue"in t}function jx(t){return!!t&&"nullValue"in t}function Lx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cd(t){return!!t&&"mapValue"in t}function DL(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[h2])==null?void 0:r.stringValue)===p2}function Hl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hl(t.arrayValue.values[n]);return e}return{...t}}function NL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===f2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(n)}setAll(e){let n=Yt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Hl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ps(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mn(Hl(this.value))}}function m2(t){const e=[];return Ps(t.fields,(n,r)=>{const i=new Yt([n]);if(cd(r)){const s=m2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $t(e,0,Te.min(),Te.min(),Te.min(),mn.empty(),0)}static newFoundDocument(e,n,r,i){return new $t(e,1,n,Te.min(),r,i,0)}static newNoDocument(e,n){return new $t(e,2,n,Te.min(),Te.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Te.min(),Te.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.position=e,this.inclusive=n}}function Mx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=ja(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function jL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{}class Rt extends g2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ML(e,n,r):n==="array-contains"?new FL(e,r):n==="in"?new UL(e,r):n==="not-in"?new zL(e,r):n==="array-contains-any"?new BL(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VL(e,r):new OL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ja(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends g2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cr(e,n)}matches(e){return y2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y2(t){return t.op==="and"}function v2(t){return LL(t)&&y2(t)}function LL(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function pg(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+La(t.value);if(v2(t))return t.filters.map(e=>pg(e)).join(",");{const e=t.filters.map(n=>pg(n)).join(",");return`${t.op}(${e})`}}function w2(t,e){return t instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)}(t,e):t instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&w2(o,i.filters[a]),!0):!1}(t,e):void ve(19439)}function x2(t){return t instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(x2).join(" ,")+"}"}(t):"Filter"}class ML extends Rt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class VL extends Rt{constructor(e,n){super(e,"in",n),this.keys=_2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OL extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=_2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class FL extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d0(n)&&Ec(n.arrayValue,this.value)}}class UL extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ec(this.value.arrayValue,n)}}class zL extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ec(this.value.arrayValue,n)}}class BL extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Ox(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $L(t,e,n,r,i,s,o)}function h0(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),qc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>La(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>La(r)).join(",")),e.Te=n}return e.Te}function f0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!w2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vx(t.startAt,e.startAt)&&Vx(t.endAt,e.endAt)}function mg(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function WL(t,e,n,r,i,s,o,a){return new Hc(t,e,n,r,i,s,o,a)}function p0(t){return new Hc(t)}function Fx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qL(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function T2(t){return t.collectionGroup!==null}function Gl(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vt(Yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ih(s,r))}),n.has(Yt.keyField().canonicalString())||e.Ie.push(new ih(Yt.keyField(),r))}return e.Ie}function Hr(t){const e=Ie(t);return e.Ee||(e.Ee=HL(e,Gl(t))),e.Ee}function HL(t,e){if(t.limitType==="F")return Ox(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ih(i.field,s)});const n=t.endAt?new rh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rh(t.startAt.position,t.startAt.inclusive):null;return Ox(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gg(t,e){const n=t.filters.concat([e]);return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yg(t,e,n){return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function af(t,e){return f0(Hr(t),Hr(e))&&t.limitType===e.limitType}function E2(t){return`${h0(Hr(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>x2(i)).join(", ")}]`),qc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>La(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>La(i)).join(",")),`Target(${r})`}(Hr(t))}; limitType=${t.limitType})`}function lf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Gl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const d=Mx(o,a,l);return o.inclusive?d<=0:d<0}(r.startAt,Gl(r),i)||r.endAt&&!function(o,a,l){const d=Mx(o,a,l);return o.inclusive?d>=0:d>0}(r.endAt,Gl(r),i))}(t,e)}function GL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S2(t){return(e,n)=>{let r=!1;for(const i of Gl(t)){const s=KL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function KL(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),d=a.data.field(s);return l!==null&&d!==null?ja(l,d):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=new dt(pe.comparator);function Ti(){return QL}const b2=new dt(pe.comparator);function Al(...t){let e=b2;for(const n of t)e=e.insert(n.key,n);return e}function I2(t){let e=b2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return Kl()}function C2(){return Kl()}function Kl(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const YL=new dt(pe.comparator),XL=new Vt(pe.comparator);function Le(...t){let e=XL;for(const n of t)e=e.add(n);return e}const JL=new Vt(je);function ZL(){return JL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function k2(t){return{integerValue:""+t}}function eM(t,e){return IL(e)?k2(e):m0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this._=void 0}}function tM(t,e,n){return t instanceof Sc?function(i,s){const o={fields:{[c2]:{stringValue:l2},[d2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&u0(s)&&(s=of(s)),s&&(o.fields[u2]=s),{mapValue:o}}(n,e):t instanceof bc?R2(t,e):t instanceof Ic?P2(t,e):function(i,s){const o=A2(i,s),a=Ux(o)+Ux(i.Ae);return fg(o)&&fg(i.Ae)?k2(a):m0(i.serializer,a)}(t,e)}function nM(t,e,n){return t instanceof bc?R2(t,e):t instanceof Ic?P2(t,e):n}function A2(t,e){return t instanceof sh?function(r){return fg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Sc extends cf{}class bc extends cf{constructor(e){super(),this.elements=e}}function R2(t,e){const n=D2(e);for(const r of t.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ic extends cf{constructor(e){super(),this.elements=e}}function P2(t,e){let n=D2(e);for(const r of t.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}class sh extends cf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ux(t){return _t(t.integerValue||t.doubleValue)}function D2(t){return d0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n){this.field=e,this.transform=n}}function iM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof bc&&i instanceof bc||r instanceof Ic&&i instanceof Ic?Na(r.elements,i.elements,Xr):r instanceof sh&&i instanceof sh?Xr(r.Ae,i.Ae):r instanceof Sc&&i instanceof Sc}(t.transform,e.transform)}class sM{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ud(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uf{}function N2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g0(t.key,gn.none()):new Gc(t.key,t.data,gn.none());{const n=t.data,r=mn.empty();let i=new Vt(Yt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ds(t.key,r,new Fn(i.toArray()),gn.none())}}function oM(t,e,n){t instanceof Gc?function(i,s,o){const a=i.value.clone(),l=Bx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(i,s,o){if(!ud(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Bx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(j2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ql(t,e,n,r){return t instanceof Gc?function(s,o,a,l){if(!ud(s.precondition,o))return a;const d=s.value.clone(),h=$x(s.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(s,o,a,l){if(!ud(s.precondition,o))return a;const d=$x(s.fieldTransforms,l,o),h=o.data;return h.setAll(j2(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return ud(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function aM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=A2(r.transform,i||null);s!=null&&(n===null&&(n=mn.empty()),n.set(r.field,s))}return n||null}function zx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Na(r,i,(s,o)=>iM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gc extends uf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ds extends uf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function j2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Bx(t,e,n){const r=new Map;Ve(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,nM(o,a,n[i]))}return r}function $x(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,tM(s,o,e))}return r}class g0 extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L2 extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&oM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=C2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=N2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(n,r)=>zx(n,r))&&Na(this.baseMutations,e.baseMutations,(n,r)=>zx(n,r))}}class y0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return YL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new y0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Me;function M2(t){switch(t){case B.OK:return ve(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function V2(t){if(t===void 0)return _i("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ct.OK:return B.OK;case Ct.CANCELLED:return B.CANCELLED;case Ct.UNKNOWN:return B.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return B.INTERNAL;case Ct.UNAVAILABLE:return B.UNAVAILABLE;case Ct.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ct.NOT_FOUND:return B.NOT_FOUND;case Ct.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ct.ABORTED:return B.ABORTED;case Ct.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ct.DATA_LOSS:return B.DATA_LOSS;default:return ve(39323,{code:t})}}(Me=Ct||(Ct={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new fs([4294967295,4294967295],0);function Wx(t){const e=dM().encode(t),n=new Qb;return n.update(e),new Uint8Array(n.digest())}function qx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fs([n,r],0),new fs([i,s],0)]}class v0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(fs.fromNumber(r)));return i.compare(hM)===1&&(i=new fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Wx(e),[r,i]=qx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new v0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Wx(e),[r,i]=qx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new df(Te.min(),i,new dt(je),Ti(),Le())}}class Kc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kc(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class O2{constructor(e,n){this.targetId=e,this.Ce=n}}class F2{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Hx{constructor(){this.ve=0,this.Fe=Gx(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),r=Le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve(38017,{changeType:s})}}),new Kc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Gx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class fM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.He=Ou(),this.Je=Ou(),this.Ze=new dt(je)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(mg(s))if(r===0){const o=new pe(s.path);this.et(n,o,$t.newNoDocument(o,Te.min()))}else Ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Es(r).toUint8Array()}catch(l){if(l instanceof a2)return Da("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new v0(o,i,s)}catch(l){return Da(l instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&mg(a.target)){const l=new pe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,$t.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}});let r=Le();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new df(e,n,this.Ze,this.je,r);return this.je=Ti(),this.He=Ou(),this.Je=Ou(),this.Ze=new dt(je),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Hx,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Vt(je),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Vt(je),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ou(){return new dt(pe.comparator)}function Gx(){return new dt(pe.comparator)}const pM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),mM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),gM=(()=>({and:"AND",or:"OR"}))();class yM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vg(t,e){return t.useProto3Json||qc(e)?e:{value:e}}function oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vM(t,e){return oh(t,e.toTimestamp())}function Bn(t){return Ve(!!t,49232),Te.fromTimestamp(function(n){const r=Ts(n);return new tt(r.seconds,r.nanos)}(t))}function w0(t,e){return wg(t,e).canonicalString()}function wg(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function z2(t){const e=We.fromString(t);return Ve(G2(e),10190,{key:e.toString()}),e}function ah(t,e){return w0(t.databaseId,e.path)}function Yl(t,e){const n=z2(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe($2(n))}function B2(t,e){return w0(t.databaseId,e)}function wM(t){const e=z2(t);return e.length===4?We.emptyPath():$2(e)}function xg(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $2(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kx(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function xM(t,e){return"found"in e?function(r,i){Ve(!!i.found,43571),i.found.name,i.found.updateTime;const s=Yl(r,i.found.name),o=Bn(i.found.updateTime),a=i.found.createTime?Bn(i.found.createTime):Te.min(),l=new mn({mapValue:{fields:i.found.fields}});return $t.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Ve(!!i.missing,3894),Ve(!!i.readTime,22933);const s=Yl(r,i.missing),o=Bn(i.readTime);return $t.newNoDocument(s,o)}(t,e):ve(7234,{result:e})}function _M(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ve(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ve(h===void 0||typeof h=="string",58123),Zt.fromBase64String(h||"")):(Ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Zt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?B.UNKNOWN:V2(d.code);return new ie(h,d.message||"")}(o);n=new F2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yl(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):Te.min(),a=new mn({mapValue:{fields:r.document.fields}}),l=$t.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new dd(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yl(t,r.document),s=r.readTime?Bn(r.readTime):Te.min(),o=$t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yl(t,r.document),s=r.removedTargetIds||[];n=new dd([],s,i,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uM(i,s),a=r.targetId;n=new O2(a,o)}}return n}function W2(t,e){let n;if(e instanceof Gc)n={update:Kx(t,e.key,e.value)};else if(e instanceof g0)n={delete:ah(t,e.key)};else if(e instanceof Ds)n={update:Kx(t,e.key,e.data),updateMask:RM(e.fieldMask)};else{if(!(e instanceof L2))return ve(16599,{dt:e.type});n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ve(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve(27497)}(t,e.precondition)),n}function TM(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(Te.min())&&(o=Bn(s)),new sM(o,i.transformResults||[])}(n,e))):[]}function EM(t,e){return{documents:[B2(t,e.path)]}}function SM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=B2(t,i);const s=function(d){if(d.length!==0)return H2(Cr.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Mo(p.field),direction:CM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function bM(t){let e=wM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ve(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=q2(f);return p instanceof Cr&&v2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new ih(Vo(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,qc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new rh(g,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,g=f.values||[];return new rh(g,p)}(n.endAt)),WL(e,i,o,s,a,"F",l,d)}function IM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function q2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vo(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vo(n.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vo(n.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vo(n.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return Rt.create(Vo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>q2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function CM(t){return pM[t]}function kM(t){return mM[t]}function AM(t){return gM[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function Vo(t){return Yt.fromServerFormat(t.fieldPath)}function H2(t){return t instanceof Rt?function(n){if(n.op==="=="){if(Lx(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(jx(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lx(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(jx(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:kM(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(i=>H2(i));return r.length===1?r[0]:{compositeFilter:{op:AM(n.op),filters:r}}}(t):ve(54877,{filter:t})}function RM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function G2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function K2(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,i,s=Te.min(),o=Te.min(),a=Zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.yt=e}}function DM(t){const e=bM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.Sn=new jM}addToCollectionParentIndex(e,n){return this.Sn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(_s.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class jM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vt(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q2=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(Q2,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ma(0)}static ar(){return new Ma(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="LruGarbageCollector",LM=1048576;function Xx([t,e],[n,r]){const i=je(t,n);return i===0?je(e,r):i}class MM{constructor(e){this.Pr=e,this.buffer=new Vt(Xx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class VM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ae(Yx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ka(n)?ae(Yx,"Ignoring IndexedDB error during garbage collection: ",n):await Ga(n)}await this.Ar(3e5)})}}class OM{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(sf.ce);const r=new MM(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Qx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qx):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,a,l,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),jo()<=Ne.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(d-l)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function FM(t,e){return new OM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ql(r.mutation,i,Fn.empty(),tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Le()){const i=Zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Al();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ti();const o=Kl(),a=function(){return Kl()}();return n.forEach((l,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ds)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Ql(h.mutation,d,h.mutation.getFieldMask(),tt.now())):o.set(d.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>a.set(d,new zM(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Kl();let i=new dt((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const d=n.get(l);if(d===null)return;let h=r.get(l)||Fn.empty();h=a.applyToLocalView(d,h),r.set(l,h);const f=(i.get(a.batchId)||Le()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),d=l.key,h=l.value,f=C2();h.forEach(p=>{if(!s.has(p)){const g=N2(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return qL(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Zs());let a=xc,l=s;return o.next(d=>$.forEach(d,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,Le())).next(h=>({batchId:a,changes:I2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let i=Al();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Al();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const d=function(f,p){return new Hc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,$t.newInvalidDocument(h)))});let a=Al();return o.forEach((l,d)=>{const h=s.get(l);h!==void 0&&Ql(h.mutation,d,Fn.empty(),tt.now()),lf(n,d)&&(a=a.insert(l,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return $.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:DM(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new dt(pe.comparator),this.Lr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Zs(),s=n.length+1,o=new pe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new dt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Zs(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=Zs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return $.resolve(a)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cM(n,r));let s=this.Lr.get(n);s===void 0&&(s=Le(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.kr=new Vt(zt.Kr),this.qr=new Vt(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new zt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new pe(new We([])),r=new zt(n,e),i=new zt(n,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new pe(new We([])),r=new zt(n,e),i=new zt(n,e+1);let s=Le();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new zt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return pe.comparator(e.key,n.key)||je(e.Hr,n.Hr)}static Ur(e,n){return je(e.Hr,n.Hr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Vt(zt.Kr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Jr=this.Jr.add(new zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?c0:this.Yn-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),i=new zt(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(je);return n.forEach(i=>{const s=new zt(i,0),o=new zt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),$.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;pe.isDocumentKey(s)||(s=s.child(""));const o=new zt(new pe(s),0);let a=new Vt(je);return this.Jr.forEachWhile(l=>{const d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(l.Hr)),!0)},o),$.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ve(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return $.forEach(n.mutations,i=>{const s=new zt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new zt(n,0),i=this.Jr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.ti=e,this.docs=function(){return new dt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Ti();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$t.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ti();const o=n.path,a=new pe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||TL(_L(h),r)<=0||(i.has(h.key)||lf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ve(9500)}ni(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KM(this)}getSize(e){return $.resolve(this.size)}}class KM extends UM{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.persistence=e,this.ri=new So(n=>h0(n),f0),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.ii=0,this.si=new x0,this.targetCount=0,this.oi=Ma._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),$.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ma(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.lr(n),$.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this._i={},this.overlays={},this.ai=new sf(0),this.ui=!1,this.ui=!0,this.ci=new qM,this.referenceDelegate=e(this),this.li=new QM(this),this.indexManager=new NM,this.remoteDocumentCache=function(i){return new GM(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new PM(n),this.Pi=new $M(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new HM(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const i=new YM(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return $.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class YM extends SL{constructor(e){super(),this.currentSequenceNumber=e}}class _0{constructor(e){this.persistence=e,this.Ri=new x0,this.Ai=null}static Vi(e){return new _0(e)}get di(){if(this.Ai)return this.Ai;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,r=>{const i=pe.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,Te.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class lh{constructor(e,n){this.persistence=e,this.fi=new So(r=>CL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FM(this,n)}static Vi(e,n){return new lh(e,n)}Ti(){}Ii(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return $.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),$.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ld(e.data.value)),n}wr(e,n,r){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=Le(),i=Le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new T0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return BN()?8:bL(un())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new XM;return this.ys(e,n,o).next(a=>{if(s.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(jo()<=Ne.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(jo()<=Ne.DEBUG&&ae("QueryEngine","Query:",Lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(jo()<=Ne.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):$.resolve())}gs(e,n){if(Fx(n))return $.resolve(null);let r=Hr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=yg(n,null,"F"),r=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Le(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const d=this.bs(n,a);return this.Ss(n,d,o,l.readTime)?this.gs(e,yg(n,null,"F")):this.Ds(e,d,n,l)}))})))}ps(e,n,r,i){return Fx(n)||i.isEqual(Te.min())?$.resolve(null):this.fs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?$.resolve(null):(jo()<=Ne.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lo(n)),this.Ds(e,o,n,xL(i,xc)).next(a=>a))})}bs(e,n){let r=new Vt(S2(e));return n.forEach((i,s)=>{lf(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return jo()<=Ne.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.fs.getDocumentsMatchingQuery(e,n,_s.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="LocalStore",ZM=3e8;class eV{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new dt(je),this.Fs=new So(s=>h0(s),f0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function tV(t,e,n,r){return new eV(t,e,n,r)}async function X2(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Le();for(const d of i){o.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}for(const d of s){a.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function nV(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,d,h){const f=d.batch,p=f.keys();let g=$.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(l,w)).next(_=>{const P=d.docVersions.get(w);Ve(P!==null,48541),_.version.compareTo(P)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Le();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function J2(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function rV(t,e){const n=Ie(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.li.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.li.addMatchingKeys(s,h.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Zt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(_,P,E){return _.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=ZM?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,g,h)&&a.push(n.li.updateTargetData(s,g))});let l=Ti(),d=Le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(iV(s,o,e.documentUpdates).next(h=>{l=h.Bs,d=h.Ls})),!r.isEqual(Te.min())){const h=n.li.getLastRemoteSnapshotVersion(s).next(f=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(n.vs=i,s))}function iV(t,e,n){let r=Le(),i=Le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ti();return n.forEach((a,l)=>{const d=s.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ae(E0,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{Bs:o,Ls:i}})}function sV(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=c0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oV(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new Xi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function _g(t,e,n){const r=Ie(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ka(o))throw o;ae(E0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Jx(t,e,n){const r=Ie(t);let i=Te.min(),s=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){const f=Ie(l),p=f.Fs.get(h);return p!==void 0?$.resolve(f.vs.get(p)):f.li.getTargetData(d,h)}(r,o,Hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Te.min(),n?s:Le())).next(a=>(aV(r,GL(e),a),{documents:a,ks:s})))}function aV(t,e,n){let r=t.Ms.get(e)||Te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class Zx{constructor(){this.activeTargetIds=ZL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lV{constructor(){this.vo=new Zx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Zx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="ConnectivityMonitor";class t_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ae(e_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ae(e_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu=null;function Tg(){return Fu===null?Fu=function(){return 268435456+Math.round(2147483648*Math.random())}():Fu++,"0x"+Fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="RestConnection",uV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class dV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===th?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=Tg(),a=this.Qo(e,n.toUriEncodedString());ae(Op,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,s);const{host:d}=new URL(a),h=Zr(d);return this.zo(e,a,l,r,h).then(f=>(ae(Op,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Da(Op,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=uV[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",_l=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class ua extends dV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ua.c_){const e=Zb();_l(e,Jb.STAT_EVENT,n=>{n.stat===ug.PROXY?ae(rn,"STAT_EVENT: detected buffering proxy"):n.stat===ug.NOPROXY&&ae(rn,"STAT_EVENT: detected no buffering proxy")}),ua.c_=!0}}zo(e,n,r,i,s){const o=Tg();return new Promise((a,l)=>{const d=new Yb;d.setWithCredentials(!0),d.listenOnce(Xb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ad.NO_ERROR:const f=d.getResponseJson();ae(rn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case ad.TIMEOUT:ae(rn,`RPC '${e}' ${o} timed out`),l(new ie(B.DEADLINE_EXCEEDED,"Request time out"));break;case ad.HTTP_ERROR:const p=d.getStatus();if(ae(rn,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let g=d.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const _=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(w.status);l(new ie(_,w.message))}else l(new ie(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new ie(B.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ae(rn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);ae(rn,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Tg(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=s.join("");ae(rn,`Creating RPC '${e}' stream ${i}: ${d}`,a);const h=o.createWebChannel(d,a);this.I_(h);let f=!1,p=!1;const g=new hV({Ho:w=>{p?ae(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(ae(rn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ae(rn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Jo:()=>h.close()});return _l(h,kl.EventType.OPEN,()=>{p||(ae(rn,`RPC '${e}' stream ${i} transport opened.`),g.i_())}),_l(h,kl.EventType.CLOSE,()=>{p||(p=!0,ae(rn,`RPC '${e}' stream ${i} transport closed`),g.o_(),this.E_(h))}),_l(h,kl.EventType.ERROR,w=>{p||(p=!0,Da(rn,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),g.o_(new ie(B.UNAVAILABLE,"The operation could not be completed")))}),_l(h,kl.EventType.MESSAGE,w=>{var _;if(!p){const P=w.data[0];Ve(!!P,16349);const E=P,v=(E==null?void 0:E.error)||((_=E[0])==null?void 0:_.error);if(v){ae(rn,`RPC '${e}' stream ${i} received error:`,v);const x=v.status;let j=function(S){const T=Ct[S];if(T!==void 0)return V2(T)}(x),L=v.message;j===void 0&&(j=B.INTERNAL,L="Unknown error status: "+x+" with message "+v.message),p=!0,g.o_(new ie(j,L)),h.close()}else ae(rn,`RPC '${e}' stream ${i} received:`,P),g.__(P)}}),ua.u_(),setTimeout(()=>{g.s_()},0),g}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return e2()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t){return new ua(t)}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){return new yM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ua.c_=!1;class S0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="PersistentStream";class Z2{constructor(e,n,r,i,s,o,a,l){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new S0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(_i(n.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ie(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(n_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(ae(n_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pV extends Z2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_M(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?Bn(o.readTime):Te.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=xg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=mg(l)?{documents:EM(s,l)}:{query:SM(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=U2(s,o.resumeToken);const d=vg(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=oh(s,o.snapshotVersion.toTimestamp());const d=vg(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=IM(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=xg(this.serializer),n.removeTarget=e,this.K_(n)}}class mV extends Z2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TM(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>W2(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{}class yV extends gV{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ie(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,wg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(B.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,wg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function vV(t,e,n,r){return new yV(t,e,n,r)}class wV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_i(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class xV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{bo(this)&&(ae(mo,"Restarting streams for network reachability change."),await async function(l){const d=Ie(l);d.Ea.add(4),await Qc(d),d.Va.set("Unknown"),d.Ea.delete(4),await ff(d)}(this))})}),this.Va=new wV(r,i)}}async function ff(t){if(bo(t))for(const e of t.Ra)await e(!0)}async function Qc(t){for(const e of t.Ra)await e(!1)}function eI(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),k0(n)?C0(n):Qa(n).O_()&&I0(n,e))}function b0(t,e){const n=Ie(t),r=Qa(n);n.Ia.delete(e),r.O_()&&tI(n,e),n.Ia.size===0&&(r.O_()?r.L_():bo(n)&&n.Va.set("Unknown"))}function I0(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).Z_(e)}function tI(t,e){t.da.$e(e),Qa(t).X_(e)}function C0(t){t.da=new fM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.Va.ua()}function k0(t){return bo(t)&&!Qa(t).x_()&&t.Ia.size>0}function bo(t){return Ie(t).Ea.size===0}function nI(t){t.da=void 0}async function _V(t){t.Va.set("Online")}async function TV(t){t.Ia.forEach((e,n)=>{I0(t,e)})}async function EV(t,e){nI(t),k0(t)?(t.Va.ha(e),C0(t)):t.Va.set("Unknown")}async function SV(t,e,n){if(t.Va.set("Online"),e instanceof F2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))}(t,e)}catch(r){ae(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ch(t,r)}else if(e instanceof dd?t.da.Xe(e):e instanceof O2?t.da.st(e):t.da.tt(e),!n.isEqual(Te.min()))try{const r=await J2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.da.Tt(o);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,d)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Zt.EMPTY_BYTE_STRING,h.snapshotVersion)),tI(s,l);const f=new Xi(h.target,l,d,h.sequenceNumber);I0(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ae(mo,"Failed to raise snapshot:",r),await ch(t,r)}}async function ch(t,e,n){if(!Ka(e))throw e;t.Ea.add(1),await Qc(t),t.Va.set("Offline"),n||(n=()=>J2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ff(t)})}function rI(t,e){return e().catch(n=>ch(t,n,e))}async function pf(t){const e=Ie(t),n=bs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:c0;for(;bV(e);)try{const i=await sV(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,IV(e,i)}catch(i){await ch(e,i)}iI(e)&&sI(e)}function bV(t){return bo(t)&&t.Ta.length<10}function IV(t,e){t.Ta.push(e);const n=bs(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function iI(t){return bo(t)&&!bs(t).x_()&&t.Ta.length>0}function sI(t){bs(t).start()}async function CV(t){bs(t).ra()}async function kV(t){const e=bs(t);for(const n of t.Ta)e.ea(n.mutations)}async function AV(t,e,n){const r=t.Ta.shift(),i=y0.from(r,e,n);await rI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pf(t)}async function RV(t,e){e&&bs(t).Y_&&await async function(r,i){if(function(o){return M2(o)&&o!==B.ABORTED}(i.code)){const s=r.Ta.shift();bs(r).B_(),await rI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pf(r)}}(t,e),iI(t)&&sI(t)}async function r_(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ae(mo,"RemoteStore received new credentials");const r=bo(n);n.Ea.add(3),await Qc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ff(n)}async function PV(t,e){const n=Ie(t);e?(n.Ea.delete(2),await ff(n)):e||(n.Ea.add(2),await Qc(n),n.Va.set("Unknown"))}function Qa(t){return t.ma||(t.ma=function(n,r,i){const s=Ie(n);return s.sa(),new pV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:_V.bind(null,t),Yo:TV.bind(null,t),t_:EV.bind(null,t),J_:SV.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),k0(t)?C0(t):t.Va.set("Unknown")):(await t.ma.stop(),nI(t))})),t.ma}function bs(t){return t.fa||(t.fa=function(n,r,i){const s=Ie(n);return s.sa(),new mV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:CV.bind(null,t),t_:RV.bind(null,t),ta:kV.bind(null,t),na:AV.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await pf(t)):(await t.fa.stop(),t.Ta.length>0&&(ae(mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new A0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R0(t,e){if(_i("AsyncQueue",`${e}: ${t}`),Ka(t))return new ie(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{static emptySet(e){return new da(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=Al(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new da;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.ga=new dt(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Va{constructor(e,n,r,i,s,o,a,l,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Va(e,n,da.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class NV{constructor(){this.queries=s_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ie(n),s=i.queries;i.queries=s_(),s.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new ie(B.ABORTED,"Firestore shutting down"))}}function s_(){return new So(t=>E2(t),af)}async function oI(t,e){const n=Ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new DV,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=R0(o,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&P0(n)}async function aI(t,e){const n=Ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jV(t,e){const n=Ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&P0(n)}function LV(t,e,n){const r=Ie(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function P0(t){t.Ca.forEach(e=>{e.next()})}var Eg,o_;(o_=Eg||(Eg={})).Ma="default",o_.Cache="cache";class lI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.key=e}}class uI{constructor(e){this.key=e}}class MV{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Le(),this.mutatedKeys=Le(),this.eu=S2(e),this.tu=new da(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new i_,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),g=lf(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?w!==_&&(r.track({type:3,doc:g}),P=!0):this.su(p,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.eu(g,l)>0||d&&this.eu(g,d)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(l||d)&&(a=!0)),P&&(g?(o=o.add(g),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,w){const _=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:P})}};return _(g)-_(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Xa;return this.Xa=l,o.length!==0||d?{snapshot:new Va(this.query,e.tu,s,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new i_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new uI(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new cI(r))}),n}cu(e){this.Za=e.ks,this.Ya=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const D0="SyncEngine";class VV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OV{constructor(e){this.key=e,this.hu=!1}}class FV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new So(a=>E2(a),af),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(pe.comparator),this.Au=new Map,this.Vu=new x0,this.du={},this.mu=new Map,this.fu=Ma.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UV(t,e,n=!0){const r=gI(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await dI(r,e,n,!0),i}async function zV(t,e){const n=gI(t);await dI(n,e,!0,!1)}async function dI(t,e,n,r){const i=await oV(t.localStore,Hr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await BV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&eI(t.remoteStore,i),a}async function BV(t,e,n,r,i){t.pu=(f,p,g)=>async function(_,P,E,v){let x=P.view.ru(E);x.Ss&&(x=await Jx(_.localStore,P.query,!1).then(({documents:S})=>P.view.ru(S,x)));const j=v&&v.targetChanges.get(P.targetId),L=v&&v.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(x,_.isPrimaryClient,j,L);return l_(_,P.targetId,O.au),O.snapshot}(t,f,p,g);const s=await Jx(t.localStore,e,!0),o=new MV(e,s.ks),a=o.ru(s.documents),l=Kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(a,t.isPrimaryClient,l);l_(t,n,d.au);const h=new VV(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function $V(t,e,n){const r=Ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!af(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _g(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&b0(r.remoteStore,i.targetId),Sg(r,i.targetId)}).catch(Ga)):(Sg(r,i.targetId),await _g(r.localStore,i.targetId,!0))}async function WV(t,e){const n=Ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b0(n.remoteStore,r.targetId))}async function qV(t,e,n){const r=JV(t);try{const i=await function(o,a){const l=Ie(o),d=tt.now(),h=a.reduce((g,w)=>g.add(w.key),Le());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Ti(),_=Le();return l.xs.getEntries(g,h).next(P=>{w=P,w.forEach((E,v)=>{v.isValidDocument()||(_=_.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(P=>{f=P;const E=[];for(const v of a){const x=aM(v,f.get(v.key).overlayedDocument);x!=null&&E.push(new Ds(v.key,x,m2(x.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,d,E,a)}).next(P=>{p=P;const E=P.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(g,P.batchId,E)})}).then(()=>({batchId:p.batchId,changes:I2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let d=o.du[o.currentUser.toKey()];d||(d=new dt(je)),d=d.insert(a,l),o.du[o.currentUser.toKey()]=d}(r,i.batchId,n),await Yc(r,i.changes),await pf(r.remoteStore)}catch(i){const s=R0(i,"Failed to persist write");n.reject(s)}}async function hI(t,e){const n=Ie(t);try{const r=await rV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ve(o.hu,14607):i.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))}),await Yc(n,r,e)}catch(r){await Ga(r)}}function a_(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let d=!1;l.queries.forEach((h,f)=>{for(const p of f.ba)p.va(a)&&(d=!0)}),d&&P0(l)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HV(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new dt(pe.comparator);o=o.insert(s,$t.newNoDocument(s,Te.min()));const a=Le().add(s),l=new df(Te.min(),new Map,new dt(je),o,a);await hI(r,l),r.Ru=r.Ru.remove(s),r.Au.delete(e),N0(r)}else await _g(r.localStore,e,!1).then(()=>Sg(r,e,n)).catch(Ga)}async function GV(t,e){const n=Ie(t),r=e.batch.batchId;try{const i=await nV(n.localStore,e);pI(n,r,null),fI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yc(n,i)}catch(i){await Ga(i)}}async function KV(t,e,n){const r=Ie(t);try{const i=await function(o,a){const l=Ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,a).next(f=>(Ve(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(d,f))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(r.localStore,e);pI(r,e,n),fI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yc(r,i)}catch(i){await Ga(i)}}function fI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function pI(t,e,n){const r=Ie(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Sg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||mI(t,r)})}function mI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(b0(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),N0(t))}function l_(t,e,n){for(const r of n)r instanceof cI?(t.Vu.addReference(r.key,e),QV(t,r)):r instanceof uI?(ae(D0,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||mI(t,r.key)):ve(19791,{wu:r})}function QV(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(ae(D0,"New document in limbo: "+n),t.Eu.add(r),N0(t))}function N0(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(We.fromString(e)),r=t.fu.next();t.Au.set(r,new OV(n)),t.Ru=t.Ru.insert(n,r),eI(t.remoteStore,new Xi(Hr(p0(n.path)),r,"TargetPurposeLimboResolution",sf.ce))}}async function Yc(t,e,n){const r=Ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(d){i.push(d);const f=T0.Es(l.targetId,d);s.push(f)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(l,d){const h=Ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(d,p=>$.forEach(p.Ts,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>$.forEach(p.Is,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Ka(f))throw f;ae(E0,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const g=h.vs.get(p),w=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(w);h.vs=h.vs.insert(p,_)}}}(r.localStore,s))}async function YV(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ae(D0,"User change. New user:",e.toKey());const r=await X2(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new ie(B.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yc(n,r.Ns)}}function XV(t,e){const n=Ie(t),r=n.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let i=Le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function gI(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HV.bind(null,e),e.Pu.J_=jV.bind(null,e.eventManager),e.Pu.yu=LV.bind(null,e.eventManager),e}function JV(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KV.bind(null,e),e}class uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tV(this.persistence,new JM,e.initialUser,this.serializer)}Cu(e){return new Y2(_0.Vi,this.serializer)}Du(e){return new lV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uh.provider={build:()=>new uh};class ZV extends uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof lh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new VM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Y2(r=>lh.Vi(r,n),this.serializer)}}class bg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YV.bind(null,this.syncEngine),await PV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NV}()}createDatastore(e){const n=hf(e.databaseInfo.databaseId),r=fV(e.databaseInfo);return vV(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new xV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>a_(this.syncEngine,n,0),function(){return t_.v()?new t_:new cV}())}createSyncEngine(e,n){return function(i,s,o,a,l,d,h){const f=new FV(i,s,o,a,l,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ie(i);ae(mo,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e3=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Ie(i),a={documents:s.map(f=>ah(o.serializer,f))},l=await o.jo("BatchGetDocuments",o.serializer.databaseId,We.emptyPath(),a,s.length),d=new Map;l.forEach(f=>{const p=xM(o.serializer,f);d.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=d.get(f.toString());Ve(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new g0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=pe.fromPath(r);this.mutations.push(new L2(i,this.precondition(i)))}),await async function(r,i){const s=Ie(r),o={writes:i.map(a=>W2(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,We.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ve(50498,{Gu:e.constructor.name});n=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ie(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Te.min())?gn.exists(!1):gn.updateTime(n):gn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Te.min()))throw new ie(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(n)}return gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new S0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{const e=new e3(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Zu(i)}))}).catch(r=>{this.Zu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!qc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!M2(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class n3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=l0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ae(Is,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ae(Is,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Up(t,e){t.asyncQueue.verifyOperationInProgress(),ae(Is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await X2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function c_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r3(t);ae(Is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>r_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>r_(e.remoteStore,i)),t._onlineComponents=e}async function r3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(Is,"Using user provided OfflineComponentProvider");try{await Up(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await Up(t,new uh)}}else ae(Is,"Using default OfflineComponentProvider"),await Up(t,new ZV(void 0));return t._offlineComponents}async function j0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(Is,"Using user provided OnlineComponentProvider"),await c_(t,t._uninitializedComponentsProvider._online)):(ae(Is,"Using default OnlineComponentProvider"),await c_(t,new bg))),t._onlineComponents}function i3(t){return j0(t).then(e=>e.syncEngine)}function s3(t){return j0(t).then(e=>e.datastore)}async function vI(t){const e=await j0(t),n=e.eventManager;return n.onListen=UV.bind(null,e.syncEngine),n.onUnlisten=$V.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WV.bind(null,e.syncEngine),n}function o3(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,d){const h=new yI({next:p=>{h.Nu(),o.enqueueAndForget(()=>aI(s,f));const g=p.docs.has(a);!g&&p.fromCache?d.reject(new ie(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?d.reject(new ie(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new lI(p0(a.path),h,{includeMetadataChanges:!0,Ka:!0});return oI(s,f)}(await vI(t),t.asyncQueue,e,n,r)),r.promise}function a3(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,d){const h=new yI({next:p=>{h.Nu(),o.enqueueAndForget(()=>aI(s,f)),p.fromCache&&l.source==="server"?d.reject(new ie(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new lI(a,h,{includeMetadataChanges:!0,Ka:!0});return oI(s,f)}(await vI(t),t.asyncQueue,e,n,r)),r.promise}function l3(t,e){const n=new qr;return t.asyncQueue.enqueueAndForget(async()=>qV(await i3(t),e,n)),n.promise}function c3(t,e,n){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>{const i=await s3(t);new t3(t.asyncQueue,i,n,e,r).ju()}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="ComponentProvider",u_=new Map;function d3(t,e,n,r,i){return new RL(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,wI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="firestore.googleapis.com",d_=!0;class h_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xI,this.ssl=d_}else this.host=e.host,this.ssl=e.ssl??d_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LM)throw new ie(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cL;switch(r.type){case"firstParty":return new fL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=u_.get(n);r&&(ae(u3,"Removing Datastore"),u_.delete(n),r.terminate())}(this),Promise.resolve()}}function h3(t,e,n,r={}){var d;t=Yr(t,mf);const i=Zr(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(ef(`https://${a}`),tf("Firestore",!0)),s.host!==xI&&s.host!==a&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!fo(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=an.MOCK_USER;else{h=$b(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ie(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new an(p)}t._authCredentials=new uL(new n2(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ya(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Wc(n,gt._jsonSchema))return new gt(e,r||null,new pe(We.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:Pt("string",gt._jsonSchemaVersion),referencePath:Pt("string")};class ps extends Ya{constructor(e,n,r){super(e,n,p0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new pe(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function zp(t,e,...n){if(t=rt(t),r2("collection","path",e),t instanceof mf){const r=We.fromString(e,...n);return bx(r),new ps(t,null,r)}{if(!(t instanceof gt||t instanceof ps))throw new ie(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return bx(r),new ps(t.firestore,null,r)}}function Us(t,e,...n){if(t=rt(t),arguments.length===1&&(e=l0.newId()),r2("doc","path",e),t instanceof mf){const r=We.fromString(e,...n);return Sx(r),new gt(t,null,new pe(r))}{if(!(t instanceof gt||t instanceof ps))throw new ie(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return Sx(r),new gt(t.firestore,t instanceof ps?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new S0(this,"async_queue_retry"),this._c=()=>{const r=Fp();r&&ae(f_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ka(e))throw e;ae(f_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_i("INTERNAL UNHANDLED ERROR: ",m_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=A0.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ve(47125,{Pc:m_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function m_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xa extends mf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new p_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function f3(t,e){const n=typeof t=="object"?t:nf(),r=typeof t=="string"?t:e||th,i=$c(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=i0("firestore");s&&h3(i,...s)}return i}function gf(t){if(t._terminated)throw new ie(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p3(t),t._firestoreClient}function p3(t){var r,i,s,o;const e=t._freezeSettings(),n=d3(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new n3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const d=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Zt.fromBase64String(e))}catch(n){throw new ie(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:Pt("string",Vn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:Pt("string",Gr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sr(e.vectorValues);throw new ie(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Pt("string",Sr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=/^__.*__$/;class g3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}class _I{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{dataSource:t})}}class L0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new L0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return dh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(TI(this.dataSource)&&m3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class y3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hf(e)}createContext(e,n,r,i=!1){return new L0({dataSource:e,methodName:n,targetDoc:r,path:Yt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wf(t){const e=t._freezeSettings(),n=hf(t._databaseId);return new y3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EI(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);V0("Data must be an object, but it was:",o,r);const a=II(r,o);let l,d;if(s.merge)l=new Fn(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Oa(e,f,n);if(!o.contains(p))throw new ie(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);AI(h,p)||h.push(p)}l=new Fn(h),d=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,d=o.fieldTransforms;return new g3(new mn(a),l,d)}class xf extends vf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}class M0 extends vf{_toFieldTransform(e){return new rM(e.path,new Sc)}isEqual(e){return e instanceof M0}}function SI(t,e,n,r){const i=t.createContext(1,e,n);V0("Data must be an object, but it was:",i,r);const s=[],o=mn.empty();Ps(r,(l,d)=>{const h=kI(e,l,n);d=rt(d);const f=i.childContextForFieldPath(h);if(d instanceof xf)s.push(h);else{const p=Xc(d,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Fn(s);return new _I(o,a,i.fieldTransforms)}function bI(t,e,n,r,i,s){const o=t.createContext(1,e,n),a=[Oa(e,r,n)],l=[i];if(s.length%2!=0)throw new ie(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Oa(e,s[p])),l.push(s[p+1]);const d=[],h=mn.empty();for(let p=a.length-1;p>=0;--p)if(!AI(d,a[p])){const g=a[p];let w=l[p];w=rt(w);const _=o.childContextForFieldPath(g);if(w instanceof xf)d.push(g);else{const P=Xc(w,_);P!=null&&(d.push(g),h.set(g,P))}}const f=new Fn(d);return new _I(h,f,o.fieldTransforms)}function v3(t,e,n,r=!1){return Xc(n,t.createContext(r?4:3,e))}function Xc(t,e){if(CI(t=rt(t)))return V0("Unsupported field value:",e,t),II(t,e);if(t instanceof vf)return function(r,i){if(!TI(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Xc(a,i.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=tt.fromDate(r);return{timestampValue:oh(i.serializer,s)}}if(r instanceof tt){const s=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oh(i.serializer,s)}}if(r instanceof Gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:U2(i.serializer,r._byteString)};if(r instanceof gt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sr)return function(o,a){const l=o instanceof Sr?o.toArray():o;return{mapValue:{fields:{[h2]:{stringValue:p2},[nh]:{arrayValue:{values:l.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return m0(a.serializer,h)})}}}}}}(r,i);if(K2(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${rf(r)}`)}(t,e)}function II(t,e){const n={};return o2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(t,(r,i)=>{const s=Xc(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Gr||t instanceof Vn||t instanceof gt||t instanceof vf||t instanceof Sr||K2(t))}function V0(t,e,n){if(!CI(n)||!i2(n)){const r=rf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Oa(t,e,n){if((e=rt(e))instanceof yf)return e._internalPath;if(typeof e=="string")return kI(t,e);throw dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const w3=new RegExp("[~\\*/\\[\\]]");function kI(t,e,n){if(e.search(w3)>=0)throw dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yf(...e.split("."))._internalPath}catch{throw dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ie(B.INVALID_ARGUMENT,a+t+l)}function AI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ps(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[nh].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>_t(o.doubleValue));return new Sr(n)}convertGeoPoint(e){return new Gr(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=of(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const n=Ts(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Ve(G2(r),9688,{name:e});const i=new Tc(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(n)||_i(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends RI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function Do(){return new M0("serverTimestamp")}const g_="@firebase/firestore",y_="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Oa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x3 extends hh{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F0{}class T3 extends F0{}function Bp(t,e,...n){let r=[];e instanceof F0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof U0).length,a=s.filter(l=>l instanceof _f).length;if(o>1||o>0&&a>0)throw new ie(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class _f extends T3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _f(e,n,r)}_apply(e){const n=this._parse(e);return PI(e._query,n),new Ya(e.firestore,e.converter,gg(e._query,n))}_parse(e){const n=wf(e.firestore);return function(s,o,a,l,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){x_(f,h);const w=[];for(const _ of f)w.push(w_(l,s,_));p={arrayValue:{values:w}}}else p=w_(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||x_(f,h),p=v3(a,o,f,h==="in"||h==="not-in");return Rt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function v_(t,e,n){const r=e,i=Oa("where",t);return _f._create(i,r,n)}class U0 extends F0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new U0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)PI(o,l),o=gg(o,l)}(e._query,n),new Ya(e.firestore,e.converter,gg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function w_(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new ie(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T2(e)&&n.indexOf("/")!==-1)throw new ie(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!pe.isDocumentKey(r))throw new ie(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nx(t,new pe(r))}if(n instanceof gt)return Nx(t,n._key);throw new ie(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function x_(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function DI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class E3 extends RI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}class ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends hh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Oa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:Pt("string",ms._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class hd extends ms{data(e={}){return super.data(e)}}class ha{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ea(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hd(this._firestore,this._userDataWriter,r.key,r,new ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ea(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ea(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:S3(a.type),doc:l,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ha._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=l0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ha._jsonSchemaVersion="firestore/querySnapshot/1.0",ha._jsonSchema={type:Pt("string",ha._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};const b3={maxAttempts:5};function Pl(t,e){if((t=rt(t)).firestore!==e)throw new ie(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=wf(e)}get(e){const n=Pl(e,this._firestore),r=new E3(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ve(24041);const s=i[0];if(s.isFoundDocument())return new hh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new hh(this._firestore,r,n._key,null,n.converter);throw ve(18433,{doc:s})})}set(e,n,r){const i=Pl(e,this._firestore),s=DI(i.converter,n,r),o=EI(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Pl(e,this._firestore);let o;return o=typeof(n=rt(n))=="string"||n instanceof yf?bI(this._dataReader,"Transaction.update",s._key,n,r,i):SI(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Pl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3 extends I3{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Pl(e,this._firestore),r=new O0(this._firestore);return super.get(e).then(i=>new ms(this._firestore,r,n._key,i._document,new ea(!1,!1),n.converter))}}function Uu(t,e,n){t=Yr(t,Xa);const r={...b3,...n};(function(o){if(o.maxAttempts<1)throw new ie(B.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=gf(t);return c3(i,s=>e(new C3(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){t=Yr(t,gt);const e=Yr(t.firestore,Xa),n=gf(e);return o3(n,t._key).then(r=>R3(e,t,r))}function $p(t){t=Yr(t,Ya);const e=Yr(t.firestore,Xa),n=gf(e),r=new O0(e);return _3(t._query),a3(n,t._query).then(i=>new ha(e,r,t,i))}function k3(t,e,n){t=Yr(t,gt);const r=Yr(t.firestore,Xa),i=DI(t.converter,e,n),s=wf(r);return NI(r,[EI(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gn.none())])}function A3(t,e,n,...r){t=Yr(t,gt);const i=Yr(t.firestore,Xa),s=wf(i);let o;return o=typeof(e=rt(e))=="string"||e instanceof yf?bI(s,"updateDoc",t._key,e,n,r):SI(s,"updateDoc",t._key,e),NI(i,[o.toMutation(t._key,gn.exists(!0))])}function NI(t,e){const n=gf(t);return l3(n,e)}function R3(t,e,n){const r=n.docs.get(e._key),i=new O0(t);return new ms(t,i,e._key,r,new ea(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){lL(Eo),xs(new wi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Xa(new dL(r.getProvider("auth-internal")),new pL(o,r.getProvider("app-check-internal")),PL(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),or(g_,y_,e),or(g_,y_,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firebasestorage.googleapis.com",LI="storageBucket",P3=2*60*1e3,D3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt extends kr{constructor(e,n,r=0){super(Wp(e),`Firebase Storage: ${n} (${Wp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function Wp(t){return"storage/"+t}function z0(){const t="An unknown error occurred, please check the error payload for server response.";return new vt(yt.UNKNOWN,t)}function N3(t){return new vt(yt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function j3(t){return new vt(yt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function L3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(yt.UNAUTHENTICATED,t)}function M3(){return new vt(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V3(t){return new vt(yt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function O3(){return new vt(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function F3(){return new vt(yt.CANCELED,"User canceled the upload/download.")}function U3(t){return new vt(yt.INVALID_URL,"Invalid URL '"+t+"'.")}function z3(t){return new vt(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function B3(){return new vt(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LI+"' property when initializing the app?")}function $3(){return new vt(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W3(){return new vt(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function q3(t){return new vt(yt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ig(t){return new vt(yt.INVALID_ARGUMENT,t)}function MI(){return new vt(yt.APP_DELETED,"The Firebase app was deleted.")}function H3(t){return new vt(yt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xl(t,e){return new vt(yt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Tl(t){throw new vt(yt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Un.makeFromUrl(e,n)}catch{return new Un(e,"")}if(r.path==="")return r;throw z3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),w={bucket:1,path:3},_=n===jI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${_}/${i}/${P}`,"i"),x=[{regex:a,indices:l,postModify:s},{regex:g,indices:w,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<x.length;j++){const L=x[j],O=L.regex.exec(e);if(O){const S=O[L.indices.bucket];let T=O[L.indices.path];T||(T=""),r=new Un(S,T),L.postModify(r);break}}if(r==null)throw U3(e);return r}}class G3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let d=!1;function h(...P){d||(d=!0,e.apply(null,P))}function f(P){i=setTimeout(()=>{i=null,t(g,l())},P)}function p(){s&&clearTimeout(s)}function g(P,...E){if(d){p();return}if(P){p(),h.call(null,P,...E);return}if(l()||o){p(),h.call(null,P,...E);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let w=!1;function _(P){w||(w=!0,p(),!d&&(i!==null?(P||(a=2),clearTimeout(i),f(0)):P||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function Q3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t){return t!==void 0}function X3(t){return typeof t=="object"&&!Array.isArray(t)}function B0(t){return typeof t=="string"||t instanceof String}function T_(t){return $0()&&t instanceof Blob}function $0(){return typeof Blob<"u"}function E_(t,e,n,r){if(r<e)throw Ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var io;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(io||(io={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,r,i,s,o,a,l,d,h,f,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new zu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===io.NO_ERROR,l=s.getStatus();if(!a||J3(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===io.ABORT;r(!1,new zu(!1,null,h));return}const d=this.successCodes_.indexOf(l)!==-1;r(!0,new zu(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Y3(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=z0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?MI():F3();o(l)}else{const l=O3();o(l)}};this.canceled_?n(!1,new zu(!1,null,!0)):this.backoffId_=K3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Q3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function e6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function t6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function r6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function i6(t,e,n,r,i,s,o=!0,a=!1){const l=VI(t.urlParams),d=t.url+l,h=Object.assign({},t.headers);return n6(h,e),e6(h,n),t6(h,s),r6(h,r),new Z3(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function o6(...t){const e=s6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($0())return new Blob(t);throw new vt(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function a6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t){if(typeof atob>"u")throw q3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qp{constructor(e,n){this.data=e,this.contentType=n||null}}function c6(t,e){switch(t){case Ur.RAW:return new qp(OI(e));case Ur.BASE64:case Ur.BASE64URL:return new qp(FI(t,e));case Ur.DATA_URL:return new qp(d6(e),h6(e))}throw z0()}function OI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function u6(t){let e;try{e=decodeURIComponent(t)}catch{throw Xl(Ur.DATA_URL,"Malformed data URL.")}return OI(e)}function FI(t,e){switch(t){case Ur.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Xl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Xl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=l6(e)}catch(i){throw i.message.includes("polyfill")?i:Xl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class UI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xl(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=f6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function d6(t){const e=new UI(t);return e.base64?FI(Ur.BASE64,e.rest):u6(e.rest)}function h6(t){return new UI(t).contentType}function f6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){let r=0,i="";T_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(T_(this.data_)){const r=this.data_,i=a6(r,e,n);return i===null?null:new $i(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new $i(r,!0)}}static getBlob(...e){if($0()){const n=e.map(r=>r instanceof $i?r.data_:r);return new $i(o6.apply(null,n))}else{const n=e.map(o=>B0(o)?c6(Ur.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new $i(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){let e;try{e=JSON.parse(t)}catch{return null}return X3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function m6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function BI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t,e){return e}class hn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||g6}}let Bu=null;function y6(t){return!B0(t)||t.length<2?t:BI(t)}function $I(){if(Bu)return Bu;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(s,o){return y6(o)}const n=new hn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new hn("size");return i.xform=r,t.push(i),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),Bu=t,Bu}function v6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Un(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function w6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return v6(r,t),r}function WI(t,e,n){const r=zI(e);return r===null?null:w6(t,r,n)}function x6(t,e,n,r){const i=zI(e);if(i===null||!B0(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),g=W0(p,n,r),w=VI({alt:"media",token:d});return g+w})[0]}function _6(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class qI{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t){if(!t)throw z0()}function T6(t,e){function n(r,i){const s=WI(t,i,e);return HI(s!==null),s}return n}function E6(t,e){function n(r,i){const s=WI(t,i,e);return HI(s!==null),x6(s,i,t.host,t._protocol)}return n}function GI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=M3():i=L3():n.getStatus()===402?i=j3(t.bucket):n.getStatus()===403?i=V3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function S6(t){const e=GI(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=N3(t.path)),s.serverResponse=i.serverResponse,s}return n}function b6(t,e,n){const r=e.fullServerUrl(),i=W0(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new qI(i,s,E6(t,n),o);return a.errorHandler=S6(e),a}function I6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=I6(null,e)),r}function k6(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let j=0;j<2;j++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const d=C6(e,r,i),h=_6(d,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=$i.getBlob(f,r,p);if(g===null)throw $3();const w={name:d.fullPath},_=W0(s,t.host,t._protocol),P="POST",E=t.maxUploadRetryTime,v=new qI(_,P,T6(t,n),E);return v.urlParams=w,v.headers=o,v.body=g.uploadData(),v.errorHandler=GI(e),v}class A6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=io.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=io.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=io.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Tl("cannot .send() more than once");if(Zr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class R6 extends A6{initXhr(){this.xhr_.responseType="text"}}function KI(){return new R6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this._service=e,n instanceof Un?this._location=n:this._location=Un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new go(e,n)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BI(this._location.path)}get storage(){return this._service}get parent(){const e=p6(this._location.path);if(e===null)return null;const n=new Un(this._location.bucket,e);return new go(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw H3(e)}}function P6(t,e,n){t._throwIfRoot("uploadBytes");const r=k6(t.storage,t._location,$I(),new $i(e,!0),n);return t.storage.makeRequestWithTokens(r,KI).then(i=>({metadata:i,ref:t}))}function D6(t){t._throwIfRoot("getDownloadURL");const e=b6(t.storage,t._location,$I());return t.storage.makeRequestWithTokens(e,KI).then(n=>{if(n===null)throw W3();return n})}function N6(t,e){const n=m6(t._location.path,e),r=new Un(t._location.bucket,n);return new go(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){return/^[A-Za-z]+:\/\//.test(t)}function L6(t,e){return new go(t,e)}function QI(t,e){if(t instanceof q0){const n=t;if(n._bucket==null)throw B3();const r=new go(n,n._bucket);return e!=null?QI(r,e):r}else return e!==void 0?N6(t,e):t}function M6(t,e){if(e&&j6(e)){if(t instanceof q0)return L6(t,e);throw Ig("To use ref(service, url), the first argument must be a Storage instance.")}else return QI(t,e)}function S_(t,e){const n=e==null?void 0:e[LI];return n==null?null:Un.makeFromBucketSpec(n,t)}function V6(t,e,n,r={}){t.host=`${e}:${n}`;const i=Zr(e);i&&(ef(`https://${t.host}/b`),tf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:$b(s,t.app.options.projectId))}class q0{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=jI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P3,this._maxUploadRetryTime=D3,this._requests=new Set,i!=null?this._bucket=Un.makeFromBucketSpec(i,this._host):this._bucket=S_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=S_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new go(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new G3(MI());{const o=i6(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const b_="@firebase/storage",I_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="storage";function nz(t,e,n){return t=rt(t),P6(t,e,n)}function rz(t){return t=rt(t),D6(t)}function iz(t,e){return t=rt(t),M6(t,e)}function O6(t=nf(),e){t=rt(t);const r=$c(t,YI).getImmediate({identifier:e}),i=i0("storage");return i&&F6(r,...i),r}function F6(t,e,n,r={}){V6(t,e,n,r)}function U6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new q0(n,r,i,e,Eo)}function z6(){xs(new wi(YI,U6,"PUBLIC").setMultipleInstances(!0)),or(b_,I_,""),or(b_,I_,"esm2020")}z6();function XI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B6=XI,JI=new zc("auth","Firebase",XI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new s0("@firebase/auth");function $6(t,...e){fh.logLevel<=Ne.WARN&&fh.warn(`Auth (${Eo}): ${t}`,...e)}function fd(t,...e){fh.logLevel<=Ne.ERROR&&fh.error(`Auth (${Eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw G0(t,...e)}function br(t,...e){return G0(t,...e)}function H0(t,e,n){const r={...B6(),[e]:n};return new zc("auth","Firebase",r).create(e,{appName:t.name})}function so(t){return H0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(t,"argument-error"),H0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function G0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JI.create(t,...e)}function be(t,e,...n){if(!t)throw G0(e,...n)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fd(e),new Error(e)}function Ei(t,e){t||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function q6(){return C_()==="http:"||C_()==="https:"}function C_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q6()||FN()||"connection"in navigator)?navigator.onLine:!0}function G6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=MN()||UN()}get(){return H6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e){Ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y6=new Jc(3e4,6e4);function Q0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ja(t,e,n,r,i={}){return eC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:l,...s};return ON()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Zr(t.emulatorConfig.host)&&(d.credentials="include"),ZI.fetch()(await tC(t,t.config.apiHost,n,a),d)})}async function eC(t,e,n){t._canInitEmulator=!1;const r={...K6,...e};try{const i=new J6(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $u(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $u(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $u(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw H0(t,h,d);Jr(t,h)}}catch(i){if(i instanceof kr)throw i;Jr(t,"network-request-failed",{message:String(i)})}}async function X6(t,e,n,r,i={}){const s=await Ja(t,e,n,r,i);return"mfaPendingCredential"in s&&Jr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function tC(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?K0(t.config,i):`${t.config.apiScheme}://${i}`;return Q6.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class J6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),Y6.get())})}}function $u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=br(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e){return Ja(t,"POST","/v1/accounts:delete",e)}async function ph(t,e){return Ja(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eO(t,e=!1){const n=rt(t),r=await n.getIdToken(e),i=Y0(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Jl(Hp(i.auth_time)),issuedAtTime:Jl(Hp(i.iat)),expirationTime:Jl(Hp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Hp(t){return Number(t)*1e3}function Y0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Fb(n);return i?JSON.parse(i):(fd("Failed to decode base64 JWT payload"),null)}catch(i){return fd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function k_(t){const e=Y0(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&tO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Cc(t,ph(e,{idToken:n}));be(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?nC(i.providerUserInfo):[],o=iO(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new kg(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function rO(t){const e=rt(t);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e){const n=await eC(t,{},async()=>{const r=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await tC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Zr(t.emulatorConfig.host)&&(l.credentials="include"),ZI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oO(t,e){return Ja(t,"POST","/v2/accounts:revokeToken",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=k_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await sO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new fa;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new nO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eO(this,e)}reload(){return rO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(so(this.auth));const e=await this.getIdToken();return await Cc(this,Z6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:_}=n;be(f&&_,e,"internal-error");const P=fa.fromJSON(this.name,_);be(typeof f=="string",e,"internal-error"),Ni(r,e.name),Ni(i,e.name),be(typeof p=="boolean",e,"internal-error"),be(typeof g=="boolean",e,"internal-error"),Ni(s,e.name),Ni(o,e.name),Ni(a,e.name),Ni(l,e.name),Ni(d,e.name),Ni(h,e.name);const E=new xr({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:d,lastLoginAt:h});return w&&Array.isArray(w)&&(E.providerData=w.map(v=>({...v}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new fa;i.updateFromServerResponse(n);const s=new xr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?nC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new fa;a.updateFromIdToken(r);const l=new xr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new kg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function ci(t){Ei(t instanceof Function,"Expected a class definition");let e=A_.get(t);return e?(Ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rC.type="NONE";const R_=rC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,e,n){return`firebase:${t}:${e}:${n}`}class pa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pd(this.userKey,i.apiKey,s),this.fullPersistenceKey=pd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?xr._fromGetAccountInfoResponse(this.auth,n,e):null}return xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pa(ci(R_),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||ci(R_);const o=pd(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const p=await ph(e,{idToken:h}).catch(()=>{});if(!p)break;f=await xr._fromGetAccountInfoResponse(e,p,h)}else f=xr._fromJSON(e,h);d!==s&&(a=f),s=d;break}}catch{}const l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new pa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new pa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cC(e))return"Blackberry";if(uC(e))return"Webos";if(sC(e))return"Safari";if((e.includes("chrome/")||oC(e))&&!e.includes("edge/"))return"Chrome";if(lC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iC(t=un()){return/firefox\//i.test(t)}function sC(t=un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oC(t=un()){return/crios\//i.test(t)}function aC(t=un()){return/iemobile/i.test(t)}function lC(t=un()){return/android/i.test(t)}function cC(t=un()){return/blackberry/i.test(t)}function uC(t=un()){return/webos/i.test(t)}function X0(t=un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aO(t=un()){var e;return X0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lO(){return zN()&&document.documentMode===10}function dC(t=un()){return X0(t)||lC(t)||uC(t)||cC(t)||/windows phone/i.test(t)||aC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e=[]){let n;switch(t){case"Browser":n=P_(un());break;case"Worker":n=`${P_(un())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e={}){return Ja(t,"GET","/v2/passwordPolicy",Q0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=6;class hO{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D_(this),this.idTokenSubscription=new D_(this),this.beforeStateQueue=new cO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ci(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await pa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),r=await xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=G6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(so(this));const n=e?rt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(so(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(so(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uO(this),n=new hO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ci(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await pa.create(this,[ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zc(t){return rt(t)}class D_{constructor(e){this.auth=e,this.observer=null,this.addObserver=QN(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pO(t){J0=t}function mO(t){return J0.loadJS(t)}function gO(){return J0.gapiScript}function yO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t,e){const n=$c(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(fo(s,e??{}))return i;Jr(i,"already-initialized")}return n.initialize({options:e})}function wO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xO(t,e,n){const r=Zc(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=fC(e),{host:o,port:a}=_O(e),l=a===null?"":`:${a}`,d={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(fo(d,r.config.emulator)&&fo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Zr(o)?(ef(`${s}//${o}${l}`),tf("Auth",!0)):i||TO()}function fC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _O(t){const e=fC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:N_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:N_(o)}}}function N_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,n){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e){return X6(t,"POST","/v1/accounts:signInWithIdp",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="http://localhost";class yo extends pC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new yo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ma(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ma(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ma(e,n)}buildRequest(){const e={requestUri:EO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Z0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends eu{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yo._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends eu{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends eu{constructor(){super("twitter.com")}static credential(e,n){return yo._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hi.credential(n,r)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xr._fromIdTokenResponse(e,r,i),o=j_(r);return new Fa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=j_(r);return new Fa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function j_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends kr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gh(e,n,r,i)}}function mC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(t,s,e,r):s})}async function SO(t,e,n=!1){const r=await Cc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e,n=!1){const{auth:r}=t;if(Mn(r.app))return Promise.reject(so(r));const i="reauthenticate";try{const s=await Cc(t,mC(r,i,e,t),n);be(s.idToken,r,"internal-error");const o=Y0(s.idToken);be(o,r,"internal-error");const{sub:a}=o;return be(t.uid===a,r,"user-mismatch"),Fa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e,n=!1){if(Mn(t.app))return Promise.reject(so(t));const r="signIn",i=await mC(t,r,e),s=await Fa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function CO(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function kO(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function AO(t){return rt(t).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=1e3,PO=10;class yC extends gC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);lO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yC.type="LOCAL";const DO=yC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends gC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vC.type="SESSION";const wC=vC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Tf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async d=>d(n.origin,s)),l=await NO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const d=ev("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return window}function LO(t){Kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof Kr().WorkerGlobalScope<"u"&&typeof Kr().importScripts=="function"}async function MO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function OO(){return xC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firebaseLocalStorageDb",FO=1,vh="firebaseLocalStorage",TC="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ef(t,e){return t.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function UO(){const t=indexedDB.deleteDatabase(_C);return new tu(t).toPromise()}function Ag(){const t=indexedDB.open(_C,FO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vh,{keyPath:TC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await UO(),e(await Ag()))})})}async function L_(t,e,n){const r=Ef(t,!0).put({[TC]:e,value:n});return new tu(r).toPromise()}async function zO(t,e){const n=Ef(t,!1).get(e),r=await new tu(n).toPromise();return r===void 0?null:r.value}function M_(t,e){const n=Ef(t,!0).delete(e);return new tu(n).toPromise()}const BO=800,$O=3;class EC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$O)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(OO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await MO(),!this.activeServiceWorker)return;this.sender=new jO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ag();return await L_(e,yh,"1"),await M_(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>L_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ef(i,!1).getAll();return new tu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EC.type="LOCAL";const WO=EC;new Jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t,e){return e?ci(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends pC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qO(t){return IO(t.auth,new tv(t),t.bypassAuthState)}function HO(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),bO(n,new tv(t),t.bypassAuthState)}async function GO(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),SO(n,new tv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qO;case"linkViaPopup":case"linkViaRedirect":return GO;case"reauthViaPopup":case"reauthViaRedirect":return HO;default:Jr(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=new Jc(2e3,1e4);async function QO(t,e,n){if(Mn(t.app))return Promise.reject(br(t,"operation-not-supported-in-this-environment"));const r=Zc(t);W6(t,e,Z0);const i=SC(r,n);return new eo(r,"signInViaPopup",e,i).executeNotNull()}class eo extends bC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KO.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="pendingRedirect",md=new Map;class XO extends bC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=md.get(this.auth._key());if(!e){try{const r=await JO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}md.set(this.auth._key(),e)}return this.bypassAuthState||md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JO(t,e){const n=tF(e),r=eF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ZO(t,e){md.set(t._key(),e)}function eF(t){return ci(t._redirectPersistence)}function tF(t){return pd(YO,t.config.apiKey,t.name)}async function nF(t,e){return await Zc(t)._initializationPromise,IC(t,e,!1)}async function IC(t,e,n=!1){if(Mn(t.app))return Promise.reject(so(t));const r=Zc(t),i=SC(r,e),o=await new XO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=10*60*1e3;class iF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rF&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e={}){return Ja(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lF=/^https?/;async function cF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oF(t);for(const n of e)try{if(uF(n))return}catch{}Jr(t,"unauthorized-domain")}function uF(t){const e=Cg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lF.test(n))return!1;if(aF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new Jc(3e4,6e4);function O_(){const t=Kr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hF(t){return new Promise((e,n)=>{var i,s,o;function r(){O_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O_(),n(br(t,"network-request-failed"))},timeout:dF.get()})}if((s=(i=Kr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Kr().gapi)!=null&&o.load)r();else{const a=yO("iframefcb");return Kr()[a]=()=>{gapi.load?r():n(br(t,"network-request-failed"))},mO(`${gO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw gd=null,e})}let gd=null;function fF(t){return gd=gd||hF(t),gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new Jc(5e3,15e3),mF="__/auth/iframe",gF="emulator/auth/iframe",yF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wF(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?K0(e,gF):`https://${t.config.authDomain}/${mF}`,r={apiKey:e.apiKey,appName:t.name,v:Eo},i=vF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bc(r).slice(1)}`}async function xF(t){const e=await fF(t),n=Kr().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:wF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=br(t,"network-request-failed"),a=Kr().setTimeout(()=>{s(o)},pF.get());function l(){Kr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TF=500,EF=600,SF="_blank",bF="http://localhost";class F_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IF(t,e,n,r=TF,i=EF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={..._F,width:r.toString(),height:i.toString(),top:s,left:o},d=un().toLowerCase();n&&(a=oC(d)?SF:n),iC(d)&&(e=e||bF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(aO(d)&&a!=="_self")return CF(e||"",a),new F_(null);const f=window.open(e||"",a,h);be(f,t,"popup-blocked");try{f.focus()}catch{}return new F_(f)}function CF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="__/auth/handler",AF="emulator/auth/handler",RF=encodeURIComponent("fac");async function U_(t,e,n,r,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Eo,eventId:i};if(e instanceof Z0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof eu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),d=l?`#${RF}=${encodeURIComponent(l)}`:"";return`${PF(t)}?${Bc(a).slice(1)}${d}`}function PF({config:t}){return t.emulator?K0(t,AF):`https://${t.authDomain}/${kF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class DF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wC,this._completeRedirectFn=IC,this._overrideRedirectResult=ZO}async _openPopup(e,n,r,i){var o;Ei((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await U_(e,n,r,Cg(),i);return IF(e,s,ev())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await U_(e,n,r,Cg(),i);return LO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xF(e),r=new iF(e);return n.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gp,{type:Gp},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Gp];s!==void 0&&n(!!s),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dC()||sC()||X0()}}const NF=DF;var z_="@firebase/auth",B_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MF(t){xs(new wi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hC(t)},d=new fO(r,i,s,l);return wO(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xs(new wi("auth-internal",e=>{const n=Zc(e.getProvider("auth").getImmediate());return(r=>new jF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(z_,B_,LF(t)),or(z_,B_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=5*60,OF=Bb("authIdTokenMaxAge")||VF;let $_=null;const FF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OF)return;const i=n==null?void 0:n.token;$_!==i&&($_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UF(t=nf()){const e=$c(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vO(t,{popupRedirectResolver:NF,persistence:[WO,DO,wC]}),r=Bb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=FF(s.toString());kO(n,o,()=>o(n.currentUser)),CO(n,a=>o(a))}}const i=Ub("auth");return i&&xO(n,`http://${i}`),n}function zF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",zF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MF("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="type.googleapis.com/google.protobuf.Int64Value",$F="type.googleapis.com/google.protobuf.UInt64Value";function kC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function wh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>wh(e));if(typeof t=="function"||typeof t=="object")return kC(t,e=>wh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ua(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case BF:case $F:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ua(e)):typeof t=="function"||typeof t=="object"?kC(t,e=>Ua(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cn extends kr{constructor(e,n,r){super(`${nv}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Cn.prototype)}}function WF(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function xh(t,e){let n=WF(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!W_[o])return new Cn("internal","internal");n=W_[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=Ua(i))}}catch{}return n==="ok"?null:new Cn(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="us-central1",HF=/^data: (.*?)(?:\n|$)/;function GF(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Cn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class KF{constructor(e,n,r,i,s=Rg,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new qF(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Rg}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function QF(t,e,n){const r=Zr(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(ef(t.emulatorOrigin+"/backends"),tf("Functions",!0))}function YF(t,e,n){const r=i=>JF(t,e,i,n||{});return r.stream=(i,s)=>e8(t,e,i,s),r}function AC(t){return t.emulatorOrigin&&Zr(t.emulatorOrigin)?"include":void 0}async function XF(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:AC(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function RC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function JF(t,e,n,r){const i=t._url(e);return ZF(t,i,n,r)}async function ZF(t,e,n,r){n=wh(n);const i={data:n},s=await RC(t,r),o=r.timeout||7e4,a=GF(o),l=await Promise.race([XF(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Cn("cancelled","Firebase Functions instance was deleted.");const d=xh(l.status,l.json);if(d)throw d;if(!l.json)throw new Cn("internal","Response is not valid JSON object.");let h=l.json.data;if(typeof h>"u"&&(h=l.json.result),typeof h>"u")throw new Cn("internal","Response is missing data field.");return{data:Ua(h)}}function e8(t,e,n,r){const i=t._url(e);return t8(t,i,n,r||{})}async function t8(t,e,n,r){var p;n=wh(n);const i={data:n},s=await RC(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:AC(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const _=new Cn("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const w=xh(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,l;const d=new Promise((g,w)=>{a=g,l=w});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const g=new Cn("cancelled","Request was cancelled.");l(g)});const h=o.body.getReader(),f=n8(h,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const g=f.getReader();return{async next(){const{value:w,done:_}=await g.read();return{value:w,done:_}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:d}}function n8(t,e,n,r){const i=(o,a)=>{const l=o.match(HF);if(!l)return;const d=l[1];try{const h=JSON.parse(d);if("result"in h){e(Ua(h.result));return}if("message"in h){a.enqueue(Ua(h.message));return}if("error"in h){const f=xh(0,h);a.error(f),n(f);return}}catch(h){if(h instanceof Cn){a.error(h),n(h);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const d=new Cn("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:h}=await t.read();if(h){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new Cn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=s.decode(d,{stream:!0});const f=a.split(`
`);a=f.pop()||"";for(const p of f)p.trim()&&i(p.trim(),o);return l()}catch(d){const h=d instanceof Cn?d:xh(0,null);o.error(h),n(h)}}},cancel(){return t.cancel()}})}const q_="@firebase/functions",H_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="auth-internal",i8="app-check-internal",s8="messaging-internal";function o8(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(r8),o=n.getProvider(s8),a=n.getProvider(i8);return new KF(i,s,o,a,r)};xs(new wi(nv,e,"PUBLIC").setMultipleInstances(!0)),or(q_,H_,t),or(q_,H_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t=nf(),e=Rg){const r=$c(rt(t),nv).getImmediate({identifier:e}),i=i0("functions");return i&&l8(r,...i),r}function l8(t,e,n){QF(rt(t),e,n)}function c8(t,e,n){return YF(rt(t),e,n)}o8();const u8={apiKey:"AIzaSyCbQY1wxVEoQVGdnylLPMq1-_4sNgucxg0",authDomain:"mindcraft-admin.firebaseapp.com",projectId:"mindcraft-admin",storageBucket:"mindcraft-admin.firebasestorage.app",messagingSenderId:"375110192152",appId:"1:375110192152:web:ade8d56b867b194944076d"},Sf=Hb(u8),_n=f3(Sf),sz=O6(Sf),dr=UF(Sf),d8=a8(Sf);var hr,kc,ii,Ks;class Pg{constructor(e="cic_",n=null){it(this,ii);it(this,hr,void 0);it(this,kc,void 0);Ze(this,hr,e),Ze(this,kc,n)}get(e,n=null){var r;try{const i=(r=ue(this,ii,Ks))==null?void 0:r.getItem(ue(this,hr)+e);return i==null?n:JSON.parse(i)}catch(i){return console.error(`[StorageStore] Read error for "${e}":`,i),n}}set(e,n){var r,i;try{const s=JSON.stringify(n,(o,a)=>{if(!(o.startsWith("_")||o.startsWith("$"))&&!(typeof a=="function"||a instanceof Element))return a});(r=ue(this,ii,Ks))==null||r.setItem(ue(this,hr)+e,s)}catch(s){console.error(`[StorageStore] Write error for "${e}":`,s);try{const o=JSON.parse(JSON.stringify(n,h8()));(i=ue(this,ii,Ks))==null||i.setItem(ue(this,hr)+e,JSON.stringify(o))}catch{console.error(`[StorageStore] Total failure for "${e}"`)}}}remove(e){var n;(n=ue(this,ii,Ks))==null||n.removeItem(ue(this,hr)+e)}purge(){const e=ue(this,ii,Ks);if(!e)return;const n=[];for(let r=0;r<e.length;r++){const i=e.key(r);i!=null&&i.startsWith(ue(this,hr))&&n.push(i)}n.forEach(r=>e.removeItem(r))}keys(){const e=ue(this,ii,Ks);if(!e)return[];const n=[];for(let r=0;r<e.length;r++){const i=e.key(r);i!=null&&i.startsWith(ue(this,hr))&&n.push(i.replace(ue(this,hr),""))}return n}}hr=new WeakMap,kc=new WeakMap,ii=new WeakSet,Ks=function(){return ue(this,kc)||(typeof window<"u"?window.localStorage:null)};function h8(){const t=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}}const ji=new Pg("cic_v1_");var va,fr,Ac,bh,PC;const na=class na{constructor(){it(this,bh);it(this,fr,null);it(this,Ac,void 0);if(ue(na,va))return ue(na,va);Ze(this,Ac,new Pg("cic_global_")),this.startSession=this.startSession.bind(this),this.endSession=this.endSession.bind(this),Ze(na,va,this)}startSession(e){if(!e)throw new Error("Security Violation: Attempted to start session without UID");ue(this,fr)&&ue(this,fr).uid!==e&&(console.warn("[SessionManager] Hot-swapping sessions. Purging previous."),this.endSession()),It(this,bh,PC).call(this,e);const n=`cic_user_${e}_`;Ze(this,fr,{uid:e,store:new Pg(n)}),console.info(`[SessionManager] Secure session initialized for ${e}`)}endSession(){if(!ue(this,fr))return;const e=ue(this,fr).uid;console.info(`[SessionManager] Ending session for ${e}`),Ze(this,fr,null)}get userStore(){if(!ue(this,fr))throw new Error("Security Violation: Attempted to access user storage without active session");return ue(this,fr).store}get globalStore(){return ue(this,Ac)}static purgeAllUserSessions(){console.info("[SessionManager] Executing FULL Manual Purge...");const e=window.localStorage,n=[];for(let r=0;r<e.length;r++){const i=e.key(r);i&&(i.startsWith("cic_user_")||i.startsWith("cic_lesson_")||i.startsWith("cic_v1_lessons"))&&n.push(i)}n.forEach(r=>e.removeItem(r)),console.info(`[SessionManager] Purged ${n.length} sensitive keys.`)}};va=new WeakMap,fr=new WeakMap,Ac=new WeakMap,bh=new WeakSet,PC=function(e){const n=window.localStorage,r=[],i=`cic_user_${e}_`;for(let s=0;s<n.length;s++){const o=n.key(s);o&&(o.startsWith("cic_user_")&&!o.startsWith(i)&&r.push(o),(o.startsWith("cic_lesson_")||o.startsWith("cic_v1_lessons"))&&r.push(o))}r.length>0&&(console.info(`[SessionManager] Cleaning up ${r.length} stale/legacy session keys.`),r.forEach(s=>n.removeItem(s)))},it(na,va,void 0);let Dg=na;const ga=new Dg,sn={IDLE:"IDLE",INITIALIZING:"INITIALIZING",READY:"READY",AUTHENTICATING:"AUTHENTICATING",SUCCESS:"SUCCESS",ERROR:"ERROR"},f8=["https://www.googleapis.com/auth/drive.file"];var wa,xa,Nn,_a,er,jn,to,Ih,Rc,jg,Ta,yd,Pc,Lg,tr,jr,Ch,DC,kh,NC;const ra=class ra{constructor(){it(this,Rc);it(this,Ta);it(this,Pc);it(this,tr);it(this,Ch);it(this,kh);it(this,xa,sn.IDLE);it(this,Nn,null);it(this,_a,new Set);it(this,er,null);it(this,jn,null);it(this,to,null);it(this,Ih,!1);if(ue(ra,wa))return ue(ra,wa);Ze(ra,wa,this)}subscribe(e){return ue(this,_a).add(e),e(this.getSnapshot()),()=>ue(this,_a).delete(e)}getSnapshot(){var e;return{user:this.user,status:ue(this,xa),error:ue(this,Nn),token:(e=ue(this,jn))==null?void 0:e.token,hasDrive:this.hasDriveAccess}}get state(){return ue(this,xa)}get error(){return ue(this,Nn)}get user(){var n;return!ue(this,er)&&!dr.currentUser?null:{...ue(this,er)||It(this,Ta,yd).call(this,dr.currentUser),token:(n=ue(this,jn))==null?void 0:n.token}}get token(){var e;return(e=ue(this,jn))==null?void 0:e.token}get uid(){var e,n;return((e=dr.currentUser)==null?void 0:e.uid)||((n=ue(this,er))==null?void 0:n.id)}get hasDriveAccess(){var e;return!!((e=ue(this,jn))!=null&&e.token)}async initialize(){return ue(this,to)?ue(this,to):(Ze(this,to,(async()=>{It(this,tr,jr).call(this,sn.INITIALIZING);try{const e=await nF(dr);if(e){const n=yr.credentialFromResult(e);await It(this,Rc,jg).call(this,e.user,n)}else if(dr.currentUser){console.info("[IdentityManager] User restored from Firebase persistence."),Ze(this,er,It(this,Ta,yd).call(this,dr.currentUser)),ga.startSession(ue(this,er).id);try{console.info("[IdentityManager] Attempting silent Drive token restoration..."),await this.signIn({prompt:"none"})}catch(n){console.warn("[IdentityManager] Silent Drive token restoration skipped/failed:",n.message)}}}catch(e){console.error("[IdentityManager] Initialization Error:",e),It(this,Pc,Lg).call(this,e)}Ze(this,Ih,!0),It(this,tr,jr).call(this,ue(this,er)?sn.SUCCESS:sn.READY)})()),ue(this,to))}async ensureDriveAccess(){var e,n;if((e=ue(this,jn))!=null&&e.token&&ue(this,jn).expiresAt>Date.now()+3e5)return ue(this,jn).token;console.info("[IdentityManager] Drive token missing/stale. Re-acquiring...");try{return await this.signIn({prompt:"none"}),(n=ue(this,jn))==null?void 0:n.token}catch(r){throw console.warn("[IdentityManager] Silent re-acquisition failed. User action required."),r}}async signIn(e={prompt:"select_account"}){It(this,tr,jr).call(this,sn.AUTHENTICATING);const n=new yr;f8.forEach(r=>n.addScope(r)),e.prompt&&n.setCustomParameters({prompt:e.prompt});try{const r=await QO(dr,n),i=yr.credentialFromResult(r);await It(this,Rc,jg).call(this,r.user,i)}catch(r){switch(console.error("[IdentityManager] Sign-In Failed:",r.code,r.message),r.code){case"auth/popup-closed-by-user":It(this,tr,jr).call(this,ue(this,er)?sn.SUCCESS:sn.READY);return;case"auth/popup-blocked":Ze(this,Nn,"Pop-up was blocked by your browser. Please allow pop-ups for this site and try again.");break;case"auth/cancelled-popup-request":It(this,tr,jr).call(this,sn.READY);return;case"auth/network-request-failed":Ze(this,Nn,"Network error. Please check your internet connection.");break;default:Ze(this,Nn,`Authentication failed: ${r.message}`)}It(this,tr,jr).call(this,sn.ERROR,ue(this,Nn))}}async requestDriveAccess(){return this.signIn({prompt:"consent"})}async signOut(){try{await AO(dr),It(this,kh,NC).call(this)}catch(e){console.error("[IdentityManager] SignOut Error:",e),It(this,Pc,Lg).call(this,e)}}};wa=new WeakMap,xa=new WeakMap,Nn=new WeakMap,_a=new WeakMap,er=new WeakMap,jn=new WeakMap,to=new WeakMap,Ih=new WeakMap,Rc=new WeakSet,jg=async function(e,n){Ze(this,er,It(this,Ta,yd).call(this,e)),ga.startSession(e.uid),n!=null&&n.accessToken?Ze(this,jn,{token:n.accessToken,expiresAt:Date.now()+3600*1e3}):console.warn("[IdentityManager] No Access Token returned. Drive access may fail."),It(this,tr,jr).call(this,sn.SUCCESS),console.info("[IdentityManager] Enterprise Login Success:",e.uid)},Ta=new WeakSet,yd=function(e){return e?{id:e.uid,name:e.displayName,email:e.email,picture:e.photoURL,uid:e.uid}:null},Pc=new WeakSet,Lg=function(e){Ze(this,Nn,`Authentication Error: ${e.message||String(e)}`),It(this,tr,jr).call(this,sn.ERROR,ue(this,Nn))},tr=new WeakSet,jr=function(e,n=null){Ze(this,xa,e),n&&Ze(this,Nn,n),It(this,Ch,DC).call(this)},Ch=new WeakSet,DC=function(){const e=this.getSnapshot();ue(this,_a).forEach(n=>n(e))},kh=new WeakSet,NC=function(){Ze(this,er,null),Ze(this,jn,null),Ze(this,Nn,null),ga.endSession(),It(this,tr,jr).call(this,sn.IDLE)},it(ra,wa,null);let Ng=ra;const vr=new Ng,p8=t=>vr.signIn(t),m8=()=>vr.requestDriveAccess(),jC=R.createContext(null),LC=({children:t})=>{const[e,n]=R.useState(vr.getSnapshot());R.useEffect(()=>{const o=vr.subscribe(a=>{n(a)});return vr.initialize().catch(a=>{console.error("[AuthProvider] Identity Initialization Failed:",a)}),()=>o()},[]);const r=R.useCallback((o="select_account")=>vr.signIn({prompt:o}),[]),i=R.useCallback(()=>{vr.signOut()},[]),s={user:e.user,authStatus:e.status,error:e.error,token:e.token,hasDrive:e.hasDrive,signIn:r,signOut:i,isLoading:e.status===sn.INITIALIZING||e.status===sn.AUTHENTICATING,isReady:e.status!==sn.IDLE&&e.status!==sn.INITIALIZING};return u.jsx(jC.Provider,{value:s,children:t})},Io=()=>{const t=R.useContext(jC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},g8="modulepreload",y8=function(t){return"/chethan-in-cardland/"+t},G_={},Vr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=y8(s),s in G_)return;G_[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":g8,o||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),o)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},K_=3,Q_=1e3,oo=async(t,e={},n=0)=>{var r,i,s,o,a,l,d,h;try{const f=await fetch(t,e);if(f.ok)return f;if(f.status===401&&n<1){console.info("[Network] Token invalid. Attempting silent refresh...");try{const g=await vr.acquireToken({prompt:"none",elevated:e._isElevated}),w={...e,headers:{...e.headers,Authorization:`Bearer ${g}`}};return await oo(t,w,n+1)}catch(g){throw console.error("[Network] Refresh failed.",g),new Error("REAUTH_NEEDED")}}if(f.status===403){const g=await f.json().catch(()=>({})),w=((s=(i=(r=g.error)==null?void 0:r.errors)==null?void 0:i[0])==null?void 0:s.reason)||"unknown",_=((o=g.error)==null?void 0:o.message)||"No detailed message";if(console.error("[Audit] 403 Forbidden detected.",{url:t,reason:w,message:_,tokenPrefix:((l=(a=e.headers)==null?void 0:a.Authorization)==null?void 0:l.substring(0,17))+"...",fullError:g}),w==="accessNotConfigured")console.error("[Audit] ROOT CAUSE: Google Drive API is likely DISABLED in the Google Cloud Console for this project.");else if(w==="insufficientPermissions"){console.error("[Audit] ROOT CAUSE: OAuth token is missing required scopes (drive.file or drive).");try{const P=(h=(d=e.headers)==null?void 0:d.Authorization)==null?void 0:h.replace("Bearer ","");if(P){const v=await(await fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?access_token=${P}`)).json();console.info("[Audit] Token Scope Info:",{scopes:v.scope,expires_in:v.expires_in,email:v.email})}}catch(P){console.warn("[Audit] Could not verify token scopes:",P)}}throw new Error(`REAUTH_NEEDED: ${w}: ${_}`)}if((f.status>=500||f.status===429)&&n<K_){const g=Q_*Math.pow(2,n);return console.warn(`[Network] Transient error ${f.status}. Retrying in ${g}ms...`),await new Promise(w=>setTimeout(w,g)),await oo(t,e,n+1)}return f}catch(f){if(n<K_){const p=Q_*Math.pow(2,n);return await new Promise(g=>setTimeout(g,p)),await oo(t,e,n+1)}throw f}},rv="https://www.googleapis.com/drive/v3/files",Y_="https://www.googleapis.com/upload/drive/v3/files",MC="lesson_content_cache",bf=()=>{try{const t=ga.userStore.get(MC,{});return new Map(Object.entries(t))}catch{return new Map}},iv=t=>{try{t.size>50&&Array.from(t.keys()).slice(0,t.size-50).forEach(i=>t.delete(i));const e=Object.fromEntries(t);ga.userStore.set(MC,e)}catch(e){console.warn("Failed to save cache:",e)}},If=t=>({Authorization:`Bearer ${t}`,"Content-Type":"application/json"}),v8=async t=>{const e="mimeType = 'application/json' and (name contains 'cic_lesson_' or name contains 'flashcard_stack_') and trashed = false",n="files(id, name, owners, permissions, ownedByMe, sharingUser, starred, createdTime, modifiedTime, appProperties)",r=`${rv}?q=${encodeURIComponent(e)}&fields=${n}&supportsAllDrives=true&includeItemsFromAllDrives=true&spaces=drive&t=${Date.now()}`,i=await oo(r,{headers:If(t),_isElevated:!0});if(i.status===401)throw new Error("REAUTH_NEEDED");return(await i.json()).files||[]},w8=(t,e)=>{const r=bf().get(t);return r&&r.modifiedTime===e?{...r.content,driveFileId:t,_isCached:!0}:null},x8=async(t,e)=>{var n,r,i,s,o,a;try{const l=w8(e.id,e.modifiedTime);if(l)return{...l,ownedByMe:e.ownedByMe,ownerName:(r=(n=e.owners)==null?void 0:n[0])==null?void 0:r.displayName,sharingUser:e.sharingUser,isAccepted:e.ownedByMe||e.starred};const d=await _8(t,e.id),h=bf();return h.set(e.id,{content:d,modifiedTime:e.modifiedTime}),iv(h),typeof d=="string"?{encryptedContent:d,driveFileId:e.id,ownedByMe:e.ownedByMe,ownerName:(s=(i=e.owners)==null?void 0:i[0])==null?void 0:s.displayName,sharingUser:e.sharingUser,isAccepted:e.ownedByMe||e.starred,modifiedTime:e.modifiedTime}:{...d,driveFileId:e.id,ownedByMe:e.ownedByMe,ownerName:(a=(o=e.owners)==null?void 0:o[0])==null?void 0:a.displayName,sharingUser:e.sharingUser,isAccepted:e.ownedByMe||e.starred}}catch(l){return console.error(`[Drive] Fetch failed for ${e.id}`,l),{...T8(e),error:!0,errorMessage:l.message}}},_8=async(t,e)=>{const n=`${rv}/${e}?alt=media&t=${Date.now()}`,r=await oo(n,{headers:If(t),_isElevated:!0});if(r.status===401)throw new Error("REAUTH_NEEDED");const i=await r.text();try{return JSON.parse(i)}catch{return i}},T8=t=>{const e=t.appProperties||{};return{id:e.id||t.id,driveFileId:t.id,title:e.title||t.name.replace("cic_lesson_","").replace("flashcard_stack_","").replace(".json","")||"Error Loading Lesson",label:e.label||"Unknown",questions:[],questionCount:parseInt(e.questionCount||e.cardsCount)||0,modifiedTime:t.modifiedTime,ownedByMe:t.ownedByMe,source:"drive"}},E8=async(t,e,n=null,r=null)=>{var o,a;const i={id:e.id,title:e.title,label:e.label||"",questionCount:String(e.questionCount!==void 0?e.questionCount:((o=e.questions)==null?void 0:o.length)||((a=e.cards)==null?void 0:a.length)||0),lastMarks:e.lastMarks!==void 0?String(e.lastMarks):"",nextReview:e.nextReview||"",reviewStage:e.reviewStage!==void 0?String(e.reviewStage):"-1"},s=`cic_lesson_${e.id}.json`;return S8(t,s,e,n,"application/json",r,i)},VC=async(t,e)=>{const n=await oo(`${rv}/${e}`,{method:"DELETE",headers:If(t),_isElevated:!0});if(!n.ok&&n.status!==404)throw new Error(`Drive Delete Failed: ${n.status}`);if(e){const r=bf();r.delete(e),iv(r)}return!0},S8=async(t,e,n,r=null,i="application/json",s=null,o=null)=>{var w;const a={name:e,mimeType:i};o&&(a.appProperties=o),s&&!r&&(a.parents=[s]);const l=r?`${Y_}/${r}?uploadType=multipart`:`${Y_}?uploadType=multipart`,d=r?"PATCH":"POST",h="-------314159265358979323846",f=`\r
--`+h+`\r
`,p=`\r
--`+h+"--",g=f+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(a)+f+`Content-Type: application/json\r
\r
`+(typeof n=="string"?n:JSON.stringify(n))+p;try{const _=await oo(l,{method:d,headers:{...If(t),"Content-Type":`multipart/related; boundary=${h}`},body:g,_isElevated:!0});if(_.status===401)throw new Error("REAUTH_NEEDED");if(!_.ok){const v=await _.json();throw new Error(((w=v.error)==null?void 0:w.message)||"Failed to save to Google Drive")}const P=await _.json(),E=bf();return E.set(P.id,{content:n,modifiedTime:P.modifiedTime||new Date().toISOString()}),iv(E),P}catch(_){throw _}},b8="DC3xQSHS3NL1vuxaPknC7KQI8mSv4VptXtLlKNBkJFE=",sv="AES-GCM",X_="PBKDF2",I8="SHA-256",C8=1e5,J_=async(t,e="cic_default_salt")=>{const n=new TextEncoder,r=await crypto.subtle.importKey("raw",n.encode(b8+t),{name:X_},!1,["deriveBits","deriveKey"]),i=n.encode(e);return await crypto.subtle.deriveKey({name:X_,salt:i,iterations:C8,hash:I8},r,{name:sv,length:256},!1,["encrypt","decrypt"])},k8=async(t,e)=>{const n=new TextEncoder,r=typeof t=="string"?t:JSON.stringify(t),i=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.encrypt({name:sv,iv:i},e,n.encode(r)),o=new Uint8Array(i.length+s.byteLength);return o.set(i),o.set(new Uint8Array(s),i.length),btoa(String.fromCharCode(...o))},A8=async(t,e)=>{try{let n,r;if(t.startsWith("v1:")){const o=t.split(":"),a=o[1],l=o[2];n=new Uint8Array(a.match(/.{1,2}/g).map(h=>parseInt(h,16)));const d=atob(l);r=new Uint8Array(d.length);for(let h=0;h<d.length;h++)r[h]=d.charCodeAt(h)}else{const o=new Uint8Array(atob(t).split("").map(a=>a.charCodeAt(0)));n=o.slice(0,12),r=o.slice(12)}const i=await crypto.subtle.decrypt({name:sv,iv:n},e,r),s=new TextDecoder().decode(i);try{return JSON.parse(s)}catch{return s}}catch(n){throw console.error("[LessonCrypto] Decryption failed:",n),new Error("Lesson decryption failed. This content might be owned by another user or corrupted.")}},Wu=()=>{try{return ga.userStore}catch{return{get:(e,n)=>n,set:()=>{},remove:()=>{}}}};var Ki,Tn;class R8{constructor(){it(this,Ki,!1);it(this,Tn,null)}setDriveAccess(e,n=null){Ze(this,Ki,e),Ze(this,Tn,n),console.info(`[Storage] Strategy initialized: ${e?"Google Drive":"Local Persistence (Recruiter Mode)"}`)}async listLessons(){const e=Wu(),n=e.get("lessons",[]);if(!ue(this,Ki)||!ue(this,Tn))return n;try{const s=[...(await v8(ue(this,Tn))).map(o=>{const a=o.appProperties||{};return{id:a.id||o.id,driveFileId:o.id,title:a.title||o.name.replace("cic_lesson_","").replace(".json",""),questionCount:parseInt(a.questionCount||a.cardsCount)||0,lastMarks:a.lastMarks?parseInt(a.lastMarks):void 0,nextReview:a.nextReview||void 0,label:a.label||"No label",modifiedTime:o.modifiedTime,ownedByMe:o.ownedByMe}})];return n.forEach(o=>{s.find(a=>a.id===o.id)?o.driveFileId:s.push(o)}),e.set("lessons",s),s}catch(r){return console.error("[Storage] Drive fetch failed. Falling back to local.",r),n}}async getLessonContent(e){let n=null;const r=Wu();if(ue(this,Ki)&&ue(this,Tn)&&e.driveFileId)try{n=await x8(ue(this,Tn),{id:e.driveFileId,modifiedTime:e.modifiedTime});const s=vr.uid;if(n&&n.encryptedContent&&s){const o=await J_(s),a=await A8(n.encryptedContent,o);n={...n,...a,encryptedContent:void 0}}}catch{console.warn("[Storage] Drive content fetch failed, hitting local cache:",e.id)}const i=s=>!s||!s.questions&&!s.cards||s.error;if(i(n)){const o=r.get("lessons_full",{})[e.id];i(o)||(console.info("[Storage] Rehydrated from local cache:",e.id),n=o)}return n||e}async saveLesson(e,n=null){var h,f;const r=p=>!p||!p.questions&&!p.cards,i=Wu(),s=i.get("lessons_full",{});let o={...e};if(r(o)){const p=s[e.id];r(p)||(console.info("[Storage] Merging metadata update with existing full content:",e.id),o={...p,...o})}try{const p=JSON.parse(JSON.stringify(o,(g,w)=>{if(!(typeof w=="function"||w instanceof Element))return w}));s[e.id]=p,o=p}catch(p){console.warn("[Storage] Lesson purification failed, saving as-is (risk of circular error)",p),s[e.id]=o}i.set("lessons_full",s);const a=i.get("lessons",[]),l=a.findIndex(p=>p.id===e.id),d={...o,questions:void 0,cards:void 0,questionCount:o.questionCount!==void 0?o.questionCount:((h=o.questions)==null?void 0:h.length)||((f=o.cards)==null?void 0:f.length)||0};if(l>=0?a[l]=d:a.push(d),i.set("lessons",a),ue(this,Ki)){if(!ue(this,Tn))try{const p=await vr.ensureDriveAccess();p&&Ze(this,Tn,p)}catch(p){console.warn("[Storage] Silent token recovery failed:",p.message)}if(!ue(this,Tn))throw new Error("REAUTH_NEEDED");try{let p=o;const g=vr.uid;if(g){const _=await J_(g);p=await k8(o,_)}const w=await E8(ue(this,Tn),p,o.driveFileId,n);o.driveFileId=w.id,d.driveFileId=w.id,s[e.id]=o,i.set("lessons_full",s),i.set("lessons",a)}catch(p){console.warn("[Storage] Drive sync delayed.",p);const g=p.message||String(p);if(g.includes("REAUTH_NEEDED")||g.includes("403"))throw p}}return o}async deleteLesson(e){ue(this,Ki)&&ue(this,Tn)&&e.driveFileId&&await VC(ue(this,Tn),e.driveFileId).catch(()=>{});const n=Wu(),r=n.get("lessons",[]);n.set("lessons",r.filter(s=>s.id!==e.id));const i=n.get("lessons_full",{});delete i[e.id],n.set("lessons_full",i)}}Ki=new WeakMap,Tn=new WeakMap;const Ji=new R8,ov="/chethan-in-cardland/assets/logo-423dc48b.png",Si={}.VITE_ADMIN_EMAIL||"chethanincardland@gmail.com",oz="https://us-central1-mindcraft-admin.cloudfunctions.net/decryptPublicLesson",P8={}.VITE_UPI_ID||"vinayarajh1-1@okhdfcbank",D8={}.VITE_SUPPORT_PHONE||"919497449115",N8="ChethanInCardland",ta={id:"demo-lesson",title:"General Knowledge (Demo)",titleImage:ov,label:"Science",questions:[{id:1,question:{text:"What is the role of red blood cells?",image:"",audio:""},answer:{text:"They carry oxygen to body tissues.",image:"",audio:""}},{id:2,question:{text:"Why do we need sleep?",image:"",audio:""},answer:{text:"Sleep helps the body and brain recover and function properly.",image:"",audio:""}},{id:3,type:"mcq",question:{text:"Which part of the human body has no blood supply?",image:"",audio:""},options:[{id:"a",text:"Retina",isCorrect:!1},{id:"b",text:"Cornea",isCorrect:!0},{id:"c",text:"Brain",isCorrect:!1},{id:"d",text:"Liver",isCorrect:!1}],answer:{text:"Cornea",image:"",audio:""}},{id:4,question:{text:"Who was known as the Iron Man of India?",image:"",audio:""},answer:{text:"Sardar Vallabhbhai Patel was known as the Iron Man of India.",image:"",audio:""}},{id:5,type:"mcq",question:{text:"Which planet spins backwards compared to others?",image:"",audio:""},options:[{id:"a",text:"Mars",isCorrect:!1},{id:"b",text:"Earth",isCorrect:!1},{id:"c",text:"Venus",isCorrect:!0},{id:"d",text:"Jupiter",isCorrect:!1}],answer:{text:"Venus",image:"",audio:""}}],owner:Si,ownerName:"Demo User",avgRating:4.8,lastReviewed:"Jan 7, 2026",nextReview:new Date(Date.now()+3*24*60*60*1e3).toISOString(),reviewStage:0,isPublic:!1},j8=(t,e,n)=>{const[r,i]=R.useState([ta]),[s,o]=R.useState([]),[a,l]=R.useState(!1),[d,h]=R.useState(!1),f=R.useRef(0),p=R.useRef([]),g=R.useRef(null);R.useEffect(()=>{Ji.setDriveAccess(e,t==null?void 0:t.token)},[e,t==null?void 0:t.token]);const w=R.useCallback(v=>{i(x=>{const j=x.findIndex(L=>L.id===v.id);if(j>=0){const L=[...x];return L[j]={...L[j],...v},L}return[v,...x]})},[]),_=R.useCallback(async()=>{h(!0);try{const[v,x]=await Promise.allSettled([Vr(()=>import("./publicDrive-f10d2c1b.js"),[]).then(T=>T.listPublicLessons()),Vr(()=>import("./localLessonsService-b405e72b.js"),[]).then(T=>T.listLocalLessons())]),j=v.status==="fulfilled"?v.value||[]:[],L=x.status==="fulfilled"?x.value||[]:[],O=new Set(j.map(T=>T.id)),S=[...j,...L.filter(T=>!O.has(T.id))];console.log(`[Lessons] Loaded ${j.length} Firestore + ${L.length} local lessons`),o(S)}catch(v){console.error("[Lessons] Public fetch failed:",v)}finally{h(!1)}},[]),P=R.useCallback(async(v=!1)=>{if(!t){i([ta]);return}if(!(!v&&Date.now()-f.current<6e4)){f.current=Date.now(),l(!0);try{const j=(await Ji.listLessons()).filter(S=>S.id!==ta.id);i([ta,...j]),l(!1),g.current&&clearInterval(g.current),p.current=[],g.current=setInterval(()=>{const S=p.current.splice(0,p.current.length);S.length>0&&i(T=>{const C=[...T];return S.forEach(A=>{const k=C.findIndex(N=>N.id===A.id);k>=0&&(C[k]={...C[k],...A,loading:!1})}),C})},500);const L=[...j],O=async()=>{if(L.length===0)return;const S=L.shift();try{const T=await Ji.getLessonContent(S);p.current.push(T)}catch{}await O()};if(await Promise.all([O(),O()]),p.current.length>0){const S=p.current.splice(0,p.current.length);i(T=>{const C=[...T];return S.forEach(A=>{const k=C.findIndex(N=>N.id===A.id);k>=0&&(C[k]={...C[k],...A,loading:!1})}),C})}g.current&&(clearInterval(g.current),g.current=null)}catch(x){console.error("[Lessons] Load failed:",x),l(!1)}}},[t]),E=R.useCallback(async v=>{if(v){l(!0);try{const x=(t==null?void 0:t.email)===Si,j=v.source==="firestore"||v.isPublic&&!v.isLocal;if(x&&j){const{deletePublicLesson:L}=await Vr(()=>import("./publicDrive-f10d2c1b.js"),[]);await L(v.id),o(O=>O.filter(S=>S.id!==v.id))}else await Ji.deleteLesson(v),i(L=>L.filter(O=>O.id!==v.id))}catch(x){console.error(x)}finally{l(!1)}}},[n]);return{lessons:r,publicLessons:s,loading:a,publicLoading:d,setLessons:i,setPublicLessons:o,fetchLessons:P,fetchPublicLessons:_,handleUpdateLocalLesson:w,deleteLesson:E}};var L8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const M8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V8=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},d)=>R.createElement("svg",{ref:d,...L8,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${M8(t)}`,...l},[...e.map(([h,f])=>R.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var he=V8;const av=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),OC=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),FC=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),lv=he("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),O8=he("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),UC=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),F8=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Mg=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),vo=he("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),U8=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),z8=he("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Cf=he("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),B8=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),zC=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$8=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),W8=he("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),q8=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Vg=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),H8=he("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),_h=he("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),G8=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Og=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),BC=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$C=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),K8=he("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),Zi=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Th=he("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Q8=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Y8=he("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),X8=he("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),J8=he("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),cv=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),kf=he("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Gi=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),za=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Z8=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),e9=he("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),t9=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Fg=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),n9=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),WC=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),r9=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),qC=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),i9=he("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),Ug=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),s9=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),o9=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),a9=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),fi=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),l9=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),c9=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),vd=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),HC=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),u9=he("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),d9=he("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),_r=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),GC=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),h9=he("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),f9=he("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Gn=({onClick:t,style:e,size:n=20,className:r=""})=>u.jsx("button",{onClick:t,className:`neo-button ${r}`,style:{width:"36px",height:"36px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#ef4444",background:"var(--bg-color)",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 4px rgba(239, 68, 68, 0.2)",transition:"all 0.2s ease",...e},onMouseEnter:i=>{i.currentTarget.style.boxShadow="4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 8px rgba(239, 68, 68, 0.4)",i.currentTarget.style.transform="scale(1.05)"},onMouseLeave:i=>{i.currentTarget.style.boxShadow="4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 4px rgba(239, 68, 68, 0.2)",i.currentTarget.style.transform="scale(1)"},title:"Close",children:u.jsx(_r,{size:n})}),p9=({type:t="alert",message:e,onConfirm:n,onCancel:r,onClose:i})=>u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(255,255,255,0.01)",zIndex:2e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:u.jsxs(Ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"neo-flat",style:{width:"100%",maxWidth:"400px",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.5rem",alignItems:"center",textAlign:"center",position:"relative"},children:[u.jsx(Gn,{onClick:i,style:{position:"absolute",top:"1rem",right:"1rem"},size:16}),u.jsx("div",{className:"neo-inset",style:{width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:t==="confirm"?"var(--accent-color)":"var(--error-color)"},children:t==="confirm"?u.jsx(q8,{size:32}):u.jsx(av,{size:32})}),u.jsx("p",{style:{fontSize:"1.1rem",fontWeight:"500",lineHeight:"1.5"},children:e}),u.jsx("div",{style:{display:"flex",gap:"1rem",width:"100%"},children:t==="confirm"?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"neo-button",style:{flex:1,justifyContent:"center"},onClick:r||i,children:"Cancel"}),u.jsx("button",{className:"neo-button",style:{flex:1,justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none"},onClick:()=>{const s=n;i(),s==null||s()},children:"Confirm"})]}):u.jsx("button",{className:"neo-button",style:{flex:1,justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none"},onClick:i,children:"Got it"})})]})}),m9=({message:t,type:e="info",onUndo:n,onClose:r,duration:i=5e3})=>(R.useEffect(()=>{if(i){const s=setTimeout(()=>{r()},i);return()=>clearTimeout(s)}},[i,r]),u.jsxs(Ue.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95,transition:{duration:.2}},className:"neo-flat toast-container",style:{position:"fixed",bottom:"1.5rem",left:"0.5rem",right:"0.5rem",margin:"0 auto",width:"fit-content",maxWidth:"calc(100% - 2rem)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",padding:"0.6rem 1rem",borderRadius:"50px",background:"var(--bg-color)",color:"var(--text-color)",boxShadow:"8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light)",border:"1px solid var(--shadow-light)"},children:[u.jsx("span",{style:{flex:1,fontSize:"0.85rem",fontWeight:"600",paddingLeft:"0.5rem",wordBreak:"break-word",lineHeight:"1.2",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[e==="undo"&&n&&u.jsxs("button",{onClick:s=>{s.stopPropagation(),n(),r()},className:"neo-button",style:{padding:"0.3rem 0.7rem",fontSize:"0.7rem",background:"var(--accent-color)",color:"white",border:"none",borderRadius:"20px",display:"flex",alignItems:"center",gap:"4px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)",cursor:"pointer",fontWeight:"700"},children:[u.jsx(Z8,{size:12}),"Undo"]}),u.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"var(--text-color)",opacity:.3,cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},children:u.jsx(_r,{size:16})})]})]})),KC=R.createContext(null),g9=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(null),[s,o]=R.useState({showMenu:!1,showAddModal:!1,showFeedback:!1,showKnowMore:!1,showReferral:!1,showAdminPanel:!1,showCoinModal:!1,showLoginPrompt:!1,showNamePrompt:!1,showAdminQuickTools:!1}),[a,l]=R.useState(!1),[d,h]=R.useState(null),[f,p]=R.useState(null),[g,w]=R.useState(null),_=R.useCallback(()=>{o({showMenu:!1,showAddModal:!1,showFeedback:!1,showKnowMore:!1,showReferral:!1,showAdminPanel:!1,showCoinModal:!1,showLoginPrompt:!1,showNamePrompt:!1,showAdminQuickTools:!1}),h(null),p(null),w(null)},[]),P=R.useCallback((L,O=null)=>{o(S=>({...S,[L]:O!==null?O:!S[L]}))},[]),E=R.useCallback((L,O,S=null)=>{n({type:L,message:O,onConfirm:S})},[]),v=R.useCallback(()=>{n(null)},[]),x=R.useCallback(({message:L,type:O="info",onUndo:S=null,duration:T=5e3,onClose:C=null})=>{i({id:Date.now(),message:L,type:O,onUndo:S,duration:T,onCloseCallback:C})},[]),j=R.useCallback(()=>{i(L=>(L!=null&&L.onCloseCallback&&L.onCloseCallback(),null))},[]);return u.jsxs(KC.Provider,{value:{modals:s,toggleModal:P,closeAllModals:_,activeLesson:d,setActiveLesson:h,reviewLesson:f,setReviewLesson:p,noteLesson:g,setNoteLesson:w,notification:e,showNotification:E,clearNotification:v,showToast:x,hideToast:j,headerLoading:a,setHeaderLoading:l},children:[t,u.jsx(In,{children:e&&u.jsx(p9,{type:e.type,message:e.message,onConfirm:e.onConfirm,onClose:v})}),u.jsx(In,{children:r&&u.jsx(m9,{message:r.message,type:r.type,onUndo:r.onUndo,onClose:j,duration:r.duration},r.id)})]})},Af=()=>{const t=R.useContext(KC);if(!t)throw new Error("useUI must be used within a UIProvider");return t},QC=R.createContext(null),y9=({children:t})=>{const{user:e,hasDrive:n}=Io(),{showNotification:r}=Af(),i=R.useCallback(o=>{o&&r(o.type,o.message,o.onConfirm)},[r]),s=j8(e,n,i);return u.jsx(QC.Provider,{value:s,children:t})},YC=()=>{const t=R.useContext(QC);if(!t)throw new Error("useLesson must be used within a LessonProvider");return t},Nr="users",es={async syncProfile(t,e={}){if(console.log("[UserService] syncProfile called with:",{uid:t==null?void 0:t.uid,email:t==null?void 0:t.email}),!(t!=null&&t.uid))return console.warn("[UserService] syncProfile aborted: No UID provided"),null;const n=Us(_n,Nr,t.uid),r=await __(n),i={uid:t.uid,email:t.email,displayName:t.displayName||e.displayName||"Learner",photoURL:t.photoURL||null,lastSeen:Do(),coins:e.coins||0,totalReviews:e.totalReviews||0,loginCount:(e.loginCount||0)+1};if(r.exists()){const s=r.data(),o={displayName:t.displayName||s.displayName,photoURL:t.photoURL||s.photoURL,lastSeen:Do(),loginCount:(s.loginCount||0)+1};return await A3(n,o),{...s,...o}}else return await k3(n,{...i,createdAt:Do()}),{...i,id:t.uid}},async getProfile(t){if(!t)return null;const e=Us(_n,Nr,t),n=await __(e);return n.exists()?{...n.data(),id:n.id}:null},async getProfileByEmail(t){if(!t)return null;const e=Bp(zp(_n,Nr),v_("email","==",t)),n=await $p(e);return n.empty?null:{...n.docs[0].data(),id:n.docs[0].id}},async listUsers(){const t=Bp(zp(_n,Nr));return(await $p(t)).docs.map(n=>({...n.data(),id:n.id}))},async updateBalance(t,e){const n=Us(_n,Nr,t);return await Uu(_n,async r=>{const i=await r.get(n);if(!i.exists())throw new Error("User does not exist!");const s=(i.data().coins||0)+Number(e);return r.update(n,{coins:s}),s})},async checkDailyBonus(t){const e=Us(_n,Nr,t);return await Uu(_n,async n=>{var a;const r=await n.get(e);if(!r.exists())return{awarded:!1};const i=r.data(),s=((a=i.lastBonusDate)==null?void 0:a.toDate())||new Date(0),o=new Date;if(o.setHours(0,0,0,0),s<o){const d=(i.coins||0)+10;return n.update(e,{coins:d,lastBonusDate:Do()}),{awarded:!0,bonus:10,newBalance:d}}return{awarded:!1}})},async applyReferral(t,e){const n=Us(_n,Nr,t);return await Uu(_n,async r=>{const i=await r.get(n);if(!i.exists()||i.data().referredBy)return!1;const s=Bp(zp(_n,Nr),v_("referralCode","==",e)),o=await $p(s);if(o.empty)return!1;const a=o.docs[0].id;r.update(n,{referredBy:e,coins:(i.data().coins||0)+50});const l=Us(_n,Nr,a),d=await r.get(l);return r.update(l,{coins:(d.data().coins||0)+100}),!0})},async purchaseLesson(t,e,n){const r=Us(_n,Nr,t);return await Uu(_n,async i=>{const s=await i.get(r);if(!s.exists())throw new Error("User does not exist!");const o=s.data(),a=o.coins||0;if(a<n)throw new Error("Insufficient coins.");const l=o.purchasedLessons||{};if(l[e])return{success:!0,alreadyOwned:!0};const d=a-n;return{...l,[e]:Do()},i.update(r,{coins:d,[`purchasedLessons.${e}`]:{purchaseDate:Do(),cost:n}}),{success:!0,newBalance:d}})}},v9=(t,e,n)=>{const[r,i]=R.useState(null),[s,o]=R.useState(!1),[a,l]=R.useState(0),d=R.useRef(0);R.useEffect(()=>{if(!(t!=null&&t.uid)){i(null);return}let f=!0;const p=async()=>{r||o(!0);try{const w=await es.syncProfile(t);if(!f)return;const _=localStorage.getItem("pendingReferral");if(_&&!w.referredBy&&await es.applyReferral(t.uid,_))return localStorage.removeItem("pendingReferral"),e&&e({type:"alert",message:"Referral bonus applied!"}),p();const P=await es.checkDailyBonus(t.uid);if(!f)return;if(P.awarded&&(n&&n({amount:P.bonus,type:"Daily Login"}),w.coins=P.newBalance),w.coins>d.current&&d.current>0){const E=w.coins-d.current;n&&n({amount:E,type:"Gift Received"})}d.current=w.coins,i(w)}catch(w){console.error("[useUserProfile] Sync Failed:",w)}finally{f&&o(!1)}};p();const g=()=>{document.visibilityState==="visible"&&(t!=null&&t.uid)&&p()};return window.addEventListener("visibilitychange",g),()=>{f=!1,window.removeEventListener("visibilitychange",g)}},[t==null?void 0:t.uid,e,n,a]);const h=R.useCallback(async f=>{if(!(!t||!r)){i(p=>({...p,coins:f}));try{const p=f-r.coins;await es.updateBalance(t.uid,p,"Manual Adjustment or Purchase")}catch(p){console.error("Failed to persist coin balance:",p),i(g=>({...g,coins:r.coins})),e&&e({type:"alert",message:"Failed to save coin balance. Please check connection."})}}},[t,r,e]);return{userProfile:r,setUserProfile:i,isProfileLoading:s,handleUpdateCoins:h,loadProfile:R.useCallback(()=>l(f=>f+1),[])}},w9=(t,e="")=>{const n=R.useRef(!1);R.useEffect(()=>{const i=s=>{if(t&&!n.current)return s.preventDefault(),s.returnValue=e,e};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[t,e]);const r=R.useCallback(()=>{n.current=!0},[]);return R.useEffect(()=>{var i;t&&!n.current&&((i=window.history.state)==null?void 0:i.guard)!=="active"&&window.history.pushState({guard:"active"},"")},[t]),{allowExit:r}},XC=R.createContext(null),JC=({children:t})=>{const[e,n]=R.useState({isActive:!1,currentStep:1,isComplete:localStorage.getItem("tour_complete")==="true",isDemoGracePeriod:!1,eventQueue:[]}),r=R.useRef(null);R.useEffect(()=>{e.isComplete&&localStorage.setItem("tour_complete","true")},[e.isComplete]);const i=R.useCallback(()=>{n(f=>({...f,isActive:!0,currentStep:1}))},[]),s=R.useCallback(()=>{n(f=>({...f,isActive:!1,currentStep:1}))},[]),o=R.useCallback(()=>{n(f=>({...f,currentStep:f.currentStep+1}))},[]),a=R.useCallback(f=>{n(p=>({...p,currentStep:f}))},[]),l=R.useCallback(f=>{n(p=>({...p,eventQueue:[...p.eventQueue,f]}))},[]),d=R.useCallback(()=>{if(e.eventQueue.length===0)return;const[f,...p]=e.eventQueue;f(),n(g=>({...g,eventQueue:p}))},[e.eventQueue]);R.useEffect(()=>{if(e.eventQueue.length===0||e.isActive)return;const f=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{d()},3e3)};return window.addEventListener("mousemove",f),window.addEventListener("keydown",f),window.addEventListener("click",f),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("keydown",f),window.removeEventListener("click",f),r.current&&clearTimeout(r.current)}},[e.eventQueue,e.isActive,d]);const h={...e,startTour:i,endTour:s,nextStep:o,setStep:a,queuePostTourEvent:l,setIsDemoGracePeriod:f=>n(p=>({...p,isDemoGracePeriod:f}))};return u.jsx(XC.Provider,{value:h,children:t})},nu=()=>{const t=R.useContext(XC);if(!t)throw new Error("useTour must be used within a TourProvider");return t},zg=(t,e=["image/","audio/"])=>{if(!t||typeof t!="string"||t.toLowerCase().startsWith("javascript:")||t.toLowerCase().startsWith("data:text/html"))return!1;if(t.startsWith("data:")){const n=t.match(/^data:([^;,]+)/);if(!n)return!1;const r=n[1].toLowerCase();if(!e.some(s=>r.startsWith(s)))return!1}return!0},ya=(t,e=1e4)=>{if(!t||typeof t!="string")return"";let n=t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"");return n.length>e&&(n=n.substring(0,e)),n},x9=t=>{if(!t||typeof t!="string")return"Untitled";let e=t.replace(/[\x00-\x1F\x7F]/g,"");return e=e.trim(),e.length>50&&(e=e.substring(0,50)),e=e.replace(/[&=?#]/g,""),e||"Untitled"},_9=t=>{if(!t||typeof t!="string")return"";let e=t.substring(0,500);return e=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,""),e=e.replace(/[*_~`]/g,""),e.trim()},T9=t=>!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),Kp=({lesson:t,onReview:e,onEdit:n,onImport:r,user:i,onDelete:s,showConfirm:o})=>{var f,p,g,w,_;const a=x9(t.title),d=(i==null?void 0:i.email)===Si||!t.isPublic;let h=null;return t.titleImage&&zg(t.titleImage,["image/"])?h=t.titleImage:(g=(p=(f=t.questions)==null?void 0:f[0])==null?void 0:p.question)!=null&&g.image&&zg(t.questions[0].question.image,["image/"])?h=t.questions[0].question.image:h=`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&background=random&color=fff&size=128`,t.loading?u.jsxs("div",{className:"neo-flat lesson-card",style:{height:"100%",position:"relative",overflow:"hidden"},children:[u.jsxs("div",{className:"shimmer-wrapper",children:[u.jsx("div",{className:"shimmer",style:{width:"40px",height:"20px",borderRadius:"12px",marginBottom:"1rem"}}),u.jsx("div",{className:"shimmer",style:{width:"100%",height:"140px",borderRadius:"12px",marginBottom:"1rem"}}),t.title&&t.title!=="Loading..."?u.jsx("div",{style:{marginBottom:"0.5rem",height:"40px",fontWeight:"600",fontSize:"0.95rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"shimmer",style:{width:"80%",height:"20px",borderRadius:"4px",marginBottom:"0.5rem"}}),u.jsx("div",{className:"shimmer",style:{width:"60%",height:"20px",borderRadius:"4px"}})]})]}),u.jsx("style",{children:`
                    .shimmer-wrapper { padding: 0.5rem; width: 100%; height: 100%; }
                    .shimmer {
                        background: linear-gradient(90deg, var(--bg-color) 0%, var(--neo-shadow-light) 50%, var(--bg-color) 100%);
                        background-size: 200% 100%;
                        animation: shimmer 1.5s infinite;
                    }
                    @keyframes shimmer {
                        0% { background-position: -200% 0; }
                        100% { background-position: 200% 0; }
                    }
                `})]}):u.jsxs("div",{className:"neo-flat lesson-card",id:t.id==="demo-lesson"?"lesson-card-demo-lesson":void 0,onClick:()=>e(t),style:{position:"relative",display:"flex",flexDirection:"column",height:"100%"},children:[d&&u.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:2,display:"flex",gap:"8px"},children:[u.jsx("button",{className:"neo-button icon-btn",onClick:P=>{P.stopPropagation(),n(t)},style:{background:"var(--bg-color)",opacity:.8},title:"Edit Lesson",children:u.jsx(cv,{size:18,color:"var(--accent-color)"})}),u.jsx("button",{className:"neo-button icon-btn",onClick:P=>{P.stopPropagation(),s(t)},style:{background:"var(--bg-color)",opacity:.8,color:"#ef4444"},title:"Delete Lesson",children:u.jsx(fi,{size:18})})]}),u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:"12px",left:"12px",zIndex:2,display:"flex",alignItems:"center",gap:"4px",fontSize:"0.8rem",fontWeight:"600",padding:"4px 8px",borderRadius:"12px",opacity:.9},children:[u.jsx(_h,{size:14}),t.questionCount!==void 0?t.questionCount:((w=t.questions)==null?void 0:w.length)||((_=t.cards)==null?void 0:_.length)||0]}),u.jsx("img",{src:h,alt:t.title,style:{width:"100%",height:"140px",objectFit:"contain",borderRadius:"12px",background:"var(--bg-color)"}}),u.jsx("div",{style:{marginTop:"0.8rem"},children:u.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:"600",marginBottom:"0.2rem",display:"-webkit-box",WebkitLineClamp:5,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.35",minHeight:"2.7em",textAlign:"left",color:"var(--text-color)",opacity:.9,padding:"0 2px"},title:t.title,children:t.title})}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",gap:"1rem",paddingTop:"1rem"},children:[t.isPublic&&u.jsxs("button",{className:`neo-button ${t.isOwned?"owned-btn":""}`,style:{flex:1,padding:"0.6rem",background:t.isOwned?"var(--neo-shadow-light)":t.cost>0?"#f59e0b":"var(--accent-color)",color:t.isOwned?"var(--text-color)":"white",border:"none",fontSize:"0.85rem",display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",borderRadius:"12px",cursor:t.isOwned?"default":"pointer",opacity:t.isOwned?.7:1},onClick:P=>{P.stopPropagation(),!t.isOwned&&(i?r(t):e(t))},children:[t.isOwned?u.jsx(_h,{size:14}):t.cost>0?u.jsx(Cf,{size:14}):u.jsx(Gi,{size:14}),t.isOwned?"Owned":i?t.cost>0?`Buy for ${t.cost}`:"Free - Add to My Lessons":`Preview (${t.cost>0?`Price: ${t.cost}`:"Free"})`]}),!t.isPublic&&u.jsx("div",{className:"neo-flat",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.3rem",fontSize:"0.85rem",color:"var(--accent-color)",padding:"6px 8px",borderRadius:"12px",minWidth:"110px",whiteSpace:"nowrap"},children:u.jsxs("span",{style:{fontWeight:"700"},children:["Marks : ",t.lastMarks!==void 0?t.lastMarks:"","/",t.questions?t.questions.length*2:t.cards?t.cards.length*2:0]})}),!t.isPublic&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.1rem",fontSize:"0.75rem",opacity:.8,minWidth:"100px",textAlign:"right"},children:[t.nextReview&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",opacity:.7},children:[u.jsx(UC,{size:12}),u.jsx("span",{children:"Review in"})]}),u.jsx("div",{id:t.id==="demo-lesson"?"next-review-indicator-demo-lesson":void 0,children:u.jsx(E9,{nextReview:t.nextReview})})]})]}),u.jsx("style",{children:`
        .lesson-card:hover { transform: translateY(-5px); }
      `})]})},E9=({nextReview:t})=>{if(!t)return u.jsx("span",{children:"New"});const e=()=>{const i=new Date(t)-new Date,s=Math.floor(i/(1e3*60*60*24)),o=Math.floor(i%(1e3*60*60*24)/(1e3*60*60));return s<0||s===0&&o<0?{text:`Due: ${Math.abs(s)} days ago`,isDue:!0}:s===0?{text:`${o} hours`,isDue:!1}:{text:`${s} days`,isDue:!1}},{text:n,isDue:r}=e();return u.jsx("span",{style:{color:r?"#ef4444":"inherit",fontWeight:r?"700":"600",fontSize:r?"0.85rem":"0.9rem"},children:n})},gr=({label:t,value:e,options:n,onChange:r,placeholder:i="Select...",displayValue:s=l=>l,style:o={},children:a})=>{const[l,d]=R.useState(!1),h=R.useRef(null);return R.useEffect(()=>{const f=p=>{h.current&&!h.current.contains(p.target)&&d(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),u.jsxs("div",{ref:h,style:{display:"flex",flexDirection:"column",gap:"0.4rem",position:"relative",width:"100%",...o},children:[t&&u.jsx("span",{style:{fontSize:"0.85rem",opacity:.6,fontWeight:"600",marginLeft:"4px"},children:t}),u.jsxs("button",{className:"neo-select",style:{textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",width:"100%",position:"relative",height:"48px"},onClick:()=>d(!l),children:[u.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e?s(e):i}),u.jsx(U8,{size:18,style:{transform:l?"rotate(180deg)":"none",transition:"transform 0.3s",marginLeft:"8px",flexShrink:0}})]}),l&&u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"8px",zIndex:1e3,padding:"8px",display:"flex",flexDirection:"column",gap:"4px",maxHeight:"300px",overflowY:"auto",boxShadow:"10px 10px 20px var(--shadow-dark), -10px -10px 20px var(--shadow-light)"},children:[a,n.map((f,p)=>{const g=e===f.value;return u.jsx("button",{className:`neo-button ${g?"neo-inset":""}`,style:{padding:"10px 14px",fontSize:"0.9rem",cursor:"pointer",boxShadow:g?"inset 2px 2px 5px var(--shadow-dark), inset -2px -2px 5px var(--shadow-light)":"none",background:g?"var(--accent-soft)":"transparent",border:"none",borderRadius:"8px",width:"100%",textAlign:"left",justifyContent:"flex-start",color:g?"var(--accent-color)":"var(--text-color)",fontWeight:g?"700":"500"},onClick:()=>{r(f.value),d(!1)},children:f.label},p)})]})]})},S9=({activeTab:t,setActiveTab:e,lessons:n,publicLessons:r,loading:i,publicLoading:s,onReview:o,onEdit:a,onImport:l,searchQuery:d,setSearchQuery:h,onShowFeedback:f,filters:p,setFilters:g,user:w,onLogin:_,sortBy:P,onSortChange:E,filterLabel:v,onLabelChange:x,availableLabels:j,onShowKnowMore:L,onDelete:O,showConfirm:S,onAddLesson:T,onRefresh:C})=>{const{isActive:A,startTour:k}=nu(),{error:N,isReady:I,user:Y}=Io(),me=t==="my-lessons"?i:s,oe=t==="my-lessons"&&!i&&!w&&!A,[X,z]=R.useState(!1),H=Qr.useRef(null),M=Qr.useMemo(()=>{const F={standards:new Set,syllabuses:new Set,mediums:new Set,subjects:new Set};return r.forEach(ee=>{ee.standard&&F.standards.add(ee.standard),ee.syllabus&&F.syllabuses.add(ee.syllabus),ee.medium&&F.mediums.add(ee.medium),ee.subject&&F.subjects.add(ee.subject)}),{standards:Array.from(F.standards).sort(),syllabuses:Array.from(F.syllabuses).sort(),mediums:Array.from(F.mediums).sort(),subjects:Array.from(F.subjects).sort()}},[r]),{standards:D,syllabuses:q,mediums:Q,subjects:J}=M,re=new Set(n.map(F=>F.lessonId||F.storagePath||F.driveFileId||F.id)),Z=r.filter(F=>{if(!F||!F.title)return!1;const ee=F.title.toLowerCase().includes(d.toLowerCase()),Fe=!p.standard||F.standard===p.standard,Ge=!p.syllabus||F.syllabus===p.syllabus,Re=!p.medium||F.medium===p.medium,qe=!p.subject||F.subject===p.subject;return ee&&Fe&&Ge&&Re&&qe}).map(F=>({...F,isOwned:re.has(F.lessonId||F.storagePath||F.id)})).sort((F,ee)=>P==="Title"?F.title.localeCompare(ee.title):(parseInt(ee.id||0)||0)-(parseInt(F.id||0)||0)),G=t==="my-lessons"?n:Z,de=(F,ee)=>{g(Fe=>({...Fe,[F]:ee}))},ye=()=>u.jsxs("div",{style:{position:"relative",display:"inline-flex"},ref:H,children:[u.jsx("button",{className:`icon-btn ${X?"active":""}`,onClick:F=>{F.stopPropagation(),z(!X)},style:{background:"none",border:"none",boxShadow:"none",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",cursor:"pointer",opacity:.6,padding:0},title:"Settings",children:X?u.jsx(_r,{size:20}):u.jsx(WC,{size:20})}),X&&u.jsxs("div",{className:"neo-flat settings-dropdown",style:{position:"absolute",top:"calc(100% + 10px)",right:0,width:"280px",padding:"2rem 1.5rem",zIndex:2e3,borderRadius:"24px",display:"flex",flexDirection:"column",gap:"1.75rem",border:"1px solid rgba(255,255,255,0.4)",boxShadow:"var(--neo-box-shadow)"},children:[u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Fg,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",opacity:.5}}),u.jsx("input",{className:"neo-input",placeholder:"Search...",value:d,onChange:F=>h(F.target.value),style:{width:"100%",paddingLeft:"38px",fontSize:"0.9rem",height:"44px",boxShadow:"inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light)"}})]})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:700,opacity:.5,marginLeft:"4px"},children:"Sort By"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:(t==="my-lessons"?[{label:"Date",value:"Creation Date"},{label:"Title",value:"Title"},{label:"Marks",value:"Average Rating"},{label:"Reviews",value:"Upcoming Review"}]:[{label:"Newest",value:"Creation Date"},{label:"Title",value:"Title"}]).map(F=>u.jsx("button",{className:`neo-button ${P===F.value?"neo-glow-blue":""}`,onClick:()=>E(F.value),style:{padding:"0.6rem 0.4rem",fontSize:"0.8rem",borderRadius:"10px",justifyContent:"center"},children:F.label},F.value))})]}),u.jsxs("button",{className:"neo-button",onClick:()=>{C==null||C(),z(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"0.9rem",borderRadius:"14px"},children:[u.jsx(za,{size:18})," Refresh Lessons"]})]})]}),Se=()=>u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem",gap:"0.5rem",alignItems:"center"},children:u.jsxs("div",{id:"tabs-container",className:"neo-tabs-container",style:{margin:0},children:[u.jsx("button",{id:"tab-my-lessons",className:`neo-tab-item ${t==="my-lessons"?"active":""}`,onClick:()=>e("my-lessons"),children:"My Lessons"}),u.jsx("button",{id:"tab-lessons",className:`neo-tab-item ${t==="lessons"?"active":""}`,onClick:()=>e("lessons"),children:"Lessons"})]})}),ge=()=>{const F=[{label:"All Labels",value:null},...j.map(ee=>({label:ee,value:ee}))];return u.jsxs("div",{style:{marginBottom:"2rem",padding:"0 0.5rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:"4px",paddingRight:"10px"},children:[u.jsx("span",{style:{fontSize:"0.85rem",opacity:.6,fontWeight:"600"},children:"Filter by Label"}),ye()]}),u.jsx(gr,{value:v,options:F,onChange:x,placeholder:"All Labels",displayValue:ee=>ee||"All Labels"})]})},Ae=()=>u.jsxs("div",{className:"filter-bar neo-inset",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1.25rem",padding:"1.25rem",paddingTop:"2.5rem",marginBottom:"2.5rem",borderRadius:"20px",position:"relative"},children:[u.jsx("div",{style:{position:"absolute",top:"12px",right:"10px",zIndex:10},children:ye()}),u.jsx(gr,{label:"Standard",value:p.standard,options:[{label:"All Standards",value:""},...D.map(F=>({label:`Standard ${F}`,value:F}))],onChange:F=>de("standard",F),placeholder:"All Standards",displayValue:F=>F?`Standard ${F}`:"All Standards"}),u.jsx(gr,{label:"Syllabus",value:p.syllabus,options:[{label:"All Syllabuses",value:""},...q.map(F=>({label:F,value:F}))],onChange:F=>de("syllabus",F),placeholder:"All Syllabuses",displayValue:F=>F||"All Syllabuses"}),u.jsx(gr,{label:"Medium",value:p.medium,options:[{label:"All Mediums",value:""},...Q.map(F=>({label:F,value:F}))],onChange:F=>de("medium",F),placeholder:"All Mediums",displayValue:F=>F||"All Mediums"}),u.jsx(gr,{label:"Subject",value:p.subject,options:[{label:"All Subjects",value:""},...J.map(F=>({label:F,value:F}))],onChange:F=>de("subject",F),placeholder:"All Subjects",displayValue:F=>F||"All Subjects"})]});return u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[(!oe||me)&&u.jsxs(u.Fragment,{children:[Se(),t==="my-lessons"&&ge(),t==="lessons"&&Ae()]}),oe&&!me&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem 1rem",textAlign:"center",minHeight:"50vh"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginBottom:"1rem"},children:[u.jsxs("h1",{style:{fontSize:"clamp(2.5rem, 8vw, 3.5rem)",fontWeight:"800",lineHeight:"1.1",color:"#4f46e5",margin:0},children:["Study smarter.",u.jsx("br",{}),"Remember longer."]}),u.jsxs("p",{style:{fontSize:"clamp(1rem, 3vw, 1.15rem)",fontWeight:"500",opacity:.9,marginTop:"1.5rem",maxWidth:"650px",margin:"1.5rem auto 0 auto",lineHeight:"1.7",padding:"0 10px"},children:["Powered by scientifically proven strategies such as spaced repetition and active recall, this app makes learning easier and helps you remember longer.",u.jsx("button",{onClick:L,style:{background:"rgba(79, 70, 229, 0.1)",border:"none",color:"#4f46e5",cursor:"pointer",padding:"2px 8px",fontSize:"0.8rem",fontWeight:"700",display:"inline-block",marginLeft:"8px",borderRadius:"6px",verticalAlign:"middle",boxShadow:"inset 1px 1px 2px rgba(255,255,255,0.5), inset -1px -1px 2px rgba(0,0,0,0.05)"},children:"know more"})]})]}),u.jsxs("div",{className:"hero-cta-container",children:[u.jsxs("div",{className:"hero-btn-group",children:[u.jsx("button",{className:"hero-btn primary-btn",onClick:k,children:"Beginners Guide"}),Y&&!(w!=null&&w.hasDrive)?u.jsxs("button",{className:"hero-btn primary-btn neo-glow-blue",onClick:()=>_("consent"),style:{background:"var(--accent-color)",color:"white"},children:[u.jsx(za,{size:20,className:i?"spin":""}),"Complete Sync Setup"]}):Y?null:u.jsx("button",{className:"hero-btn hero-btn-google",onClick:()=>_("consent"),style:{color:"var(--text-color)"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:["Continue with",u.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"1px",fontWeight:"700",fontSize:"1.2rem",letterSpacing:"-0.02em",marginLeft:"2px"},children:[u.jsx("span",{style:{color:"#4285F4"},children:"G"}),u.jsx("span",{style:{color:"#EA4335"},children:"o"}),u.jsx("span",{style:{color:"#FBBC05"},children:"o"}),u.jsx("span",{style:{color:"#4285F4"},children:"g"}),u.jsx("span",{style:{color:"#34A853"},children:"l"}),u.jsx("span",{style:{color:"#EA4335"},children:"e"})]})]})})]}),N&&u.jsxs("div",{style:{padding:"1rem",background:"var(--error-soft)",borderRadius:"16px",border:"1px solid var(--error-color)",color:"var(--error-color)",fontSize:"0.85rem",marginTop:"1rem",maxWidth:"350px",textAlign:"left"},children:[u.jsx("strong",{children:"Connectivity Notice:"})," ",N]})]})]}),u.jsxs("div",{style:{padding:"0 1rem",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"2rem",position:"relative",minHeight:"48px"},children:u.jsx("h2",{className:"responsive-heading",style:{fontSize:"2rem",fontWeight:"800",color:"var(--accent-color)",flex:1},children:"Lessons"})}),Ae(),s?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem"},children:[u.jsxs("div",{className:"card-loader-container",children:[u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"})]}),u.jsx("p",{style:{marginTop:"1rem",opacity:.6,fontSize:"0.9rem",fontWeight:500},children:"Loading lessons..."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"lessons-grid",style:{padding:"0 1.25rem"},children:[n.filter(F=>F.id==="demo-lesson").map(F=>u.jsx(Kp,{lesson:F,onReview:o,onEdit:a,onImport:l,user:w,onDelete:O,showConfirm:S},F.id)),Z.map(F=>u.jsx(Kp,{lesson:F,onReview:o,onEdit:a,onImport:l,user:w,onDelete:O,showConfirm:S},F.driveFileId||F.id))]}),Z.length===0&&u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"2rem"},children:u.jsxs("div",{style:{maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"2rem",borderRadius:"24px",opacity:.8},children:u.jsx(Zi,{size:64,color:"var(--accent-color)"})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.4rem"},children:"No lessons found"}),u.jsx("p",{style:{opacity:.7},children:"This filter does not have any files. You can request lessons to the developer via the feedback option."})]}),u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:f,style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Zi,{size:18})," Request Lessons"]})]})})]})]})]}),me?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem"},children:[u.jsxs("div",{className:"card-loader-container",children:[u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"})]}),u.jsx("p",{style:{marginTop:"1rem",opacity:.6,fontSize:"0.9rem",fontWeight:500},children:"Loading lessons..."})]}):!oe&&u.jsxs(u.Fragment,{children:[G.length===0&&t==="my-lessons"&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"2rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"3rem",borderRadius:"32px"},children:u.jsx("img",{src:ov,alt:"Welcome",style:{width:"120px",height:"auto"}})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.4rem"},children:"Welcome to Chethan in Cardland!"}),u.jsx("p",{style:{opacity:.7},children:"You don't have any lessons yet. Create your own or explore our Lessons collection."})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"center"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:T,style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Gi,{size:18})," Create New Lesson"]}),u.jsxs("button",{className:"neo-button",onClick:()=>e("lessons"),style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Fg,{size:18})," Browse Lessons"]})]})]}),G.length===0&&t==="lessons"&&u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"2rem"},children:u.jsxs("div",{style:{maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"2rem",borderRadius:"24px",opacity:.8},children:u.jsx(Zi,{size:64,color:"var(--accent-color)"})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.4rem"},children:"No lessons found"}),u.jsx("p",{style:{opacity:.7},children:"This filter does not have any files. You can request lessons to the developer via the feedback option."})]}),u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:f,style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Zi,{size:18})," Request Lessons"]})]})}),G.length>0&&u.jsx("div",{className:"lessons-grid",children:G.map(F=>u.jsx(Kp,{lesson:F,onReview:o,onEdit:a,onImport:l,user:w,onDelete:O,showConfirm:S},F.driveFileId||F.id))})]})]})},b9=({coins:t,isUnlimited:e})=>u.jsxs("div",{className:"neo-inset",style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",borderRadius:"20px",color:"#FFB800",fontWeight:"800",marginRight:"8px",position:"relative"},children:[u.jsx(Cf,{size:18,fill:"currentColor"}),u.jsx("span",{style:{opacity:e?.5:1},children:t}),e&&u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"10px",padding:"0 4px",color:"#8b5cf6",fontSize:"1.2rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:""})]}),I9=({user:t,userProfile:e,isUnlimited:n,isAdmin:r,isTourActive:i,showAdminQuickTools:s,onToggleAdminQuickTools:o,onShowCoinModal:a,onShowMenu:l,onAddLesson:d,onLogin:h,isProfileLoading:f,headerLoading:p,children:g})=>u.jsxs("div",{className:"app-layout",children:[u.jsxs("header",{className:"main-header",children:[u.jsx("img",{src:ov,alt:"Chethan",className:"app-logo"}),u.jsxs("div",{className:"header-actions",children:[r&&u.jsx("button",{className:`neo-button icon-btn ${s?"active":""}`,onClick:o,title:"Admin Quick Tools",style:{background:s?"var(--accent-soft)":""},children:u.jsx(GC,{size:20,color:s?"var(--accent-color)":"currentColor"})}),t&&u.jsxs("div",{onClick:a,style:{display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(b9,{coins:(e==null?void 0:e.coins)||0,isUnlimited:n}),(f||p)&&u.jsx(za,{size:14,className:"spin",style:{color:"var(--accent-color)",opacity:.7}})]}),u.jsx("button",{className:"neo-button icon-btn",onClick:l,children:u.jsx($C,{size:24})})]})]}),u.jsxs("div",{className:"app-container",children:[u.jsx("main",{className:"main-content",children:g}),(t||i)&&u.jsx("button",{id:"fab-add-lesson",className:"neo-button neo-glow-blue fab-add-button",onClick:d,children:u.jsx(Gi,{size:32})})]}),u.jsxs("footer",{className:"main-footer",children:[u.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),u.jsxs("span",{className:"footer-v",children:["v",localStorage.getItem("app_version")||"1.1.4"]})]}),u.jsx("style",{children:`
                .main-footer {
                    padding: 1.5rem;
                    text-align: center;
                    border-top: 1px solid rgba(0,0,0,0.05);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    gap: 1rem;
                    opacity: 0.6;
                    font-size: 0.8rem;
                }
                .main-footer a {
                    color: var(--text-color);
                    text-decoration: none;
                    font-weight: 600;
                }
                .main-footer a:hover {
                    text-decoration: underline;
                    color: var(--accent-color);
                }
                .footer-v {
                    opacity: 0.5;
                }
                .app-layout {
                    display: flex;
                    flex-direction: column;
                    min-height: 100dvh;
                    background: var(--bg-color);
                }
                .main-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 1rem 1.5rem;
                    background: var(--bg-color);
                    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
                    z-index: 1000;
                    position: sticky;
                    top: 0;
                }
                .header-actions {
                    display: flex;
                    gap: 0.75rem;
                    align-items: center;
                }
                .app-logo {
                    height: 2.5rem;
                    width: auto;
                    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
                }
                .main-content {
                    flex: 1;
                    padding-bottom: 5rem; /* Space for FAB */
                }
                
                @media (max-width: 480px) {
                    .main-header {
                        padding: 0.75rem 1rem;
                    }
                    .app-logo {
                        height: 2rem;
                    }
                }
            `})]}),C9=({user:t,theme:e,onToggleTheme:n,soundsEnabled:r,onToggleSounds:i,onShowFeedback:s,onClose:o,onLogout:a,onLogin:l,onDeleteData:d,onShowAdminPanel:h,onShowReferral:f,onShowTour:p,appVersion:g})=>{const w=()=>{window.confirm("Check for updates? This will refresh the page.")&&window.location.reload(!0)};return u.jsxs("div",{className:"fixed inset-0",style:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:5e3,pointerEvents:"none",display:"flex",justifyContent:"flex-end"},children:[u.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",pointerEvents:"auto"},onClick:o}),u.jsxs("div",{className:"relative w-80 h-full bg-white dark:bg-gray-800 shadow-2xl p-6 flex flex-col gap-6 overflow-y-auto",style:{position:"relative",width:"320px",height:"100%",background:"var(--bg-color)",boxShadow:"-5px 0 25px rgba(0,0,0,0.1)",padding:"2rem",paddingBottom:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem",pointerEvents:"auto",borderLeft:"1px solid var(--border-color)",animation:"slideIn 0.3s ease-out",overflowY:"auto",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",touchAction:"pan-y"},onClick:_=>_.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0},children:"Menu"}),u.jsx(Gn,{onClick:o})]}),t?u.jsxs("div",{className:"neo-card flex items-center gap-3 p-3",style:{padding:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsxs("div",{style:{position:"relative",width:"48px",height:"48px",flexShrink:0},children:[t.picture?u.jsx("img",{src:t.picture,alt:t.name,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},onError:_=>{_.target.style.display="none",_.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:"var(--accent-soft)",display:t.picture?"none":"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(vd,{size:24})})]}),u.jsxs("div",{style:{overflow:"hidden",flex:1},children:[u.jsx("div",{style:{fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-color)",opacity:.6,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.email})]})]}):u.jsxs("button",{className:"neo-button",style:{width:"100%",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",textAlign:"left"},onClick:()=>{o(),l()},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-secondary)"},children:u.jsx(vd,{size:20})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[u.jsx("span",{style:{fontWeight:"600",fontSize:"1rem"},children:"Guest User"}),u.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Sign in to save progress"})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:e==="light"?"Light Mode":"Dark Mode"}),u.jsx("button",{className:"neo-button icon-btn neo-glow-blue",onClick:n,children:e==="light"?u.jsx(o9,{size:20}):u.jsx(Q8,{size:20})})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:r?"Sounds On":"Sounds Off"}),u.jsx("button",{className:`neo-button icon-btn ${r?"neo-glow-blue":""}`,onClick:i,children:r?u.jsx(u9,{size:20}):u.jsx(d9,{size:20})})]}),u.jsx("div",{style:{flex:1}}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(t==null?void 0:t.email)===Si&&u.jsxs("button",{className:"neo-button neo-glow-blue",style:{width:"100%",color:"var(--accent-color)",fontWeight:"bold"},onClick:h,children:[u.jsx(WC,{size:18})," Admin Panel"]}),u.jsxs("button",{className:"neo-button",style:{width:"100%",color:"var(--accent-color)"},onClick:s,children:[u.jsx(Zi,{size:18})," Help/Feedback"]}),t&&u.jsxs("button",{className:"neo-button",style:{width:"100%",color:"#f59e0b"},onClick:f,children:[u.jsx(HC,{size:18})," Refer a Friend"]}),t?u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"neo-button",style:{width:"100%",color:"#8b5cf6"},onClick:p,children:[u.jsx(qC,{size:18})," Beginner's Guide"]}),u.jsxs("button",{className:"neo-button",style:{width:"100%"},onClick:a,children:[u.jsx(BC,{size:18})," Logout"]}),u.jsxs("button",{className:"neo-button neo-glow-red",style:{width:"100%",color:"var(--error-color)"},onClick:d,children:[u.jsx(fi,{size:18})," Delete Data"]})]}):u.jsxs("button",{className:"neo-button neo-glow-blue",style:{width:"100%",backgroundColor:"var(--accent-color)",color:"white"},onClick:()=>{o(),l()},children:[u.jsx(vd,{size:18})," Sign in with Google"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",marginTop:"0.5rem",opacity:.5},children:[u.jsxs("span",{style:{fontSize:"0.7rem",fontWeight:"500"},children:["v",g]}),u.jsx("button",{onClick:w,style:{background:"none",border:"none",color:"var(--accent-color)",fontSize:"0.65rem",textDecoration:"underline",cursor:"pointer",padding:"4px"},children:"Check for updates"})]})]}),u.jsx("style",{children:`
            @keyframes slideIn {
                from { transform: translateX(100%); }
                to { transform: translateX(0); }
            }
            `})]})},Li=(t,e)=>{if(!e)return"";const n=String(e).trim();switch(t){case"standard":const r=n.toUpperCase().replace(/^(STANDARD|STD|CLASS|GRADE)\s*/i,"");return{5:"V",V:"V",6:"VI",VI:"VI",7:"VII",VII:"VII",8:"VIII",VIII:"VIII",9:"IX",IX:"IX",10:"X",X:"X"}[r]||r;case"syllabus":const s=n.toUpperCase();return s.includes("NCERT")?"NCERT":s.includes("KERALA")?"Kerala":n;case"medium":const o=n.toLowerCase();return o.includes("malayalam")?"Malayalam":o.includes("english")?"English":n.charAt(0).toUpperCase()+n.slice(1);case"subject":const a=n.toLowerCase();return a.includes("math")?"Maths":a.includes("social")?"Social Science":a.includes("science")?"Science":a.includes("malayalam")?"Malayalam":a.includes("hindi")?"Hindi":a.includes("english")?"English":n.charAt(0).toUpperCase()+n.slice(1);default:return n}},k9=t=>{if(!t||!t.trim())return{title:"",label:"",importantNote:"",questions:[],sections:[]};let e=null,n="",r="",i="",s=[],o="",a="",l="",d="",h=0,f=[];try{const _=t.match(/\[[\s\S]*\]|\{[\s\S]*\}/);_&&(e=JSON.parse(_[0]))}catch{}if(e)Array.isArray(e)?s=e:(n=e.title||"",r=e.label||e.tag||"",i=e.importantNote||e.note||"",o=Li("standard",e.standard||e.Standard),a=Li("syllabus",e.syllabus||e.Syllabus),l=Li("medium",e.medium||e.Medium),d=Li("subject",e.subject||e.Subject),h=e.cost||e.Cost||0,f=e.sections||[],s=e.questions||e.cards||[]);else{const _=t.match(/^(?:Title|Lesson Title|Stack Title|Name):\s*(.*)$/im),P=t.match(/^(?:Label|Category|Tag):\s*(.*)$/im),E=t.match(/^(?:Important Note|Note|Description):\s*(.*)$/im);n=_?_[1].trim():"",r=P?P[1].trim():"",i=E?E[1].trim():"";const v=t.match(/^(?:Standard|Class|Grade):\s*(.*)$/im),x=t.match(/^(?:Syllabus|Board):\s*(.*)$/im),j=t.match(/^(?:Medium|Language):\s*(.*)$/im),L=t.match(/^(?:Subject):\s*(.*)$/im),O=t.match(/^(?:Cost|Coins|Price):\s*(\d+)$/im);o=Li("standard",v?v[1].trim():""),a=Li("syllabus",x?x[1].trim():""),l=Li("medium",j?j[1].trim():""),d=Li("subject",L?L[1].trim():""),h=O?parseInt(O[1],10):0,t.split(/(?=Q:|Question:|Q\d+:|Question \d+:)/i).forEach(T=>{if(!T.trim())return;const C=T.match(/(?:Q:|Question:|Q\d+:|Question \d+:)\s*([\s\S]*?)(?=A:|Answer:|A\d+:|Answer \d+:|$)/i),A=T.match(/(?:A:|Answer:|A\d+:|Answer \d+:)\s*([\s\S]*?)(?=Q:|Question:|Q\d+:|Question \d+:|$)/i);C&&A&&s.push({question:C[1].trim(),answer:A[1].trim()})})}const p=_=>{var O,S,T,C;const P=_.choices||_.options||[],E=_.type==="mcq"||P&&Array.isArray(P)&&P.length>0,v=E?"mcq":"flashcard";let x=[];if(E){const A=_.correctAnswer||_.answer;x=P.map((k,N)=>{const I=typeof k=="string"?k:k.text||"";let Y=!1;return typeof A=="number"?Y=N===A:typeof k=="object"&&k.isCorrect!==void 0?Y=k.isCorrect:A&&(Y=I.trim().toLowerCase()===String(A).trim().toLowerCase()),{id:Math.random(),text:I,isCorrect:Y}})}const j=()=>{var A;return typeof _.question=="string"?_.question:typeof _.question=="object"&&((A=_.question)!=null&&A.text)?_.question.text:typeof _.q=="string"?_.q:""},L=()=>{var A;return typeof _.answer=="string"?_.answer:typeof _.answer=="object"&&((A=_.answer)!=null&&A.text)?_.answer.text:typeof _.a=="string"?_.a:""};return{id:Math.random(),type:v,question:{text:j(),image:((O=_.question)==null?void 0:O.image)||"",audio:((S=_.question)==null?void 0:S.audio)||""},answer:{text:L(),image:((T=_.answer)==null?void 0:T.image)||"",audio:((C=_.answer)==null?void 0:C.audio)||""},options:x}},g=f.map(_=>({noteSegment:_.noteSegment||"",questions:(_.questions||_.cards||[]).map(p)})),w=g.length>0?g.flatMap(_=>_.questions):s.map(p);return{title:n,label:r,importantNote:i,standard:o,syllabus:a,medium:l,subject:d,cost:parseInt(h)||0,sections:g,questions:w,cards:w}},Qp=t=>{if(!t)return t;const e=i=>{var f,p,g,w;if(i.question&&typeof i.question=="object"&&"text"in i.question)return i;const s=i.choices||i.options||[],o=i.type==="mcq"||s&&Array.isArray(s)&&s.length>0,a=o?"mcq":"flashcard";let l=[];if(o){const _=i.correctAnswer||(typeof i.answer=="string"?i.answer:null);l=s.map((P,E)=>{const v=typeof P=="string"?P:P.text||"";let x=!1;return typeof _=="number"?x=E===_:typeof P=="object"&&P.isCorrect!==void 0?x=P.isCorrect:_&&(x=v.trim().toLowerCase()===String(_).trim().toLowerCase()),{id:i.id?`${i.id}-opt-${E}`:Math.random(),text:v,isCorrect:x}})}const d=()=>{var _;return typeof i.question=="string"?i.question:typeof i.question=="object"&&((_=i.question)!=null&&_.text)?i.question.text:typeof i.q=="string"?i.q:""},h=()=>{var _;return typeof i.answer=="string"?i.answer:typeof i.answer=="object"&&((_=i.answer)!=null&&_.text)?i.answer.text:typeof i.a=="string"?i.a:""};return{id:i.id||Math.random(),type:a,question:{text:d(),image:((f=i.question)==null?void 0:f.image)||"",audio:((p=i.question)==null?void 0:p.audio)||""},answer:{text:h(),image:((g=i.answer)==null?void 0:g.image)||"",audio:((w=i.answer)==null?void 0:w.audio)||""},options:l,lastRating:i.lastRating}};let n=[],r=[];return t.sections&&Array.isArray(t.sections)&&t.sections.length>0?(n=t.sections.map((i,s)=>{const o=i.noteSegment||"",a=(i.questions||i.cards||[]).map((l,d)=>({...e(l),sectionIndex:s,sectionNoteSegment:o,isFirstInSection:d===0&&o}));return{noteSegment:o,questions:a}}),r=n.flatMap(i=>i.questions)):(t.questions||t.cards)&&(r=(t.questions||t.cards||[]).map(e)),{...t,sections:n,questions:r,cards:r}},ZC=({imageUrl:t,onClose:e})=>{const[n,r]=R.useState(1),[i,s]=R.useState(0),[o,a]=R.useState({x:0,y:0}),l=()=>{r(g=>Math.min(g+.5,5))},d=()=>{const g=Math.max(n-.5,.5);r(g),g<=1&&a({x:0,y:0})},h=()=>{s(g=>(g+90)%360)},f=()=>{r(1),s(0),a({x:0,y:0})},p=(g,w)=>{n>1&&a({x:o.x+w.offset.x,y:o.y+w.offset.y})};return u.jsxs(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"image-viewer-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"hidden"},onClick:e,children:[u.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",gap:"0.5rem",zIndex:1e4},onClick:g=>g.stopPropagation(),children:[u.jsx("button",{className:"neo-button icon-btn",onClick:l,title:"Zoom In",style:{background:"var(--bg-color)"},children:u.jsx(h9,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:d,title:"Zoom Out",style:{background:"var(--bg-color)"},children:u.jsx(f9,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:h,title:"Rotate",style:{background:"var(--bg-color)"},children:u.jsx(e9,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:f,title:"Reset",style:{background:"var(--bg-color)",fontSize:"0.8rem",padding:"8px 12px"},children:"Reset"}),u.jsx(Gn,{onClick:e,size:20})]}),u.jsxs("div",{style:{position:"absolute",bottom:"2rem",left:"50%",transform:"translateX(-50%)",background:"var(--bg-color)",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"bold",boxShadow:"4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light)"},onClick:g=>g.stopPropagation(),children:[Math.round(n*100),"% ",n>1&&" Drag to pan"]}),u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},onClick:g=>g.stopPropagation(),children:u.jsx(Ue.img,{src:t,alt:"Full screen view",drag:n>1,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.1,dragMomentum:!1,onDragEnd:p,animate:{scale:n,rotate:i,x:o.x,y:o.y},transition:{type:"spring",stiffness:200,damping:20},style:{maxWidth:n<=1?"90vw":"none",maxHeight:n<=1?"90vh":"none",width:n>1?"auto":void 0,height:n>1?"90vh":void 0,objectFit:"contain",cursor:n>1?"grab":"zoom-in",userSelect:"none"},whileDrag:{cursor:"grabbing"},onClick:g=>{g.stopPropagation(),n===1&&l()},draggable:!1})})]})},Eh=({value:t,onChange:e,placeholder:n,style:r={},...i})=>{const s=R.useRef(null),o=a=>{a&&(a.style.height="auto",a.style.height=`${a.scrollHeight}px`)};return R.useEffect(()=>{o(s.current)},[t]),u.jsx("textarea",{ref:s,className:"neo-input",placeholder:n,value:t,onChange:a=>{e(a),o(a.target)},style:{...r,overflow:"hidden",resize:"none",minHeight:"40px",display:"block"},...i})},Z_=({question:t,index:e,totalQuestions:n,onUpdate:r,onRemove:i,onMove:s,recording:o,startRecording:a,stopRecording:l,cancelRecording:d,recordingTime:h,handleFileUpload:f,handleOptionChange:p,setViewingImage:g,showSplitUI:w,selectedQuestions:_,toggleQuestionSelection:P})=>{var v;const E=x=>{const j=Math.floor(x/60),L=x%60;return`${j}:${L.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"neo-inset",style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem",position:"relative"},children:[w&&u.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:5},children:u.jsx("input",{type:"checkbox",className:"neo-checkbox",checked:_==null?void 0:_.has(t.id),onChange:()=>P==null?void 0:P(t.id)})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",opacity:.5,display:"flex",alignItems:"center",gap:"0.5rem"},children:u.jsxs("span",{children:[t.type==="mcq"?"MCQ":"QUESTION"," ",e+1]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"var(--bg-color)",padding:"4px 8px",borderRadius:"8px",boxShadow:"inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light)"},children:[u.jsx("span",{style:{fontSize:"0.75rem",opacity:.6},children:"Pos:"}),u.jsx("input",{type:"number",className:"neo-input",style:{width:"40px",padding:"2px",textAlign:"center",boxShadow:"none",background:"transparent",height:"auto",fontSize:"0.9rem",fontWeight:"bold"},placeholder:"#",onBlur:x=>{x.target.value&&(s(x.target.value),x.target.value="")},onKeyDown:x=>{x.key==="Enter"&&x.target.value&&(s(x.target.value),x.target.value="")}})]}),u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",color:"var(--error-color)",boxShadow:"none"},onClick:i,title:"Delete Question",children:u.jsx(fi,{size:16})})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:"QUESTION"}),u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[o?o.id===t.id&&o.field==="question"?u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,borderRadius:"12px",display:"flex",alignItems:"center",padding:"0 1rem",gap:"1rem",background:"var(--bg-color)"},children:[u.jsx("div",{style:{width:"10px",height:"10px",background:"red",borderRadius:"50%",animation:"pulse 1s infinite"}}),u.jsxs("span",{style:{flex:1,fontWeight:"600"},children:["Recording... ",E(h)]}),u.jsx("button",{className:"neo-button icon-btn",title:"Cancel",style:{width:"32px",height:"32px"},onClick:d,children:u.jsx(_r,{size:14,color:"var(--error-color)"})}),u.jsx("button",{className:"neo-button icon-btn",title:"Stop & Save",style:{width:"32px",height:"32px"},onClick:l,children:u.jsx(vo,{size:14,color:"var(--accent-color)"})})]}):null:u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",color:t.question.audio?"var(--accent-color)":"currentColor"},onClick:()=>a(t.id,"question"),children:u.jsx(Th,{size:14})}),t.question.audio&&u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px"},onClick:()=>r("question",{...t.question,audio:""}),children:u.jsx(fi,{size:12,color:"var(--error-color)"})})]}),u.jsxs("label",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",cursor:"pointer"},children:[u.jsx(Vg,{size:14,color:t.question.image?"var(--accent-color)":"currentColor"}),u.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:x=>f(x,j=>r("question",{...t.question,image:j}))})]})]})]}),t.question.image&&u.jsxs("div",{style:{position:"relative",width:"100%",maxHeight:"150px"},children:[u.jsx("img",{src:t.question.image,style:{width:"100%",height:"100%",maxHeight:"150px",objectFit:"contain",borderRadius:"8px",cursor:"pointer"},onClick:()=>g(t.question.image)}),u.jsx("button",{className:"neo-button icon-btn",style:{position:"absolute",top:"5px",right:"5px",width:"24px",height:"24px"},onClick:()=>r("question",{...t.question,image:""}),children:u.jsx(_r,{size:12})})]}),u.jsx("div",{style:{position:"relative"},children:u.jsx(Eh,{placeholder:"The question... ",value:t.question.text,onChange:x=>r("question",{...t.question,text:ya(x.target.value)}),style:{paddingRight:"30px"}})})]}),t.type==="mcq"?u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:"OPTIONS"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:(v=t.options)==null?void 0:v.map((x,j)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("input",{type:"radio",name:`correct-${t.id}`,checked:x.isCorrect,onChange:()=>p(x.id,"isCorrect",!0),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--accent-color)"}}),u.jsx("input",{className:"neo-input",placeholder:`Option ${String.fromCharCode(65+j)}`,value:x.text,onChange:L=>p(x.id,"text",ya(L.target.value)),style:{borderColor:x.isCorrect?"var(--accent-color)":"transparent",borderWidth:x.isCorrect?"2px":"1px"}})]},x.id))})]}):u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:"ANSWER"}),u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[o?o.id===t.id&&o.field==="answer"?u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,borderRadius:"12px",display:"flex",alignItems:"center",padding:"0 1rem",gap:"1rem",background:"var(--bg-color)"},children:[u.jsx("div",{style:{width:"10px",height:"10px",background:"red",borderRadius:"50%",animation:"pulse 1s infinite"}}),u.jsxs("span",{style:{flex:1,fontWeight:"600"},children:["Recording... ",E(h)]}),u.jsx("button",{className:"neo-button icon-btn",title:"Cancel",style:{width:"32px",height:"32px"},onClick:d,children:u.jsx(_r,{size:14,color:"var(--error-color)"})}),u.jsx("button",{className:"neo-button icon-btn",title:"Stop & Save",style:{width:"32px",height:"32px"},onClick:l,children:u.jsx(vo,{size:14,color:"var(--accent-color)"})})]}):null:u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",color:t.answer.audio?"var(--accent-color)":"currentColor"},onClick:()=>a(t.id,"answer"),children:u.jsx(Th,{size:14})}),t.answer.audio&&u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px"},onClick:()=>r("answer",{...t.answer,audio:""}),children:u.jsx(fi,{size:12,color:"var(--error-color)"})})]}),u.jsxs("label",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",cursor:"pointer"},children:[u.jsx(Vg,{size:14,color:t.answer.image?"var(--accent-color)":"currentColor"}),u.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:x=>f(x,j=>r("answer",{...t.answer,image:j}))})]})]})]}),t.answer.image&&u.jsxs("div",{style:{position:"relative",width:"100%",maxHeight:"150px"},children:[u.jsx("img",{src:t.answer.image,style:{width:"100%",height:"100%",maxHeight:"150px",objectFit:"contain",borderRadius:"8px",cursor:"pointer"},onClick:()=>g(t.answer.image)}),u.jsx("button",{className:"neo-button icon-btn",style:{position:"absolute",top:"5px",right:"5px",width:"24px",height:"24px"},onClick:()=>r("answer",{...t.answer,image:""}),children:u.jsx(_r,{size:12})})]}),u.jsx(Eh,{placeholder:"The answer... ",value:t.answer.text,onChange:x=>r("answer",{...t.answer,text:ya(x.target.value)})})]})]},t.id)},A9=({user:t,lesson:e,onClose:n,onSave:r,onDelete:i,showAlert:s,showConfirm:o,availableLabels:a,allLessons:l,activeTab:d,defaultMetadata:h})=>{const[f,p]=R.useState((e==null?void 0:e.title)||""),[g,w]=R.useState((e==null?void 0:e.titleImage)||""),[_,P]=R.useState((e==null?void 0:e.label)||"No label"),[E,v]=R.useState((e==null?void 0:e.importantNote)||""),[x,j]=R.useState(""),[L,O]=R.useState((e==null?void 0:e.questions)||(e==null?void 0:e.cards)||[{id:Date.now(),question:{text:"",image:"",audio:""},answer:{text:"",image:"",audio:""}}]),[S,T]=R.useState((e==null?void 0:e.standard)||(e?"":(h==null?void 0:h.standard)||"")),[C,A]=R.useState((e==null?void 0:e.syllabus)||(e?"":(h==null?void 0:h.syllabus)||"")),[k,N]=R.useState((e==null?void 0:e.medium)||(e?"":(h==null?void 0:h.medium)||"")),[I,Y]=R.useState((e==null?void 0:e.subject)||(e?"":(h==null?void 0:h.subject)||"")),[me,oe]=R.useState((e==null?void 0:e.cost)||0),[X,z]=R.useState((e==null?void 0:e.sections)||[]),[H,M]=R.useState(d==="lessons"&&(t==null?void 0:t.email)===Si),[D,q]=R.useState(null);R.useRef(null);const[Q,J]=R.useState(!1),[re,Z]=R.useState(new Set),[G,de]=R.useState(!1),[ye,Se]=R.useState(""),[ge,Ae]=R.useState(!1),F=R.useRef(null),ee=R.useRef(null),[Fe,Ge]=R.useState(null),[Re,qe]=R.useState(0),[ot,De]=R.useState(null),we=R.useRef(null),Be=()=>{const W={id:Date.now(),type:"flashcard",question:{text:"",image:"",audio:""},answer:{text:"",image:"",audio:""}};if(X.length>0){const se=X.length-1,le=[...X];le[se].questions=le[se].questions||le[se].cards||[],le[se].questions.push(W),z(le),O(le.flatMap(te=>te.questions||te.cards))}else O([...L,W]);Ot()},Ke=()=>{const W={id:Date.now(),type:"mcq",question:{text:"",image:"",audio:""},options:[{id:Date.now()+1,text:"",isCorrect:!1},{id:Date.now()+2,text:"",isCorrect:!1},{id:Date.now()+3,text:"",isCorrect:!1},{id:Date.now()+4,text:"",isCorrect:!1}],answer:{text:"",image:"",audio:""}};if(X.length>0){const se=X.length-1,le=[...X];le[se].questions=le[se].questions||le[se].cards||[],le[se].questions.push(W),z(le),O(le.flatMap(te=>te.questions||te.cards))}else O([...L,W]);Ot()},Et=()=>{z([...X,{noteSegment:"",questions:[]}])},Ot=()=>{setTimeout(()=>{ee.current&&ee.current.scrollTo({top:ee.current.scrollHeight,behavior:"smooth"})},100)},St=(W,se,le=null)=>{const te=parseInt(se)-1;if(le!==null){const xe=[...X],fe=xe[le].questions||xe[le].cards||[];if(isNaN(te)||te<0||te>=fe.length||te===W)return;const[Dt]=fe.splice(W,1);fe.splice(te,0,Dt),xe[le].questions=fe,z(xe),O(xe.flatMap(Xe=>Xe.questions||Xe.cards))}else{if(isNaN(te)||te<0||te>=L.length||te===W)return;const xe=[...L],[fe]=xe.splice(W,1);xe.splice(te,0,fe),O(xe)}},Ft=(W,se,le,te)=>{O(L.map(xe=>xe.id!==W?xe:le==="isCorrect"?{...xe,options:xe.options.map(fe=>({...fe,isCorrect:fe.id===se}))}:{...xe,options:xe.options.map(fe=>fe.id===se?{...fe,[le]:te}:fe)}))},qt=W=>{L.length>1&&O(L.filter(se=>se.id!==W))},ht=(W,se,le)=>{O(L.map(te=>te.id===W?{...te,[se]:le}:te))},xn=(W,se,le="image")=>{const te=W.target.files[0];if(!te)return;const xe=new FileReader;xe.onloadend=()=>{const fe=xe.result;if(!zg(fe,le==="image"?["image/"]:["audio/"])){s(`Invalid ${le} file. Only ${le} files are allowed.`);return}se(fe)},xe.readAsDataURL(te)},dn=async(W,se)=>{Ge({id:W,field:se}),qe(0);try{const le=await navigator.mediaDevices.getUserMedia({audio:!0}),te=new MediaRecorder(le),xe=[];te.ondataavailable=fe=>xe.push(fe.data),te.onstop=()=>{const fe=new Blob(xe,{type:"audio/webm"}),Dt=new FileReader;Dt.onloadend=()=>{O(Xe=>Xe.map(wt=>wt.id===W?{...wt,[se]:{...wt[se],audio:Dt.result}}:wt))},Dt.readAsDataURL(fe),le.getTracks().forEach(Xe=>Xe.stop()),clearInterval(we.current),qe(0)},te.start(),De(te),we.current=setInterval(()=>qe(fe=>fe+1),1e3)}catch{s("Could not access microphone."),Ge(null),qe(0)}},Ee=()=>{ot&&(ot.stop(),De(null),Ge(null))},$e=()=>{ot&&(ot.onstop=()=>{clearInterval(we.current),qe(0),De(null),Ge(null)},ot.stop())},bt=async()=>{var le;if(!f.trim())return s("Please enter a title");const W=X.length>0?X.flatMap(te=>te.questions||te.cards):L;for(let te=0;te<W.length;te++){const xe=W[te],fe=xe.question.text.trim()||xe.question.image||xe.question.audio,Dt=xe.answer.text.trim()||xe.answer.image||xe.answer.audio;if(xe.type==="mcq"){const Xe=(le=xe.options)==null?void 0:le.some(wt=>wt.isCorrect);if(!fe)return s(`Question is required for MCQ ${te+1}`);if(!Xe)return s(`Please select a correct answer for MCQ ${te+1}`)}else{if(!fe)return s(`Question is required for question ${te+1}`);if(!Dt)return s(`Answer is required for question ${te+1}`)}}const se={id:(e==null?void 0:e.id)||Date.now().toString(),title:f,titleImage:g,label:_,standard:S,syllabus:C,medium:k,subject:I,importantNote:E,questions:W,sections:X,owner:t.email,avgRating:(e==null?void 0:e.avgRating)||null,lastReviewed:(e==null?void 0:e.lastReviewed)||null,cost:parseInt(me)||0,questionCount:W.length};try{Ae(!0);let te;if(H){const{savePublicLesson:fe}=await Vr(()=>import("./publicDrive-f10d2c1b.js"),[]);te=await fe(se)}else te=await Ji.saveLesson(se);const xe=te.driveFileId||te.id;r({...te,driveFileId:xe},!0,H)}catch(te){if(Ae(!1),te.message==="REAUTH_NEEDED"||te.message.includes("REAUTH_NEEDED")){s("Please reconnect to Google Drive to save.");try{await p8({prompt:"consent"}),await bt()}catch(xe){console.error("Re-auth failed/cancelled",xe)}}else console.error("Save failed:",te),te.code==="storage/unknown"||te.message.includes("storage/unknown")?s('Cloud upload failed (likely CORS). Please use the "Download" button to save locally.'):s(`Failed to save lesson: ${te.message}`)}},ei=()=>{if(re.size===0)return s("Please select at least one question to split.");if(re.size===L.length)return s("Cannot split all questions.");o(`Split ${re.size} question(s) into a new lesson?`,async()=>{const W=L.filter(te=>re.has(te.id)),se=L.filter(te=>!re.has(te.id)),le={id:Date.now().toString(),title:`${f} (Split)`,titleImage:g,label:_,questions:W,owner:t.email,questionCount:W.length};try{const te=await Ji.saveLesson(le);r({...te,driveFileId:te.driveFileId||te.id},!1),O(se),Z(new Set),J(!1),s("Lesson split successfully!"),await bt()}catch{s("Failed to split lesson.")}})},Ar=async()=>{if(!ye)return s("Please select a lesson to merge with.");const W=l==null?void 0:l.find(se=>se.id===ye);if(!W)return s("Target lesson not found.");o(`Merge "${f}" into "${W.title}"?`,async()=>{try{const se=W.questions||W.cards||[],le={...W,questions:[...se,...L],questionCount:se.length+L.length};await Ji.saveLesson(le),e!=null&&e.driveFileId&&await VC(t.token,e.driveFileId),s("Lessons merged successfully!"),n()}catch{s("Failed to merge lessons.")}})},Qn=W=>{Z(se=>{const le=new Set(se);return le.has(W)?le.delete(W):le.add(W),le})};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:u.jsxs("div",{ref:F,className:"modal-content neo-flat",style:{width:"100%",maxWidth:"600px",height:window.innerWidth<768?"100%":"90vh",maxHeight:"100%",padding:0,display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:window.innerWidth<768?0:"24px"},children:[u.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid var(--shadow-dark)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-color)",zIndex:10},children:[u.jsx("h2",{style:{fontSize:"1.5rem",margin:0},children:e?"Edit Lesson":"New Lesson"}),u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:u.jsx(Gn,{onClick:n,size:18})})]}),u.jsxs("div",{ref:ee,style:{padding:"2rem",flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsx("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.8rem"},children:[u.jsx("label",{style:{fontWeight:"600",opacity:.7},children:"Title & Cover Image"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsxs("div",{style:{position:"relative",flex:1},children:[u.jsx("input",{id:"lesson-modal-title-input",className:"neo-input",placeholder:"Lesson Title ",value:f,onChange:W=>p(ya(W.target.value)),style:{paddingRight:"30px"}}),!f&&u.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"red",pointerEvents:"none"},children:"*"})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsxs("label",{className:"neo-button icon-btn",style:{cursor:"pointer",flexShrink:0,color:g?"var(--accent-color)":"currentColor"},children:[u.jsx(Vg,{size:18}),u.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:W=>xn(W,w)})]}),g&&u.jsx("button",{className:"neo-button icon-btn",style:{flexShrink:0},onClick:()=>w(""),children:u.jsx(fi,{size:16,color:"var(--error-color)"})})]})]}),u.jsx(gr,{label:"Label",value:_,options:[{label:"No label",value:"No label"},...a.filter(W=>W!=="No label").map(W=>({label:W,value:W}))],onChange:P,placeholder:"Select label...",children:u.jsxs("div",{style:{display:"flex",gap:"8px",padding:"8px",borderBottom:"1px solid var(--shadow-dark)",marginBottom:"4px"},children:[u.jsx("input",{className:"neo-input",placeholder:"Create new label...",value:x,onChange:W=>j(ya(W.target.value)),onKeyPress:W=>{W.key==="Enter"&&x.trim()&&(P(x.trim()),j(""))},style:{flex:1,fontSize:"0.85rem",padding:"8px 12px",height:"36px"}}),u.jsx("button",{className:"neo-button",style:{padding:"8px 12px",fontSize:"0.85rem",height:"36px"},onClick:()=>{x.trim()&&(P(x.trim()),j(""))},children:u.jsx(Gi,{size:14})})]})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginTop:"0.5rem"},children:[u.jsx("label",{style:{fontWeight:"600",opacity:.7},children:"Important Note (Optional)"}),u.jsx(Eh,{placeholder:"Add an important note...",value:E,onChange:W=>v(ya(W.target.value))})]})]})}),(t==null?void 0:t.email)===Si&&u.jsxs("div",{className:"neo-inset",style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.25rem",borderRadius:"16px"},children:[u.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",opacity:.6},children:"COMMUNITY METADATA"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem"},children:[u.jsx(gr,{label:"Standard",value:S,options:["V","VI","VII","VIII","IX","X"].map(W=>({label:`Standard ${W}`,value:W})),onChange:T,placeholder:"Select Standard"}),u.jsx(gr,{label:"Syllabus",value:C,options:["NCERT","Kerala"].map(W=>({label:W,value:W})),onChange:A,placeholder:"Select Syllabus"}),u.jsx(gr,{label:"Medium",value:k,options:["Malayalam","English"].map(W=>({label:W,value:W})),onChange:N,placeholder:"Select Medium"}),u.jsx(gr,{label:"Subject",value:I,options:["Maths","Social Science","Science","English","Malayalam","Hindi"].map(W=>({label:W,value:W})),onChange:Y,placeholder:"Select Subject"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[u.jsx("label",{style:{fontSize:"0.7rem",fontWeight:"700",color:"#94a3b8",textTransform:"uppercase"},children:"Cost (Coins)"}),u.jsx("input",{type:"number",className:"neo-input",value:me,onChange:W=>oe(W.target.value),placeholder:"0 for free",style:{padding:"10px 12px"}})]})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"1rem",cursor:"pointer",padding:"0.5rem",borderRadius:"8px",background:H?"var(--accent-soft)":"transparent"},children:[u.jsx("input",{type:"checkbox",checked:H,onChange:W=>M(W.target.checked),style:{width:"18px",height:"18px"}}),u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600",color:H?"var(--accent-color)":"inherit"},children:"Publish to Community Pool"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:X&&X.length>0?X.map((W,se)=>{const le=W.questions||W.cards||[];return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem",borderRadius:"12px",border:"1px solid var(--shadow-dark)"},children:[u.jsxs("div",{className:"neo-flat",style:{padding:"1rem",borderLeft:"4px solid var(--accent-color)",borderRadius:"8px"},children:[u.jsx("label",{style:{fontSize:"0.7rem",fontWeight:"bold",opacity:.5,textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Section Note"}),u.jsx(Eh,{value:W.noteSegment,onChange:te=>{const xe=[...X];xe[se].noteSegment=te.target.value,z(xe)},placeholder:"Enter section note...",style:{minHeight:"40px",background:"transparent",boxShadow:"none"}})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:le.map((te,xe)=>u.jsx(Z_,{question:te,index:xe,totalQuestions:le.length,onUpdate:(fe,Dt)=>{const Xe=[...X],wt=Xe[se].questions||Xe[se].cards||[];wt[xe]={...te,[fe]:Dt},Xe[se].questions=wt,z(Xe),O(Xe.flatMap(js=>js.questions||js.cards))},onRemove:()=>{const fe=[...X],Dt=fe[se].questions||fe[se].cards||[];Dt.splice(xe,1),fe[se].questions=Dt,z(fe),O(fe.flatMap(Xe=>Xe.questions||Xe.cards))},onMove:fe=>St(xe,fe,se),recording:Fe,startRecording:dn,stopRecording:Ee,cancelRecording:$e,recordingTime:Re,handleFileUpload:xn,handleOptionChange:(fe,Dt,Xe)=>{const wt=[...X],js=wt[se].questions||wt[se].cards||[],ko=js[xe];Dt==="isCorrect"?ko.options=ko.options.map(en=>({...en,isCorrect:en.id===fe})):ko.options=ko.options.map(en=>en.id===fe?{...en,[Dt]:Xe}:en),wt[se].questions=js,z(wt),O(wt.flatMap(en=>en.questions||en.cards))},setViewingImage:q,showSplitUI:Q,selectedQuestions:re,toggleQuestionSelection:Qn},te.id))}),u.jsxs("button",{className:"neo-button",style:{alignSelf:"center",fontSize:"0.8rem",opacity:.6},onClick:()=>{const te=[...X];te.splice(se+1,0,{noteSegment:"",questions:[]}),z(te)},children:[u.jsx(Gi,{size:14})," Insert Section Here"]})]},se)}):L.map((W,se)=>u.jsx(Z_,{question:W,index:se,totalQuestions:L.length,onUpdate:(le,te)=>ht(W.id,le,te),onRemove:()=>qt(W.id),onMove:le=>St(se,le),recording:Fe,startRecording:dn,stopRecording:Ee,cancelRecording:$e,recordingTime:Re,handleFileUpload:xn,handleOptionChange:(le,te,xe)=>Ft(W.id,le,te,xe),setViewingImage:q,showSplitUI:Q,selectedQuestions:re,toggleQuestionSelection:Qn},W.id))}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",style:{flex:1,justifyContent:"center",background:"var(--accent-soft)",color:"var(--accent-color)"},onClick:Be,children:[u.jsx(Gi,{size:18})," Add Question"]}),u.jsxs("button",{className:"neo-button neo-glow-blue",style:{flex:1,justifyContent:"center",background:"var(--accent-soft)",color:"var(--accent-color)"},onClick:Ke,children:[u.jsx(Gi,{size:18})," Add MCQ"]}),u.jsxs("button",{className:"neo-button neo-glow-blue",style:{flex:1,justifyContent:"center",background:"var(--bg-color)",color:"var(--accent-color)"},onClick:Et,children:[u.jsx(Gi,{size:18})," Add Section"]})]}),e&&L.length>1&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsxs("button",{className:`neo-button ${Q?"neo-inset":""}`,style:{flex:1,justifyContent:"center",fontSize:"0.9rem"},onClick:()=>{J(!Q),de(!1),Z(new Set)},children:[u.jsx(i9,{size:16})," ",Q?"Cancel Split":"Split Lesson"]}),l&&l.filter(W=>W.id!==(e==null?void 0:e.id)).length>0&&u.jsxs("button",{className:`neo-button ${G?"neo-inset":""}`,style:{flex:1,justifyContent:"center",fontSize:"0.9rem"},onClick:()=>{de(!G),J(!1),Z(new Set)},children:[u.jsx(K8,{size:16})," ",G?"Cancel Merge":"Merge Lesson"]})]}),Q&&u.jsxs("div",{className:"neo-inset",style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("p",{style:{fontSize:"0.9rem",opacity:.7},children:"Select questions to move to a new lesson:"}),u.jsxs("button",{className:"neo-button neo-glow-blue",style:{background:"var(--accent-color)",color:"white",border:"none",justifyContent:"center"},onClick:ei,children:["Create New Lesson with ",re.size," Selected Question(s)"]})]}),G&&u.jsxs("div",{className:"neo-inset",style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("p",{style:{fontSize:"0.9rem",opacity:.7},children:"Select lesson to merge into:"}),u.jsx(gr,{value:ye,options:l==null?void 0:l.filter(W=>W.id!==(e==null?void 0:e.id)).map(W=>{var se,le;return{label:`${W.title} (${((se=W.questions)==null?void 0:se.length)||((le=W.cards)==null?void 0:le.length)||0} questions)`,value:W.id}}),onChange:Se,placeholder:"-- Select Lesson --",displayValue:W=>{var se;return(se=l.find(le=>le.id===W))==null?void 0:se.title}}),u.jsx("button",{className:"neo-button neo-glow-blue",style:{background:"var(--accent-color)",color:"white",border:"none",justifyContent:"center"},onClick:Ar,disabled:!ye,children:"Merge Into Selected Lesson"})]})]})]}),u.jsx("div",{style:{padding:"1.5rem",borderTop:"1px solid var(--shadow-dark)",display:"flex",flexDirection:"column",gap:"1rem",background:"var(--bg-color)",zIndex:10},children:u.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e&&u.jsxs("button",{className:"neo-button neo-glow-red",style:{flex:"1 1 8.75rem",justifyContent:"center",color:"var(--error-color)",padding:"0.8rem"},onClick:()=>i(e),children:[u.jsx(fi,{size:18})," Delete Lesson"]}),u.jsx("button",{className:"neo-button",style:{flex:"1 1 6.25rem",justifyContent:"center",padding:"0.8rem"},onClick:n,children:"Cancel"}),u.jsx("button",{className:`neo-button ${ge?"neo-inset":""}`,style:{flex:"2 1 12.5rem",justifyContent:"center",background:ge?"var(--bg-color)":"var(--accent-color)",color:ge?"var(--accent-color)":"white",border:"none",padding:"0.8rem",cursor:ge?"not-allowed":"pointer",opacity:ge?.8:1},onClick:bt,disabled:ge,children:ge?u.jsxs(u.Fragment,{children:[u.jsx(za,{size:18,className:"spin",style:{marginRight:"8px"}})," Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(t9,{size:18,style:{marginRight:"8px"}})," ",e?"Save Changes":"Create Lesson"]})})]})}),u.jsx(In,{children:D&&u.jsx(ZC,{imageUrl:D,onClose:()=>q(null)})})]})})},Sh="/chethan-in-cardland/assets/avatar_guide_new-9cb767fe.png",R9="/chethan-in-cardland/assets/congratulations-565fc759.png",P9=({currentIndex:t,totalQuestions:e,masteredCount:n,totalOriginalQuestions:r,rating:i,onClose:s,user:o,lesson:a})=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[u.jsxs("div",{className:"neo-button",style:{height:"2.25rem",padding:"0 1rem",fontSize:"1rem",justifyContent:"center",minWidth:"5rem"},children:[t+1," / ",e]}),u.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 20px"},children:u.jsxs("div",{style:{width:"100%",maxWidth:"14rem",height:"1rem",background:"rgba(0,0,0,0.05)",borderRadius:"0.625rem",position:"relative",display:"flex",alignItems:"center",boxShadow:"inset 0.125rem 0.125rem 0.25rem var(--shadow-dark), inset -0.1rem -0.1rem 0.2rem var(--shadow-light)"},children:[u.jsx(Ue.div,{animate:{left:`${r>0?n/r*100:0}%`,y:i===2?[0,-15,0]:i===1?[0,-5,0]:0},transition:{left:{type:"spring",stiffness:50,damping:15},y:{duration:.4,ease:"easeOut"}},style:{position:"absolute",left:0,top:-4,zIndex:10,x:"-50%"},children:u.jsx(O8,{size:24,color:i===2?"#22c55e":"var(--accent-color)",fill:i===2?"#dcfce7":"none"})}),u.jsx("div",{style:{width:`${r>0?n/r*100:0}%`,height:"100%",background:i===2?"linear-gradient(90deg, var(--accent-color), #22c55e)":"var(--accent-color)",borderRadius:"10px",transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),u.jsx("div",{style:{position:"absolute",right:-12,top:-4,opacity:.9},children:u.jsx(lv,{size:24,color:"var(--accent-color)",fill:"var(--bg-color)"})})]})}),u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:u.jsx(Gn,{onClick:s,size:18})})]}),Yp=({audioData:t})=>{const[e,n]=R.useState(!1),[r,i]=R.useState(0),s=R.useRef(null),o=R.useRef(),a=R.useRef();s.current||(s.current=new Audio(t)),R.useEffect(()=>{const f=s.current;f.src!==t&&(f.pause(),f.src=t,f.load(),i(0),n(!1))},[t]),R.useEffect(()=>{const f=s.current,p=()=>{f.duration&&i(f.currentTime/f.duration*100),o.current=requestAnimationFrame(p)},g=()=>{n(!0),o.current=requestAnimationFrame(p)},w=()=>{n(!1),cancelAnimationFrame(o.current)},_=()=>{n(!1),i(0),cancelAnimationFrame(o.current)};return f.addEventListener("play",g),f.addEventListener("pause",w),f.addEventListener("ended",_),()=>{f.pause(),f.removeEventListener("play",g),f.removeEventListener("pause",w),f.removeEventListener("ended",_),cancelAnimationFrame(o.current)}},[]);const l=f=>{f.stopPropagation();const p=s.current;e?p.pause():p.play()},d=f=>{f.stopPropagation();const p=s.current;p.pause(),p.currentTime=0,i(0)},h=f=>{f.stopPropagation();const p=a.current.getBoundingClientRect(),g=f.clientX-p.left,w=Math.max(0,Math.min(100,g/p.width*100)),_=s.current;_.duration&&(_.currentTime=w/100*_.duration,i(w))};return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.5rem",width:"100%",maxWidth:"250px"},onClick:f=>f.stopPropagation(),children:[u.jsx("button",{className:"neo-button icon-btn",onClick:l,style:{width:"30px",height:"30px",background:"var(--accent-soft)",color:"var(--accent-color)",borderRadius:"50%",flexShrink:0},children:e?u.jsx(Y8,{size:12,fill:"currentColor"}):u.jsx(kf,{size:12,fill:"currentColor"})}),u.jsx("button",{className:"neo-button icon-btn",onClick:d,style:{width:"30px",height:"30px",borderRadius:"50%",flexShrink:0},children:u.jsx(Ug,{size:10,fill:"currentColor"})}),u.jsx("div",{ref:a,className:"neo-inset",onClick:h,style:{flex:1,height:"6px",borderRadius:"3px",overflow:"hidden",position:"relative",cursor:"pointer"},children:u.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${r}%`,background:"var(--accent-color)",transition:"width 0.1s linear"}})})]})},D9=t=>t?t.split(`
`).map((e,n)=>{const i=e.split(/(\*\*[^*]+\*\*)/g).map((s,o)=>s.startsWith("**")&&s.endsWith("**")?u.jsx("strong",{children:s.slice(2,-2)},o):s);return u.jsxs("span",{children:[i,n<t.split(`
`).length-1&&u.jsx("br",{})]},n)}):null,N9=({noteText:t,onStart:e})=>t?u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},"data-testid":"section-note-card",children:u.jsxs("div",{className:"neo-flat",style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsx("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:u.jsx("div",{style:{fontSize:"1.2rem",lineHeight:"1.6",color:"var(--text-color)",textAlign:"left"},children:D9(t)})})}),u.jsx("div",{style:{width:"100%",marginTop:"auto",display:"flex",justifyContent:"center",paddingTop:"1rem"},children:u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:e,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"var(--accent-color)",color:"white",border:"none",borderRadius:"1rem"},children:[u.jsx("span",{children:"Start Questions"}),u.jsx(FC,{size:20})]})})]})}):null,j9=({currentQuestion:t,isFlipped:e,setIsFlipped:n,setViewingImage:r,onRateMCQ:i,feedback:s})=>{var d;const[o,a]=R.useState(!1);return R.useEffect(()=>{t&&t.isFirstInSection&&a(!1)},[t==null?void 0:t.id,t==null?void 0:t.isFirstInSection]),t?t.isFirstInSection&&t.sectionNoteSegment&&!o?u.jsx(N9,{noteText:t.sectionNoteSegment,onStart:()=>a(!0)}):t.type==="mcq"?u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},"data-testid":"question-card-mcq",children:u.jsxs("div",{className:"neo-flat",style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsxs("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:[t.question.image&&u.jsx("img",{src:t.question.image,style:{maxWidth:"100%",maxHeight:"12rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1.5rem",cursor:"pointer"},alt:"Q",onClick:()=>r(t.question.image)}),u.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:"800",margin:0,textAlign:"left",lineHeight:"1.4"},children:t.question.text}),t.question.audio&&u.jsx("div",{style:{marginTop:"1rem"},children:u.jsx(Yp,{audioData:t.question.audio})})]})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.75rem",width:"100%",marginTop:"auto",paddingTop:"1rem"},children:(d=t.options)==null?void 0:d.map((h,f)=>{const p=s&&h.isCorrect;return u.jsx("button",{disabled:!!s,className:"neo-button",onClick:()=>i(h),style:{padding:"1rem",justifyContent:"flex-start",textAlign:"left",minHeight:"3.5rem",background:"var(--bg-color)",borderColor:p?"#22c55e":"var(--border-color)",boxShadow:p?"0 0 15px rgba(34, 197, 94, 0.4)":void 0,color:p?"#16a34a":void 0,opacity:s&&!p?.5:1,fontSize:"0.95rem",lineHeight:"1.3",fontWeight:p?"bold":"500"},children:h.text},h.id||f)})})]})}):u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},"data-testid":"question-card-flashcard",children:u.jsx("div",{style:{perspective:"62.5rem",flex:1,minHeight:0,cursor:"pointer"},onClick:()=>{e&&n(!1)},children:u.jsxs(Ue.div,{style:{width:"100%",height:"100%",position:"relative",transformStyle:"preserve-3d"},animate:{rotateY:e?180:0},transition:{type:"spring",stiffness:260,damping:20},children:[u.jsxs("div",{className:"neo-flat",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",display:"flex",flexDirection:"column",padding:"1.5rem",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsxs("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:[t&&t.question.image&&u.jsx("img",{src:t.question.image,style:{maxWidth:"100%",maxHeight:"14rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1.5rem",cursor:"pointer"},alt:"Q",onClick:h=>{h.stopPropagation(),r(t.question.image)}}),u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"800",textAlign:"left",lineHeight:"1.4"},children:t?t.question.text:"No more questions"}),t&&t.question.audio&&u.jsx("div",{style:{marginTop:"1.5rem"},onClick:h=>h.stopPropagation(),children:u.jsx(Yp,{audioData:t.question.audio})})]})}),u.jsx("div",{style:{textAlign:"center",opacity:.3,fontSize:"0.75rem",marginTop:"1rem",fontWeight:"bold"},children:'TAP "SHOW ANSWER" AT THE BOTTOM'})]}),u.jsxs("div",{className:"neo-flat",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",display:"flex",flexDirection:"column",padding:"1.5rem",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsxs("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:[t&&t.answer.image&&u.jsx("img",{src:t.answer.image,style:{maxWidth:"100%",maxHeight:"14rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1.5rem",cursor:"pointer"},alt:"A",onClick:h=>{h.stopPropagation(),r(t.answer.image)}}),u.jsx("h2",{style:{fontSize:"1.6rem",color:"var(--accent-color)",fontWeight:"800",textAlign:"left",lineHeight:"1.4"},children:t?t.answer.text:""}),t&&t.answer.audio&&u.jsx("div",{style:{marginTop:"1.5rem"},onClick:h=>h.stopPropagation(),children:u.jsx(Yp,{audioData:t.answer.audio})})]})}),u.jsx("div",{style:{textAlign:"center",opacity:.3,fontSize:"0.75rem",marginTop:"1rem",fontWeight:"bold"},children:"RATE YOURSELF AT THE BOTTOM"})]})]})})}):null};let Xp=null;const Co=()=>(Xp||(Xp=new(window.AudioContext||window.webkitAudioContext)),Xp),Za=()=>localStorage.getItem("soundsEnabled")!=="false",Ba=(t,e,n,r,i=.1)=>{const s=Co(),o=s.createOscillator(),a=s.createGain();o.type=t,o.frequency.setValueAtTime(e,n),o.connect(a),a.connect(s.destination),a.gain.setValueAtTime(0,n),a.gain.linearRampToValueAtTime(i,n+.05),a.gain.exponentialRampToValueAtTime(.001,n+r),o.start(n),o.stop(n+r)},L9=()=>{if(!Za())return;const t=Co();t.state==="suspended"&&t.resume();const e=t.currentTime;[523.25,659.25,783.99,1046.5].forEach((r,i)=>{Ba("sine",r,e+i*.1,.6,.1)})},M9=()=>{if(!Za())return;const t=Co();t.state==="suspended"&&t.resume();const e=t.currentTime,n=.5,r=t.sampleRate*n,i=t.createBuffer(1,r,t.sampleRate),s=i.getChannelData(0);for(let d=0;d<r;d++)s[d]=Math.random()*2-1;const o=t.createBufferSource();o.buffer=i;const a=t.createBiquadFilter();a.type="lowpass",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(4e3,e+n);const l=t.createGain();l.gain.setValueAtTime(.05,e),l.gain.linearRampToValueAtTime(.1,e+n/2),l.gain.linearRampToValueAtTime(0,e+n),o.connect(a),a.connect(l),l.connect(t.destination),o.start(e)},V9=()=>{if(!Za())return;const t=Co();t.state==="suspended"&&t.resume();const e=t.currentTime;Ba("sine",1975.53,e,.8,.15),Ba("sine",3951.07,e,.4,.05)},O9=()=>{if(!Za())return;const t=Co();t.state==="suspended"&&t.resume();const e=t.currentTime;[{freq:392,time:0,dur:.15},{freq:523.25,time:.15,dur:.15},{freq:659.25,time:.3,dur:.15},{freq:783.99,time:.45,dur:.4}].forEach(({freq:r,time:i,dur:s})=>{const o=t.createOscillator(),a=t.createGain(),l=t.createBiquadFilter();o.type="sawtooth",o.frequency.value=r,l.type="lowpass",l.Q.value=2,o.connect(l),l.connect(a),a.connect(t.destination);const d=e+i,h=d+s;l.frequency.setValueAtTime(500,d),l.frequency.linearRampToValueAtTime(3e3,d+.05),l.frequency.exponentialRampToValueAtTime(500,h),a.gain.setValueAtTime(0,d),a.gain.linearRampToValueAtTime(.2,d+.02),a.gain.linearRampToValueAtTime(.15,d+.05),a.gain.exponentialRampToValueAtTime(.001,h),o.start(d),o.stop(h+.1)})},F9=()=>{if(!Za())return;const t=Co();t.state==="suspended"&&t.resume();const e=t.currentTime;[{freq:523.25,delay:0,vol:.1},{freq:659.25,delay:.05,vol:.1},{freq:783.99,delay:.1,vol:.1},{freq:1046.5,delay:.15,vol:.08}].forEach(({freq:r,delay:i,vol:s})=>{Ba("sine",r,e+i,1,s)})},U9=()=>{if(!Za())return;const t=Co();t.state==="suspended"&&t.resume();const e=t.currentTime;Ba("triangle",440,e,.3,.04),Ba("sine",554.37,e,.3,.04)},z9=({isFlipped:t,currentQuestion:e,isRecording:n,recordedAudio:r,isPlayingRecorded:i,startRecording:s,stopRecording:o,deleteRecording:a,toggleRecordedPlayback:l,setIsFlipped:d,handleRating:h,feedback:f})=>!e||e.type==="mcq"?null:t?f?null:u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",minHeight:"5rem",justifyContent:"center"},children:u.jsx(In,{mode:"wait",children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%"},children:[u.jsxs("div",{className:"neo-flat",style:{padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",borderRadius:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"0.6rem",height:"0.6rem",borderRadius:"50%",background:"var(--accent-color)",opacity:.6}}),u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.7},children:"SELECT MATCHING ANSWER"})]}),u.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:r&&u.jsx("button",{className:"neo-button icon-btn",onClick:l,style:{color:"var(--accent-color)",width:"2.25rem",height:"2.25rem"},children:i?u.jsx(Ug,{size:16,fill:"currentColor"}):u.jsx(kf,{size:16,fill:"currentColor"})})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",width:"100%",justifyContent:"center"},children:[u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#fee2e2",color:"#dc2626",border:"1px solid #fecaca",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(-1)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Wrong"})}),u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#f3f4f6",color:"#4b5563",border:"1px solid #e5e7eb",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(0)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Unsure"})}),u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#e0f2fe",color:"#0284c7",border:"1px solid #bae6fd",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(1)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Partly"})}),u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#dcfce7",color:"#16a34a",border:"1px solid #bbf7d0",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(2)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"By heart"})})]})]})})}):u.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{className:"neo-flat",style:{padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",borderRadius:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"0.6rem",height:"0.6rem",borderRadius:"50%",background:n?"#ff4444":"#ccc",boxShadow:n?"0 0 0.5rem #ff4444":"none",animation:n?"pulse 1.5s infinite":"none"}}),u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.7},children:n?"RECORDING ANSWER...":r?"ANSWER RECORDED":"RECORD YOUR ANSWER"})]}),u.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:!n&&!r?u.jsx("button",{className:"neo-button icon-btn",onClick:s,style:{color:"var(--accent-color)",width:"2.25rem",height:"2.25rem"},children:u.jsx(Th,{size:18})}):n?u.jsx("button",{className:"neo-button icon-btn",onClick:o,style:{color:"#ff4444",width:"2.25rem",height:"2.25rem"},children:u.jsx(Ug,{size:18,fill:"currentColor"})}):u.jsx(u.Fragment,{children:u.jsx("button",{className:"neo-button icon-btn",onClick:a,style:{color:"#ff4444",width:"2.25rem",height:"2.25rem"},children:u.jsx(fi,{size:18})})})})]}),u.jsx("button",{className:"neo-button neo-glow-blue",style:{width:"100%",justifyContent:"center",padding:"1rem",fontSize:"1.1rem",background:"var(--accent-color)",color:"white",minHeight:"3.75rem",borderRadius:"1rem"},onClick:()=>{M9(),d(!0),r&&setTimeout(()=>l(),300)},children:"Show Answer"})]});var uv={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;try{var M=new OffscreenCanvas(1,1),D=M.getContext("2d");D.fillRect(0,0,1,1);var q=M.transferToImageBitmap();D.createPattern(q,"no-repeat")}catch{return!1}return!0}();function l(){}function d(M){var D=n.exports.Promise,q=D!==void 0?D:e.Promise;return typeof q=="function"?new q(M):(M(l,l),null)}var h=function(M,D){return{transform:function(q){if(M)return q;if(D.has(q))return D.get(q);var Q=new OffscreenCanvas(q.width,q.height),J=Q.getContext("2d");return J.drawImage(q,0,0),D.set(q,Q),Q},clear:function(){D.clear()}}}(a,new Map),f=function(){var M=Math.floor(16.666666666666668),D,q,Q={},J=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(D=function(re){var Z=Math.random();return Q[Z]=requestAnimationFrame(function G(de){J===de||J+M-1<de?(J=de,delete Q[Z],re()):Q[Z]=requestAnimationFrame(G)}),Z},q=function(re){Q[re]&&cancelAnimationFrame(Q[re])}):(D=function(re){return setTimeout(re,M)},q=function(re){return clearTimeout(re)}),{frame:D,cancel:q}}(),p=function(){var M,D,q={};function Q(J){function re(Z,G){J.postMessage({options:Z||{},callback:G})}J.init=function(G){var de=G.transferControlToOffscreen();J.postMessage({canvas:de},[de])},J.fire=function(G,de,ye){if(D)return re(G,null),D;var Se=Math.random().toString(36).slice(2);return D=d(function(ge){function Ae(F){F.data.callback===Se&&(delete q[Se],J.removeEventListener("message",Ae),D=null,h.clear(),ye(),ge())}J.addEventListener("message",Ae),re(G,Se),q[Se]=Ae.bind(null,{data:{callback:Se}})}),D},J.reset=function(){J.postMessage({reset:!0});for(var G in q)q[G](),delete q[G]}}return function(){if(M)return M;if(!r&&s){var J=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{M=new Worker(URL.createObjectURL(new Blob([J])))}catch(re){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",re),null}Q(M)}return M}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function w(M,D){return D?D(M):M}function _(M){return M!=null}function P(M,D,q){return w(M&&_(M[D])?M[D]:g[D],q)}function E(M){return M<0?0:Math.floor(M)}function v(M,D){return Math.floor(Math.random()*(D-M))+M}function x(M){return parseInt(M,16)}function j(M){return M.map(L)}function L(M){var D=String(M).replace(/[^0-9a-f]/gi,"");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:x(D.substring(0,2)),g:x(D.substring(2,4)),b:x(D.substring(4,6))}}function O(M){var D=P(M,"origin",Object);return D.x=P(D,"x",Number),D.y=P(D,"y",Number),D}function S(M){M.width=document.documentElement.clientWidth,M.height=document.documentElement.clientHeight}function T(M){var D=M.getBoundingClientRect();M.width=D.width,M.height=D.height}function C(M){var D=document.createElement("canvas");return D.style.position="fixed",D.style.top="0px",D.style.left="0px",D.style.pointerEvents="none",D.style.zIndex=M,D}function A(M,D,q,Q,J,re,Z,G,de){M.save(),M.translate(D,q),M.rotate(re),M.scale(Q,J),M.arc(0,0,1,Z,G,de),M.restore()}function k(M){var D=M.angle*(Math.PI/180),q=M.spread*(Math.PI/180);return{x:M.x,y:M.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:M.startVelocity*.5+Math.random()*M.startVelocity,angle2D:-D+(.5*q-Math.random()*q),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:M.color,shape:M.shape,tick:0,totalTicks:M.ticks,decay:M.decay,drift:M.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:M.gravity*3,ovalScalar:.6,scalar:M.scalar,flat:M.flat}}function N(M,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var q=D.tick++/D.totalTicks,Q=D.x+D.random*D.tiltCos,J=D.y+D.random*D.tiltSin,re=D.wobbleX+D.random*D.tiltCos,Z=D.wobbleY+D.random*D.tiltSin;if(M.fillStyle="rgba("+D.color.r+", "+D.color.g+", "+D.color.b+", "+(1-q)+")",M.beginPath(),o&&D.shape.type==="path"&&typeof D.shape.path=="string"&&Array.isArray(D.shape.matrix))M.fill(X(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(re-Q)*.1,Math.abs(Z-J)*.1,Math.PI/10*D.wobble));else if(D.shape.type==="bitmap"){var G=Math.PI/10*D.wobble,de=Math.abs(re-Q)*.1,ye=Math.abs(Z-J)*.1,Se=D.shape.bitmap.width*D.scalar,ge=D.shape.bitmap.height*D.scalar,Ae=new DOMMatrix([Math.cos(G)*de,Math.sin(G)*de,-Math.sin(G)*ye,Math.cos(G)*ye,D.x,D.y]);Ae.multiplySelf(new DOMMatrix(D.shape.matrix));var F=M.createPattern(h.transform(D.shape.bitmap),"no-repeat");F.setTransform(Ae),M.globalAlpha=1-q,M.fillStyle=F,M.fillRect(D.x-Se/2,D.y-ge/2,Se,ge),M.globalAlpha=1}else if(D.shape==="circle")M.ellipse?M.ellipse(D.x,D.y,Math.abs(re-Q)*D.ovalScalar,Math.abs(Z-J)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):A(M,D.x,D.y,Math.abs(re-Q)*D.ovalScalar,Math.abs(Z-J)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape==="star")for(var ee=Math.PI/2*3,Fe=4*D.scalar,Ge=8*D.scalar,Re=D.x,qe=D.y,ot=5,De=Math.PI/ot;ot--;)Re=D.x+Math.cos(ee)*Ge,qe=D.y+Math.sin(ee)*Ge,M.lineTo(Re,qe),ee+=De,Re=D.x+Math.cos(ee)*Fe,qe=D.y+Math.sin(ee)*Fe,M.lineTo(Re,qe),ee+=De;else M.moveTo(Math.floor(D.x),Math.floor(D.y)),M.lineTo(Math.floor(D.wobbleX),Math.floor(J)),M.lineTo(Math.floor(re),Math.floor(Z)),M.lineTo(Math.floor(Q),Math.floor(D.wobbleY));return M.closePath(),M.fill(),D.tick<D.totalTicks}function I(M,D,q,Q,J){var re=D.slice(),Z=M.getContext("2d"),G,de,ye=d(function(Se){function ge(){G=de=null,Z.clearRect(0,0,Q.width,Q.height),h.clear(),J(),Se()}function Ae(){r&&!(Q.width===i.width&&Q.height===i.height)&&(Q.width=M.width=i.width,Q.height=M.height=i.height),!Q.width&&!Q.height&&(q(M),Q.width=M.width,Q.height=M.height),Z.clearRect(0,0,Q.width,Q.height),re=re.filter(function(F){return N(Z,F)}),re.length?G=f.frame(Ae):ge()}G=f.frame(Ae),de=ge});return{addFettis:function(Se){return re=re.concat(Se),ye},canvas:M,promise:ye,reset:function(){G&&f.cancel(G),de&&de()}}}function Y(M,D){var q=!M,Q=!!P(D||{},"resize"),J=!1,re=P(D,"disableForReducedMotion",Boolean),Z=s&&!!P(D||{},"useWorker"),G=Z?p():null,de=q?S:T,ye=M&&G?!!M.__confetti_initialized:!1,Se=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ge;function Ae(ee,Fe,Ge){for(var Re=P(ee,"particleCount",E),qe=P(ee,"angle",Number),ot=P(ee,"spread",Number),De=P(ee,"startVelocity",Number),we=P(ee,"decay",Number),Be=P(ee,"gravity",Number),Ke=P(ee,"drift",Number),Et=P(ee,"colors",j),Ot=P(ee,"ticks",Number),St=P(ee,"shapes"),Ft=P(ee,"scalar"),qt=!!P(ee,"flat"),ht=O(ee),xn=Re,dn=[],Ee=M.width*ht.x,$e=M.height*ht.y;xn--;)dn.push(k({x:Ee,y:$e,angle:qe,spread:ot,startVelocity:De,color:Et[xn%Et.length],shape:St[v(0,St.length)],ticks:Ot,decay:we,gravity:Be,drift:Ke,scalar:Ft,flat:qt}));return ge?ge.addFettis(dn):(ge=I(M,dn,de,Fe,Ge),ge.promise)}function F(ee){var Fe=re||P(ee,"disableForReducedMotion",Boolean),Ge=P(ee,"zIndex",Number);if(Fe&&Se)return d(function(De){De()});q&&ge?M=ge.canvas:q&&!M&&(M=C(Ge),document.body.appendChild(M)),Q&&!ye&&de(M);var Re={width:M.width,height:M.height};G&&!ye&&G.init(M),ye=!0,G&&(M.__confetti_initialized=!0);function qe(){if(G){var De={getBoundingClientRect:function(){if(!q)return M.getBoundingClientRect()}};de(De),G.postMessage({resize:{width:De.width,height:De.height}});return}Re.width=Re.height=null}function ot(){ge=null,Q&&(J=!1,e.removeEventListener("resize",qe)),q&&M&&(document.body.contains(M)&&document.body.removeChild(M),M=null,ye=!1)}return Q&&!J&&(J=!0,e.addEventListener("resize",qe,!1)),G?G.fire(ee,Re,ot):Ae(ee,Re,ot)}return F.reset=function(){G&&G.reset(),ge&&ge.reset()},F}var me;function oe(){return me||(me=Y(null,{useWorker:!0,resize:!0})),me}function X(M,D,q,Q,J,re,Z){var G=new Path2D(M),de=new Path2D;de.addPath(G,new DOMMatrix(D));var ye=new Path2D;return ye.addPath(de,new DOMMatrix([Math.cos(Z)*J,Math.sin(Z)*J,-Math.sin(Z)*re,Math.cos(Z)*re,q,Q])),ye}function z(M){if(!o)throw new Error("path confetti are not supported in this browser");var D,q;typeof M=="string"?D=M:(D=M.path,q=M.matrix);var Q=new Path2D(D),J=document.createElement("canvas"),re=J.getContext("2d");if(!q){for(var Z=1e3,G=Z,de=Z,ye=0,Se=0,ge,Ae,F=0;F<Z;F+=2)for(var ee=0;ee<Z;ee+=2)re.isPointInPath(Q,F,ee,"nonzero")&&(G=Math.min(G,F),de=Math.min(de,ee),ye=Math.max(ye,F),Se=Math.max(Se,ee));ge=ye-G,Ae=Se-de;var Fe=10,Ge=Math.min(Fe/ge,Fe/Ae);q=[Ge,0,0,Ge,-Math.round(ge/2+G)*Ge,-Math.round(Ae/2+de)*Ge]}return{type:"path",path:D,matrix:q}}function H(M){var D,q=1,Q="#000000",J='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof M=="string"?D=M:(D=M.text,q="scalar"in M?M.scalar:q,J="fontFamily"in M?M.fontFamily:J,Q="color"in M?M.color:Q);var re=10*q,Z=""+re+"px "+J,G=new OffscreenCanvas(re,re),de=G.getContext("2d");de.font=Z;var ye=de.measureText(D),Se=Math.ceil(ye.actualBoundingBoxRight+ye.actualBoundingBoxLeft),ge=Math.ceil(ye.actualBoundingBoxAscent+ye.actualBoundingBoxDescent),Ae=2,F=ye.actualBoundingBoxLeft+Ae,ee=ye.actualBoundingBoxAscent+Ae;Se+=Ae+Ae,ge+=Ae+Ae,G=new OffscreenCanvas(Se,ge),de=G.getContext("2d"),de.font=Z,de.fillStyle=Q,de.fillText(D,F,ee);var Fe=1/q;return{type:"bitmap",bitmap:G.transferToImageBitmap(),matrix:[Fe,0,0,Fe,-Se*Fe/2,-ge*Fe/2]}}n.exports=function(){return oe().apply(this,arguments)},n.exports.reset=function(){oe().reset()},n.exports.create=Y,n.exports.shapeFromPath=z,n.exports.shapeFromText=H})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),uv,!1);const B9=uv.exports;uv.exports.create;const $9=["Great job!","Very good!","Super!","You're on fire!","Excellent work!","Spot on!","You've got this by heart!","Brilliant!","Fantastic!","Wonderful progress!","You're doing amazing!","Perfectly done!","That's the spirit!","Keep it up, champion!","You're a natural!","Masterful!","Impressive memory!","You nailed it!","Outstanding!","Way to go!","You're crushing this!","Incredible focus!","Gold star for you!","You're making this look easy!","Top notch!","Simply superb!","Bravo!","You're unstoppable!","Pure genius!","Love that confidence!","Right on the money!","You're a star student!","Marvelous!","High five!","You're getting so good at this!","That's exactly right!","You're a master in the making!","Spectacular!","So proud of your progress!","You're really shining today!","Unbeatable!","You've mastered this one!","Clear and confident - well done!","Your hard work is paying off!","Solid effort, perfect result!","Keep that momentum going!","You're built for this!","A-plus performance!","You're a knowledge wizard!","Victory is yours!"],W9=["Give it another careful read; well revisit this question.","Take your time and read it again  Ill ask it once more.","No worries! Let's try this one again in a bit.","Almost there! A quick review will help it stick.","Let's keep this one in the loop for a little longer.","Practice makes perfect! We'll come back to this.","Don't lose heart, let's give it another look together.","Every mistake is a step toward mastery. Reviewing now!","Slow and steady wins the race. Read it once more.","I'll ask this again soon to help you remember.","It's okay! Even the best need a second look sometimes.","Let's refine this one. Read carefully and we'll retry.","A little more focus here will do wonders.","Let's polish this answer together. See you again soon!","Deep breaths! Read it again, and we'll revisit.","Learning takes time. Let's keep this one active.","You're doing great, just need to master this specific one.","Give it one more glance. I'll be back with this question.","Let's solidify this. A quick revisit is coming up.","Don't rush! Read it again to let it sink in.","We'll get this one right next time, I promise!","Keep your chin up! Let's re-study this card.","It's just a hurdle, not a wall. Re-reading helps!","Let's refresh your memory on this one shortly.","Stay positive! We'll tackle this again very soon.","A quick recap, and you'll have it in no time.","Let's keep this card in the 'must-know' pile for now.","Reviewing is the key to success. Let's do it again.","One more read-through will make all the difference.","Persistence pays off! We'll cycle back to this.","It's trial and error. Let's try one more trial.","Let's give this one a second chance to shine.","Focus on the details this time. Re-visiting shortly!","You're learning! Let's re-confirm this one later.","A bit more practice is all you need here.","I believe in you! Let's re-read and try again.","Let's not let this one slip away. Re-asking soon!","Each review makes your brain stronger. Ready for round 2?","Patience is a virtue in learning. Re-reading now.","Let's keep the conversation going on this card.","Small steps lead to big jumps. Let's re-step this one.","Almost caught it! Let's throw the question again later.","It's on the tip of your tongue! Let's review to be sure.","Constructive repetition! We'll be back for this.","Let's strengthen this connection in your memory.","Honesty is the first step to learning. Re-trying soon!","A moment of focus now saves a lot of time later.","Let's bridge the gap on this one. Re-reading...","Your friend is here to help! Let's look at this again.","Final check is coming soon. Give it a good read now!"],q9=t=>{const e=t==="mastered"?$9:W9;return e[Math.floor(Math.random()*e.length)]},H9=({lesson:t,user:e,onUpdate:n,onClose:r,showAlert:i,isPreviewMode:s=!1,onLoginRequired:o,previewProgress:a=null,onReviewStart:l})=>{const d=t.questions||t.cards||[],h=d.some(we=>we.lastRating!==void 0)||!1,[f,p]=R.useState(h),[g,w]=R.useState((a==null?void 0:a.currentIndex)||0),[_,P]=R.useState(!1),[E,v]=R.useState(0),[x,j]=R.useState((a==null?void 0:a.sessionRatings)||[]),[L,O]=R.useState(h?[]:d),[S,T]=R.useState(null),[C,A]=R.useState(null),[k,N]=R.useState(null),[I,Y]=R.useState(0),[me,oe]=R.useState({}),[X,z]=R.useState(h?0:d.length),[H,M]=R.useState(0),[D,q]=R.useState(!1),[Q,J]=R.useState(null),[re,Z]=R.useState(!1),G=R.useRef(null),de=R.useRef(null),ye=R.useRef([]),Se=L[g];R.useEffect(()=>{x.length>0&&l&&l()},[x,l]),R.useEffect(()=>()=>{G.current&&(G.current.pause(),G.current=null)},[]),R.useEffect(()=>{!f&&!h&&L.length>0&&L9()},[f,h,L.length]);const ge=R.useCallback(we=>{const Be=[...t.questions||t.cards||[]];Be.sort((Et,Ot)=>{const St=Et.lastRating!==void 0?Et.lastRating:-2,Ft=Ot.lastRating!==void 0?Ot.lastRating:-2;return St-Ft});let Ke=[];we==="all"?Ke=Be:we==="difficult"&&(Ke=Be.filter(Et=>Et.lastRating!==void 0&&Et.lastRating<2)),O(Ke),z(Ke.length),p(!1),w(0),j([]),T(null),Y(0),oe({}),N(null)},[t.questions,t.cards]),Ae=we=>{const Be=[1,3,7,30];return we>=Be.length-1?30:Be[we+1]},F=async()=>{const Be=E===2;N(null);const Ke=Be?I+1:I;if(Be&&Y(Ke),Ke===X){const Ft=L.slice(0,X).map(W=>{const se=W.id||W.question.text;return me[se]??0}).reduce((W,se)=>W+se,0),qt=X*2,ht=X>0?(Ft/X).toFixed(1):0,xn=Ft===qt,dn=t.questions||t.cards||[],Ee=dn.filter(W=>{const se=W.id||W.question.text,le=me[se];return le!==void 0&&le<2});if(T({avg:ht,totalMarks:Ft,maxPossibleMarks:qt,fullMarks:xn,lowRatedQuestions:Ee}),O9(),xn&&B9({particleCount:200,spread:160,origin:{y:.6},colors:["#FFD700","#FF4500","#00FF7F","#00BFFF","#FF1493"],zIndex:2001}),t.id==="demo-lesson"||s||X<dn.length)return;const $e=dn.map(W=>{const se=W.id||W.question.text,le=me[se];return le!==void 0?{...W,lastRating:le}:W}),bt=t.reviewStage||-1;let ei=new Date,Ar=bt;if(ht>=1.5){Ar=bt+1;const W=Ae(Ar);ei.setDate(ei.getDate()+W)}else Ar=-1;const Qn={...t,questions:$e,lastMarks:Ft,questionCountAtLastReview:X,lastReviewed:new Date().toLocaleDateString(),nextReview:ei.toISOString(),reviewStage:Ar};n(Qn)}else P(!1),v(0),qe(),setTimeout(()=>{w(g+1)},100)},ee=we=>{O(we),z(we.length),w(0),P(!1),v(0),j([]),T(null),Y(0),oe({}),N(null),qe()},Fe=(we,Be=null)=>{const Ke=we===2;Ke?F9():we===1?U9():V9(),v(we);const Ot=Se.id||Se.question.text;me[Ot]===void 0&&oe(ht=>({...ht,[Ot]:we})),Ke||O(ht=>[...ht,Se]);const St=Be||q9(Ke?"mastered":"retry");N({message:St,type:Ke?"success":"retry"});const Ft=t.isPublic||t.id==="demo-lesson",qt=t.ownedByMe;if(Ft&&!qt){const ht=g+1;if(ht>=10){e?n&&i({type:"confirm",message:"You've reached the preview limit. Add this lesson to 'My Lessons' to continue?",onConfirm:()=>{r()}}):o&&o({lesson:t,currentIndex:ht,sessionRatings:[...x,we]});return}}M(ht=>ht+1)},Ge=async()=>{try{const we=await navigator.mediaDevices.getUserMedia({audio:!0}),Be=new MediaRecorder(we);de.current=Be,ye.current=[],Be.ondataavailable=Ke=>{Ke.data.size>0&&ye.current.push(Ke.data)},Be.onstop=()=>{const Ke=new Blob(ye.current,{type:"audio/webm"}),Et=URL.createObjectURL(Ke);J(Et),G.current=new Audio(Et),G.current.onended=()=>Z(!1),we.getTracks().forEach(Ot=>Ot.stop())},Be.start(),q(!0)}catch{i("Microphone access denied or not available.")}},Re=()=>{de.current&&D&&(de.current.stop(),q(!1))},qe=()=>{Q&&(G.current&&(G.current.pause(),G.current=null),URL.revokeObjectURL(Q),J(null),Z(!1))},ot=we=>{we&&we.stopPropagation(),G.current&&(re?(G.current.pause(),Z(!1)):(G.current.play(),Z(!0)))},De=t.questions||t.cards||[];return{showModeSelection:f,currentIndex:g,currentQuestion:Se,isFlipped:_,rating:E,sessionResult:S,viewingImage:C,feedback:k,masteredCount:I,totalOriginalQuestions:X,studyQuestions:L,handleStartReview:ge,handleNextSession:F,restartSession:ee,handleRating:Fe,setIsFlipped:P,setViewingImage:A,isRecording:D,recordedAudio:Q,isPlayingRecorded:re,startRecording:Ge,stopRecording:Re,deleteRecording:qe,toggleRecordedPlayback:ot,difficultQuestionsCount:De.filter(we=>we.lastRating!==void 0&&we.lastRating<2).length}},G9=({lesson:t,user:e,onClose:n,onEdit:r,onUpdate:i,showAlert:s,userCoins:o,onDeductCoins:a,isPreviewMode:l=!1,onLoginRequired:d,previewProgress:h=null,onReviewStart:f,displayName:p})=>{var q;const{showModeSelection:g,currentIndex:w,currentQuestion:_,isFlipped:P,rating:E,sessionResult:v,viewingImage:x,feedback:j,masteredCount:L,totalOriginalQuestions:O,studyQuestions:S,difficultQuestionsCount:T,handleStartReview:C,handleNextSession:A,restartSession:k,handleRating:N,setIsFlipped:I,setViewingImage:Y,isRecording:me,recordedAudio:oe,isPlayingRecorded:X,startRecording:z,stopRecording:H,deleteRecording:M,toggleRecordedPlayback:D}=H9({lesson:t,user:e,onUpdate:i,onClose:n,showAlert:s,isPreviewMode:l,onLoginRequired:d,previewProgress:h,onReviewStart:f});return t.id,g?u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:u.jsx(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(Ue.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},style:{background:"var(--bg-color)",width:"100%",maxWidth:"400px",borderRadius:"24px",padding:"1.5rem",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)",position:"relative"},children:[u.jsx(Gn,{onClose:n,theme:"light"}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[u.jsx("div",{style:{width:"4rem",height:"4rem",background:"var(--accent-color)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"white"},children:u.jsx(_h,{size:32})}),u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"How to Review?"}),u.jsx("p",{style:{opacity:.7},children:"Choose your focused session type"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("button",{className:"neo-button",onClick:()=>C("all"),style:{padding:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"2px solid var(--border-color)",justifyContent:"flex-start"},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",overflow:"hidden",flexShrink:0},children:u.jsx("img",{src:Sh,alt:"Guide",style:{width:"100%",height:"100%",objectFit:"cover"}})}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Review All Questions"}),u.jsxs("div",{style:{fontSize:"0.85rem",opacity:.6},children:["Go through entire lesson (",(t.questions||t.cards||[]).length," questions)"]})]})]}),u.jsxs("button",{className:"neo-button",disabled:T===0,onClick:()=>C("difficult"),style:{padding:"1rem",display:"flex",alignItems:"center",gap:"1rem",border:"2px solid var(--border-color)",justifyContent:"flex-start",opacity:T===0?.5:1},children:[u.jsx("div",{style:{padding:"0.5rem",background:"#fee2e2",borderRadius:"12px",color:"#dc2626"},children:u.jsx(av,{size:24})}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Focus on Difficult"}),u.jsxs("div",{style:{fontSize:"0.85rem",opacity:.6},children:["Questions you missed previously (",T," questions)"]})]})]})]})]})})}):(!S||S.length===0)&&!v?u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:u.jsxs(Ue.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"400px",padding:"2.5rem",display:"flex",flexDirection:"column",gap:"2rem",textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[u.jsx("div",{className:"neo-inset",style:{padding:"20px",borderRadius:"50%",color:"#94a3b8"},children:u.jsx(_h,{size:48})}),u.jsx("h2",{style:{fontSize:"1.5rem"},children:"No Questions Found"}),u.jsx("p",{style:{opacity:.6},children:"This lesson appears to be empty. Would you like to add some questions?"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",style:{justifyContent:"center",padding:"1rem"},onClick:r,children:[u.jsx(cv,{size:18,style:{marginRight:"8px"}})," Add Questions Now"]}),u.jsx("button",{className:"neo-button",style:{justifyContent:"center",opacity:.6},onClick:n,children:"Close"})]})]},"empty-lesson")}):v?u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:u.jsxs(Ue.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"420px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsx("h2",{style:{fontSize:"1.8rem"},children:"Study Summary"}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.5rem",borderRadius:"24px"},children:[u.jsx("div",{style:{fontSize:"0.9rem",opacity:.6,marginBottom:"0.5rem",fontWeight:"bold"},children:"SESSION MARKS"}),u.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",color:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[v.totalMarks," ",u.jsxs("span",{style:{fontSize:"1.5rem",opacity:.5},children:["/ ",v.maxPossibleMarks]})]})]}),v.fullMarks?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",width:"100%"},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ue.div,{initial:{scale:0},animate:{scale:[0,1.2,1],rotate:[0,-10,10,0]},transition:{duration:.8,ease:"backOut"},children:u.jsx(lv,{size:64,color:"var(--accent-color)"})}),[...Array(8)].map((Q,J)=>u.jsx(Ue.div,{initial:{opacity:0,x:0,y:0,scale:0},animate:{opacity:[0,1,0],x:(Math.random()-.5)*100,y:(Math.random()-.5)*100-50,scale:[0,1,0]},transition:{duration:1.5,delay:.5+Math.random()*.5,repeat:1/0,repeatDelay:1},style:{position:"absolute",top:"50%",left:"50%",zIndex:0,pointerEvents:"none"},children:u.jsx(qC,{size:20,color:["#FFD700","#FF4500","#00FF7F"][Math.floor(Math.random()*3)]})},J))]}),u.jsx(Ue.img,{src:R9,alt:"Congratulations",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12,delay:.3},style:{maxWidth:"80%",height:"auto",borderRadius:"12px"}}),u.jsx("div",{className:"neo-inset",style:{padding:"1.5rem",color:"var(--accent-color)",borderRadius:"16px",width:"100%",textAlign:"center"},children:u.jsxs("p",{style:{fontWeight:"bold",fontSize:"1.2rem",lineHeight:"1.6"},children:["Congratulations. ",u.jsx("br",{}),"By royal decree, I name you Master of ",u.jsx("br",{}),u.jsx("span",{style:{color:"var(--accent-color)",fontSize:"1.4rem"},children:t.title})]})})]}):u.jsxs("div",{style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"16px",border:"1px solid #3b82f6"},children:[u.jsx("p",{style:{fontWeight:"bold",color:"#1d4ed8",marginBottom:"0.5rem",fontSize:"1.1rem"},children:"Don't give up!"}),u.jsxs("p",{style:{opacity:.8,fontSize:"0.95rem"},children:["Mastery takes patience. ",u.jsx("br",{}),"Why not try the tough questions again right now?"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"0.5rem"},children:[!v.fullMarks&&u.jsxs("button",{className:"neo-button",style:{justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none",padding:"1rem"},onClick:()=>k(v.lowRatedQuestions),children:["Focus on Weak Questions (",v.lowRatedQuestions.length,")"]}),u.jsx("button",{className:"neo-button",style:{justifyContent:"center",padding:"1rem",background:v.fullMarks?"var(--accent-color)":"transparent",color:v.fullMarks?"white":"inherit",border:v.fullMarks?"none":"1px solid var(--border-color)"},onClick:()=>k(t.questions||t.cards||[]),children:"Try All Questions Again"}),u.jsx("button",{className:"neo-button",style:{justifyContent:"center",padding:"1rem",opacity:.7},onClick:n,children:"Done for now"})]})]},"session-result")}):u.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(1.2rem)",WebkitBackdropFilter:"blur(1.2rem)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:0,height:"100vh",overflow:"hidden"},children:[u.jsx(In,{mode:"wait",children:u.jsxs("div",{className:"review-container",style:{width:"100%",maxWidth:"35rem",height:"100%",display:"flex",flexDirection:"column",position:"relative",padding:"10px 1rem",background:"var(--bg-color)"},children:[u.jsx(P9,{currentIndex:w,totalQuestions:S.length,masteredCount:L,totalOriginalQuestions:O,rating:E,onClose:n,user:e,lesson:t}),u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"10px 0",position:"relative",minHeight:0},children:u.jsx(In,{mode:"wait",children:u.jsx(Ue.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:u.jsx(j9,{currentQuestion:_,isFlipped:P,setIsFlipped:I,setViewingImage:Y,onRateMCQ:Q=>{var J;if(Q!=null&&Q.isCorrect)N(2);else{const re=((J=_.options.find(Z=>Z.isCorrect))==null?void 0:J.text)||"Unknown";N(0,`Incorrect. The right answer is "${re}". I shall ask this again.`)}},feedback:j})},_?_.id||((q=_.question)==null?void 0:q.text):"end")})}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",paddingBottom:"0"},children:u.jsx(In,{mode:"wait",children:j?u.jsxs(Ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"neo-flat",style:{width:"100%",padding:"1rem",borderRadius:"1.5rem",background:"var(--bg-color)",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",border:"1px solid var(--border-color)",boxShadow:"var(--neo-box-shadow)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%"},children:[u.jsx("img",{src:Sh,alt:"Guide",style:{width:"2rem",height:"2rem",borderRadius:"50%",flexShrink:0,border:"1.5px solid var(--accent-color)"}}),u.jsx("h3",{style:{fontSize:"0.9rem",color:j.type==="success"?"#16a34a":"#dc2626",margin:0,flex:1,fontWeight:"800"},children:j.message})]}),u.jsx("button",{className:"neo-button neo-glow-blue",onClick:A,style:{width:"100%",justifyContent:"center",padding:"1rem",fontSize:"1.1rem",background:j.type==="success"?"#16a34a":"var(--accent-color)",color:"white",fontWeight:"bold",borderRadius:"1rem",minHeight:"3.5rem"},children:"Next Question"})]},"feedback-actions"):u.jsx(z9,{isFlipped:P,currentQuestion:_,isRecording:me,recordedAudio:oe,isPlayingRecorded:X,startRecording:z,stopRecording:H,deleteRecording:M,toggleRecordedPlayback:D,setIsFlipped:I,handleRating:(Q,J)=>N(Q,J),feedback:j})})})]})}),u.jsx(In,{children:x&&u.jsx(ZC,{imageUrl:x,onClose:()=>Y(null)})})]})},K9=({user:t,onClose:e,showAlert:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState(!1),a=async()=>{if(!r.trim())return n("Please provide some feedback text.");o(!0);try{const l=_9(r),d=T9(t.email)?t.email:"Unknown";let f=`*New Feedback for Chethan in Cardland*

*From:* ${t.name||"Anonymous"} (${d})

*Feedback:* ${l}`;const p=`https://wa.me/919497449115?text=${encodeURIComponent(f)}`;window.open(p,"_blank"),n("Thank you! Redirecting to WhatsApp to send your feedback."),e()}catch{n("Failed to open WhatsApp. Please try again.")}finally{o(!1)}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:u.jsxs("div",{className:"modal-content neo-flat",style:{width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.5rem",position:"relative"},children:[u.jsx(Gn,{onClick:e,style:{position:"absolute",top:"1.5rem",right:"1.5rem"},size:18}),u.jsx("h2",{style:{fontSize:"1.5rem"},children:"Help & Feedback"}),u.jsx("p",{style:{opacity:.7,fontSize:"0.9rem"},children:"Help us improve Chethan in Cardland! Your feedback will be sent via WhatsApp."}),u.jsxs("div",{className:"neo-inset",style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsx("label",{style:{fontWeight:"600",opacity:.7,fontSize:"0.9rem"},children:"Feedback"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("textarea",{className:"neo-input",rows:"6",placeholder:"What's on your mind? ",style:{width:"100%",resize:"none",paddingRight:"30px"},value:r,onChange:l=>i(l.target.value)}),u.jsx("span",{style:{position:"absolute",right:"12px",top:"12px",color:"red",pointerEvents:"none",visibility:r?"hidden":"visible"},children:"*"})]})]}),u.jsx("button",{className:"neo-button neo-glow-blue",style:{justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none",padding:"1rem",opacity:s?.7:1,cursor:s?"not-allowed":"pointer",gap:"10px"},onClick:a,disabled:s,children:s?"Redirecting...":u.jsxs(u.Fragment,{children:[u.jsx(n9,{size:18})," Send via WhatsApp"]})})]})})},Q9=({isOpen:t,onClose:e,onLogin:n})=>{const r=[{icon:u.jsx("img",{src:Sh,alt:"Chethan",style:{width:"32px",height:"32px",objectFit:"contain"}}),title:"Built for how you learn",text:"Science-based learning, designed to keep you focused and motivated."},{icon:u.jsx(GC,{size:28}),title:"Learns how you remember",text:"A smart algorithm understands your memory, tracks progress, and adapts automatically."},{icon:u.jsx(a9,{size:28}),title:"Learns. Adapts. Guides.",text:"The app creates a personalised learning path that adapts to your memory and progress."},{icon:u.jsx(J8,{size:28}),title:"Create lessons your way",content:u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 1rem 0",lineHeight:"1.5",fontSize:"0.95rem",opacity:.8},children:"Make lessons using one or more options:"}),u.jsxs("div",{style:{display:"flex",gap:"2.5rem",justifyContent:"flex-start",marginBottom:"0.5rem",marginTop:"1rem"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[u.jsx("div",{className:"neo-inset",style:{width:"50px",height:"50px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(H8,{size:22})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500",opacity:.8},children:"Typing"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[u.jsx("div",{className:"neo-inset",style:{width:"50px",height:"50px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(Th,{size:22})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500",opacity:.8},children:"Voice"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[u.jsx("div",{className:"neo-inset",style:{width:"50px",height:"50px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(F8,{size:22})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500",opacity:.8},children:"Photo"})]})]})]})},{icon:u.jsx(lv,{size:28}),title:"Expert Lesson Content",text:"Study curated lessons built from real previous question papers and exam patterns."}];return u.jsx(In,{children:t&&u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(Ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"neo-flat",style:{width:"95vw",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",position:"relative",padding:0,overflow:"hidden",borderRadius:"32px"},children:[u.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"800",color:"var(--accent-color)"},children:"How it Works"}),u.jsx(Gn,{onClick:e})]}),u.jsx("div",{style:{padding:"2rem 1.5rem",overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:"2rem"},children:r.map((i,s)=>u.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"0.8rem",borderRadius:"16px",color:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.icon}),u.jsxs("div",{style:{flex:1},children:[i.title&&u.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.1rem",fontWeight:"700",color:"var(--text-color)"},children:i.title}),i.text&&u.jsx("p",{style:{margin:0,lineHeight:"1.5",fontSize:"0.95rem",opacity:.8},children:i.text}),i.content]})]},s))}),u.jsx("div",{style:{padding:"1.5rem",textAlign:"center",borderTop:"1px solid rgba(0,0,0,0.05)"},children:u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:n,style:{width:"100%",justifyContent:"center",padding:"1rem",gap:"12px",background:"var(--accent-color)",color:"white"},children:[u.jsx(Og,{size:20}),u.jsx("span",{style:{fontWeight:"600"},children:"Get Started with Google"})]})})]})})})};var Rf={},ek={exports:{}},Y9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",X9=Y9,J9=X9;function tk(){}function nk(){}nk.resetWarningCache=tk;var Z9=function(){function t(r,i,s,o,a,l){if(l!==J9){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:nk,resetWarningCache:tk};return n.PropTypes=n,n};ek.exports=Z9();var rk=ek.exports,ik={L:1,M:0,Q:3,H:2},sk={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},eU=sk;function ok(t){this.mode=eU.MODE_8BIT_BYTE,this.data=t}ok.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var tU=ok,qu=ik;function Fr(t,e){this.totalCount=t,this.dataCount=e}Fr.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Fr.getRSBlocks=function(t,e){var n=Fr.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=new Array,s=0;s<r;s++)for(var o=n[s*3+0],a=n[s*3+1],l=n[s*3+2],d=0;d<o;d++)i.push(new Fr(a,l));return i};Fr.getRsBlockTable=function(t,e){switch(e){case qu.L:return Fr.RS_BLOCK_TABLE[(t-1)*4+0];case qu.M:return Fr.RS_BLOCK_TABLE[(t-1)*4+1];case qu.Q:return Fr.RS_BLOCK_TABLE[(t-1)*4+2];case qu.H:return Fr.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var nU=Fr;function ak(){this.buffer=new Array,this.length=0}ak.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var rU=ak,wr={glog:function(t){if(t<1)throw new Error("glog("+t+")");return wr.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return wr.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Qt=0;Qt<8;Qt++)wr.EXP_TABLE[Qt]=1<<Qt;for(var Qt=8;Qt<256;Qt++)wr.EXP_TABLE[Qt]=wr.EXP_TABLE[Qt-4]^wr.EXP_TABLE[Qt-5]^wr.EXP_TABLE[Qt-6]^wr.EXP_TABLE[Qt-8];for(var Qt=0;Qt<255;Qt++)wr.LOG_TABLE[wr.EXP_TABLE[Qt]]=Qt;var lk=wr,zs=lk;function wd(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}wd.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=zs.gexp(zs.glog(this.get(n))+zs.glog(t.get(r)));return new wd(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=zs.glog(this.get(0))-zs.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<t.getLength();r++)n[r]^=zs.gexp(zs.glog(t.get(r))+e);return new wd(n,0).mod(t)}};var ck=wd,Xn=sk,eT=ck,iU=lk,Mi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ht={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Ht.getBCHDigit(e)-Ht.getBCHDigit(Ht.G15)>=0;)e^=Ht.G15<<Ht.getBCHDigit(e)-Ht.getBCHDigit(Ht.G15);return(t<<10|e)^Ht.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Ht.getBCHDigit(e)-Ht.getBCHDigit(Ht.G18)>=0;)e^=Ht.G18<<Ht.getBCHDigit(e)-Ht.getBCHDigit(Ht.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return Ht.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case Mi.PATTERN000:return(e+n)%2==0;case Mi.PATTERN001:return e%2==0;case Mi.PATTERN010:return n%3==0;case Mi.PATTERN011:return(e+n)%3==0;case Mi.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case Mi.PATTERN101:return e*n%2+e*n%3==0;case Mi.PATTERN110:return(e*n%2+e*n%3)%2==0;case Mi.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new eT([1],0),n=0;n<t;n++)e=e.multiply(new eT([1,iU.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Xn.MODE_NUMBER:return 10;case Xn.MODE_ALPHA_NUM:return 9;case Xn.MODE_8BIT_BYTE:return 8;case Xn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Xn.MODE_NUMBER:return 12;case Xn.MODE_ALPHA_NUM:return 11;case Xn.MODE_8BIT_BYTE:return 16;case Xn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Xn.MODE_NUMBER:return 14;case Xn.MODE_ALPHA_NUM:return 13;case Xn.MODE_8BIT_BYTE:return 16;case Xn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var s=0,o=t.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||e<=r+a))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||a==0&&l==0||o==t.isDark(r+a,i+l)&&s++;s>5&&(n+=3+s-5)}for(var r=0;r<e-1;r++)for(var i=0;i<e-1;i++){var d=0;t.isDark(r,i)&&d++,t.isDark(r+1,i)&&d++,t.isDark(r,i+1)&&d++,t.isDark(r+1,i+1)&&d++,(d==0||d==4)&&(n+=3)}for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);for(var h=0,i=0;i<e;i++)for(var r=0;r<e;r++)t.isDark(r,i)&&h++;var f=Math.abs(100*h/e/e-50)/5;return n+=f*10,n}},sU=Ht,oU=tU,uk=nU,dk=rU,Ns=sU,aU=ck;function zr(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Kn=zr.prototype;Kn.addData=function(t){var e=new oU(t);this.dataList.push(e),this.dataCache=null};Kn.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};Kn.getModuleCount=function(){return this.moduleCount};Kn.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=uk.getRSBlocks(t,this.errorCorrectLevel),n=new dk,r=0,i=0;i<e.length;i++)r+=e[i].dataCount;for(var i=0;i<this.dataList.length;i++){var s=this.dataList[i];n.put(s.mode,4),n.put(s.getLength(),Ns.getLengthInBits(s.mode,t)),s.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};Kn.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=zr.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};Kn.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[t+n][e+r]=!0:this.modules[t+n][e+r]=!1)};Kn.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=Ns.getLostPoint(this);(n==0||t>r)&&(t=r,e=n)}return e};Kn.createMovieClip=function(t,e,n){var r=t.createEmptyMovieClip(e,n),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var l=a*i,d=this.modules[s][a];d&&(r.beginFill(0,100),r.moveTo(l,o),r.lineTo(l+i,o),r.lineTo(l+i,o+i),r.lineTo(l,o+i),r.endFill())}return r};Kn.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};Kn.setupPositionAdjustPattern=function(){for(var t=Ns.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(this.modules[r][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[r+s][i+o]=!0:this.modules[r+s][i+o]=!1}};Kn.setupTypeNumber=function(t){for(var e=Ns.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}};Kn.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=Ns.getBCHTypeInfo(n),i=0;i<15;i++){var s=!t&&(r>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t};Kn.mapData=function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[r][o-a]==null){var l=!1;s<t.length&&(l=(t[s]>>>i&1)==1);var d=Ns.getMask(e,r,o-a);d&&(l=!l),this.modules[r][o-a]=l,i--,i==-1&&(s++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}};zr.PAD0=236;zr.PAD1=17;zr.createData=function(t,e,n){for(var r=uk.getRSBlocks(t,e),i=new dk,s=0;s<n.length;s++){var o=n[s];i.put(o.mode,4),i.put(o.getLength(),Ns.getLengthInBits(o.mode,t)),o.write(i)}for(var a=0,s=0;s<r.length;s++)a+=r[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(zr.PAD0,8),i.getLengthInBits()>=a*8));)i.put(zr.PAD1,8);return zr.createBytes(i,r)};zr.createBytes=function(t,e){for(var n=0,r=0,i=0,s=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var l=e[a].dataCount,d=e[a].totalCount-l;r=Math.max(r,l),i=Math.max(i,d),s[a]=new Array(l);for(var h=0;h<s[a].length;h++)s[a][h]=255&t.buffer[h+n];n+=l;var f=Ns.getErrorCorrectPolynomial(d),p=new aU(s[a],f.getLength()-1),g=p.mod(f);o[a]=new Array(f.getLength()-1);for(var h=0;h<o[a].length;h++){var w=h+g.getLength()-o[a].length;o[a][h]=w>=0?g.get(w):0}}for(var _=0,h=0;h<e.length;h++)_+=e[h].totalCount;for(var P=new Array(_),E=0,h=0;h<r;h++)for(var a=0;a<e.length;a++)h<s[a].length&&(P[E++]=s[a][h]);for(var h=0;h<i;h++)for(var a=0;a<e.length;a++)h<o[a].length&&(P[E++]=o[a][h]);return P};var lU=zr,dv={};Object.defineProperty(dv,"__esModule",{value:!0});var cU=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uU=rk,Jn=fk(uU),hk=R,Hu=fk(hk);function fk(t){return t&&t.__esModule?t:{default:t}}function dU(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var hU={bgColor:Jn.default.oneOfType([Jn.default.object,Jn.default.string]).isRequired,bgD:Jn.default.string.isRequired,fgColor:Jn.default.oneOfType([Jn.default.object,Jn.default.string]).isRequired,fgD:Jn.default.string.isRequired,size:Jn.default.number.isRequired,title:Jn.default.string,viewBoxSize:Jn.default.number.isRequired,xmlns:Jn.default.string},hv=(0,hk.forwardRef)(function(t,e){var n=t.bgColor,r=t.bgD,i=t.fgD,s=t.fgColor,o=t.size,a=t.title,l=t.viewBoxSize,d=t.xmlns,h=d===void 0?"http://www.w3.org/2000/svg":d,f=dU(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Hu.default.createElement("svg",cU({},f,{height:o,ref:e,viewBox:"0 0 "+l+" "+l,width:o,xmlns:h}),a?Hu.default.createElement("title",null,a):null,Hu.default.createElement("path",{d:r,fill:n}),Hu.default.createElement("path",{d:i,fill:s}))});hv.displayName="QRCodeSvg";hv.propTypes=hU;dv.default=hv;Object.defineProperty(Rf,"__esModule",{value:!0});Rf.QRCode=void 0;var fU=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pU=rk,ti=ru(pU),mU=ik,gU=ru(mU),yU=lU,vU=ru(yU),pk=R,wU=ru(pk),xU=dv,_U=ru(xU);function ru(t){return t&&t.__esModule?t:{default:t}}function TU(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var EU={bgColor:ti.default.oneOfType([ti.default.object,ti.default.string]),fgColor:ti.default.oneOfType([ti.default.object,ti.default.string]),level:ti.default.string,size:ti.default.number,value:ti.default.string.isRequired},Pf=(0,pk.forwardRef)(function(t,e){var n=t.bgColor,r=n===void 0?"#FFFFFF":n,i=t.fgColor,s=i===void 0?"#000000":i,o=t.level,a=o===void 0?"L":o,l=t.size,d=l===void 0?256:l,h=t.value,f=TU(t,["bgColor","fgColor","level","size","value"]),p=new vU.default(-1,gU.default[a]);p.addData(h),p.make();var g=p.modules;return wU.default.createElement(_U.default,fU({},f,{bgColor:r,bgD:g.map(function(w,_){return w.map(function(P,E){return P?"":"M "+E+" "+_+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:s,fgD:g.map(function(w,_){return w.map(function(P,E){return P?"M "+E+" "+_+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:d,viewBoxSize:g.length}))});Rf.QRCode=Pf;Pf.displayName="QRCode";Pf.propTypes=EU;var SU=Rf.default=Pf;const bU=({user:t,onClose:e,userCoins:n,onShare:r,onShowFeedback:i})=>{const[s,o]=R.useState(null),a=d=>{const h=(t==null?void 0:t.email)||"UserPayment";return`upi://pay?pa=${P8}&pn=${N8}&am=${d}&cu=INR&tn=${encodeURIComponent(h)}`},l=d=>{const h=a(d);window.innerWidth>768?o({amount:d,link:h}):window.location.href=h};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e,children:u.jsxs(Ue.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"neo-flat",onClick:d=>d.stopPropagation(),style:{width:"90%",maxWidth:"420px",padding:"0",borderRadius:"24px",overflow:"hidden",display:"flex",flexDirection:"column",maxHeight:"90vh",margin:"20px 0",background:"var(--bg-color)",position:"relative"},children:[u.jsx(In,{children:s&&u.jsxs(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"var(--bg-color)",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:[u.jsx("button",{onClick:()=>o(null),className:"neo-button icon-btn",style:{position:"absolute",top:"15px",right:"15px"},children:u.jsx(_r,{size:24})}),u.jsxs("h3",{style:{margin:"0 0 1.5rem 0",color:"var(--text-primary)"},children:["Scan to Pay ",s.amount]}),u.jsx("div",{style:{background:"white",padding:"16px",borderRadius:"16px"},children:u.jsx(SU,{value:s.link,size:200})}),u.jsx("p",{style:{marginTop:"1.5rem",textAlign:"center",opacity:.7,fontSize:"0.9rem"},children:"Scan this QR code using GPay, PhonePe, or Paytm on your mobile."})]})}),u.jsxs("div",{style:{padding:"1.25rem 1.5rem",background:"var(--bg-color)",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"1.4rem",margin:0,fontWeight:"700",color:"var(--text-color)"},children:"Coin Store"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[u.jsx("span",{style:{fontSize:"0.9rem",opacity:.7},children:"Balance:"}),u.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"800",background:"rgba(99, 102, 241, 0.1)",padding:"2px 8px",borderRadius:"8px",color:"var(--accent-color)"},children:[n," "]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i&&u.jsxs("button",{className:"neo-button",onClick:i,style:{padding:"0 16px",height:"36px",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",fontWeight:"600",borderRadius:"12px",color:"var(--accent-color)",border:"none",cursor:"pointer"},title:"Help & Feedback",children:[u.jsx(Zi,{size:18}),u.jsx("span",{children:"Help"})]}),u.jsx(Gn,{onClick:e})]})]}),u.jsxs("div",{style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.5rem",overflowY:"auto",flex:1},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"0.8rem"},children:u.jsx("h4",{style:{margin:0,fontSize:"0.9rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",opacity:.6},children:"Ways to Earn"})}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.5rem",borderRadius:"20px",border:"none",background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(255,255,255,0.05) 100%)",position:"relative",overflow:"hidden",boxShadow:"0 0 15px rgba(59, 130, 246, 0.5), 0 10px 25px -5px rgba(59, 130, 246, 0.15)"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,background:"#3b82f6",color:"white",padding:"4px 12px",borderRadius:"0 0 0 16px",fontWeight:"700",fontSize:"0.75rem",letterSpacing:"0.5px"},children:"MOST POPULAR"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.2rem",marginTop:"0.5rem"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.4rem",margin:"0 0 4px 0",color:"#1d4ed8",fontWeight:"800"},children:"Invite a Friend"}),u.jsx("p",{style:{margin:0,opacity:.8,fontSize:"0.9rem"},children:"Grow our community"})]}),u.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"800",color:"#f59e0b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"+50"})]}),u.jsxs("button",{className:"neo-button",onClick:r,style:{width:"100%",justifyContent:"center",padding:"1rem",background:"#3b82f6",color:"white",border:"none",fontSize:"1rem",fontWeight:"700",borderRadius:"14px",gap:"8px",boxShadow:"0 4px 6px -1px rgba(59, 130, 246, 0.4)"},children:[u.jsx(r9,{size:18})," Invite Now"]})]}),u.jsxs("div",{className:"neo-flat",style:{marginTop:"1rem",padding:"1rem",borderRadius:"16px",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(16, 185, 129, 0.05)",boxShadow:"0 0 10px rgba(16, 185, 129, 0.2)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("div",{style:{background:"#10b981",color:"white",padding:"10px",borderRadius:"12px",boxShadow:"0 2px 5px rgba(16, 185, 129, 0.3)"},children:u.jsx(vo,{size:20,strokeWidth:3})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"700",color:"var(--text-primary)",fontSize:"1rem"},children:"Daily Login"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:"Streak bonus active"})]})]}),u.jsx("div",{style:{fontWeight:"800",color:"#10b981",fontSize:"1.2rem"},children:"+5"})]}),u.jsxs("div",{className:"neo-flat",style:{marginTop:"1rem",padding:"1rem",borderRadius:"16px",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(236, 72, 153, 0.05)",boxShadow:"0 0 10px rgba(236, 72, 153, 0.2)",cursor:"pointer"},onClick:i,children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("div",{style:{background:"#ec4899",color:"white",padding:"10px",borderRadius:"12px",boxShadow:"0 2px 5px rgba(236, 72, 153, 0.3)"},children:u.jsx(Zi,{size:20,strokeWidth:2})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"700",color:"var(--text-primary)",fontSize:"1rem"},children:"Find Mistakes"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:"Report errors to get free coins"})]})]}),u.jsx("div",{style:{fontWeight:"800",color:"#ec4899",fontSize:"0.9rem"},children:"Bonus"})]})]}),u.jsx("div",{style:{width:"100%",height:"1px",background:"var(--border-color)",opacity:.3}}),u.jsxs("div",{children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"0.8rem"},children:u.jsx("h4",{style:{margin:0,fontSize:"0.9rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",opacity:.6},children:"Store"})}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.2rem",borderRadius:"18px",border:"none",background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(255,255,255,0) 100%)",marginBottom:"1rem",position:"relative",cursor:"pointer",boxShadow:"0 0 15px rgba(59, 130, 246, 0.3)"},onClick:()=>l(79),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 4px 0",color:"#1d4ed8",fontWeight:"700"},children:"50 Coins"}),u.jsx("p",{style:{margin:0,opacity:.7,fontSize:"0.85rem"},children:"Basic Pack"})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#3b82f6"},children:"79"})})]}),u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.8rem",borderTop:"1px dashed rgba(59,130,246,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#1d4ed8",fontWeight:"600",fontSize:"0.9rem"},children:[u.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Google_Pay_Logo.svg",alt:"GPay",style:{height:"16px"}}),u.jsx("span",{children:"Tap to Pay"})]})]}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.2rem",borderRadius:"18px",border:"none",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(255,255,255,0) 100%)",marginBottom:"1rem",position:"relative",cursor:"pointer",boxShadow:"0 0 15px rgba(16, 185, 129, 0.3)"},onClick:()=>l(299),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 4px 0",color:"#059669",fontWeight:"700"},children:"200 Coins"}),u.jsx("p",{style:{margin:0,opacity:.7,fontSize:"0.85rem"},children:"Popular Choice"})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#10b981"},children:"299"})})]}),u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.8rem",borderTop:"1px dashed rgba(16, 185, 129, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#059669",fontWeight:"600",fontSize:"0.9rem"},children:[u.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Google_Pay_Logo.svg",alt:"GPay",style:{height:"16px"}}),u.jsx("span",{children:"Tap to Pay"})]})]}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.2rem",borderRadius:"18px",border:"none",background:"linear-gradient(135deg, rgba(245,158,11,0.08) 0%, rgba(255,255,255,0) 100%)",position:"relative",cursor:"pointer",boxShadow:"0 0 15px rgba(245, 158, 11, 0.5)"},onClick:()=>l(479),children:[u.jsx("div",{style:{position:"absolute",top:-10,left:20,background:"#f59e0b",color:"white",padding:"4px 10px",borderRadius:"8px",fontSize:"0.7rem",fontWeight:"700"},children:"BEST VALUE"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 4px 0",color:"#b45309",fontWeight:"700"},children:"500 Coins"}),u.jsx("p",{style:{margin:0,opacity:.7,fontSize:"0.85rem"},children:"Master Study Pack"})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#f59e0b"},children:"479"})})]}),u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.8rem",borderTop:"1px dashed rgba(245,158,11,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#b45309",fontWeight:"600",fontSize:"0.9rem"},children:[u.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Google_Pay_Logo.svg",alt:"GPay",style:{height:"16px"}}),u.jsx("span",{children:"Tap to Pay"})]})]})]}),u.jsxs("div",{style:{background:"rgba(0,0,0,0.03)",padding:"1rem",borderRadius:"12px",fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[u.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:"Alternative Payment Method:"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsx("span",{children:"GPay to:"}),u.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",fontSize:"1rem"},children:D8.replace("91","")})]}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.8},children:"After payment, send the screenshot to the same number on WhatsApp to receive your coins."})]})]})]})})},IU=({user:t,userProfile:e,onClose:n,onUpdateProfile:r,showAlert:i,onShowFeedback:s})=>{const[o,a]=R.useState(""),[l,d]=R.useState(!1),h=`${window.location.origin}/?ref=${(e==null?void 0:e.referralCode)||""}`,f=`Study smarter.
Remember longer.

${t.name} invites you to join Cardland to start easy, efficient and personalised learning journey.

${h}`,p=()=>{navigator.clipboard.writeText(e.referralCode),i("Referral code copied!")},g=()=>{const _=`https://wa.me/?text=${encodeURIComponent(f)}`;window.open(_,"_blank")},w=async()=>{if(o.trim()){if(o.trim()===e.referralCode){i("You can't refer yourself!");return}d(!0);try{const _={...e,referredBy:o.trim()};await r(_),i("Referral code applied! Your friend will get coins when you finish a review."),n()}catch{i("Failed to apply code.")}finally{d(!1)}}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.5)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(Ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"neo-flat",style:{padding:"2rem",maxWidth:"400px",width:"90%",position:"relative"},children:[u.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",display:"flex",gap:"8px"},children:[s&&u.jsxs("button",{className:"neo-button",onClick:s,style:{padding:"0 12px",height:"36px",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.85rem",fontWeight:"600",borderRadius:"12px",color:"var(--accent-color)",border:"none",cursor:"pointer"},title:"Help & Feedback",children:[u.jsx(Zi,{size:16}),u.jsx("span",{children:"Help"})]}),u.jsx(Gn,{onClick:n,size:20})]}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("div",{className:"neo-inset",style:{width:"60px",height:"60px",borderRadius:"50%",margin:"0 auto 1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(W8,{size:32})}),u.jsx("h2",{style:{margin:0},children:"Sharing Bonus"}),u.jsxs("p",{style:{opacity:.7,marginTop:"0.5rem"},children:["Invite a friend and receive ",u.jsx("strong",{style:{color:"#f59e0b"},children:"50 Coins"})," when they complete their first review!"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsxs("button",{className:"neo-button",onClick:g,style:{background:"#25D366",color:"white",border:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",fontSize:"1.1rem"},children:[u.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),"Share Invite via WhatsApp"]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[u.jsx("div",{style:{height:"1px",flex:1,background:"var(--border-color)"}}),u.jsx("span",{style:{fontSize:"0.8rem",opacity:.5},children:"OR USE CODE"}),u.jsx("div",{style:{height:"1px",flex:1,background:"var(--border-color)"}})]}),u.jsxs("div",{className:"neo-inset",style:{marginTop:"15px",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"12px",fontSize:"1.2rem",fontWeight:"bold",letterSpacing:"1px"},children:[u.jsx("span",{children:(e==null?void 0:e.referralCode)||"----"}),u.jsx("button",{className:"neo-button icon-btn",onClick:p,title:"Copy Code",children:u.jsx(B8,{size:20})})]})]}),!(e!=null&&e.referredBy)&&u.jsx("div",{style:{marginTop:"10px"},children:u.jsxs("details",{children:[u.jsx("summary",{style:{cursor:"pointer",fontSize:"0.9rem",opacity:.7,listStyle:"none",textAlign:"center"},children:"Have a referral code? Enter it here"}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[u.jsx("input",{className:"neo-input",style:{flex:1},placeholder:"Enter code",value:o,onChange:_=>a(_.target.value)}),u.jsx("button",{className:"neo-button neo-glow-blue",onClick:w,disabled:l||!o,style:{background:"var(--accent-color)",color:"white"},children:l?"...":u.jsx(vo,{size:20})})]})]})}),(e==null?void 0:e.referredBy)&&u.jsxs("div",{className:"neo-inset",style:{padding:"0.8rem",textAlign:"center",fontSize:"0.9rem",color:"green"},children:["Referred by: ",e.referredBy]})]})]})})};class CU{static async getUsers(e,n,r=!1){try{return console.log("[AdminService] Fetching authoritative registry from Firestore..."),(await es.listUsers()).map(s=>{var o,a,l;return{id:s.id||s.uid||s.email,uid:s.uid||s.id,email:s.email,displayName:s.displayName||"Guest User",lastLogin:((l=(a=(o=s.lastSeen)==null?void 0:o.toDate)==null?void 0:a.call(o))==null?void 0:l.toISOString())||null,coins:s.coins||0,loginCount:s.loginCount||0}})}catch(i){throw console.error("[AdminService] Registry Sync Failed:",i),i}}static async grantCoins(e,n,r){let i=n.uid;if(!i&&n.id&&!n.id.includes("@")&&(i=n.id),!i&&n.email){console.log(`[AdminService] UID missing for ${n.email}, performing lookup...`);const s=await es.getProfileByEmail(n.email);i=(s==null?void 0:s.uid)||(s==null?void 0:s.id)}if(!i)throw new Error("Could not identify user ID for transaction.");console.log(`[AdminService] Granting ${r} coins to ${i} via Secure Cloud Function...`);try{const o=await c8(d8,"grantCoins")({uid:i,amount:r}),{newBalance:a}=o.data;return{success:!0,newBalance:a,email:n.email}}catch(s){console.error("[AdminService] Grant Coins failed:",s);const o=s.message||"Unknown error occurred";throw o.includes("permission-denied")?new Error("Permission Denied: You are not authorized to grant coins."):new Error(`Grant failed: ${o}`)}}static async getPrompts(){return[]}}const tT=CU,mk=R.createContext(null),kU=({children:t})=>{const{user:e}=Io(),[n,r]=R.useState([]),[i,s]=R.useState(!1),[o,a]=R.useState(new Set),[l,d]=R.useState(new Set),[h,f]=R.useState(null),[p,g]=R.useState({totalReceived:0,lastSync:null}),w=R.useCallback(async()=>{if(!e){f("AUTH_REQUIRED");return}s(!0),f(null);try{const _=await tT.getUsers(e.token);r(_||[]),g({totalReceived:(_==null?void 0:_.length)||0,lastSync:new Date().toLocaleTimeString()})}catch(_){console.error("[AdminContext] Discovery Failed:",_),f(_.message||"Failed to synchronize registry.")}finally{s(!1)}},[e]);return R.useEffect(()=>{e&&w()},[w,e]),u.jsx(mk.Provider,{value:{users:n,loading:i,error:h,stats:p,processingIds:o,recentlyGranted:l,refresh:()=>w(),grantCoins:async(_,P)=>{const E=_.id||_.uid||_.email;a(v=>new Set(v).add(E));try{const v=await tT.grantCoins(e.token,_,P);v&&v.newBalance!==void 0&&r(x=>x.map(j=>(j.id||j.uid||j.email)===E?{...j,coins:v.newBalance}:j)),d(x=>new Set(x).add(E)),setTimeout(()=>{d(x=>{const j=new Set(x);return j.delete(E),j})},3e3),w()}catch(v){throw console.error("[AdminContext] Grant failed",v),v}finally{a(v=>{const x=new Set(v);return x.delete(E),x})}}},children:t})},AU=()=>{const t=R.useContext(mk);if(!t)throw new Error("useAdmin must be used within AdminProvider");return t},RU=({children:t,activeSection:e,onNavigate:n,onClose:r})=>{const[i,s]=R.useState(!1),[o,a]=R.useState(!1);R.useEffect(()=>{const d=()=>a(window.innerWidth<=768);return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const l=()=>s(!i);return u.jsxs("div",{style:xt.shell,children:[o&&u.jsxs("div",{style:xt.mobileHeader,children:[u.jsx("button",{onClick:l,style:xt.iconBtn,children:i?u.jsx(_r,{size:20}):u.jsx($C,{size:20})}),u.jsx("span",{style:xt.storeName,children:"Admin Workspace"}),u.jsx("div",{style:{width:32}})," "]}),u.jsxs("aside",{style:{...xt.sidebar,transform:o?i?"translateX(0)":"translateX(-100%)":"none",position:o?"absolute":"relative",height:"100%"},className:"admin-sidebar",children:[!o&&u.jsxs("div",{style:xt.sidebarHeader,children:[u.jsx("div",{style:xt.logoBadge,children:"A"}),u.jsx("span",{style:xt.storeName,children:"Admin Workspace"})]}),u.jsxs("nav",{style:xt.nav,children:[u.jsx("div",{style:xt.sectionLabel,children:"GENERAL"}),u.jsx(Jp,{icon:u.jsx(HC,{size:18}),label:"Registry",active:e==="users",onClick:()=>{n("users"),o&&s(!1)}}),u.jsx(Jp,{icon:u.jsx(zC,{size:18}),label:"Smart Paste",active:e==="smart_paste",onClick:()=>{n("smart_paste"),o&&s(!1)}}),u.jsx(Jp,{icon:u.jsx($8,{size:18}),label:"Prompts",active:e==="prompts",onClick:()=>{n("prompts"),o&&s(!1)}})]}),u.jsx("div",{style:xt.sidebarFooter,children:u.jsxs("button",{onClick:r,style:xt.exitBtn,children:[u.jsx(BC,{size:16})," Exit Admin"]})})]}),o&&i&&u.jsx("div",{style:xt.backdrop,onClick:()=>s(!1)}),u.jsxs("main",{style:{...xt.main,paddingTop:o?"60px":"0"},children:[!o&&u.jsxs("header",{style:xt.topBar,children:[u.jsxs("div",{style:xt.searchWrapper,children:[u.jsx(Fg,{size:16,style:{opacity:.5}}),u.jsx("input",{type:"text",placeholder:"Search",style:xt.globalSearch})]}),u.jsx("div",{style:xt.userMenu,children:u.jsx("div",{style:xt.avatar,children:"A"})})]}),u.jsx("div",{style:xt.contentFrame,children:t})]})]})},Jp=({icon:t,label:e,active:n,onClick:r})=>u.jsxs("button",{onClick:r,style:{...xt.navItem,background:n?"#ffffff":"transparent",color:n?"#008060":"#5c5f62",fontWeight:n?600:500,boxShadow:n?"0 1px 3px rgba(0,0,0,0.1)":"none"},children:[t,u.jsx("span",{children:e})]}),xt={shell:{position:"fixed",inset:0,background:"#f6f6f7",zIndex:5e3,display:"flex",fontFamily:'-apple-system, BlinkMacSystemFont, "San Francisco", "Segoe UI", Roboto, "Helvetica Neue", sans-serif'},mobileHeader:{position:"absolute",top:0,left:0,right:0,height:"56px",background:"white",borderBottom:"1px solid #e1e3e5",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:20},sidebar:{width:"240px",background:"#ebebeb",borderRight:"1px solid #e1e3e5",display:"flex",flexDirection:"column",zIndex:30,transition:"transform 0.3s ease-in-out",boxShadow:"2px 0 8px rgba(0,0,0,0.1)"},backdrop:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",zIndex:25},sidebarHeader:{padding:"1rem",display:"flex",alignItems:"center",gap:"0.75rem",borderBottom:"1px solid rgba(0,0,0,0.05)"},logoBadge:{width:"32px",height:"32px",background:"#5c5f62",color:"white",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700},storeName:{fontWeight:600,fontSize:"0.9rem",color:"#202223"},nav:{padding:"1rem 0.5rem",flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},sectionLabel:{fontSize:"0.75rem",fontWeight:600,color:"#444",padding:"0.5rem 0.75rem",marginTop:"0.5rem"},navItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0.75rem",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",marginBottom:"2px"},sidebarFooter:{padding:"1rem",borderTop:"1px solid rgba(0,0,0,0.05)"},exitBtn:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.5rem",background:"white",border:"1px solid #c9cccf",borderRadius:"4px",fontWeight:500,cursor:"pointer",color:"#202223"},main:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},topBar:{height:"56px",background:"white",borderBottom:"1px solid #e1e3e5",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem"},searchWrapper:{width:"400px",height:"36px",background:"#f1f2f3",borderRadius:"4px",display:"flex",alignItems:"center",padding:"0 0.75rem",gap:"0.5rem",border:"1px solid #e1e3e5"},globalSearch:{border:"none",background:"transparent",outline:"none",width:"100%",fontSize:"0.9rem"},contentFrame:{flex:1,overflowY:"auto",padding:"2rem",maxWidth:"1100px",margin:"0 auto",width:"100%"},userMenu:{display:"flex",alignItems:"center",gap:"1rem"},avatar:{width:"32px",height:"32px",borderRadius:"50%",background:"#008060",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:600},iconBtn:{background:"none",border:"none",cursor:"pointer",padding:"4px"}},PU=({user:t,isOpen:e,onClose:n,onGrant:r})=>{const[i,s]=R.useState("50"),[o,a]=R.useState(!1),[l,d]=R.useState(null),[h,f]=R.useState(!1);if(!e||!t)return null;const p=async g=>{g.preventDefault();const w=parseInt(i,10);if(isNaN(w)||w<=0){d("Please enter a valid positive number.");return}a(!0),d(null);try{await r(t,w),f(!0),setTimeout(()=>{n(),f(!1),s("50")},1500)}catch(_){d(_.message||"Failed to grant coins.")}finally{a(!1)}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(4px)",background:"rgba(0,0,0,0.5)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:u.jsxs("div",{className:"neo-flat",style:{background:"white",padding:"2rem",borderRadius:"16px",width:"100%",maxWidth:"400px",position:"relative",display:"flex",flexDirection:"column",gap:"1.5rem",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",margin:0},children:"Grant Coins"}),u.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"#64748b"},children:["to ",u.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:t.displayName||t.email})]})]}),!o&&u.jsx(Gn,{onClick:n})]}),h?u.jsxs("div",{style:{padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",color:"#008060",gap:"1rem"},children:[u.jsx(Mg,{size:48}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0},children:"Success!"}),u.jsxs("p",{style:{margin:0,opacity:.8},children:["Granted ",i," coins."]})]})]}):u.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#475569"},children:"Amount"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Cf,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#f59e0b"}}),u.jsx("input",{type:"number",className:"neo-input",value:i,onChange:g=>s(g.target.value),placeholder:"Enter amount",disabled:o,style:{width:"100%",padding:"12px 12px 12px 40px",fontSize:"1.1rem",fontWeight:"600",borderRadius:"8px",border:"1px solid #e2e8f0",outline:"none"},autoFocus:!0})]})]}),l&&u.jsxs("div",{style:{padding:"0.75rem",background:"#fef2f2",color:"#ef4444",borderRadius:"8px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(OC,{size:16}),l]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",onClick:n,disabled:o,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",background:"transparent",color:"#64748b",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{type:"submit",disabled:o||!i,className:"primary-btn",style:{padding:"0.75rem 2rem",borderRadius:"8px",border:"none",background:"#008060",color:"white",fontWeight:"600",cursor:o?"wait":"pointer",opacity:o?.7:1,boxShadow:"0 4px 6px -1px rgba(0, 128, 96, 0.4)"},children:o?"Granting...":"Grant Coins"})]})]})]})})},DU=()=>{const{users:t,loading:e,error:n,stats:r,refresh:i,grantCoins:s,processingIds:o,recentlyGranted:a}=AU(),[l,d]=Qr.useState(null);return e&&t.length===0?u.jsx(jU,{}):n==="AUTH_REQUIRED"?u.jsx(NU,{}):n?u.jsx(LU,{error:n,retry:i}):u.jsxs("div",{style:ke.container,children:[u.jsxs("div",{style:ke.header,children:[u.jsx("h1",{style:ke.title,children:"Users"}),u.jsxs("div",{style:ke.actions,children:[u.jsxs("span",{style:ke.badge,children:[t.length," Records"]}),u.jsx("button",{onClick:i,style:ke.iconBtn,title:"Refresh Index",children:u.jsx(za,{size:16})})]})]}),r.lastSync&&u.jsxs("div",{style:ke.diagnosticBanner,children:[u.jsx(Mg,{size:14,color:"#008060"}),u.jsxs("span",{children:["Directory Synced at ",r.lastSync,". Status: Live from Firestore"]})]}),t.length===0?u.jsx(MU,{retry:i}):u.jsx("div",{style:ke.card,children:u.jsx("div",{className:"table-responsive",children:u.jsxs("table",{style:ke.table,children:[u.jsx("thead",{children:u.jsxs("tr",{style:ke.theadRow,children:[u.jsx("th",{style:ke.th,children:"Name"}),u.jsx("th",{style:ke.th,children:"Email"}),u.jsx("th",{style:ke.th,children:"Last Active"}),u.jsx("th",{style:ke.th,children:"Logins"}),u.jsx("th",{style:ke.th,children:"Coins"}),u.jsx("th",{style:ke.th,children:"Actions"})]})}),u.jsx("tbody",{children:t.map(h=>{const f=h.id||h.uid||h.email,p=o==null?void 0:o.has(f),g=a==null?void 0:a.has(f);return u.jsxs("tr",{style:ke.tr,children:[u.jsx("td",{style:ke.td,children:u.jsx("span",{style:ke.nameText,children:h.displayName})}),u.jsx("td",{style:ke.td,children:h.email}),u.jsx("td",{style:ke.td,children:h.lastLogin?new Date(h.lastLogin).toLocaleDateString():"-"}),u.jsx("td",{style:ke.td,children:h.loginCount||0}),u.jsx("td",{style:ke.td,children:u.jsx("span",{style:{color:"#008060",fontWeight:700,background:"#e3f1df",padding:"2px 8px",borderRadius:"10px",fontSize:"0.85rem"},children:h.coins||0})}),u.jsx("td",{style:ke.td,children:u.jsx("button",{disabled:p,onClick:()=>d(h),style:{...ke.actionLink,color:g?"#008060":p?"#6d7175":"#101010",opacity:p?.5:1,cursor:p?"wait":"pointer",textDecoration:p?"none":"underline",display:"flex",alignItems:"center",gap:"4px"},children:g?u.jsxs(u.Fragment,{children:[u.jsx(Mg,{size:14})," Success"]}):p?"Granting...":"Grant Coins"})})]},f)})})]})})}),u.jsx(PU,{user:l,isOpen:!!l,onClose:()=>d(null),onGrant:s}),u.jsx("style",{children:`
                .table-responsive { overflow-x: auto; }
                @media (max-width: 600px) {
                    /* Mobile styles can be enhanced here */
                }
            `})]})},NU=()=>{const[t,e]=Qr.useState(!1);return u.jsxs("div",{style:ke.errorBox,children:[u.jsx(G8,{size:32,color:"#5c5f62"}),u.jsx("h3",{style:ke.errorTitle,children:"Authorization Required"}),u.jsx("p",{style:ke.errorDesc,children:"Admin access requires Google Drive permissions."}),u.jsx("button",{disabled:t,onClick:async()=>{e(!0);try{console.log("[AdminAuth] Requesting Drive Access..."),await m8(),console.log("[AdminAuth] Access Granted. Refreshing context...")}catch(n){console.error("[AdminAuth] Access Denied:",n),alert(`Authorization Failed: ${n.message||n}`)}finally{e(!1)}},style:{...ke.primaryBtn,opacity:t?.7:1,cursor:t?"wait":"pointer"},children:t?"Authorizing...":"Authorize Admin Access"})]})},jU=()=>u.jsxs("div",{style:ke.centerBox,children:[u.jsx("div",{className:"polaris-spinner",style:ke.spinner}),u.jsx("p",{style:{marginTop:"1rem",color:"#6d7175"},children:"Loading Users from Firestore..."})]}),LU=({error:t,retry:e})=>u.jsxs("div",{style:ke.errorBox,children:[u.jsx(OC,{size:32,color:"#d82c0d"}),u.jsx("h3",{style:ke.errorTitle,children:"Directory Access Failed"}),u.jsx("p",{style:ke.errorDesc,children:t}),u.jsx("button",{onClick:e,style:ke.primaryBtn,children:"Retry Sync"})]}),MU=({retry:t})=>{const{user:e}=Io(),[n,r]=Qr.useState(!1),i=async()=>{if(e){r(!0);try{await es.syncProfile(e),t()}catch(s){console.error(s),alert("Registration failed: "+s.message)}finally{r(!1)}}};return u.jsxs("div",{style:ke.centerBox,children:[u.jsx(zC,{size:48,color:"#babec3"}),u.jsx("h2",{style:ke.emptyTitle,children:"No Users Found"}),u.jsx("p",{style:ke.emptyDesc,children:"The user directory is currently empty."}),u.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[u.jsxs("button",{onClick:t,style:ke.primaryBtn,children:[u.jsx(za,{size:14,style:{marginRight:"8px"}})," Refresh List"]}),u.jsxs("button",{onClick:i,disabled:n||!e,style:{...ke.primaryBtn,background:"white",color:"#008060",border:"1px solid #008060",display:"flex",alignItems:"center"},children:[u.jsx(c9,{size:14,style:{marginRight:"8px"}}),n?"Registering...":"Register Me"]})]})]})},ke={container:{display:"flex",flexDirection:"column",gap:"1rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},title:{fontSize:"1.5rem",fontWeight:700,color:"#202223",margin:0},actions:{display:"flex",gap:"1rem",alignItems:"center"},badge:{background:"#dfe3e8",color:"#202223",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:600},iconBtn:{background:"white",border:"1px solid #e1e3e5",borderRadius:"4px",padding:"0.5rem",cursor:"pointer",color:"#5c5f62"},diagnosticBanner:{background:"#e3f1df",color:"#008060",padding:"0.75rem 1rem",borderRadius:"4px",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"1px solid #1a1a1a0d"},card:{background:"white",borderRadius:"8px",boxShadow:"0 0 0 1px rgba(63, 63, 68, 0.05), 0 1px 3px 0 rgba(63, 63, 68, 0.15)",overflow:"hidden"},table:{width:"100%",borderCollapse:"collapse",textAlign:"left"},theadRow:{background:"#f9fafb",borderBottom:"1px solid #e1e3e5"},th:{padding:"1rem",fontSize:"0.8rem",fontWeight:600,color:"#6d7175",textTransform:"uppercase"},tr:{borderBottom:"1px solid #e1e3e5"},td:{padding:"1rem",fontSize:"0.9rem",color:"#202223"},nameText:{fontWeight:600},actionLink:{background:"none",border:"none",color:"#008060",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",textDecoration:"underline"},centerBox:{padding:"4rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},primaryBtn:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#008060",color:"white",border:"none",borderRadius:"4px",fontWeight:600,cursor:"pointer"},errorBox:{padding:"2rem",background:"#fff4f4",border:"1px solid #eecaca",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",color:"#8f2316"},errorTitle:{marginTop:"1rem",fontSize:"1.2rem"},errorDesc:{opacity:.8}},nT=({onClose:t,showAlert:e,onEditLesson:n,initialSection:r="users"})=>{var E;const{user:i}=Io(),[s,o]=R.useState(r),[a,l]=R.useState(""),[d,h]=R.useState(null),[f,p]=R.useState(null),g=v=>{o(v),p(null)},w=()=>{var v;try{p(null);const x=k9(a),j=x.questions||x.cards||[];if(!x.title&&j.length===0&&(((v=x.sections)==null?void 0:v.length)||0)===0)throw new Error("Could not find any valid lesson data in the paste.");h(x),e("Content processed successfully!")}catch(x){p(x.message)}},_=()=>{if(d&&n){const v={...d,questions:d.questions||d.cards||[],id:`draft-${Date.now()}`,isPublic:!0,owner:i==null?void 0:i.email};n(v),t()}},P=d?d.questions||d.cards||[]:[];return u.jsx(kU,{children:u.jsxs(RU,{activeSection:s,onNavigate:g,onClose:t,children:[s==="users"&&u.jsx(DU,{}),s==="smart_paste"&&u.jsxs("div",{style:jt.card,children:[u.jsx("h2",{style:jt.cardTitle,children:"Smart Paste (New Schema Support)"}),u.jsx("p",{style:jt.cardDesc,children:"Paste lesson JSON following the new hierarchical schema (sections, noteSegments, etc.). The system will automatically recognize the structure."}),u.jsxs("div",{style:jt.pasteWrapper,children:[u.jsx("textarea",{style:jt.textarea,placeholder:"Paste JSON here...",value:a,onChange:v=>l(v.target.value)}),u.jsxs("div",{style:jt.pasteActions,children:[u.jsxs("button",{onClick:w,style:jt.primaryBtn,disabled:!a.trim(),children:[u.jsx(z8,{size:16,style:{marginRight:"8px"}}),"Analyze & Process"]}),a&&u.jsx("button",{onClick:()=>{l(""),h(null)},style:jt.secondaryBtn,children:"Clear"})]})]}),f&&u.jsxs("div",{style:jt.errorBanner,children:[u.jsx(av,{size:18}),u.jsx("span",{children:f})]}),d&&u.jsxs("div",{style:jt.previewBox,children:[u.jsxs("div",{style:jt.previewHeader,children:[u.jsx(vo,{size:18,color:"#008060"}),u.jsx("h3",{style:jt.previewTitle,children:"Analysis Complete"})]}),u.jsxs("div",{style:jt.metaGrid,children:[u.jsx(No,{label:"Title",value:d.title}),u.jsx(No,{label:"Subject",value:d.subject}),u.jsx(No,{label:"Standard",value:d.standard}),u.jsx(No,{label:"Syllabus",value:d.syllabus}),u.jsx(No,{label:"Questions",value:P.length}),u.jsx(No,{label:"Sections",value:(E=d.sections)==null?void 0:E.length})]}),u.jsxs("button",{onClick:_,style:jt.editBtn,children:[u.jsx(X8,{size:16}),"Open in Lesson Editor"]})]})]}),s==="prompts"&&u.jsxs("div",{style:jt.card,children:[u.jsx("h2",{style:jt.cardTitle,children:"Prompt Library"}),u.jsx("p",{children:"Manage system prompts for AI generation."})]})]})})},No=({label:t,value:e})=>u.jsxs("div",{style:jt.metaItem,children:[u.jsxs("span",{style:jt.metaLabel,children:[t,":"]}),u.jsx("span",{style:jt.metaValue,children:e||"N/A"})]}),jt={card:{background:"white",padding:"2rem",borderRadius:"8px",border:"1px solid #e1e3e5",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},cardTitle:{marginBottom:"0.5rem",fontSize:"1.25rem",fontWeight:600,color:"#202223"},cardDesc:{marginBottom:"1.5rem",fontSize:"0.9rem",color:"#6d7175"},pasteWrapper:{display:"flex",flexDirection:"column",gap:"1rem"},textarea:{width:"100%",height:"200px",padding:"1rem",borderRadius:"4px",border:"1.5px solid #dcdfe3",fontFamily:"monospace",fontSize:"0.85rem",outline:"none",resize:"vertical"},pasteActions:{display:"flex",gap:"1rem"},primaryBtn:{padding:"0.75rem 1.5rem",background:"#008060",color:"white",border:"none",borderRadius:"4px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center"},secondaryBtn:{padding:"0.75rem 1rem",background:"transparent",color:"#5c5f62",border:"1px solid #c9cccf",borderRadius:"4px",cursor:"pointer"},errorBanner:{marginTop:"1rem",padding:"1rem",background:"#fff4f4",color:"#8f2316",borderRadius:"4px",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.9rem"},previewBox:{marginTop:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e1e3e5"},previewHeader:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},previewTitle:{margin:0,fontSize:"1rem",fontWeight:600,color:"#008060"},metaGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},metaItem:{display:"flex",flexDirection:"column",gap:"0.25rem"},metaLabel:{fontSize:"0.75rem",fontWeight:600,color:"#6d7175",textTransform:"uppercase"},metaValue:{fontSize:"0.95rem",fontWeight:500,color:"#202223"},editBtn:{width:"100%",padding:"0.75rem",background:"white",color:"#2c6ecb",border:"1px solid #2c6ecb",borderRadius:"4px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},VU=({onLogin:t,onCancel:e,cardsReviewed:n,totalCards:r})=>u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(255,255,255,0.01)",zIndex:2001,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",overflowY:"auto"},children:u.jsxs(Ue.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"neo-flat",style:{width:"100%",maxWidth:"420px",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.5rem",textAlign:"center",position:"relative",maxHeight:"95vh",overflowY:"auto"},children:[u.jsx(Gn,{onClick:e,style:{position:"absolute",top:"10px",right:"10px",zIndex:10},size:18}),u.jsxs("div",{children:[u.jsx("div",{className:"neo-inset",style:{width:"60px",height:"60px",borderRadius:"50%",margin:"0 auto 1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(Og,{size:32})}),u.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"0.3rem"},children:"Great Progress!"}),u.jsxs("p",{style:{opacity:.7,fontSize:"0.95rem"},children:["You've reviewed ",n," of ",r," cards in preview mode."]})]}),u.jsxs("div",{className:"neo-inset",style:{padding:"1.2rem",borderRadius:"16px",textAlign:"left",display:"flex",flexDirection:"column",gap:"0.8rem"},children:[u.jsx("p",{style:{fontWeight:"bold",fontSize:"1rem",marginBottom:"0.2rem"},children:"Sign in to unlock:"}),u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.8rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"6px",borderRadius:"8px",flexShrink:0,color:"var(--accent-color)"},children:u.jsx(l9,{size:16})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Spaced Repetition"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:"Remember longer with smart review scheduling"})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.8rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"6px",borderRadius:"8px",flexShrink:0,color:"var(--accent-color)"},children:u.jsx(s9,{size:16})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Progress Tracking"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:"Track your marks and review history"})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.8rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"6px",borderRadius:"8px",flexShrink:0,color:"var(--accent-color)"},children:u.jsx(UC,{size:16})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Continue Reviewing"}),u.jsxs("div",{style:{fontSize:"0.8rem",opacity:.7},children:["Complete all ",r," cards and save to your collection"]})]})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginTop:"auto"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:t,style:{width:"100%",justifyContent:"center",padding:"1rem",background:"var(--accent-color)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",gap:"0.5rem",minHeight:"50px"},children:[u.jsx(Og,{size:18}),"Sign in with Google"]}),u.jsx("button",{className:"neo-button",onClick:e,style:{width:"100%",justifyContent:"center",padding:"0.8rem",opacity:.7},children:"Exit Preview"})]})]})}),OU=({lesson:t,user:e,onStart:n,onClose:r,onEdit:i,onDelete:s,showConfirm:o})=>{const a=R.useRef(null),l=e&&(t.ownedByMe||e.email===Si);return!t||!t.importantNote?null:(R.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[t]),u.jsxs(Ue.div,{ref:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"var(--bg-color)",zIndex:1500,display:"flex",flexDirection:"column",padding:window.innerWidth<768?"1rem":"2rem",overflowY:"auto",overscrollBehavior:"contain"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexShrink:0},children:[u.jsx("h2",{style:{fontSize:window.innerWidth<768?"1.5rem":"1.8rem",margin:0},children:"Important Note"}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"neo-button icon-btn",onClick:()=>o(`Delete "${t.title}"?`,s),title:"Delete Lesson",style:{color:"#ef4444"},children:u.jsx(fi,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:i,title:"Edit Lesson",children:u.jsx(cv,{size:20})})]}),u.jsx(Gn,{onClick:r,size:20})]})]}),u.jsx("div",{className:"neo-inset",style:{flex:1,padding:window.innerWidth<768?"1.25rem":"2rem",whiteSpace:"pre-wrap",fontSize:window.innerWidth<768?"1rem":"1.1rem",lineHeight:"1.6",color:"var(--text-color)",marginBottom:"8rem",borderRadius:"16px"},children:t.importantNote}),u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:n,style:{position:"fixed",bottom:"2rem",left:"50%",transform:"translateX(-50%)",padding:"1rem 2.5rem",fontSize:"1.2rem",background:"var(--accent-color)",color:"white",border:"none",borderRadius:"50px",display:"flex",alignItems:"center",gap:"10px",zIndex:1600,boxShadow:"0 4px 15px rgba(0,0,0,0.3)",width:"max-content",maxWidth:"90%"},children:[u.jsx(kf,{size:24,fill:"currentColor"}),"Start Review"]})]}))},FU=({onSave:t})=>{const[e,n]=R.useState(""),r=i=>{i.preventDefault(),e.trim()&&t(e.trim())};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:u.jsxs(Ue.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"400px",padding:"2.5rem",textAlign:"center",display:"flex",flexDirection:"column",gap:"2rem"},children:[u.jsxs("div",{children:[u.jsx("div",{className:"neo-inset",style:{width:"64px",height:"64px",borderRadius:"50%",margin:"0 auto 1.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(vd,{size:32})}),u.jsx("h2",{style:{fontSize:"1.8rem",marginBottom:"0.5rem"},children:"Welcome, Friend!"}),u.jsx("p",{style:{opacity:.6},children:"I want to be your well-wisher on this learning journey. What should I call you?"})]}),u.jsxs("form",{onSubmit:r,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsx("div",{className:"neo-inset",style:{padding:"4px 15px",borderRadius:"12px",display:"flex",alignItems:"center"},children:u.jsx("input",{autoFocus:!0,type:"text",value:e,onChange:i=>n(i.target.value),placeholder:"Your name...",style:{width:"100%",padding:"12px 5px",background:"transparent",border:"none",fontSize:"1.1rem",color:"inherit",outline:"none"}})}),u.jsxs("button",{type:"submit",disabled:!e.trim(),className:"neo-button neo-glow-blue",style:{padding:"1.2rem",justifyContent:"center",gap:"0.8rem",background:"var(--accent-color)",color:"white",opacity:e.trim()?1:.5},children:[u.jsx(vo,{size:20}),"Get Started"]})]})]})})},UU=({user:t,lessons:e,publicLessons:n,userProfile:r,activeLesson:i,reviewLesson:s,noteLesson:o,theme:a,onToggleTheme:l,soundsEnabled:d,onToggleSounds:h,onLogout:f,onDeleteData:p,onShowTour:g,onSaveLesson:w,onDeleteLesson:_,onImportLesson:P,onUpdateCoins:E,isUnlimited:v,onLoginRequired:x,signIn:j,previewSession:L,onReviewStart:O,handleEditLesson:S,handleReviewLaunch:T,activeTab:C,fetchPublicLessons:A,fetchLessons:k,ADMIN_EMAIL:N,APP_VERSION:I,showNotification:Y,setUserProfile:me,saveUserProfile:oe,refreshProfile:X})=>{var de,ye,Se,ge,Ae;const{modals:z,toggleModal:H,setReviewLesson:M,setNoteLesson:D,setActiveLesson:q}=Af(),{isActive:Q,endTour:J,startTour:re}=nu(),Z=()=>{M(null),D(null),H("showAddModal",!1)},G=Qr.useRef({});return Qr.useEffect(()=>{const F=["showMenu","showCoinModal","showReferral","showAdminPanel"];let ee=!1;F.forEach(Fe=>{const Ge=z[Fe],Re=G.current[Fe];Ge&&!Re&&(ee=!0)}),G.current={...z},ee&&X&&(console.log("[ModalRegistry] Syncing profile on modal open."),X())},[z,X]),u.jsxs(In,{children:[z.showMenu&&u.jsx(C9,{user:t,theme:a,onToggleTheme:l,soundsEnabled:d,onToggleSounds:h,onShowFeedback:()=>{H("showMenu",!1),window.history.pushState({modal:"active"},"",window.location.pathname),H("showFeedback",!0)},onShowReferral:()=>{H("showMenu",!1),window.history.pushState({modal:"active"},"",window.location.pathname),H("showReferral",!0)},onClose:()=>H("showMenu",!1),onLogout:f,onLogin:()=>{H("showMenu",!1),j("consent")},onDeleteData:p,onShowAdminPanel:()=>{H("showMenu",!1),window.history.pushState({modal:"active"},"",window.location.pathname),H("showAdminPanel",!0)},onShowTour:()=>{H("showMenu",!1),J(),setTimeout(()=>re(),300)},appVersion:I}),z.showAddModal&&u.jsx(A9,{user:t,lesson:i,onClose:()=>window.history.back(),onSave:w,onDelete:_,showAlert:F=>Y("alert",F),showConfirm:(F,ee)=>Y("confirm",F,ee),availableLabels:[...new Set(e.map(F=>F.label).filter(F=>F))],allLessons:e,activeTab:C}),s&&u.jsx(G9,{lesson:s,user:t,onClose:Z,onUpdate:F=>w(F,!1),onEdit:()=>{S(s),M(null)},showAlert:F=>typeof F=="string"?Y("alert",F):Y(F.type,F.message,F.onConfirm),userCoins:(r==null?void 0:r.coins)||0,onDeductCoins:F=>{v||E(((r==null?void 0:r.coins)||0)-F)},isPreviewMode:!t&&s.isPublic,onLoginRequired:x,previewProgress:L,isUnlimited:v,onReviewStart:O,displayName:r==null?void 0:r.displayName}),o&&u.jsx(OU,{lesson:o,user:t,onStart:()=>{M(o),D(null)},onClose:()=>window.history.back(),onEdit:()=>{S(o),D(null)},onDelete:()=>_(o),showConfirm:(F,ee)=>Y("confirm",F,ee)}),z.showFeedback&&u.jsx(K9,{user:t,onClose:()=>window.history.back(),showAlert:F=>Y("alert",F)}),z.showKnowMore&&u.jsx(Q9,{isOpen:z.showKnowMore,onClose:()=>window.history.back(),onLogin:()=>{H("showKnowMore",!1),x(null)}}),z.showCoinModal&&u.jsx(bU,{user:t,userCoins:(r==null?void 0:r.coins)||0,onClose:()=>window.history.back(),onShare:()=>{H("showCoinModal",!1),window.history.pushState({modal:"active"},"",window.location.pathname),H("showReferral",!0)},onShowFeedback:()=>{H("showCoinModal",!1),window.history.pushState({modal:"active"},"",window.location.pathname),H("showFeedback",!0)}}),z.showReferral&&u.jsx(IU,{user:t,userProfile:r,onClose:()=>window.history.back(),onUpdateProfile:F=>{me(F),oe(t.token,F)},showAlert:F=>Y("alert",F),onShowFeedback:()=>{H("showReferral",!1),window.history.pushState({modal:"active"},"",window.location.pathname),H("showFeedback",!0)}}),z.showAdminPanel&&u.jsx(nT,{user:t,onClose:()=>window.history.back(),publicLessons:n,onRefreshPublic:A,showAlert:F=>Y("alert",F),showConfirm:(F,ee)=>Y("confirm",F,ee),onEditLesson:S}),z.showAdminQuickTools&&u.jsx(nT,{user:t,onClose:()=>H("showAdminQuickTools",!1),publicLessons:n,onRefreshPublic:A,showAlert:F=>Y("alert",F),showConfirm:(F,ee)=>Y("confirm",F,ee),onEditLesson:S,initialSection:"smart_paste"}),z.showLoginPrompt&&L&&u.jsx(VU,{onLogin:()=>{H("showLoginPrompt",!1),x(null)},onCancel:()=>{H("showLoginPrompt",!1),Z()},questionsReviewed:((de=L.sessionRatings)==null?void 0:de.length)||0,totalQuestions:((Se=(ye=L.lesson)==null?void 0:ye.questions)==null?void 0:Se.length)||((Ae=(ge=L.lesson)==null?void 0:ge.cards)==null?void 0:Ae.length)||0}),z.showNamePrompt&&!Q&&u.jsx(FU,{onSave:async F=>{const ee={...r,displayName:F};me(ee),H("showNamePrompt",!1),await oe(t.token,ee)}})]})},zU=()=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,n=e.createOscillator(),r=e.createGain();n.connect(r),r.connect(e.destination),n.type="sine",n.frequency.setValueAtTime(1200,e.currentTime),n.frequency.exponentialRampToValueAtTime(1800,e.currentTime+.1),r.gain.setValueAtTime(.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.6),n.start(),n.stop(e.currentTime+.6)}catch(t){console.error("Audio play failed",t)}},BU=()=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,n=[523.25,659.25,783.99,1046.5];let r=e.currentTime;n.forEach((i,s)=>{const o=e.createOscillator(),a=e.createGain();o.connect(a),a.connect(e.destination),o.type="triangle",o.frequency.value=i,a.gain.setValueAtTime(.1,r),a.gain.exponentialRampToValueAtTime(.01,r+.5),o.start(r),o.stop(r+.5),r+=.1})}catch(t){console.error("Celebration audio failed",t)}},$U=({color:t})=>u.jsx("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%",fill:t},children:u.jsx("circle",{cx:"50",cy:"50",r:"40"})}),WU=({color:t})=>u.jsx("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%",fill:t},children:u.jsx("path",{d:"M50 15 L90 85 L10 85 Z"})}),qU=({color:t})=>u.jsxs("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%",fill:t},children:[u.jsx("rect",{x:"35",y:"10",width:"30",height:"80",rx:"5"}),u.jsx("rect",{x:"10",y:"35",width:"80",height:"30",rx:"5"})]}),HU=({amount:t,onClose:e,type:n="Daily Login"})=>{const[r,i]=R.useState(0);R.useEffect(()=>{BU();const l=setTimeout(()=>{zU()},200);let d=0;const h=parseInt(t,10)||0;if(d===h){i(h);return}const f=1e3,p=performance.now(),g=w=>{const _=w-p,P=Math.min(_/f,1),E=1-Math.pow(1-P,4);i(Math.floor(d+(h-d)*E)),P<1&&requestAnimationFrame(g)};return requestAnimationFrame(g),()=>clearTimeout(l)},[t]);const s=12,o=["#FBBF24","#3B82F6","#EF4444","#10B981"],a=180;return u.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",backdropFilter:"blur(4px)",background:"rgba(0,0,0,0.3)"},onClick:e,children:u.jsxs("div",{style:{position:"relative"},onClick:l=>l.stopPropagation(),children:[u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:0,height:0,pointerEvents:"none"},children:[...Array(s)].map((l,d)=>{const h=d/s*360,f=[$U,WU,qU][d%3];return u.jsx(Ue.div,{style:{position:"absolute",width:"32px",height:"32px"},initial:{x:0,y:0,scale:0,rotate:0},animate:{x:Math.cos(h*Math.PI/180)*a,y:Math.sin(h*Math.PI/180)*a,scale:[0,1.2,0],rotate:[0,180,360],opacity:[1,1,0]},transition:{duration:1.5,ease:"easeOut",delay:.1},children:u.jsx(f,{color:o[d%o.length]})},d)})}),u.jsxs(Ue.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:15},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",textAlign:"center"},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ue.div,{animate:{y:[-10,10,-10],rotateY:[0,180,360]},transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},rotateY:{duration:4,repeat:1/0,ease:"linear"}},style:{width:"120px",height:"120px",background:"linear-gradient(135deg, #fbbf24, #d97706)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"4px solid #fef3c7",boxShadow:"0 10px 25px rgba(217, 119, 6, 0.4), inset 0 2px 5px rgba(255, 255, 255, 0.5)",position:"relative",zIndex:2},children:u.jsx(Cf,{size:60,color:"white"})}),u.jsx("div",{style:{position:"absolute",inset:"-20px",background:"radial-gradient(circle, rgba(251, 191, 36, 0.4) 0%, transparent 70%)",borderRadius:"50%",zIndex:1}})]}),u.jsxs("div",{children:[u.jsx(Ue.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},style:{color:"white",fontSize:"1.5rem",fontWeight:"900",textTransform:"uppercase",letterSpacing:"2px",textShadow:"0 2px 10px rgba(0,0,0,0.5)",marginBottom:"0.5rem"},children:n}),u.jsxs(Ue.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring"},style:{color:"#fbbf24",fontSize:"4rem",fontWeight:"900",textShadow:"0 4px 15px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:["+",r]})]}),u.jsxs(Ue.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,style:{background:"white",border:"none",borderRadius:"50px",padding:"1rem 3rem",fontSize:"1.2rem",fontWeight:"800",color:"#d97706",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",boxShadow:"0 10px 20px rgba(0,0,0,0.2), 0 5px 0 #e5e7eb",marginTop:"1rem"},children:[u.jsx(vo,{size:24,strokeWidth:3}),"CONTINUE"]})]}),u.jsx("button",{onClick:e,style:{position:"absolute",top:"-4rem",right:"0",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"white",padding:"0.5rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)",transition:"background 0.2s"},onMouseEnter:l=>l.currentTarget.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:l=>l.currentTarget.style.background="rgba(255, 255, 255, 0.1)",children:u.jsx(_r,{size:24})})]})})},GU=({onStartDemo:t,onGoToMyLessons:e,userName:n,onLogin:r,onAddLesson:i})=>{const{isActive:s,currentStep:o,nextStep:a,setStep:l,endTour:d,isDemoGracePeriod:h}=nu(),[f,p]=R.useState(null),[g,w]=R.useState(window.innerWidth<768);R.useRef(null),R.useEffect(()=>{const S=()=>w(window.innerWidth<768);return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const _=R.useMemo(()=>[{id:1,targetId:null,mobilePos:{bottom:"20px",left:0,right:0,margin:"0 auto",width:"90%"},desktopPos:{bottom:"50px",left:"50px"},text:`Welcome${n?" "+n:""}! Im Chethan.
Im here to guide you through a more efficient way to learn and retain information.`,actionLabel:"Begin Tour",layout:"duo-card",canSkip:!0},{id:2,targetId:null,mobilePos:{bottom:"20px",left:0,right:0,margin:"0 auto",width:"90%"},desktopPos:{bottom:"20px",left:"20px"},text:"Your progress and lessons are stored securely in your personal Google Drive, ensuring your data remains private and under your exclusive control.",actionLabel:"Sign in with Google",onAction:r,layout:"duo-card",isLoginStep:!0,canSkip:!0,onSkip:()=>l(3),extraContent:u.jsxs("div",{style:{marginTop:"12px",padding:"14px",background:"var(--accent-soft)",borderRadius:"16px",border:"1px solid var(--tour-border)",fontSize:"0.85rem",color:"var(--tour-text)",textAlign:"left"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontWeight:"700"},children:[u.jsx("div",{style:{background:"var(--accent-color)",color:"white",width:"22px",height:"22px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},children:"!"}),"Setup Requirement"]}),"To enable synchronization, please ensure you ",u.jsx("strong",{children:"check the permission box"})," during sign-in."]})},{id:3,targetId:"tab-lessons",text:"Explore our collection of professionally curated lessons. You can easily add any of these to your personal library.",actionLabel:"Next",layout:"tooltip",placement:"bottom",canSkip:!0},{id:4,targetId:"lesson-card-demo-lesson",text:"This is a sample lesson. We recommend starting here to experience our active recall methodology first-hand.",actionLabel:"Launch Demo",actionIcon:u.jsx(kf,{size:16,fill:"white"}),onAction:t,layout:"tooltip",placement:"top",canSkip:!0,onSkip:()=>l(6)},{id:5,targetId:"lesson-card-demo-lesson",highlightId:"next-review-indicator-demo-lesson",text:"Our intelligent algorithm calculates the optimal moment for your next review to ensure long-term retention.",actionLabel:"Continue",layout:"tooltip",placement:"bottom",canSkip:!0},{id:6,targetId:"fab-add-lesson",text:"Ready to create your own? Click the '+' button to start building your personal lesson.",onAction:()=>{i==null||i(),a()},layout:"tooltip",placement:"top",canSkip:!0},{id:7,targetId:"lesson-modal-title-input",text:"Give your lesson a catchy title and start adding questions. You can use text, images, and even voice recordings!",actionLabel:"Got it",layout:"tooltip",placement:"bottom",canSkip:!1},{id:8,targetId:null,text:"You are now fully equipped for success. Start creating your own personalized lessons whenever you're ready.",actionLabel:"Get Started",onAction:e,layout:"duo-card",isFinalAction:!0,canSkip:!1}],[n,r,t,e,l,g,i]),P=_.findIndex(S=>S.id===o),E=_[P]||_[0];R.useEffect(()=>{if(!s)return;const S=()=>{if(E.targetId){const C=document.getElementById(E.targetId),k=(E.highlightId?document.getElementById(E.highlightId):null)||C;if(k){const N=k.getBoundingClientRect();p(N),N.top>=0&&N.left>=0&&N.bottom<=window.innerHeight&&N.right<=window.innerWidth||k.scrollIntoView({behavior:"smooth",block:"center"})}else p(null)}else p(null)};S(),window.addEventListener("resize",S),window.addEventListener("scroll",S);const T=setInterval(S,500);return()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S),clearInterval(T)}},[o,E,s]);const v=()=>{E.onAction?E.onAction():E.isFinalAction?d():a()},x=S=>{S.stopPropagation(),E.onSkip?E.onSkip():a()};if(!s)return null;const j=()=>{const S=window.innerWidth,T=window.innerHeight,C=S<768;let A=C?Math.min(S-32,340):E.layout==="duo-card"?550:380;const k=16,N=16,I={position:"fixed",width:A,zIndex:"var(--tour-z-index)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"};if(!f)return{...I,left:(S-A)/2,top:C?"auto":(T-200)/2,bottom:C?"24px":"auto",maxWidth:`calc(100vw - ${k*2}px)`};const Y=f.left+f.width/2,me=f.top+f.height/2;let oe=E.placement||"bottom";return C&&((oe==="left"||oe==="right")&&(oe=f.top>T/2?"top":"bottom"),oe==="bottom"&&f.bottom+220>T&&(oe="top"),oe==="top"&&f.top<220&&(oe="bottom")),oe==="top"?(I.left=Y-A/2,I.bottom=T-f.top+N):oe==="bottom"?(I.left=Y-A/2,I.top=f.bottom+N):oe==="left"?(I.left=f.left-A-N,I.top=me-100):(I.left=f.right+N,I.top=me-100),I.left<k?I.left=k:I.left+A>S-k&&(I.left=S-A-k),I.top!==void 0?I.top<k?I.top=k:I.top+200>T&&(I.top=T-200-k):I.bottom!==void 0&&I.bottom<k&&(I.bottom=k),I.activePlacement=oe,I.arrowLeft=Y-I.left,I};if(!s||h)return null;const L=j(),O=g&&E.mobilePos?E.mobilePos:!g&&E.desktopPos?E.desktopPos:L;return u.jsxs("div",{className:"feature-tour-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:"var(--tour-z-index)",pointerEvents:"none"},children:[u.jsx(In,{children:!E.targetId&&u.jsx(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",inset:0,background:"var(--tour-overlay-bg)",backdropFilter:"blur(4px)",pointerEvents:"auto"}})}),u.jsx(In,{mode:"wait",children:u.jsx(Ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},style:{position:"fixed",display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"auto",...O},children:u.jsxs("div",{className:"neo-flat tour-glass",style:{background:"var(--tour-bg)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",color:"var(--tour-text)",borderRadius:"24px",border:"1px solid var(--tour-border)",padding:"1.25rem",display:"flex",flexDirection:g?"column":"row",alignItems:"center",gap:"1.25rem",overflow:"hidden",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1)",width:"100%",position:"relative"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minWidth:g?"60px":E.layout==="duo-card"?"140px":"90px",width:g?"60px":E.layout==="duo-card"?"140px":"90px",flexShrink:0},children:u.jsx("img",{src:Sh,alt:"Guide",style:{width:"100%",height:"auto",maxWidth:"120px"}})}),u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.75rem",textAlign:"left"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"8px"},children:[u.jsx("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:"1.6",fontWeight:"600",whiteSpace:"pre-line"},children:E.text}),u.jsx("button",{onClick:d,style:{background:"none",border:"none",color:"var(--tour-text-muted)",cursor:"pointer",padding:4,flexShrink:0},children:u.jsx(_r,{size:18})})]}),E.extraContent,u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"4px"},children:[E.canSkip&&u.jsx("button",{onClick:x,style:{padding:"0.6rem 1rem",background:"transparent",color:"var(--tour-text-muted)",fontWeight:"600",borderRadius:"12px",border:"1px solid var(--tour-border)",fontSize:"0.85rem"},children:"Skip"}),u.jsxs("button",{onClick:v,style:{flex:2,padding:"0.6rem 1.25rem",background:"var(--tour-accent)",color:"white",fontWeight:"700",borderRadius:"12px",boxShadow:"0 4px 0 var(--tour-accent-dark)",border:"none",fontSize:"0.9rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"},children:[E.isLoginStep&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"18px",height:"18px",style:{flexShrink:0},children:[u.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),u.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),u.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),u.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C40.483,35.58,44,30.2,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),E.actionLabel,E.actionIcon||u.jsx(FC,{size:16})]})]})]}),E.targetId&&L.activePlacement&&(L.activePlacement==="top"||L.activePlacement==="bottom")&&u.jsx("div",{style:{position:"absolute",[L.activePlacement==="top"?"bottom":"top"]:"-8px",left:`${L.arrowLeft}px`,transform:"translateX(-50%)",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",[L.activePlacement==="top"?"borderTop":"borderBottom"]:"8px solid var(--tour-bg)",zIndex:1}})]})},o)})]})},KU=()=>{const{user:t,signIn:e,signOut:n}=Io(),{handleUpdateLocalLesson:r,deleteLesson:i,fetchLessons:s,fetchPublicLessons:o,lessons:a,setPublicLessons:l,publicLessons:d,setLessons:h}=YC(),{toggleModal:f,setReviewLesson:p,setNoteLesson:g,showNotification:w,setActiveLesson:_,showToast:P,modals:E,setHeaderLoading:v}=Af(),{queuePostTourEvent:x,endTour:j}=nu(),L=async(k,N,I,Y)=>{var me,oe;v(!0);try{if(N>0){if(!(t!=null&&t.uid))throw new Error("User must be logged in to purchase.");console.log("[AppActions] Initiating purchase transaction for:",k.title);const Q=k.id;await es.purchaseLesson(t.uid,Q,N),console.log("[AppActions] Purchase successful. Entitlement granted.")}let X={...k};console.log("[AppActions] Starting import for:",k.title);const z=X.questions||X.cards||[];if(X.isPublic&&z.length===0){const{getPublicFileContent:Q}=await Vr(()=>import("./publicDrive-f10d2c1b.js"),[]),J=X.storagePath||X.driveFileId||X.id;console.log("[AppActions] Fetching full content from:",J);const re=await Q(J);if(re){let Z=null;if(typeof re=="string"){const{decryptionService:de}=await Vr(()=>import("./decryptionService-9085ead7.js"),[]);console.log("[AppActions] Requesting server-side decryption...");const ye=await((me=dr.currentUser)==null?void 0:me.getIdToken());if(!ye)throw console.error("[AppActions] Authentication Check Failed: auth.currentUser is null. Please refresh the page or sign in again."),new Error("User must be authenticated to decrypt lessons.");const Se=X.lessonId||X.id,ge=await de.decryptPublicLesson(re,Se,ye);Z=Qp(ge),console.log("[AppActions] Server decryption successful. Normalized questions:",(oe=Z.questions)==null?void 0:oe.length)}else Z=re;X={...X,...Z,isPublic:!0};const G=X.questions||X.cards||[];if(console.log("[AppActions] Merged content. Questions count:",G.length),G.length===0)throw new Error("Imported lesson contains no questions.")}else throw new Error("Could not fetch lesson questions for import.")}const M=(X.questions||X.cards||[]).length,D={...X,id:Date.now().toString(),driveFileId:null,isPublic:!1,source:"local",isLocal:!0,cost:0,questionCount:M};console.log("[AppActions] Saving imported lesson as new local lesson. Questions:",M);const q=await Ji.saveLesson(D);N>0&&Y&&Y(((I==null?void 0:I.coins)||0)-N),r({...D,driveFileId:q.driveFileId||q.id}),w("alert",N>0?`Purchased "${k.title}"!`:`Added "${k.title}"!`)}catch(X){console.error("[AppActions] Import/Purchase failed:",X),w("alert",`Operation failed: ${X.message}`)}finally{v(!1)}},O=R.useCallback(async(k,N,I)=>{if(!t){x(()=>O(k,N,I)),e();return}const Y=k.cost||0;if(Y>0&&((N==null?void 0:N.coins)||0)<Y){w("alert",`Not enough coins! You need ${Y} coins.`);return}const me=()=>{L(k,Y,N,I)};Y>0?w("confirm",`Buy "${k.title}" for ${Y} coins?`,me):me()},[t,x,e,w]),S=R.useCallback(k=>{h(I=>I.filter(Y=>Y.id!==k.id));let N=!1;P({message:`Deleted "${k.title}"`,type:"undo",duration:4e3,onUndo:()=>{N=!0,h(I=>[...I,k])},onClose:()=>{N||i(k)}}),f("showAddModal",!1),p(null),g(null)},[i,f,p,g,h,P]),T=R.useCallback(async k=>{if(t&&window.confirm("Are you sure? This will delete ALL your lessons. This cannot be undone."))try{const N=a.filter(I=>I.driveFileId&&!I.isPublic);for(const I of N)await i(I);w("alert","All local data deleted."),k(),n()}catch(N){w("alert",`Cleanup partially failed: ${N.message}`)}finally{f("showMenu",!1)}},[t,a,i,n,w,f]),C=R.useCallback(async(k,N=null)=>{var me,oe,X;let I=k;const Y=I.questions||I.cards||[];if(I.isPublic&&!I.isLocal&&Y.length===0)try{const{getPublicFileContent:z}=await Vr(()=>import("./publicDrive-f10d2c1b.js"),[]),H=I.storagePath||I.driveFileId||I.id,M=await z(H);if(M){let D=null;if(typeof M=="string"){const{decryptionService:q}=await Vr(()=>import("./decryptionService-9085ead7.js"),[]),Q=await((me=dr.currentUser)==null?void 0:me.getIdToken());if(!Q){w("alert","Please sign in to edit this lesson.");return}const J=I.lessonId||I.id,re=await q.decryptPublicLesson(M,J,Q);D=Qp(re)}else D=M;if(D&&(((oe=D.questions)==null?void 0:oe.length)>0||((X=D.cards)==null?void 0:X.length)>0))I={...I,...D,isPublic:!0},l(q=>q.map(Q=>Q.id===k.id?I:Q));else throw new Error("Decrypted content has no questions.")}}catch(z){console.error("[AppActions] Failed to fetch full content for edit:",z),w("alert","Failed to load lesson for editing.");return}_(I),window.history.pushState({modal:"active"},"",window.location.pathname),f("showAddModal",!0)},[t,l,_,f,w]),A=R.useCallback(async k=>{var Y;let N=k;if((N.questions||N.cards||[]).length===0&&N.isPublic&&!N.isLocal)try{const{getPublicFileContent:me}=await Vr(()=>import("./publicDrive-f10d2c1b.js"),[]),oe=N.driveFileId||N.storagePath||N.id,X=await me(oe);if(X){let z=null;if(typeof X=="string"){if(!z&&X.startsWith("v1:")){const{decryptionService:H}=await Vr(()=>import("./decryptionService-9085ead7.js"),[]),M=await((Y=dr.currentUser)==null?void 0:Y.getIdToken());if(M){const D=N.lessonId||N.id,q=await H.decryptPublicLesson(X,D,M);z=Qp(q)}else{console.warn("[AppActions] Cannot decrypt for review: User not authenticated"),w("alert","Please sign in to view this lesson.");return}}z||(z={})}else z=X;N={...N,...z}}}catch(me){console.error("[AppActions] Failed to fetch full content for review:",me),w("alert","Failed to open.");return}N.importantNote?g(N):p(N)},[t,w,g,p]);return{handleImportLesson:O,handleDeleteLesson:S,handleDeleteAllData:T,handleEditLesson:C,handleReviewLaunch:A}},QU=()=>{const{user:t,signIn:e,signOut:n}=Io(),{allowExit:r}=w9(!!t),{lessons:i,setLessons:s,publicLessons:o,setPublicLessons:a,loading:l,publicLoading:d,fetchLessons:h,fetchPublicLessons:f,handleUpdateLocalLesson:p}=YC(),{modals:g,toggleModal:w,activeLesson:_,setActiveLesson:P,reviewLesson:E,setReviewLesson:v,noteLesson:x,setNoteLesson:j,showNotification:L,headerLoading:O}=Af(),{isActive:S,currentStep:T,setStep:C,startTour:A,endTour:k,isDemoGracePeriod:N,setIsDemoGracePeriod:I}=nu(),[Y,me]=R.useState(!1),[oe,X]=R.useState(null),[z,H]=R.useState(localStorage.getItem("theme")||"light"),[M,D]=R.useState("Creation Date"),[q,Q]=R.useState(null),[J,re]=R.useState(""),[Z,G]=R.useState("my-lessons"),[de,ye]=R.useState({standard:"",syllabus:"",medium:"",subject:""}),[Se,ge]=R.useState(localStorage.getItem("soundsEnabled")!=="false"),[Ae,F]=R.useState(null),[ee,Fe]=R.useState(!1),Ge=R.useCallback(Ee=>L(Ee.type,Ee.message,Ee.onConfirm),[L]),{userProfile:Re,setUserProfile:qe,handleUpdateCoins:ot,loadProfile:De,isProfileLoading:we}=v9(t,Ge,X),{handleImportLesson:Be,handleDeleteLesson:Ke,handleDeleteAllData:Et,handleEditLesson:Ot,handleReviewLaunch:St}=KU(),Ft=Y||l,qt="1.1.4";R.useEffect(()=>{const Ee=ji.get("app_version");if(Ee&&Ee!==qt){console.log(`[VersionControl] Upgrading to ${qt}.`);const $e=ji.get("theme"),bt=ji.get("soundsEnabled");ji.purge(),$e&&ji.set("theme",$e),bt&&ji.set("soundsEnabled",bt),ji.set("app_version",qt),window.location.reload(!0)}else ji.set("app_version",qt)},[]);const ht=R.useCallback(Ee=>{F(Ee),w("showLoginPrompt",!0)},[w]);R.useEffect(()=>{document.documentElement.setAttribute("data-theme",z),localStorage.setItem("theme",z)},[z]),R.useEffect(()=>{window.location.pathname.includes("/admin")&&w("showAdminPanel",!0),f(),t?(h(),w("showMenu",!1)):s([ta])},[t,h,f,s,w]),R.useEffect(()=>{S&&(T===3&&G("lessons"),T===4&&G("my-lessons"),T===2&&t&&C(3))},[S,T,t,C]),R.useEffect(()=>{N&&!E&&(I(!1),C(5),G("my-lessons"))},[E,N,C,I]),R.useEffect(()=>{const Ee=$e=>{oe?X(null):g.showLoginPrompt?w("showLoginPrompt",!1):x?j(null):g.showReferral?w("showReferral",!1):g.showFeedback?w("showFeedback",!1):g.showKnowMore?w("showKnowMore",!1):g.showAdminPanel?w("showAdminPanel",!1):g.showAdminQuickTools?w("showAdminQuickTools",!1):g.showCoinModal?w("showCoinModal",!1):g.showAddModal?w("showAddModal",!1):E?ee?(window.history.pushState({modalOpen:!0},"",window.location.pathname),L("confirm","End session?",()=>{v(null),Fe(!1),window.history.back()})):v(null):g.showMenu?w("showMenu",!1):t&&(!$e.state||$e.state.guard!=="active")&&(window.history.pushState({guard:"active"},"",window.location.pathname),L("confirm","Sign out and exit?",()=>{r(),n(),window.history.back()}))};return window.addEventListener("popstate",Ee),()=>window.removeEventListener("popstate",Ee)},[oe,g,x,E,ee,t,n,r,w,j,v,L]);const xn=R.useMemo(()=>{let Ee=q?i.filter($e=>$e.label===q):i;return J.trim()&&(Ee=Ee.filter($e=>$e.title.toLowerCase().includes(J.toLowerCase()))),[...Ee].sort(($e,bt)=>{if(S){if($e.id==="demo-lesson")return-1;if(bt.id==="demo-lesson")return 1}return(bt.id||0)-($e.id||0)})},[i,q,J,S]),dn=(Re==null?void 0:Re.unlimitedCoinsExpiry)&&new Date(Re.unlimitedCoinsExpiry).getTime()>Date.now();return u.jsxs(I9,{user:t,userProfile:Re,isUnlimited:dn,isProfileLoading:we,isAdmin:(t==null?void 0:t.email)===Si,isTourActive:S,showAdminQuickTools:g.showAdminQuickTools,onToggleAdminQuickTools:()=>{g.showAdminQuickTools||window.history.pushState({modal:"active"},"",window.location.pathname),w("showAdminQuickTools",!g.showAdminQuickTools)},onShowCoinModal:()=>{window.history.pushState({modal:"active"},"",window.location.pathname),w("showCoinModal",!0)},onShowMenu:()=>w("showMenu",!0),onAddLesson:()=>{if(!t){e("consent");return}P(null),window.history.pushState({modal:"active"},"",window.location.pathname),w("showAddModal",!0)},headerLoading:O||Ft,children:[u.jsx(S9,{activeTab:Z,setActiveTab:G,lessons:xn,publicLessons:o,user:t,onLogin:Ee=>e(Ee||"consent"),loading:Ft,publicLoading:d,userCoins:(Re==null?void 0:Re.coins)||0,onReview:St,onEdit:Ot,onImport:Ee=>Be(Ee,Re,ot),searchQuery:J,setSearchQuery:re,onShowFeedback:()=>{window.history.pushState({modal:"active"},"",window.location.pathname),w("showFeedback",!0)},filters:de,setFilters:ye,sortBy:M,onSortChange:D,filterLabel:q,onLabelChange:Q,availableLabels:[...new Set(i.map(Ee=>Ee.label).filter(Ee=>Ee))],onShowKnowMore:()=>{window.history.pushState({modal:"active"},"",window.location.pathname),w("showKnowMore",!0)},onDelete:Ke,showConfirm:(Ee,$e)=>L("confirm",Ee,$e),onAddLesson:()=>{P(null),window.history.pushState({modal:"active"},"",window.location.pathname),w("showAddModal",!0)},onRefresh:()=>{Z==="my-lessons"&&t?(h(),De()):f()}}),u.jsx(UU,{user:t,lessons:i,publicLessons:o,userProfile:Re,activeLesson:_,reviewLesson:E,noteLesson:x,theme:z,onToggleTheme:()=>H(Ee=>Ee==="light"?"dark":"light"),soundsEnabled:Se,onToggleSounds:()=>{const Ee=!Se;return ge(Ee),localStorage.setItem("soundsEnabled",Ee),Ee},onLogout:()=>{r(),n()},onDeleteData:()=>Et(r),onShowTour:()=>{w("showMenu",!1),k(),setTimeout(()=>A(),300)},onSaveLesson:(Ee,$e,bt)=>{p(Ee),(Ee.isPublic||bt)&&f(),$e!==!1&&window.history.back()},onDeleteLesson:Ke,onImportLesson:Ee=>Be(Ee,Re,ot),onUpdateCoins:ot,isUnlimited:dn,onLoginRequired:ht,signIn:e,previewSession:Ae,onReviewStart:()=>Fe(!0),handleEditLesson:Ot,handleReviewLaunch:St,activeTab:Z,fetchPublicLessons:f,fetchLessons:h,ADMIN_EMAIL:Si,APP_VERSION:qt,showNotification:L,setUserProfile:qe,refreshProfile:De}),u.jsx(GU,{userName:Re==null?void 0:Re.displayName,onLogin:()=>e("consent"),onAddLesson:()=>{P(null),window.history.pushState({modal:"active"},"",window.location.pathname),w("showAddModal",!0)},onStartDemo:()=>{const Ee=i.find($e=>$e.id==="demo-lesson")||ta;St(Ee),I(!0)},onGoToMyLessons:()=>{G("my-lessons"),k()}}),u.jsx(In,{children:oe&&!S&&u.jsx(HU,{amount:oe.amount,type:oe.type,onClose:()=>X(null)})})]})},YU=()=>u.jsx(LC,{children:u.jsx(g9,{children:u.jsx(JC,{children:u.jsx(y9,{children:u.jsx(QU,{})})})})});console.log("%c Chethan in Cardland ","background: #4f46e5; color: #fff; font-weight: bold; padding: 4px; border-radius: 4px;");console.log(`Build Version: 1.1.1 | Sync: ${new Date().toISOString()}`);Zp.createRoot(document.getElementById("root")).render(u.jsx(Qr.StrictMode,{children:u.jsx(LC,{children:u.jsx(JC,{children:u.jsx(YU,{})})})}));"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(t=>{for(const e of t)console.log("Unregistering Service Worker:",e),e.unregister()});export{oz as D,rz as a,Us as b,zp as c,_n as d,k3 as e,sz as f,$p as g,A3 as h,Bp as q,iz as r,Do as s,nz as u,v_ as w};
