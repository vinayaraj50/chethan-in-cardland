var Kf=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var de=(t,e,n)=>(Kf(t,e,"read from private field"),n?n.call(t):e.get(t)),lt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},rt=(t,e,n,r)=>(Kf(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var It=(t,e,n)=>(Kf(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Lk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aT={exports:{}},Ph={},lT={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=Symbol.for("react.element"),Mk=Symbol.for("react.portal"),Vk=Symbol.for("react.fragment"),Ok=Symbol.for("react.strict_mode"),Fk=Symbol.for("react.profiler"),Uk=Symbol.for("react.provider"),zk=Symbol.for("react.context"),Bk=Symbol.for("react.forward_ref"),$k=Symbol.for("react.suspense"),Wk=Symbol.for("react.memo"),qk=Symbol.for("react.lazy"),e1=Symbol.iterator;function Hk(t){return t===null||typeof t!="object"?null:(t=e1&&t[e1]||t["@@iterator"],typeof t=="function"?t:null)}var cT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uT=Object.assign,dT={};function $a(t,e,n){this.props=t,this.context=e,this.refs=dT,this.updater=n||cT}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hT(){}hT.prototype=$a.prototype;function $g(t,e,n){this.props=t,this.context=e,this.refs=dT,this.updater=n||cT}var Wg=$g.prototype=new hT;Wg.constructor=$g;uT(Wg,$a.prototype);Wg.isPureReactComponent=!0;var t1=Array.isArray,fT=Object.prototype.hasOwnProperty,qg={current:null},pT={key:!0,ref:!0,__self:!0,__source:!0};function mT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fT.call(e,r)&&!pT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Pc,type:t,key:s,ref:o,props:i,_owner:qg.current}}function Gk(t,e){return{$$typeof:Pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pc}function Kk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n1=/\/+/g;function Qf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kk(""+t.key):e.toString(36)}function Qu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pc:case Mk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Qf(o,0):r,t1(i)?(n="",t!=null&&(n=t.replace(n1,"$&/")+"/"),Qu(i,e,n,"",function(d){return d})):i!=null&&(Hg(i)&&(i=Gk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(n1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",t1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Qf(s,a);o+=Qu(s,e,n,l,i)}else if(l=Hk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Qf(s,a++),o+=Qu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mu(t,e,n){if(t==null)return t;var r=[],i=0;return Qu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Qk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},Yu={transition:null},Yk={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:qg};function gT(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:mu,forEach:function(t,e,n){mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mu(t,function(){e++}),e},toArray:function(t){return mu(t,function(e){return e})||[]},only:function(t){if(!Hg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=$a;De.Fragment=Vk;De.Profiler=Fk;De.PureComponent=$g;De.StrictMode=Ok;De.Suspense=$k;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yk;De.act=gT;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fT.call(e,l)&&!pT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Pc,type:t.type,key:i,ref:s,props:r,_owner:o}};De.createContext=function(t){return t={$$typeof:zk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uk,_context:t},t.Consumer=t};De.createElement=mT;De.createFactory=function(t){var e=mT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:Bk,render:t}};De.isValidElement=Hg;De.lazy=function(t){return{$$typeof:qk,_payload:{_status:-1,_result:t},_init:Qk}};De.memo=function(t,e){return{$$typeof:Wk,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};De.unstable_act=gT;De.useCallback=function(t,e){return mn.current.useCallback(t,e)};De.useContext=function(t){return mn.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};De.useEffect=function(t,e){return mn.current.useEffect(t,e)};De.useId=function(){return mn.current.useId()};De.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return mn.current.useMemo(t,e)};De.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};De.useRef=function(t){return mn.current.useRef(t)};De.useState=function(t){return mn.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return mn.current.useTransition()};De.version="18.3.1";lT.exports=De;var R=lT.exports;const br=Lk(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk=R,Jk=Symbol.for("react.element"),Zk=Symbol.for("react.fragment"),eA=Object.prototype.hasOwnProperty,tA=Xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nA={key:!0,ref:!0,__self:!0,__source:!0};function yT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eA.call(e,r)&&!nA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Jk,type:t,key:s,ref:o,props:i,_owner:tA.current}}Ph.Fragment=Zk;Ph.jsx=yT;Ph.jsxs=yT;aT.exports=Ph;var u=aT.exports,em={},vT={exports:{}},Wn={},wT={exports:{}},xT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,X){var M=U.length;U.push(X);e:for(;0<M;){var D=M-1>>>1,W=U[D];if(0<i(W,X))U[D]=X,U[M]=W,M=D;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],M=U.pop();if(M!==X){U[0]=M;e:for(var D=0,W=U.length,Z=W>>>1;D<Z;){var ee=2*(D+1)-1,re=U[ee],B=ee+1,H=U[B];if(0>i(re,M))B<W&&0>i(H,re)?(U[D]=H,U[B]=M,D=B):(U[D]=re,U[ee]=M,D=ee);else if(B<W&&0>i(H,M))U[D]=H,U[B]=M,D=B;else break e}}return X}function i(U,X){var M=U.sortIndex-X.sortIndex;return M!==0?M:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],d=[],h=1,f=null,p=3,g=!1,w=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=U)r(d),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(d)}}function j(U){if(_=!1,x(U),!w)if(n(l)!==null)w=!0,Y(L);else{var X=n(d);X!==null&&ne(j,X.startTime-U)}}function L(U,X){w=!1,_&&(_=!1,S(T),T=-1),g=!0;var M=p;try{for(x(X),f=n(l);f!==null&&(!(f.expirationTime>X)||U&&!P());){var D=f.callback;if(typeof D=="function"){f.callback=null,p=f.priorityLevel;var W=D(f.expirationTime<=X);X=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),x(X)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var ee=n(d);ee!==null&&ne(j,ee.startTime-X),Z=!1}return Z}finally{f=null,p=M,g=!1}}var O=!1,E=null,T=-1,b=5,A=-1;function P(){return!(t.unstable_now()-A<b)}function N(){if(E!==null){var U=t.unstable_now();A=U;var X=!0;try{X=E(!0,U)}finally{X?I():(O=!1,E=null)}}else O=!1}var I;if(typeof v=="function")I=function(){v(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,fe=K.port2;K.port1.onmessage=N,I=function(){fe.postMessage(null)}}else I=function(){k(N,0)};function Y(U){E=U,O||(O=!0,I())}function ne(U,X){T=k(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,Y(L))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var M=p;p=X;try{return U()}finally{p=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var M=p;p=U;try{return X()}finally{p=M}},t.unstable_scheduleCallback=function(U,X,M){var D=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?D+M:D):M=D,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=M+W,U={id:h++,callback:X,priorityLevel:U,startTime:M,expirationTime:W,sortIndex:-1},M>D?(U.sortIndex=M,e(d,U),n(l)===null&&U===n(d)&&(_?(S(T),T=-1):_=!0,ne(j,M-D))):(U.sortIndex=W,e(l,U),w||g||(w=!0,Y(L))),U},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(U){var X=p;return function(){var M=p;p=X;try{return U.apply(this,arguments)}finally{p=M}}}})(xT);wT.exports=xT;var rA=wT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA=R,Bn=rA;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _T=new Set,Xl={};function _o(t,e){Ea(t,e),Ea(t+"Capture",e)}function Ea(t,e){for(Xl[t]=e,t=0;t<e.length;t++)_T.add(e[t])}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tm=Object.prototype.hasOwnProperty,sA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r1={},i1={};function oA(t){return tm.call(i1,t)?!0:tm.call(r1,t)?!1:sA.test(t)?i1[t]=!0:(r1[t]=!0,!1)}function aA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lA(t,e,n,r){if(e===null||typeof e>"u"||aA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Kg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Kg);Kt[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Kg);Kt[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Kg);Kt[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qg(t,e,n,r){var i=Kt.hasOwnProperty(e)?Kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lA(e,n,i,r)&&(n=null),r||i===null?oA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bi=iA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gu=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),Yg=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),TT=Symbol.for("react.provider"),ST=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),rm=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),Jg=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),ET=Symbol.for("react.offscreen"),s1=Symbol.iterator;function cl(t){return t===null||typeof t!="object"?null:(t=s1&&t[s1]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Yf;function _l(t){if(Yf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yf=e&&e[1]||""}return`
`+Yf+t}var Xf=!1;function Jf(t,e){if(!t||Xf)return"";Xf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_l(t):""}function cA(t){switch(t.tag){case 5:return _l(t.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 2:case 15:return t=Jf(t.type,!1),t;case 11:return t=Jf(t.type.render,!1),t;case 1:return t=Jf(t.type,!0),t;default:return""}}function sm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bo:return"Fragment";case zo:return"Portal";case nm:return"Profiler";case Yg:return"StrictMode";case rm:return"Suspense";case im:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ST:return(t.displayName||"Context")+".Consumer";case TT:return(t._context.displayName||"Context")+".Provider";case Xg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jg:return e=t.displayName||null,e!==null?e:sm(t.type)||"Memo";case Oi:e=t._payload,t=t._init;try{return sm(t(e))}catch{}}return null}function uA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sm(e);case 8:return e===Yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dA(t){var e=bT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yu(t){t._valueTracker||(t._valueTracker=dA(t))}function IT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function om(t,e){var n=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function o1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CT(t,e){e=e.checked,e!=null&&Qg(t,"checked",e,!1)}function am(t,e){CT(t,e);var n=gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lm(t,e.type,n):e.hasOwnProperty("defaultValue")&&lm(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lm(t,e,n){(e!=="number"||Td(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tl=Array.isArray;function oa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Tl(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function kT(t,e){var n=gs(e.value),r=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function c1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vu,RT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vu=vu||document.createElement("div"),vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hA=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(t){hA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rl[e]=Rl[t]})});function PT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rl.hasOwnProperty(t)&&Rl[t]?(""+e).trim():e+"px"}function DT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=PT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fA=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(t,e){if(e){if(fA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function hm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=null;function Zg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pm=null,aa=null,la=null;function u1(t){if(t=jc(t)){if(typeof pm!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Mh(e),pm(t.stateNode,t.type,e))}}function NT(t){aa?la?la.push(t):la=[t]:aa=t}function jT(){if(aa){var t=aa,e=la;if(la=aa=null,u1(t),e)for(t=0;t<e.length;t++)u1(e[t])}}function LT(t,e){return t(e)}function MT(){}var Zf=!1;function VT(t,e,n){if(Zf)return t(e,n);Zf=!0;try{return LT(t,e,n)}finally{Zf=!1,(aa!==null||la!==null)&&(MT(),jT())}}function Zl(t,e){var n=t.stateNode;if(n===null)return null;var r=Mh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var mm=!1;if(pi)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){mm=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{mm=!1}function pA(t,e,n,r,i,s,o,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Pl=!1,Sd=null,Ed=!1,gm=null,mA={onError:function(t){Pl=!0,Sd=t}};function gA(t,e,n,r,i,s,o,a,l){Pl=!1,Sd=null,pA.apply(mA,arguments)}function yA(t,e,n,r,i,s,o,a,l){if(gA.apply(this,arguments),Pl){if(Pl){var d=Sd;Pl=!1,Sd=null}else throw Error(Q(198));Ed||(Ed=!0,gm=d)}}function To(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function d1(t){if(To(t)!==t)throw Error(Q(188))}function vA(t){var e=t.alternate;if(!e){if(e=To(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return d1(i),t;if(s===r)return d1(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function FT(t){return t=vA(t),t!==null?UT(t):null}function UT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UT(t);if(e!==null)return e;t=t.sibling}return null}var zT=Bn.unstable_scheduleCallback,h1=Bn.unstable_cancelCallback,wA=Bn.unstable_shouldYield,xA=Bn.unstable_requestPaint,bt=Bn.unstable_now,_A=Bn.unstable_getCurrentPriorityLevel,ey=Bn.unstable_ImmediatePriority,BT=Bn.unstable_UserBlockingPriority,bd=Bn.unstable_NormalPriority,TA=Bn.unstable_LowPriority,$T=Bn.unstable_IdlePriority,Dh=null,Wr=null;function SA(t){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Dh,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:IA,EA=Math.log,bA=Math.LN2;function IA(t){return t>>>=0,t===0?32:31-(EA(t)/bA|0)|0}var wu=64,xu=4194304;function Sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Id(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Sl(a):(s&=o,s!==0&&(r=Sl(s)))}else o=n&~i,o!==0?r=Sl(o):s!==0&&(r=Sl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_r(e),i=1<<n,r|=t[n],e&=~i;return r}function CA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_r(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=CA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ym(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WT(){var t=wu;return wu<<=1,!(wu&4194240)&&(wu=64),t}function ep(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_r(e),t[e]=n}function AA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_r(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_r(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var $e=0;function qT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HT,ny,GT,KT,QT,vm=!1,_u=[],ts=null,ns=null,rs=null,ec=new Map,tc=new Map,zi=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f1(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":ec.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(e.pointerId)}}function dl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=jc(e),e!==null&&ny(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PA(t,e,n,r,i){switch(e){case"focusin":return ts=dl(ts,t,e,n,r,i),!0;case"dragenter":return ns=dl(ns,t,e,n,r,i),!0;case"mouseover":return rs=dl(rs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ec.set(s,dl(ec.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,tc.set(s,dl(tc.get(s)||null,t,e,n,r,i)),!0}return!1}function YT(t){var e=Ys(t.target);if(e!==null){var n=To(e);if(n!==null){if(e=n.tag,e===13){if(e=OT(n),e!==null){t.blockedOn=e,QT(t.priority,function(){GT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fm=r,n.target.dispatchEvent(r),fm=null}else return e=jc(n),e!==null&&ny(e),t.blockedOn=n,!1;e.shift()}return!0}function p1(t,e,n){Xu(t)&&n.delete(e)}function DA(){vm=!1,ts!==null&&Xu(ts)&&(ts=null),ns!==null&&Xu(ns)&&(ns=null),rs!==null&&Xu(rs)&&(rs=null),ec.forEach(p1),tc.forEach(p1)}function hl(t,e){t.blockedOn===e&&(t.blockedOn=null,vm||(vm=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,DA)))}function nc(t){function e(i){return hl(i,t)}if(0<_u.length){hl(_u[0],t);for(var n=1;n<_u.length;n++){var r=_u[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&hl(ts,t),ns!==null&&hl(ns,t),rs!==null&&hl(rs,t),ec.forEach(e),tc.forEach(e),n=0;n<zi.length;n++)r=zi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zi.length&&(n=zi[0],n.blockedOn===null);)YT(n),n.blockedOn===null&&zi.shift()}var ca=bi.ReactCurrentBatchConfig,Cd=!0;function NA(t,e,n,r){var i=$e,s=ca.transition;ca.transition=null;try{$e=1,ry(t,e,n,r)}finally{$e=i,ca.transition=s}}function jA(t,e,n,r){var i=$e,s=ca.transition;ca.transition=null;try{$e=4,ry(t,e,n,r)}finally{$e=i,ca.transition=s}}function ry(t,e,n,r){if(Cd){var i=wm(t,e,n,r);if(i===null)up(t,e,r,kd,n),f1(t,r);else if(PA(i,t,e,n,r))r.stopPropagation();else if(f1(t,r),e&4&&-1<RA.indexOf(t)){for(;i!==null;){var s=jc(i);if(s!==null&&HT(s),s=wm(t,e,n,r),s===null&&up(t,e,r,kd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else up(t,e,r,null,n)}}var kd=null;function wm(t,e,n,r){if(kd=null,t=Zg(r),t=Ys(t),t!==null)if(e=To(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kd=t,null}function XT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_A()){case ey:return 1;case BT:return 4;case bd:case TA:return 16;case $T:return 536870912;default:return 16}default:return 16}}var Qi=null,iy=null,Ju=null;function JT(){if(Ju)return Ju;var t,e=iy,n=e.length,r,i="value"in Qi?Qi.value:Qi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ju=i.slice(t,1<r?1-r:void 0)}function Zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tu(){return!0}function m1(){return!1}function qn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tu:m1,this.isPropagationStopped=m1,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=qn(Wa),Nc=pt({},Wa,{view:0,detail:0}),LA=qn(Nc),tp,np,fl,Nh=pt({},Nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fl&&(fl&&t.type==="mousemove"?(tp=t.screenX-fl.screenX,np=t.screenY-fl.screenY):np=tp=0,fl=t),tp)},movementY:function(t){return"movementY"in t?t.movementY:np}}),g1=qn(Nh),MA=pt({},Nh,{dataTransfer:0}),VA=qn(MA),OA=pt({},Nc,{relatedTarget:0}),rp=qn(OA),FA=pt({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),UA=qn(FA),zA=pt({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BA=qn(zA),$A=pt({},Wa,{data:0}),y1=qn($A),WA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HA[t])?!!e[t]:!1}function oy(){return GA}var KA=pt({},Nc,{key:function(t){if(t.key){var e=WA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(t){return t.type==="keypress"?Zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QA=qn(KA),YA=pt({},Nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v1=qn(YA),XA=pt({},Nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),JA=qn(XA),ZA=pt({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),eR=qn(ZA),tR=pt({},Nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nR=qn(tR),rR=[9,13,27,32],ay=pi&&"CompositionEvent"in window,Dl=null;pi&&"documentMode"in document&&(Dl=document.documentMode);var iR=pi&&"TextEvent"in window&&!Dl,ZT=pi&&(!ay||Dl&&8<Dl&&11>=Dl),w1=String.fromCharCode(32),x1=!1;function eS(t,e){switch(t){case"keyup":return rR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function sR(t,e){switch(t){case"compositionend":return tS(e);case"keypress":return e.which!==32?null:(x1=!0,w1);case"textInput":return t=e.data,t===w1&&x1?null:t;default:return null}}function oR(t,e){if($o)return t==="compositionend"||!ay&&eS(t,e)?(t=JT(),Ju=iy=Qi=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZT&&e.locale!=="ko"?null:e.data;default:return null}}var aR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aR[t.type]:e==="textarea"}function nS(t,e,n,r){NT(r),e=Ad(e,"onChange"),0<e.length&&(n=new sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nl=null,rc=null;function lR(t){fS(t,0)}function jh(t){var e=Ho(t);if(IT(e))return t}function cR(t,e){if(t==="change")return e}var rS=!1;if(pi){var ip;if(pi){var sp="oninput"in document;if(!sp){var T1=document.createElement("div");T1.setAttribute("oninput","return;"),sp=typeof T1.oninput=="function"}ip=sp}else ip=!1;rS=ip&&(!document.documentMode||9<document.documentMode)}function S1(){Nl&&(Nl.detachEvent("onpropertychange",iS),rc=Nl=null)}function iS(t){if(t.propertyName==="value"&&jh(rc)){var e=[];nS(e,rc,t,Zg(t)),VT(lR,e)}}function uR(t,e,n){t==="focusin"?(S1(),Nl=e,rc=n,Nl.attachEvent("onpropertychange",iS)):t==="focusout"&&S1()}function dR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jh(rc)}function hR(t,e){if(t==="click")return jh(e)}function fR(t,e){if(t==="input"||t==="change")return jh(e)}function pR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ir=typeof Object.is=="function"?Object.is:pR;function ic(t,e){if(Ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tm.call(e,i)||!Ir(t[i],e[i]))return!1}return!0}function E1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b1(t,e){var n=E1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=E1(n)}}function sS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oS(){for(var t=window,e=Td();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Td(t.document)}return e}function ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mR(t){var e=oS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sS(n.ownerDocument.documentElement,n)){if(r!==null&&ly(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=b1(n,s);var o=b1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gR=pi&&"documentMode"in document&&11>=document.documentMode,Wo=null,xm=null,jl=null,_m=!1;function I1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_m||Wo==null||Wo!==Td(r)||(r=Wo,"selectionStart"in r&&ly(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jl&&ic(jl,r)||(jl=r,r=Ad(xm,"onSelect"),0<r.length&&(e=new sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wo)))}function Su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qo={animationend:Su("Animation","AnimationEnd"),animationiteration:Su("Animation","AnimationIteration"),animationstart:Su("Animation","AnimationStart"),transitionend:Su("Transition","TransitionEnd")},op={},aS={};pi&&(aS=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Lh(t){if(op[t])return op[t];if(!qo[t])return t;var e=qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aS)return op[t]=e[n];return t}var lS=Lh("animationend"),cS=Lh("animationiteration"),uS=Lh("animationstart"),dS=Lh("transitionend"),hS=new Map,C1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){hS.set(t,e),_o(e,[t])}for(var ap=0;ap<C1.length;ap++){var lp=C1[ap],yR=lp.toLowerCase(),vR=lp[0].toUpperCase()+lp.slice(1);ks(yR,"on"+vR)}ks(lS,"onAnimationEnd");ks(cS,"onAnimationIteration");ks(uS,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(dS,"onTransitionEnd");Ea("onMouseEnter",["mouseout","mouseover"]);Ea("onMouseLeave",["mouseout","mouseover"]);Ea("onPointerEnter",["pointerout","pointerover"]);Ea("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wR=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function k1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yA(r,e,void 0,t),t.currentTarget=null}function fS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;k1(i,a,d),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,d=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;k1(i,a,d),s=l}}}if(Ed)throw t=gm,Ed=!1,gm=null,t}function it(t,e){var n=e[Im];n===void 0&&(n=e[Im]=new Set);var r=t+"__bubble";n.has(r)||(pS(e,t,2,!1),n.add(r))}function cp(t,e,n){var r=0;e&&(r|=4),pS(n,t,r,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function sc(t){if(!t[Eu]){t[Eu]=!0,_T.forEach(function(n){n!=="selectionchange"&&(wR.has(n)||cp(n,!1,t),cp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,cp("selectionchange",!1,e))}}function pS(t,e,n,r){switch(XT(e)){case 1:var i=NA;break;case 4:i=jA;break;default:i=ry}n=i.bind(null,e,n,t),i=void 0,!mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function up(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ys(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}VT(function(){var d=s,h=Zg(n),f=[];e:{var p=hS.get(t);if(p!==void 0){var g=sy,w=t;switch(t){case"keypress":if(Zu(n)===0)break e;case"keydown":case"keyup":g=QA;break;case"focusin":w="focus",g=rp;break;case"focusout":w="blur",g=rp;break;case"beforeblur":case"afterblur":g=rp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=g1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=VA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JA;break;case lS:case cS:case uS:g=UA;break;case dS:g=eR;break;case"scroll":g=LA;break;case"wheel":g=nR;break;case"copy":case"cut":case"paste":g=BA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=v1}var _=(e&4)!==0,k=!_&&t==="scroll",S=_?p!==null?p+"Capture":null:p;_=[];for(var v=d,x;v!==null;){x=v;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,S!==null&&(j=Zl(v,S),j!=null&&_.push(oc(v,j,x)))),k)break;v=v.return}0<_.length&&(p=new g(p,w,null,n,h),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==fm&&(w=n.relatedTarget||n.fromElement)&&(Ys(w)||w[mi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=d,w=w?Ys(w):null,w!==null&&(k=To(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=d),g!==w)){if(_=g1,j="onMouseLeave",S="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=v1,j="onPointerLeave",S="onPointerEnter",v="pointer"),k=g==null?p:Ho(g),x=w==null?p:Ho(w),p=new _(j,v+"leave",g,n,h),p.target=k,p.relatedTarget=x,j=null,Ys(h)===d&&(_=new _(S,v+"enter",w,n,h),_.target=x,_.relatedTarget=k,j=_),k=j,g&&w)t:{for(_=g,S=w,v=0,x=_;x;x=jo(x))v++;for(x=0,j=S;j;j=jo(j))x++;for(;0<v-x;)_=jo(_),v--;for(;0<x-v;)S=jo(S),x--;for(;v--;){if(_===S||S!==null&&_===S.alternate)break t;_=jo(_),S=jo(S)}_=null}else _=null;g!==null&&A1(f,p,g,_,!1),w!==null&&k!==null&&A1(f,k,w,_,!0)}}e:{if(p=d?Ho(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var L=cR;else if(_1(p))if(rS)L=fR;else{L=dR;var O=uR}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=hR);if(L&&(L=L(t,d))){nS(f,L,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&lm(p,"number",p.value)}switch(O=d?Ho(d):window,t){case"focusin":(_1(O)||O.contentEditable==="true")&&(Wo=O,xm=d,jl=null);break;case"focusout":jl=xm=Wo=null;break;case"mousedown":_m=!0;break;case"contextmenu":case"mouseup":case"dragend":_m=!1,I1(f,n,h);break;case"selectionchange":if(gR)break;case"keydown":case"keyup":I1(f,n,h)}var E;if(ay)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $o?eS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(ZT&&n.locale!=="ko"&&($o||T!=="onCompositionStart"?T==="onCompositionEnd"&&$o&&(E=JT()):(Qi=h,iy="value"in Qi?Qi.value:Qi.textContent,$o=!0)),O=Ad(d,T),0<O.length&&(T=new y1(T,t,null,n,h),f.push({event:T,listeners:O}),E?T.data=E:(E=tS(n),E!==null&&(T.data=E)))),(E=iR?sR(t,n):oR(t,n))&&(d=Ad(d,"onBeforeInput"),0<d.length&&(h=new y1("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=E))}fS(f,e)})}function oc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ad(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zl(t,n),s!=null&&r.unshift(oc(t,s,i)),s=Zl(t,e),s!=null&&r.push(oc(t,s,i))),t=t.return}return r}function jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function A1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&d!==null&&(a=d,i?(l=Zl(n,s),l!=null&&o.unshift(oc(n,l,a))):i||(l=Zl(n,s),l!=null&&o.push(oc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xR=/\r\n?/g,_R=/\u0000|\uFFFD/g;function R1(t){return(typeof t=="string"?t:""+t).replace(xR,`
`).replace(_R,"")}function bu(t,e,n){if(e=R1(e),R1(t)!==e&&n)throw Error(Q(425))}function Rd(){}var Tm=null,Sm=null;function Em(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,TR=typeof clearTimeout=="function"?clearTimeout:void 0,P1=typeof Promise=="function"?Promise:void 0,SR=typeof queueMicrotask=="function"?queueMicrotask:typeof P1<"u"?function(t){return P1.resolve(null).then(t).catch(ER)}:bm;function ER(t){setTimeout(function(){throw t})}function dp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),nc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);nc(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function D1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Ur="__reactFiber$"+qa,ac="__reactProps$"+qa,mi="__reactContainer$"+qa,Im="__reactEvents$"+qa,bR="__reactListeners$"+qa,IR="__reactHandles$"+qa;function Ys(t){var e=t[Ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mi]||n[Ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=D1(t);t!==null;){if(n=t[Ur])return n;t=D1(t)}return e}t=n,n=t.parentNode}return null}function jc(t){return t=t[Ur]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Mh(t){return t[ac]||null}var Cm=[],Go=-1;function As(t){return{current:t}}function ot(t){0>Go||(t.current=Cm[Go],Cm[Go]=null,Go--)}function Xe(t,e){Go++,Cm[Go]=t.current,t.current=e}var ys={},sn=As(ys),bn=As(!1),co=ys;function ba(t,e){var n=t.type.contextTypes;if(!n)return ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function Pd(){ot(bn),ot(sn)}function N1(t,e,n){if(sn.current!==ys)throw Error(Q(168));Xe(sn,e),Xe(bn,n)}function mS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,uA(t)||"Unknown",i));return pt({},n,r)}function Dd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,co=sn.current,Xe(sn,t),Xe(bn,bn.current),!0}function j1(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=mS(t,e,co),r.__reactInternalMemoizedMergedChildContext=t,ot(bn),ot(sn),Xe(sn,t)):ot(bn),Xe(bn,n)}var ri=null,Vh=!1,hp=!1;function gS(t){ri===null?ri=[t]:ri.push(t)}function CR(t){Vh=!0,gS(t)}function Rs(){if(!hp&&ri!==null){hp=!0;var t=0,e=$e;try{var n=ri;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ri=null,Vh=!1}catch(i){throw ri!==null&&(ri=ri.slice(t+1)),zT(ey,Rs),i}finally{$e=e,hp=!1}}return null}var Ko=[],Qo=0,Nd=null,jd=0,tr=[],nr=0,uo=null,si=1,oi="";function $s(t,e){Ko[Qo++]=jd,Ko[Qo++]=Nd,Nd=t,jd=e}function yS(t,e,n){tr[nr++]=si,tr[nr++]=oi,tr[nr++]=uo,uo=t;var r=si;t=oi;var i=32-_r(r)-1;r&=~(1<<i),n+=1;var s=32-_r(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,si=1<<32-_r(e)+i|n<<i|r,oi=s+t}else si=1<<s|n<<i|r,oi=t}function cy(t){t.return!==null&&($s(t,1),yS(t,1,0))}function uy(t){for(;t===Nd;)Nd=Ko[--Qo],Ko[Qo]=null,jd=Ko[--Qo],Ko[Qo]=null;for(;t===uo;)uo=tr[--nr],tr[nr]=null,oi=tr[--nr],tr[nr]=null,si=tr[--nr],tr[nr]=null}var Fn=null,Mn=null,ct=!1,mr=null;function vS(t,e){var n=rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function L1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fn=t,Mn=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fn=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uo!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fn=t,Mn=null,!0):!1;default:return!1}}function km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Am(t){if(ct){var e=Mn;if(e){var n=e;if(!L1(t,e)){if(km(t))throw Error(Q(418));e=is(n.nextSibling);var r=Fn;e&&L1(t,e)?vS(r,n):(t.flags=t.flags&-4097|2,ct=!1,Fn=t)}}else{if(km(t))throw Error(Q(418));t.flags=t.flags&-4097|2,ct=!1,Fn=t}}}function M1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fn=t}function Iu(t){if(t!==Fn)return!1;if(!ct)return M1(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Em(t.type,t.memoizedProps)),e&&(e=Mn)){if(km(t))throw wS(),Error(Q(418));for(;e;)vS(t,e),e=is(e.nextSibling)}if(M1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Fn?is(t.stateNode.nextSibling):null;return!0}function wS(){for(var t=Mn;t;)t=is(t.nextSibling)}function Ia(){Mn=Fn=null,ct=!1}function dy(t){mr===null?mr=[t]:mr.push(t)}var kR=bi.ReactCurrentBatchConfig;function pl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Cu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V1(t){var e=t._init;return e(t._payload)}function xS(t){function e(S,v){if(t){var x=S.deletions;x===null?(S.deletions=[v],S.flags|=16):x.push(v)}}function n(S,v){if(!t)return null;for(;v!==null;)e(S,v),v=v.sibling;return null}function r(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function i(S,v){return S=ls(S,v),S.index=0,S.sibling=null,S}function s(S,v,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<v?(S.flags|=2,v):x):(S.flags|=2,v)):(S.flags|=1048576,v)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,v,x,j){return v===null||v.tag!==6?(v=wp(x,S.mode,j),v.return=S,v):(v=i(v,x),v.return=S,v)}function l(S,v,x,j){var L=x.type;return L===Bo?h(S,v,x.props.children,j,x.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Oi&&V1(L)===v.type)?(j=i(v,x.props),j.ref=pl(S,v,x),j.return=S,j):(j=od(x.type,x.key,x.props,null,S.mode,j),j.ref=pl(S,v,x),j.return=S,j)}function d(S,v,x,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=xp(x,S.mode,j),v.return=S,v):(v=i(v,x.children||[]),v.return=S,v)}function h(S,v,x,j,L){return v===null||v.tag!==7?(v=io(x,S.mode,j,L),v.return=S,v):(v=i(v,x),v.return=S,v)}function f(S,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wp(""+v,S.mode,x),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gu:return x=od(v.type,v.key,v.props,null,S.mode,x),x.ref=pl(S,null,v),x.return=S,x;case zo:return v=xp(v,S.mode,x),v.return=S,v;case Oi:var j=v._init;return f(S,j(v._payload),x)}if(Tl(v)||cl(v))return v=io(v,S.mode,x,null),v.return=S,v;Cu(S,v)}return null}function p(S,v,x,j){var L=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return L!==null?null:a(S,v,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gu:return x.key===L?l(S,v,x,j):null;case zo:return x.key===L?d(S,v,x,j):null;case Oi:return L=x._init,p(S,v,L(x._payload),j)}if(Tl(x)||cl(x))return L!==null?null:h(S,v,x,j,null);Cu(S,x)}return null}function g(S,v,x,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(x)||null,a(v,S,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case gu:return S=S.get(j.key===null?x:j.key)||null,l(v,S,j,L);case zo:return S=S.get(j.key===null?x:j.key)||null,d(v,S,j,L);case Oi:var O=j._init;return g(S,v,x,O(j._payload),L)}if(Tl(j)||cl(j))return S=S.get(x)||null,h(v,S,j,L,null);Cu(v,j)}return null}function w(S,v,x,j){for(var L=null,O=null,E=v,T=v=0,b=null;E!==null&&T<x.length;T++){E.index>T?(b=E,E=null):b=E.sibling;var A=p(S,E,x[T],j);if(A===null){E===null&&(E=b);break}t&&E&&A.alternate===null&&e(S,E),v=s(A,v,T),O===null?L=A:O.sibling=A,O=A,E=b}if(T===x.length)return n(S,E),ct&&$s(S,T),L;if(E===null){for(;T<x.length;T++)E=f(S,x[T],j),E!==null&&(v=s(E,v,T),O===null?L=E:O.sibling=E,O=E);return ct&&$s(S,T),L}for(E=r(S,E);T<x.length;T++)b=g(E,S,T,x[T],j),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?T:b.key),v=s(b,v,T),O===null?L=b:O.sibling=b,O=b);return t&&E.forEach(function(P){return e(S,P)}),ct&&$s(S,T),L}function _(S,v,x,j){var L=cl(x);if(typeof L!="function")throw Error(Q(150));if(x=L.call(x),x==null)throw Error(Q(151));for(var O=L=null,E=v,T=v=0,b=null,A=x.next();E!==null&&!A.done;T++,A=x.next()){E.index>T?(b=E,E=null):b=E.sibling;var P=p(S,E,A.value,j);if(P===null){E===null&&(E=b);break}t&&E&&P.alternate===null&&e(S,E),v=s(P,v,T),O===null?L=P:O.sibling=P,O=P,E=b}if(A.done)return n(S,E),ct&&$s(S,T),L;if(E===null){for(;!A.done;T++,A=x.next())A=f(S,A.value,j),A!==null&&(v=s(A,v,T),O===null?L=A:O.sibling=A,O=A);return ct&&$s(S,T),L}for(E=r(S,E);!A.done;T++,A=x.next())A=g(E,S,T,A.value,j),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?T:A.key),v=s(A,v,T),O===null?L=A:O.sibling=A,O=A);return t&&E.forEach(function(N){return e(S,N)}),ct&&$s(S,T),L}function k(S,v,x,j){if(typeof x=="object"&&x!==null&&x.type===Bo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case gu:e:{for(var L=x.key,O=v;O!==null;){if(O.key===L){if(L=x.type,L===Bo){if(O.tag===7){n(S,O.sibling),v=i(O,x.props.children),v.return=S,S=v;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Oi&&V1(L)===O.type){n(S,O.sibling),v=i(O,x.props),v.ref=pl(S,O,x),v.return=S,S=v;break e}n(S,O);break}else e(S,O);O=O.sibling}x.type===Bo?(v=io(x.props.children,S.mode,j,x.key),v.return=S,S=v):(j=od(x.type,x.key,x.props,null,S.mode,j),j.ref=pl(S,v,x),j.return=S,S=j)}return o(S);case zo:e:{for(O=x.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(S,v.sibling),v=i(v,x.children||[]),v.return=S,S=v;break e}else{n(S,v);break}else e(S,v);v=v.sibling}v=xp(x,S.mode,j),v.return=S,S=v}return o(S);case Oi:return O=x._init,k(S,v,O(x._payload),j)}if(Tl(x))return w(S,v,x,j);if(cl(x))return _(S,v,x,j);Cu(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(S,v.sibling),v=i(v,x),v.return=S,S=v):(n(S,v),v=wp(x,S.mode,j),v.return=S,S=v),o(S)):n(S,v)}return k}var Ca=xS(!0),_S=xS(!1),Ld=As(null),Md=null,Yo=null,hy=null;function fy(){hy=Yo=Md=null}function py(t){var e=Ld.current;ot(Ld),t._currentValue=e}function Rm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ua(t,e){Md=t,hy=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(hy!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(Md===null)throw Error(Q(308));Yo=t,Md.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var Xs=null;function my(t){Xs===null?Xs=[t]:Xs.push(t)}function TS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,my(e)):(n.next=i.next,i.next=n),e.interleaved=n,gi(t,r)}function gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fi=!1;function gy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gi(t,n)}return i=r.interleaved,i===null?(e.next=e,my(r)):(e.next=i.next,i.next=e),r.interleaved=e,gi(t,n)}function ed(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ty(t,n)}}function O1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vd(t,e,n,r){var i=t.updateQueue;Fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,d=l.next;l.next=null,o===null?s=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=d=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(p=e,g=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){f=w.call(g,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,p=typeof w=="function"?w.call(g,f,p):w,p==null)break e;f=pt({},f,p);break e;case 2:Fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fo|=o,t.lanes=o,t.memoizedState=f}}function F1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var Lc={},qr=As(Lc),lc=As(Lc),cc=As(Lc);function Js(t){if(t===Lc)throw Error(Q(174));return t}function yy(t,e){switch(Xe(cc,e),Xe(lc,t),Xe(qr,Lc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=um(e,t)}ot(qr),Xe(qr,e)}function ka(){ot(qr),ot(lc),ot(cc)}function ES(t){Js(cc.current);var e=Js(qr.current),n=um(e,t.type);e!==n&&(Xe(lc,t),Xe(qr,n))}function vy(t){lc.current===t&&(ot(qr),ot(lc))}var ut=As(0);function Od(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fp=[];function wy(){for(var t=0;t<fp.length;t++)fp[t]._workInProgressVersionPrimary=null;fp.length=0}var td=bi.ReactCurrentDispatcher,pp=bi.ReactCurrentBatchConfig,ho=0,ft=null,jt=null,Ft=null,Fd=!1,Ll=!1,uc=0,AR=0;function Xt(){throw Error(Q(321))}function xy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ir(t[n],e[n]))return!1;return!0}function _y(t,e,n,r,i,s){if(ho=s,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,td.current=t===null||t.memoizedState===null?NR:jR,t=n(r,i),Ll){s=0;do{if(Ll=!1,uc=0,25<=s)throw Error(Q(301));s+=1,Ft=jt=null,e.updateQueue=null,td.current=LR,t=n(r,i)}while(Ll)}if(td.current=Ud,e=jt!==null&&jt.next!==null,ho=0,Ft=jt=ft=null,Fd=!1,e)throw Error(Q(300));return t}function Ty(){var t=uc!==0;return uc=0,t}function Vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ft.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function ar(){if(jt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Ft===null?ft.memoizedState:Ft.next;if(e!==null)Ft=e,jt=t;else{if(t===null)throw Error(Q(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ft===null?ft.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function dc(t,e){return typeof e=="function"?e(t):e}function mp(t){var e=ar(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=jt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,d=s;do{var h=d.lane;if((ho&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ft.lanes|=h,fo|=h}d=d.next}while(d!==null&&d!==s);l===null?o=r:l.next=a,Ir(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ft.lanes|=s,fo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gp(t){var e=ar(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ir(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bS(){}function IS(t,e){var n=ft,r=ar(),i=e(),s=!Ir(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,Sy(AS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,hc(9,kS.bind(null,n,r,i,e),void 0,null),zt===null)throw Error(Q(349));ho&30||CS(n,e,i)}return i}function CS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kS(t,e,n,r){e.value=n,e.getSnapshot=r,RS(e)&&PS(t)}function AS(t,e,n){return n(function(){RS(e)&&PS(t)})}function RS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ir(t,n)}catch{return!0}}function PS(t){var e=gi(t,1);e!==null&&Tr(e,t,1,-1)}function U1(t){var e=Vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:t},e.queue=t,t=t.dispatch=DR.bind(null,ft,t),[e.memoizedState,t]}function hc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DS(){return ar().memoizedState}function nd(t,e,n,r){var i=Vr();ft.flags|=t,i.memoizedState=hc(1|e,n,void 0,r===void 0?null:r)}function Oh(t,e,n,r){var i=ar();r=r===void 0?null:r;var s=void 0;if(jt!==null){var o=jt.memoizedState;if(s=o.destroy,r!==null&&xy(r,o.deps)){i.memoizedState=hc(e,n,s,r);return}}ft.flags|=t,i.memoizedState=hc(1|e,n,s,r)}function z1(t,e){return nd(8390656,8,t,e)}function Sy(t,e){return Oh(2048,8,t,e)}function NS(t,e){return Oh(4,2,t,e)}function jS(t,e){return Oh(4,4,t,e)}function LS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MS(t,e,n){return n=n!=null?n.concat([t]):null,Oh(4,4,LS.bind(null,e,t),n)}function Ey(){}function VS(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function OS(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FS(t,e,n){return ho&21?(Ir(n,e)||(n=WT(),ft.lanes|=n,fo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function RR(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=pp.transition;pp.transition={};try{t(!1),e()}finally{$e=n,pp.transition=r}}function US(){return ar().memoizedState}function PR(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zS(t))BS(e,n);else if(n=TS(t,e,n,r),n!==null){var i=pn();Tr(n,t,r,i),$S(n,e,r)}}function DR(t,e,n){var r=as(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zS(t))BS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ir(a,o)){var l=e.interleaved;l===null?(i.next=i,my(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=TS(t,e,i,r),n!==null&&(i=pn(),Tr(n,t,r,i),$S(n,e,r))}}function zS(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function BS(t,e){Ll=Fd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $S(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ty(t,n)}}var Ud={readContext:or,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},NR={readContext:or,useCallback:function(t,e){return Vr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:z1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nd(4194308,4,LS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nd(4194308,4,t,e)},useInsertionEffect:function(t,e){return nd(4,2,t,e)},useMemo:function(t,e){var n=Vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PR.bind(null,ft,t),[r.memoizedState,t]},useRef:function(t){var e=Vr();return t={current:t},e.memoizedState=t},useState:U1,useDebugValue:Ey,useDeferredValue:function(t){return Vr().memoizedState=t},useTransition:function(){var t=U1(!1),e=t[0];return t=RR.bind(null,t[1]),Vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ft,i=Vr();if(ct){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),zt===null)throw Error(Q(349));ho&30||CS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,z1(AS.bind(null,r,s,t),[t]),r.flags|=2048,hc(9,kS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Vr(),e=zt.identifierPrefix;if(ct){var n=oi,r=si;n=(r&~(1<<32-_r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jR={readContext:or,useCallback:VS,useContext:or,useEffect:Sy,useImperativeHandle:MS,useInsertionEffect:NS,useLayoutEffect:jS,useMemo:OS,useReducer:mp,useRef:DS,useState:function(){return mp(dc)},useDebugValue:Ey,useDeferredValue:function(t){var e=ar();return FS(e,jt.memoizedState,t)},useTransition:function(){var t=mp(dc)[0],e=ar().memoizedState;return[t,e]},useMutableSource:bS,useSyncExternalStore:IS,useId:US,unstable_isNewReconciler:!1},LR={readContext:or,useCallback:VS,useContext:or,useEffect:Sy,useImperativeHandle:MS,useInsertionEffect:NS,useLayoutEffect:jS,useMemo:OS,useReducer:gp,useRef:DS,useState:function(){return gp(dc)},useDebugValue:Ey,useDeferredValue:function(t){var e=ar();return jt===null?e.memoizedState=t:FS(e,jt.memoizedState,t)},useTransition:function(){var t=gp(dc)[0],e=ar().memoizedState;return[t,e]},useMutableSource:bS,useSyncExternalStore:IS,useId:US,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fh={isMounted:function(t){return(t=t._reactInternals)?To(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pn(),i=as(t),s=ui(r,i);s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Tr(e,t,i,r),ed(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pn(),i=as(t),s=ui(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Tr(e,t,i,r),ed(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),r=as(t),i=ui(n,r);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,r),e!==null&&(Tr(e,t,r,n),ed(e,t,r))}};function B1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ic(n,r)||!ic(i,s):!0}function WS(t,e,n){var r=!1,i=ys,s=e.contextType;return typeof s=="object"&&s!==null?s=or(s):(i=In(e)?co:sn.current,r=e.contextTypes,s=(r=r!=null)?ba(t,i):ys),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fh.enqueueReplaceState(e,e.state,null)}function Dm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=or(s):(s=In(e)?co:sn.current,i.context=ba(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Pm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fh.enqueueReplaceState(i,i.state,null),Vd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Aa(t,e){try{var n="",r=e;do n+=cA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MR=typeof WeakMap=="function"?WeakMap:Map;function qS(t,e,n){n=ui(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bd||(Bd=!0,$m=r),Nm(t,e)},n}function HS(t,e,n){n=ui(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Nm(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function W1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new MR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YR.bind(null,t,e,n),e.then(t,t))}function q1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ui(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var VR=bi.ReactCurrentOwner,Tn=!1;function un(t,e,n,r){e.child=t===null?_S(e,null,n,r):Ca(e,t.child,n,r)}function G1(t,e,n,r,i){n=n.render;var s=e.ref;return ua(e,i),r=_y(t,e,n,r,s,i),n=Ty(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yi(t,e,i)):(ct&&n&&cy(e),e.flags|=1,un(t,e,r,i),e.child)}function K1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,GS(t,e,s,r,i)):(t=od(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ic,n(o,r)&&t.ref===e.ref)return yi(t,e,i)}return e.flags|=1,t=ls(s,r),t.ref=e.ref,t.return=e,e.child=t}function GS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ic(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,yi(t,e,i)}return jm(t,e,n,r,i)}function KS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Jo,Nn),Nn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(Jo,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Xe(Jo,Nn),Nn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Xe(Jo,Nn),Nn|=r;return un(t,e,i,n),e.child}function QS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jm(t,e,n,r,i){var s=In(n)?co:sn.current;return s=ba(e,s),ua(e,i),n=_y(t,e,n,r,s,i),r=Ty(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yi(t,e,i)):(ct&&r&&cy(e),e.flags|=1,un(t,e,n,i),e.child)}function Q1(t,e,n,r,i){if(In(n)){var s=!0;Dd(e)}else s=!1;if(ua(e,i),e.stateNode===null)rd(t,e),WS(e,n,r),Dm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=or(d):(d=In(n)?co:sn.current,d=ba(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==d)&&$1(e,o,r,d),Fi=!1;var p=e.memoizedState;o.state=p,Vd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||bn.current||Fi?(typeof h=="function"&&(Pm(e,n,h,r),l=e.memoizedState),(a=Fi||B1(e,n,a,r,p,l,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,SS(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:ur(e.type,a),o.props=d,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=or(l):(l=In(n)?co:sn.current,l=ba(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&$1(e,o,r,l),Fi=!1,p=e.memoizedState,o.state=p,Vd(e,r,o,i);var w=e.memoizedState;a!==f||p!==w||bn.current||Fi?(typeof g=="function"&&(Pm(e,n,g,r),w=e.memoizedState),(d=Fi||B1(e,n,d,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Lm(t,e,n,r,s,i)}function Lm(t,e,n,r,i,s){QS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&j1(e,n,!1),yi(t,e,s);r=e.stateNode,VR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ca(e,t.child,null,s),e.child=Ca(e,null,a,s)):un(t,e,a,s),e.memoizedState=r.state,i&&j1(e,n,!0),e.child}function YS(t){var e=t.stateNode;e.pendingContext?N1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N1(t,e.context,!1),yy(t,e.containerInfo)}function Y1(t,e,n,r,i){return Ia(),dy(i),e.flags|=256,un(t,e,n,r),e.child}var Mm={dehydrated:null,treeContext:null,retryLane:0};function Vm(t){return{baseLanes:t,cachePool:null,transitions:null}}function XS(t,e,n){var r=e.pendingProps,i=ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Xe(ut,i&1),t===null)return Am(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Bh(o,r,0,null),t=io(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vm(n),e.memoizedState=Mm,t):by(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return OR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ls(a,s):(s=io(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Vm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Mm,r}return s=t.child,t=s.sibling,r=ls(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function by(t,e){return e=Bh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ku(t,e,n,r){return r!==null&&dy(r),Ca(e,t.child,null,n),t=by(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=yp(Error(Q(422))),ku(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Bh({mode:"visible",children:r.children},i,0,null),s=io(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ca(e,t.child,null,o),e.child.memoizedState=Vm(o),e.memoizedState=Mm,s);if(!(e.mode&1))return ku(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=yp(s,r,void 0),ku(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=zt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gi(t,i),Tr(r,t,i,-1))}return Py(),r=yp(Error(Q(421))),ku(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mn=is(i.nextSibling),Fn=e,ct=!0,mr=null,t!==null&&(tr[nr++]=si,tr[nr++]=oi,tr[nr++]=uo,si=t.id,oi=t.overflow,uo=e),e=by(e,r.children),e.flags|=4096,e)}function X1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rm(t.return,e,n)}function vp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function JS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(un(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&X1(t,n,e);else if(t.tag===19)X1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Od(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Od(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vp(e,!0,n,null,s);break;case"together":vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FR(t,e,n){switch(e.tag){case 3:YS(e),Ia();break;case 5:ES(e);break;case 1:In(e.type)&&Dd(e);break;case 4:yy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xe(Ld,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?XS(t,e,n):(Xe(ut,ut.current&1),t=yi(t,e,n),t!==null?t.sibling:null);Xe(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,KS(t,e,n)}return yi(t,e,n)}var ZS,Om,eE,tE;ZS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Om=function(){};eE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Js(qr.current);var s=null;switch(n){case"input":i=om(t,i),r=om(t,r),s=[];break;case"select":i=pt({},i,{value:void 0}),r=pt({},r,{value:void 0}),s=[];break;case"textarea":i=cm(t,i),r=cm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rd)}dm(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&it("scroll",t),s||a===l||(s=[])):(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};tE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ml(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UR(t,e,n){var r=e.pendingProps;switch(uy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return In(e.type)&&Pd(),Jt(e),null;case 3:return r=e.stateNode,ka(),ot(bn),ot(sn),wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Iu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(Hm(mr),mr=null))),Om(t,e),Jt(e),null;case 5:vy(e);var i=Js(cc.current);if(n=e.type,t!==null&&e.stateNode!=null)eE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Jt(e),null}if(t=Js(qr.current),Iu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ur]=e,r[ac]=s,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(i=0;i<El.length;i++)it(El[i],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":o1(r,s),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},it("invalid",r);break;case"textarea":l1(r,s),it("invalid",r)}dm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bu(r.textContent,a,t),i=["children",""+a]):Xl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":yu(r),a1(r,s,!0);break;case"textarea":yu(r),c1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ur]=e,t[ac]=r,ZS(t,e,!1,!1),e.stateNode=t;e:{switch(o=hm(n,r),n){case"dialog":it("cancel",t),it("close",t),i=r;break;case"iframe":case"object":case"embed":it("load",t),i=r;break;case"video":case"audio":for(i=0;i<El.length;i++)it(El[i],t);i=r;break;case"source":it("error",t),i=r;break;case"img":case"image":case"link":it("error",t),it("load",t),i=r;break;case"details":it("toggle",t),i=r;break;case"input":o1(t,r),i=om(t,r),it("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pt({},r,{value:void 0}),it("invalid",t);break;case"textarea":l1(t,r),i=cm(t,r),it("invalid",t);break;default:i=r}dm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jl(t,l):typeof l=="number"&&Jl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&it("scroll",t):l!=null&&Qg(t,s,l,o))}switch(n){case"input":yu(t),a1(t,r,!1);break;case"textarea":yu(t),c1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?oa(t,!!r.multiple,s,!1):r.defaultValue!=null&&oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)tE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Js(cc.current),Js(qr.current),Iu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ur]=e,(s=r.nodeValue!==n)&&(t=Fn,t!==null))switch(t.tag){case 3:bu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ur]=e,e.stateNode=r}return Jt(e),null;case 13:if(ot(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&Mn!==null&&e.mode&1&&!(e.flags&128))wS(),Ia(),e.flags|=98560,s=!1;else if(s=Iu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[Ur]=e}else Ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),s=!1}else mr!==null&&(Hm(mr),mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Lt===0&&(Lt=3):Py())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return ka(),Om(t,e),t===null&&sc(e.stateNode.containerInfo),Jt(e),null;case 10:return py(e.type._context),Jt(e),null;case 17:return In(e.type)&&Pd(),Jt(e),null;case 19:if(ot(ut),s=e.memoizedState,s===null)return Jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ml(s,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Od(t),o!==null){for(e.flags|=128,ml(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(ut,ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&bt()>Ra&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304)}else{if(!r)if(t=Od(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ml(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ct)return Jt(e),null}else 2*bt()-s.renderingStartTime>Ra&&n!==1073741824&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=bt(),e.sibling=null,n=ut.current,Xe(ut,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return Ry(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nn&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function zR(t,e){switch(uy(e),e.tag){case 1:return In(e.type)&&Pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),ot(bn),ot(sn),wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vy(e),null;case 13:if(ot(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(ut),null;case 4:return ka(),null;case 10:return py(e.type._context),null;case 22:case 23:return Ry(),null;case 24:return null;default:return null}}var Au=!1,rn=!1,BR=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Fm(t,e,n){try{n()}catch(r){yt(t,e,r)}}var J1=!1;function $R(t,e){if(Tm=Cd,t=oS(),ly(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++d===i&&(a=o),p===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sm={focusedElem:t,selectionRange:n},Cd=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,k=w.memoizedState,S=e.stateNode,v=S.getSnapshotBeforeUpdate(e.elementType===e.type?_:ur(e.type,_),k);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){yt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return w=J1,J1=!1,w}function Ml(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fm(e,n,s)}i=i.next}while(i!==r)}}function Uh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Um(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nE(t){var e=t.alternate;e!==null&&(t.alternate=null,nE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ur],delete e[ac],delete e[Im],delete e[bR],delete e[IR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rE(t){return t.tag===5||t.tag===3||t.tag===4}function Z1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rd));else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}function Bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bm(t,e,n),t=t.sibling;t!==null;)Bm(t,e,n),t=t.sibling}var $t=null,pr=!1;function Di(t,e,n){for(n=n.child;n!==null;)iE(t,e,n),n=n.sibling}function iE(t,e,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Dh,n)}catch{}switch(n.tag){case 5:rn||Xo(n,e);case 6:var r=$t,i=pr;$t=null,Di(t,e,n),$t=r,pr=i,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?dp(t.parentNode,n):t.nodeType===1&&dp(t,n),nc(t)):dp($t,n.stateNode));break;case 4:r=$t,i=pr,$t=n.stateNode.containerInfo,pr=!0,Di(t,e,n),$t=r,pr=i;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fm(n,e,o),i=i.next}while(i!==r)}Di(t,e,n);break;case 1:if(!rn&&(Xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yt(n,e,a)}Di(t,e,n);break;case 21:Di(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,Di(t,e,n),rn=r):Di(t,e,n);break;default:Di(t,e,n)}}function ew(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BR),e.forEach(function(r){var i=JR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(Q(160));iE(s,o,i),$t=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(d){yt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sE(e,t),e=e.sibling}function sE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),jr(t),r&4){try{Ml(3,t,t.return),Uh(3,t)}catch(_){yt(t,t.return,_)}try{Ml(5,t,t.return)}catch(_){yt(t,t.return,_)}}break;case 1:cr(e,t),jr(t),r&512&&n!==null&&Xo(n,n.return);break;case 5:if(cr(e,t),jr(t),r&512&&n!==null&&Xo(n,n.return),t.flags&32){var i=t.stateNode;try{Jl(i,"")}catch(_){yt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CT(i,s),hm(a,o);var d=hm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?DT(i,f):h==="dangerouslySetInnerHTML"?RT(i,f):h==="children"?Jl(i,f):Qg(i,h,f,d)}switch(a){case"input":am(i,s);break;case"textarea":kT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?oa(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?oa(i,!!s.multiple,s.defaultValue,!0):oa(i,!!s.multiple,s.multiple?[]:"",!1))}i[ac]=s}catch(_){yt(t,t.return,_)}}break;case 6:if(cr(e,t),jr(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){yt(t,t.return,_)}}break;case 3:if(cr(e,t),jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nc(e.containerInfo)}catch(_){yt(t,t.return,_)}break;case 4:cr(e,t),jr(t);break;case 13:cr(e,t),jr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ky=bt())),r&4&&ew(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(d=rn)||h,cr(e,t),rn=d):cr(e,t),jr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ue=t,h=t.child;h!==null;){for(f=ue=h;ue!==null;){switch(p=ue,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ml(4,p,p.return);break;case 1:Xo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){yt(r,n,_)}}break;case 5:Xo(p,p.return);break;case 22:if(p.memoizedState!==null){nw(f);continue}}g!==null?(g.return=p,ue=g):nw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PT("display",o))}catch(_){yt(t,t.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){yt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cr(e,t),jr(t),r&4&&ew(t);break;case 21:break;default:cr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rE(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jl(i,""),r.flags&=-33);var s=Z1(t);Bm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Z1(t);zm(t,a,o);break;default:throw Error(Q(161))}}catch(l){yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WR(t,e,n){ue=t,oE(t)}function oE(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var i=ue,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Au;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||rn;a=Au;var d=rn;if(Au=o,(rn=l)&&!d)for(ue=i;ue!==null;)o=ue,l=o.child,o.tag===22&&o.memoizedState!==null?rw(i):l!==null?(l.return=o,ue=l):rw(i);for(;s!==null;)ue=s,oE(s),s=s.sibling;ue=i,Au=a,rn=d}tw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ue=s):tw(t)}}function tw(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Uh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&F1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&nc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}rn||e.flags&512&&Um(e)}catch(p){yt(e,e.return,p)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function nw(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function rw(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uh(4,e)}catch(l){yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){yt(e,i,l)}}var s=e.return;try{Um(e)}catch(l){yt(e,s,l)}break;case 5:var o=e.return;try{Um(e)}catch(l){yt(e,o,l)}}}catch(l){yt(e,e.return,l)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var qR=Math.ceil,zd=bi.ReactCurrentDispatcher,Iy=bi.ReactCurrentOwner,ir=bi.ReactCurrentBatchConfig,Ue=0,zt=null,At=null,Gt=0,Nn=0,Jo=As(0),Lt=0,fc=null,fo=0,zh=0,Cy=0,Vl=null,_n=null,ky=0,Ra=1/0,ni=null,Bd=!1,$m=null,os=null,Ru=!1,Yi=null,$d=0,Ol=0,Wm=null,id=-1,sd=0;function pn(){return Ue&6?bt():id!==-1?id:id=bt()}function as(t){return t.mode&1?Ue&2&&Gt!==0?Gt&-Gt:kR.transition!==null?(sd===0&&(sd=WT()),sd):(t=$e,t!==0||(t=window.event,t=t===void 0?16:XT(t.type)),t):1}function Tr(t,e,n,r){if(50<Ol)throw Ol=0,Wm=null,Error(Q(185));Dc(t,n,r),(!(Ue&2)||t!==zt)&&(t===zt&&(!(Ue&2)&&(zh|=n),Lt===4&&Bi(t,Gt)),Cn(t,r),n===1&&Ue===0&&!(e.mode&1)&&(Ra=bt()+500,Vh&&Rs()))}function Cn(t,e){var n=t.callbackNode;kA(t,e);var r=Id(t,t===zt?Gt:0);if(r===0)n!==null&&h1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&h1(n),e===1)t.tag===0?CR(iw.bind(null,t)):gS(iw.bind(null,t)),SR(function(){!(Ue&6)&&Rs()}),n=null;else{switch(qT(r)){case 1:n=ey;break;case 4:n=BT;break;case 16:n=bd;break;case 536870912:n=$T;break;default:n=bd}n=pE(n,aE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aE(t,e){if(id=-1,sd=0,Ue&6)throw Error(Q(327));var n=t.callbackNode;if(da()&&t.callbackNode!==n)return null;var r=Id(t,t===zt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wd(t,r);else{e=r;var i=Ue;Ue|=2;var s=cE();(zt!==t||Gt!==e)&&(ni=null,Ra=bt()+500,ro(t,e));do try{KR();break}catch(a){lE(t,a)}while(1);fy(),zd.current=s,Ue=i,At!==null?e=0:(zt=null,Gt=0,e=Lt)}if(e!==0){if(e===2&&(i=ym(t),i!==0&&(r=i,e=qm(t,i))),e===1)throw n=fc,ro(t,0),Bi(t,r),Cn(t,bt()),n;if(e===6)Bi(t,r);else{if(i=t.current.alternate,!(r&30)&&!HR(i)&&(e=Wd(t,r),e===2&&(s=ym(t),s!==0&&(r=s,e=qm(t,s))),e===1))throw n=fc,ro(t,0),Bi(t,r),Cn(t,bt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Ws(t,_n,ni);break;case 3:if(Bi(t,r),(r&130023424)===r&&(e=ky+500-bt(),10<e)){if(Id(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bm(Ws.bind(null,t,_n,ni),e);break}Ws(t,_n,ni);break;case 4:if(Bi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_r(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qR(r/1960))-r,10<r){t.timeoutHandle=bm(Ws.bind(null,t,_n,ni),r);break}Ws(t,_n,ni);break;case 5:Ws(t,_n,ni);break;default:throw Error(Q(329))}}}return Cn(t,bt()),t.callbackNode===n?aE.bind(null,t):null}function qm(t,e){var n=Vl;return t.current.memoizedState.isDehydrated&&(ro(t,e).flags|=256),t=Wd(t,e),t!==2&&(e=_n,_n=n,e!==null&&Hm(e)),t}function Hm(t){_n===null?_n=t:_n.push.apply(_n,t)}function HR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ir(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bi(t,e){for(e&=~Cy,e&=~zh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_r(e),r=1<<n;t[n]=-1,e&=~r}}function iw(t){if(Ue&6)throw Error(Q(327));da();var e=Id(t,0);if(!(e&1))return Cn(t,bt()),null;var n=Wd(t,e);if(t.tag!==0&&n===2){var r=ym(t);r!==0&&(e=r,n=qm(t,r))}if(n===1)throw n=fc,ro(t,0),Bi(t,e),Cn(t,bt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,_n,ni),Cn(t,bt()),null}function Ay(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(Ra=bt()+500,Vh&&Rs())}}function po(t){Yi!==null&&Yi.tag===0&&!(Ue&6)&&da();var e=Ue;Ue|=1;var n=ir.transition,r=$e;try{if(ir.transition=null,$e=1,t)return t()}finally{$e=r,ir.transition=n,Ue=e,!(Ue&6)&&Rs()}}function Ry(){Nn=Jo.current,ot(Jo)}function ro(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TR(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(uy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pd();break;case 3:ka(),ot(bn),ot(sn),wy();break;case 5:vy(r);break;case 4:ka();break;case 13:ot(ut);break;case 19:ot(ut);break;case 10:py(r.type._context);break;case 22:case 23:Ry()}n=n.return}if(zt=t,At=t=ls(t.current,null),Gt=Nn=e,Lt=0,fc=null,Cy=zh=fo=0,_n=Vl=null,Xs!==null){for(e=0;e<Xs.length;e++)if(n=Xs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xs=null}return t}function lE(t,e){do{var n=At;try{if(fy(),td.current=Ud,Fd){for(var r=ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fd=!1}if(ho=0,Ft=jt=ft=null,Ll=!1,uc=0,Iy.current=null,n===null||n.return===null){Lt=1,fc=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=q1(o);if(g!==null){g.flags&=-257,H1(g,o,a,s,e),g.mode&1&&W1(s,d,e),e=g,l=d;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){W1(s,d,e),Py();break e}l=Error(Q(426))}}else if(ct&&a.mode&1){var k=q1(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),H1(k,o,a,s,e),dy(Aa(l,a));break e}}s=l=Aa(l,a),Lt!==4&&(Lt=2),Vl===null?Vl=[s]:Vl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=qS(s,l,e);O1(s,S);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(os===null||!os.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=HS(s,a,e);O1(s,j);break e}}s=s.return}while(s!==null)}dE(n)}catch(L){e=L,At===n&&n!==null&&(At=n=n.return);continue}break}while(1)}function cE(){var t=zd.current;return zd.current=Ud,t===null?Ud:t}function Py(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),zt===null||!(fo&268435455)&&!(zh&268435455)||Bi(zt,Gt)}function Wd(t,e){var n=Ue;Ue|=2;var r=cE();(zt!==t||Gt!==e)&&(ni=null,ro(t,e));do try{GR();break}catch(i){lE(t,i)}while(1);if(fy(),Ue=n,zd.current=r,At!==null)throw Error(Q(261));return zt=null,Gt=0,Lt}function GR(){for(;At!==null;)uE(At)}function KR(){for(;At!==null&&!wA();)uE(At)}function uE(t){var e=fE(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?dE(t):At=e,Iy.current=null}function dE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zR(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,At=null;return}}else if(n=UR(n,e,Nn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Lt===0&&(Lt=5)}function Ws(t,e,n){var r=$e,i=ir.transition;try{ir.transition=null,$e=1,QR(t,e,n,r)}finally{ir.transition=i,$e=r}return null}function QR(t,e,n,r){do da();while(Yi!==null);if(Ue&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(AA(t,s),t===zt&&(At=zt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ru||(Ru=!0,pE(bd,function(){return da(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ir.transition,ir.transition=null;var o=$e;$e=1;var a=Ue;Ue|=4,Iy.current=null,$R(t,n),sE(n,t),mR(Sm),Cd=!!Tm,Sm=Tm=null,t.current=n,WR(n),xA(),Ue=a,$e=o,ir.transition=s}else t.current=n;if(Ru&&(Ru=!1,Yi=t,$d=i),s=t.pendingLanes,s===0&&(os=null),SA(n.stateNode),Cn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bd)throw Bd=!1,t=$m,$m=null,t;return $d&1&&t.tag!==0&&da(),s=t.pendingLanes,s&1?t===Wm?Ol++:(Ol=0,Wm=t):Ol=0,Rs(),null}function da(){if(Yi!==null){var t=qT($d),e=ir.transition,n=$e;try{if(ir.transition=null,$e=16>t?16:t,Yi===null)var r=!1;else{if(t=Yi,Yi=null,$d=0,Ue&6)throw Error(Q(331));var i=Ue;for(Ue|=4,ue=t.current;ue!==null;){var s=ue,o=s.child;if(ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(ue=d;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:Ml(8,h,s)}var f=h.child;if(f!==null)f.return=h,ue=f;else for(;ue!==null;){h=ue;var p=h.sibling,g=h.return;if(nE(h),h===d){ue=null;break}if(p!==null){p.return=g,ue=p;break}ue=g}}}var w=s.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ue=o;else e:for(;ue!==null;){if(s=ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ml(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ue=S;break e}ue=s.return}}var v=t.current;for(ue=v;ue!==null;){o=ue;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ue=x;else e:for(o=v;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uh(9,a)}}catch(L){yt(a,a.return,L)}if(a===o){ue=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,ue=j;break e}ue=a.return}}if(Ue=i,Rs(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Dh,t)}catch{}r=!0}return r}finally{$e=n,ir.transition=e}}return!1}function sw(t,e,n){e=Aa(n,e),e=qS(t,e,1),t=ss(t,e,1),e=pn(),t!==null&&(Dc(t,1,e),Cn(t,e))}function yt(t,e,n){if(t.tag===3)sw(t,t,n);else for(;e!==null;){if(e.tag===3){sw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=Aa(n,t),t=HS(e,t,1),e=ss(e,t,1),t=pn(),e!==null&&(Dc(e,1,t),Cn(e,t));break}}e=e.return}}function YR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Gt&n)===n&&(Lt===4||Lt===3&&(Gt&130023424)===Gt&&500>bt()-ky?ro(t,0):Cy|=n),Cn(t,e)}function hE(t,e){e===0&&(t.mode&1?(e=xu,xu<<=1,!(xu&130023424)&&(xu=4194304)):e=1);var n=pn();t=gi(t,e),t!==null&&(Dc(t,e,n),Cn(t,n))}function XR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hE(t,n)}function JR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),hE(t,n)}var fE;fE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,FR(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,ct&&e.flags&1048576&&yS(e,jd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rd(t,e),t=e.pendingProps;var i=ba(e,sn.current);ua(e,n),i=_y(null,e,r,t,i,n);var s=Ty();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,Dd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gy(e),i.updater=Fh,e.stateNode=i,i._reactInternals=e,Dm(e,r,t,n),e=Lm(null,e,r,!0,s,n)):(e.tag=0,ct&&s&&cy(e),un(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eP(r),t=ur(r,t),i){case 0:e=jm(null,e,r,t,n);break e;case 1:e=Q1(null,e,r,t,n);break e;case 11:e=G1(null,e,r,t,n);break e;case 14:e=K1(null,e,r,ur(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),jm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),Q1(t,e,r,i,n);case 3:e:{if(YS(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,SS(t,e),Vd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Aa(Error(Q(423)),e),e=Y1(t,e,r,n,i);break e}else if(r!==i){i=Aa(Error(Q(424)),e),e=Y1(t,e,r,n,i);break e}else for(Mn=is(e.stateNode.containerInfo.firstChild),Fn=e,ct=!0,mr=null,n=_S(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ia(),r===i){e=yi(t,e,n);break e}un(t,e,r,n)}e=e.child}return e;case 5:return ES(e),t===null&&Am(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Em(r,i)?o=null:s!==null&&Em(r,s)&&(e.flags|=32),QS(t,e),un(t,e,o,n),e.child;case 6:return t===null&&Am(e),null;case 13:return XS(t,e,n);case 4:return yy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ca(e,null,r,n):un(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),G1(t,e,r,i,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Xe(Ld,r._currentValue),r._currentValue=o,s!==null)if(Ir(s.value,o)){if(s.children===i.children&&!bn.current){e=yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ui(-1,n&-n),l.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}un(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ua(e,n),i=or(i),r=r(i),e.flags|=1,un(t,e,r,n),e.child;case 14:return r=e.type,i=ur(r,e.pendingProps),i=ur(r.type,i),K1(t,e,r,i,n);case 15:return GS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ur(r,i),rd(t,e),e.tag=1,In(r)?(t=!0,Dd(e)):t=!1,ua(e,n),WS(e,r,i),Dm(e,r,i,n),Lm(null,e,r,!0,t,n);case 19:return JS(t,e,n);case 22:return KS(t,e,n)}throw Error(Q(156,e.tag))};function pE(t,e){return zT(t,e)}function ZR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,n,r){return new ZR(t,e,n,r)}function Dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eP(t){if(typeof t=="function")return Dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xg)return 11;if(t===Jg)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function od(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bo:return io(n.children,i,s,e);case Yg:o=8,i|=8;break;case nm:return t=rr(12,n,e,i|2),t.elementType=nm,t.lanes=s,t;case rm:return t=rr(13,n,e,i),t.elementType=rm,t.lanes=s,t;case im:return t=rr(19,n,e,i),t.elementType=im,t.lanes=s,t;case ET:return Bh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TT:o=10;break e;case ST:o=9;break e;case Xg:o=11;break e;case Jg:o=14;break e;case Oi:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=rr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function io(t,e,n,r){return t=rr(7,t,r,e),t.lanes=n,t}function Bh(t,e,n,r){return t=rr(22,t,r,e),t.elementType=ET,t.lanes=n,t.stateNode={isHidden:!1},t}function wp(t,e,n){return t=rr(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ep(0),this.expirationTimes=ep(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ep(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ny(t,e,n,r,i,s,o,a,l){return t=new tP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(s),t}function nP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mE(t){if(!t)return ys;t=t._reactInternals;e:{if(To(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(In(n))return mS(t,n,e)}return e}function gE(t,e,n,r,i,s,o,a,l){return t=Ny(n,r,!0,t,i,s,o,a,l),t.context=mE(null),n=t.current,r=pn(),i=as(n),s=ui(r,i),s.callback=e??null,ss(n,s,i),t.current.lanes=i,Dc(t,i,r),Cn(t,r),t}function $h(t,e,n,r){var i=e.current,s=pn(),o=as(i);return n=mE(n),e.context===null?e.context=n:e.pendingContext=n,e=ui(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(i,e,o),t!==null&&(Tr(t,i,o,s),ed(t,i,o)),o}function qd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ow(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jy(t,e){ow(t,e),(t=t.alternate)&&ow(t,e)}function rP(){return null}var yE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ly(t){this._internalRoot=t}Wh.prototype.render=Ly.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));$h(t,e,null,null)};Wh.prototype.unmount=Ly.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;po(function(){$h(null,t,null,null)}),e[mi]=null}};function Wh(t){this._internalRoot=t}Wh.prototype.unstable_scheduleHydration=function(t){if(t){var e=KT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zi.length&&e!==0&&e<zi[n].priority;n++);zi.splice(n,0,t),n===0&&YT(t)}};function My(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aw(){}function iP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=qd(o);s.call(d)}}var o=gE(e,r,t,0,null,!1,!1,"",aw);return t._reactRootContainer=o,t[mi]=o.current,sc(t.nodeType===8?t.parentNode:t),po(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=qd(l);a.call(d)}}var l=Ny(t,0,!1,null,null,!1,!1,"",aw);return t._reactRootContainer=l,t[mi]=l.current,sc(t.nodeType===8?t.parentNode:t),po(function(){$h(e,l,n,r)}),l}function Hh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qd(o);a.call(l)}}$h(e,o,t,i)}else o=iP(n,e,t,i,r);return qd(o)}HT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sl(e.pendingLanes);n!==0&&(ty(e,n|1),Cn(e,bt()),!(Ue&6)&&(Ra=bt()+500,Rs()))}break;case 13:po(function(){var r=gi(t,1);if(r!==null){var i=pn();Tr(r,t,1,i)}}),jy(t,1)}};ny=function(t){if(t.tag===13){var e=gi(t,134217728);if(e!==null){var n=pn();Tr(e,t,134217728,n)}jy(t,134217728)}};GT=function(t){if(t.tag===13){var e=as(t),n=gi(t,e);if(n!==null){var r=pn();Tr(n,t,e,r)}jy(t,e)}};KT=function(){return $e};QT=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};pm=function(t,e,n){switch(e){case"input":if(am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Mh(r);if(!i)throw Error(Q(90));IT(r),am(r,i)}}}break;case"textarea":kT(t,n);break;case"select":e=n.value,e!=null&&oa(t,!!n.multiple,e,!1)}};LT=Ay;MT=po;var sP={usingClientEntryPoint:!1,Events:[jc,Ho,Mh,NT,jT,Ay]},gl={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FT(t),t===null?null:t.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{Dh=Pu.inject(oP),Wr=Pu}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sP;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!My(e))throw Error(Q(200));return nP(t,e,null,n)};Wn.createRoot=function(t,e){if(!My(t))throw Error(Q(299));var n=!1,r="",i=yE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ny(t,1,!1,null,null,n,!1,r,i),t[mi]=e.current,sc(t.nodeType===8?t.parentNode:t),new Ly(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=FT(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return po(t)};Wn.hydrate=function(t,e,n){if(!qh(e))throw Error(Q(200));return Hh(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!My(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gE(e,null,t,1,n??null,i,!1,s,o),t[mi]=e.current,sc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wh(e)};Wn.render=function(t,e,n){if(!qh(e))throw Error(Q(200));return Hh(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!qh(t))throw Error(Q(40));return t._reactRootContainer?(po(function(){Hh(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};Wn.unstable_batchedUpdates=Ay;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Hh(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function vE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vE)}catch(t){console.error(t)}}vE(),vT.exports=Wn;var aP=vT.exports,lw=aP;em.createRoot=lw.createRoot,em.hydrateRoot=lw.hydrateRoot;const wE=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Gh=R.createContext({}),Kh=R.createContext(null),Qh=typeof document<"u",Vy=Qh?R.useLayoutEffect:R.useEffect,xE=R.createContext({strict:!1}),Oy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),lP="framerAppearId",_E="data-"+Oy(lP);function cP(t,e,n,r){const{visualElement:i}=R.useContext(Gh),s=R.useContext(xE),o=R.useContext(Kh),a=R.useContext(wE).reducedMotion,l=R.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const d=l.current;R.useInsertionEffect(()=>{d&&d.update(n,o)});const h=R.useRef(!!(n[_E]&&!window.HandoffComplete));return Vy(()=>{d&&(d.render(),h.current&&d.animationState&&d.animationState.animateChanges())}),R.useEffect(()=>{d&&(d.updateFeatures(),!h.current&&d.animationState&&d.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),d}function Zo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function uP(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Zo(n)&&(n.current=r))},[e])}function pc(t){return typeof t=="string"||Array.isArray(t)}function Yh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Fy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Uy=["initial",...Fy];function Xh(t){return Yh(t.animate)||Uy.some(e=>pc(t[e]))}function TE(t){return!!(Xh(t)||t.variants)}function dP(t,e){if(Xh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||pc(n)?n:void 0,animate:pc(r)?r:void 0}}return t.inherit!==!1?e:{}}function hP(t){const{initial:e,animate:n}=dP(t,R.useContext(Gh));return R.useMemo(()=>({initial:e,animate:n}),[cw(e),cw(n)])}function cw(t){return Array.isArray(t)?t.join(" "):t}const uw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mc={};for(const t in uw)mc[t]={isEnabled:e=>uw[t].some(n=>!!e[n])};function fP(t){for(const e in t)mc[e]={...mc[e],...t[e]}}const zy=R.createContext({}),SE=R.createContext({}),pP=Symbol.for("motionComponentSymbol");function mP({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&fP(t);function s(a,l){let d;const h={...R.useContext(wE),...a,layoutId:gP(a)},{isStatic:f}=h,p=hP(a),g=r(a,f);if(!f&&Qh){p.visualElement=cP(i,g,h,e);const w=R.useContext(SE),_=R.useContext(xE).strict;p.visualElement&&(d=p.visualElement.loadFeatures(h,_,t,w))}return R.createElement(Gh.Provider,{value:p},d&&p.visualElement?R.createElement(d,{visualElement:p.visualElement,...h}):null,n(i,a,uP(g,p.visualElement,l),g,f,p.visualElement))}const o=R.forwardRef(s);return o[pP]=i,o}function gP({layoutId:t}){const e=R.useContext(zy).id;return e&&t!==void 0?e+"-"+t:t}function yP(t){function e(r,i={}){return mP(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const vP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function By(t){return typeof t!="string"||t.includes("-")?!1:!!(vP.indexOf(t)>-1||/[A-Z]/.test(t))}const Hd={};function wP(t){Object.assign(Hd,t)}const Mc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],So=new Set(Mc);function EE(t,{layout:e,layoutId:n}){return So.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hd[t]||t==="opacity")}const kn=t=>!!(t&&t.getVelocity),xP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_P=Mc.length;function TP(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<_P;o++){const a=Mc[o];if(t[a]!==void 0){const l=xP[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const bE=t=>e=>typeof e=="string"&&e.startsWith(t),IE=bE("--"),Gm=bE("var(--"),SP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,EP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vs=(t,e,n)=>Math.min(Math.max(n,t),e),Eo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fl={...Eo,transform:t=>vs(0,1,t)},Du={...Eo,default:1},Ul=t=>Math.round(t*1e5)/1e5,Jh=/(-)?([\d]*\.?[\d])+/g,CE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,bP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Vc(t){return typeof t=="string"}const Oc=t=>({test:e=>Vc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vi=Oc("deg"),Hr=Oc("%"),Te=Oc("px"),IP=Oc("vh"),CP=Oc("vw"),dw={...Hr,parse:t=>Hr.parse(t)/100,transform:t=>Hr.transform(t*100)},hw={...Eo,transform:Math.round},kE={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:Vi,rotateX:Vi,rotateY:Vi,rotateZ:Vi,scale:Du,scaleX:Du,scaleY:Du,scaleZ:Du,skew:Vi,skewX:Vi,skewY:Vi,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Fl,originX:dw,originY:dw,originZ:Te,zIndex:hw,fillOpacity:Fl,strokeOpacity:Fl,numOctaves:hw};function $y(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,d=!1,h=!0;for(const f in e){const p=e[f];if(IE(f)){s[f]=p;continue}const g=kE[f],w=EP(p,g);if(So.has(f)){if(l=!0,o[f]=w,!h)continue;p!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(d=!0,a[f]=w):i[f]=w}if(e.transform||(l||r?i.transform=TP(t.transform,n,h,r):i.transform&&(i.transform="none")),d){const{originX:f="50%",originY:p="50%",originZ:g=0}=a;i.transformOrigin=`${f} ${p} ${g}`}}const Wy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AE(t,e,n){for(const r in e)!kn(e[r])&&!EE(r,n)&&(t[r]=e[r])}function kP({transformTemplate:t},e,n){return R.useMemo(()=>{const r=Wy();return $y(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function AP(t,e,n){const r=t.style||{},i={};return AE(i,r,t),Object.assign(i,kP(t,e,n)),t.transformValues?t.transformValues(i):i}function RP(t,e,n){const r={},i=AP(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const PP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Gd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||PP.has(t)}let RE=t=>!Gd(t);function DP(t){t&&(RE=e=>e.startsWith("on")?!Gd(e):t(e))}try{DP(require("@emotion/is-prop-valid").default)}catch{}function NP(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(RE(i)||n===!0&&Gd(i)||!e&&!Gd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function fw(t,e,n){return typeof t=="string"?t:Te.transform(e+n*t)}function jP(t,e,n){const r=fw(e,t.x,t.width),i=fw(n,t.y,t.height);return`${r} ${i}`}const LP={offset:"stroke-dashoffset",array:"stroke-dasharray"},MP={offset:"strokeDashoffset",array:"strokeDasharray"};function VP(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?LP:MP;t[s.offset]=Te.transform(-r);const o=Te.transform(e),a=Te.transform(n);t[s.array]=`${o} ${a}`}function qy(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...d},h,f,p){if($y(t,d,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:w,dimensions:_}=t;g.transform&&(_&&(w.transform=g.transform),delete g.transform),_&&(i!==void 0||s!==void 0||w.transform)&&(w.transformOrigin=jP(_,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&VP(g,o,a,l,!1)}const PE=()=>({...Wy(),attrs:{}}),Hy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function OP(t,e,n,r){const i=R.useMemo(()=>{const s=PE();return qy(s,e,{enableHardwareAcceleration:!1},Hy(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};AE(s,t.style,t),i.style={...s,...i.style}}return i}function FP(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(By(n)?OP:RP)(r,s,o,n),h={...NP(r,typeof n=="string",t),...l,ref:i},{children:f}=r,p=R.useMemo(()=>kn(f)?f.get():f,[f]);return R.createElement(n,{...h,children:p})}}function DE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const NE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jE(t,e,n,r){DE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(NE.has(i)?i:Oy(i),e.attrs[i])}function Gy(t,e){const{style:n}=t,r={};for(const i in n)(kn(n[i])||e.style&&kn(e.style[i])||EE(i,t))&&(r[i]=n[i]);return r}function LE(t,e){const n=Gy(t,e);for(const r in t)if(kn(t[r])||kn(e[r])){const i=Mc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Ky(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function ME(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const Kd=t=>Array.isArray(t),UP=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),zP=t=>Kd(t)?t[t.length-1]||0:t;function ad(t){const e=kn(t)?t.get():t;return UP(e)?e.toValue():e}function BP({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:$P(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const VE=t=>(e,n)=>{const r=R.useContext(Gh),i=R.useContext(Kh),s=()=>BP(t,e,r,i);return n?s():ME(s)};function $P(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=ad(s[p]);let{initial:o,animate:a}=t;const l=Xh(t),d=TE(t);e&&d&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!Yh(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const w=Ky(t,g);if(!w)return;const{transitionEnd:_,transition:k,...S}=w;for(const v in S){let x=S[v];if(Array.isArray(x)){const j=h?x.length-1:0;x=x[j]}x!==null&&(i[v]=x)}for(const v in _)i[v]=_[v]}),i}const vt=t=>t;class pw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function WP(t){let e=new pw,n=new pw,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,d=!1,h=!1)=>{const f=h&&i,p=f?e:n;return d&&o.add(l),p.add(l)&&f&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let d=0;d<r;d++){const h=e.order[d];h(l),o.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const Nu=["prepare","read","update","preRender","render","postRender"],qP=40;function HP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Nu.reduce((f,p)=>(f[p]=WP(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,qP),1),i.timestamp=f,i.isProcessing=!0,Nu.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Nu.reduce((f,p)=>{const g=s[p];return f[p]=(w,_=!1,k=!1)=>(n||l(),g.schedule(w,_,k)),f},{}),cancel:f=>Nu.forEach(p=>s[p].cancel(f)),state:i,steps:s}}const{schedule:Je,cancel:vi,state:tn,steps:_p}=HP(typeof requestAnimationFrame<"u"?requestAnimationFrame:vt,!0),GP={useVisualState:VE({scrapeMotionValuesFromProps:LE,createRenderState:PE,onMount:(t,e,{renderState:n,latestValues:r})=>{Je.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Je.render(()=>{qy(n,r,{enableHardwareAcceleration:!1},Hy(e.tagName),t.transformTemplate),jE(e,n)})}})},KP={useVisualState:VE({scrapeMotionValuesFromProps:Gy,createRenderState:Wy})};function QP(t,{forwardMotionProps:e=!1},n,r){return{...By(t)?GP:KP,preloadedFeatures:n,useRender:FP(e),createVisualElement:r,Component:t}}function ai(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const OE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Zh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const YP=t=>e=>OE(e)&&t(e,Zh(e));function di(t,e,n,r){return ai(t,e,YP(n),r)}const XP=(t,e)=>n=>e(t(n)),cs=(...t)=>t.reduce(XP);function FE(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const mw=FE("dragHorizontal"),gw=FE("dragVertical");function UE(t){let e=!1;if(t==="y")e=gw();else if(t==="x")e=mw();else{const n=mw(),r=gw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function zE(){const t=UE(!0);return t?(t(),!1):!0}class Ps{constructor(e){this.isMounted=!1,this.node=e}update(){}}function yw(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||zE())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Je.update(()=>a[r](s,o))};return di(t.current,n,i,{passive:!t.getProps()[r]})}class JP extends Ps{mount(){this.unmount=cs(yw(this.node,!0),yw(this.node,!1))}unmount(){}}class ZP extends Ps{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cs(ai(this.node.current,"focus",()=>this.onFocus()),ai(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const BE=(t,e)=>e?t===e?!0:BE(t,e.parentElement):!1;function Tp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Zh(n))}class e5 extends Ps{constructor(){super(...arguments),this.removeStartListeners=vt,this.removeEndListeners=vt,this.removeAccessibleListeners=vt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=di(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Je.update(()=>{!f&&!BE(this.node.current,a.target)?h&&h(a,l):d&&d(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=di(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cs(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Tp("up",(l,d)=>{const{onTap:h}=this.node.getProps();h&&Je.update(()=>h(l,d))})};this.removeEndListeners(),this.removeEndListeners=ai(this.node.current,"keyup",o),Tp("down",(a,l)=>{this.startPress(a,l)})},n=ai(this.node.current,"keydown",e),r=()=>{this.isPressing&&Tp("cancel",(s,o)=>this.cancelPress(s,o))},i=ai(this.node.current,"blur",r);this.removeAccessibleListeners=cs(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Je.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zE()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Je.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=di(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ai(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cs(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Km=new WeakMap,Sp=new WeakMap,t5=t=>{const e=Km.get(t.target);e&&e(t)},n5=t=>{t.forEach(t5)};function r5({root:t,...e}){const n=t||document;Sp.has(n)||Sp.set(n,{});const r=Sp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(n5,{root:t,...e})),r[i]}function i5(t,e,n){const r=r5(e);return Km.set(t,n),r.observe(t),()=>{Km.delete(t),r.unobserve(t)}}const s5={some:0,all:1};class o5 extends Ps{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:s5[i]},a=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=d?h:f;p&&p(l)};return i5(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(a5(e,n))&&this.startObserver()}unmount(){}}function a5({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const l5={inView:{Feature:o5},tap:{Feature:e5},focus:{Feature:ZP},hover:{Feature:JP}};function $E(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function c5(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function u5(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function ef(t,e,n){const r=t.getProps();return Ky(r,e,n!==void 0?n:r.custom,c5(t),u5(t))}let d5=vt,Qy=vt;const us=t=>t*1e3,hi=t=>t/1e3,h5={current:!1},WE=t=>Array.isArray(t)&&typeof t[0]=="number";function qE(t){return!!(!t||typeof t=="string"&&HE[t]||WE(t)||Array.isArray(t)&&t.every(qE))}const bl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,HE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bl([0,.65,.55,1]),circOut:bl([.55,0,1,.45]),backIn:bl([.31,.01,.66,-.59]),backOut:bl([.33,1.53,.69,.99])};function GE(t){if(t)return WE(t)?bl(t):Array.isArray(t)?t.map(GE):HE[t]}function f5(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const d={[e]:n};l&&(d.offset=l);const h=GE(a);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function p5(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const KE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,m5=1e-7,g5=12;function y5(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=KE(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>m5&&++a<g5);return o}function Fc(t,e,n,r){if(t===e&&n===r)return vt;const i=s=>y5(s,0,1,t,n);return s=>s===0||s===1?s:KE(i(s),e,r)}const v5=Fc(.42,0,1,1),w5=Fc(0,0,.58,1),QE=Fc(.42,0,.58,1),x5=t=>Array.isArray(t)&&typeof t[0]!="number",YE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XE=t=>e=>1-t(1-e),Yy=t=>1-Math.sin(Math.acos(t)),JE=XE(Yy),_5=YE(Yy),ZE=Fc(.33,1.53,.69,.99),Xy=XE(ZE),T5=YE(Xy),S5=t=>(t*=2)<1?.5*Xy(t):.5*(2-Math.pow(2,-10*(t-1))),E5={linear:vt,easeIn:v5,easeInOut:QE,easeOut:w5,circIn:Yy,circInOut:_5,circOut:JE,backIn:Xy,backInOut:T5,backOut:ZE,anticipate:S5},vw=t=>{if(Array.isArray(t)){Qy(t.length===4);const[e,n,r,i]=t;return Fc(e,n,r,i)}else if(typeof t=="string")return E5[t];return t},Jy=(t,e)=>n=>!!(Vc(n)&&bP.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),eb=(t,e,n)=>r=>{if(!Vc(r))return r;const[i,s,o,a]=r.match(Jh);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},b5=t=>vs(0,255,t),Ep={...Eo,transform:t=>Math.round(b5(t))},Zs={test:Jy("rgb","red"),parse:eb("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ep.transform(t)+", "+Ep.transform(e)+", "+Ep.transform(n)+", "+Ul(Fl.transform(r))+")"};function I5(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Qm={test:Jy("#"),parse:I5,transform:Zs.transform},ea={test:Jy("hsl","hue"),parse:eb("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hr.transform(Ul(e))+", "+Hr.transform(Ul(n))+", "+Ul(Fl.transform(r))+")"},cn={test:t=>Zs.test(t)||Qm.test(t)||ea.test(t),parse:t=>Zs.test(t)?Zs.parse(t):ea.test(t)?ea.parse(t):Qm.parse(t),transform:t=>Vc(t)?t:t.hasOwnProperty("red")?Zs.transform(t):ea.transform(t)},dt=(t,e,n)=>-n*t+n*e+t;function bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function C5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=bp(l,a,t+1/3),s=bp(l,a,t),o=bp(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Ip=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},k5=[Qm,Zs,ea],A5=t=>k5.find(e=>e.test(t));function ww(t){const e=A5(t);let n=e.parse(t);return e===ea&&(n=C5(n)),n}const tb=(t,e)=>{const n=ww(t),r=ww(e),i={...n};return s=>(i.red=Ip(n.red,r.red,s),i.green=Ip(n.green,r.green,s),i.blue=Ip(n.blue,r.blue,s),i.alpha=dt(n.alpha,r.alpha,s),Zs.transform(i))};function R5(t){var e,n;return isNaN(t)&&Vc(t)&&(((e=t.match(Jh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(CE))===null||n===void 0?void 0:n.length)||0)>0}const nb={regex:SP,countKey:"Vars",token:"${v}",parse:vt},rb={regex:CE,countKey:"Colors",token:"${c}",parse:cn.parse},ib={regex:Jh,countKey:"Numbers",token:"${n}",parse:Eo.parse};function Cp(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Qd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Cp(n,nb),Cp(n,rb),Cp(n,ib),n}function sb(t){return Qd(t).values}function ob(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Qd(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(nb.token,o[l]):l<r+n?a=a.replace(rb.token,cn.transform(o[l])):a=a.replace(ib.token,Ul(o[l]));return a}}const P5=t=>typeof t=="number"?0:t;function D5(t){const e=sb(t);return ob(t)(e.map(P5))}const ws={test:R5,parse:sb,createTransformer:ob,getAnimatableNone:D5},ab=(t,e)=>n=>`${n>0?e:t}`;function lb(t,e){return typeof t=="number"?n=>dt(t,e,n):cn.test(t)?tb(t,e):t.startsWith("var(")?ab(t,e):ub(t,e)}const cb=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>lb(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},N5=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=lb(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},ub=(t,e)=>{const n=ws.createTransformer(e),r=Qd(t),i=Qd(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?cs(cb(r.values,i.values),n):ab(t,e)},gc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},xw=(t,e)=>n=>dt(t,e,n);function j5(t){return typeof t=="number"?xw:typeof t=="string"?cn.test(t)?tb:ub:Array.isArray(t)?cb:typeof t=="object"?N5:xw}function L5(t,e,n){const r=[],i=n||j5(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||vt:e;a=cs(l,a)}r.push(a)}return r}function db(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Qy(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=L5(e,r,i),a=o.length,l=d=>{let h=0;if(a>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=gc(t[h],t[h+1],d);return o[h](f)};return n?d=>l(vs(t[0],t[s-1],d)):l}function M5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=gc(0,e,r);t.push(dt(n,1,i))}}function V5(t){const e=[0];return M5(e,t.length-1),e}function O5(t,e){return t.map(n=>n*e)}function F5(t,e){return t.map(()=>e||QE).splice(0,t.length-1)}function Yd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=x5(r)?r.map(vw):vw(r),s={done:!1,value:e[0]},o=O5(n&&n.length===e.length?n:V5(e),t),a=db(o,e,{ease:Array.isArray(i)?i:F5(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function hb(t,e){return e?t*(1e3/e):0}const U5=5;function fb(t,e,n){const r=Math.max(e-U5,0);return hb(n-t(r),e-r)}const kp=.001,z5=.01,_w=10,B5=.05,$5=1;function W5({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;d5(t<=us(_w));let o=1-e;o=vs(B5,$5,o),t=vs(z5,_w,hi(t)),o<1?(i=d=>{const h=d*o,f=h*t,p=h-n,g=Ym(d,o),w=Math.exp(-f);return kp-p/g*w},s=d=>{const f=d*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(d,2)*t,w=Math.exp(-f),_=Ym(Math.pow(d,2),o);return(-i(d)+kp>0?-1:1)*((p-g)*w)/_}):(i=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-kp+h*f},s=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const a=5/t,l=H5(i,s,a);if(t=us(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const d=Math.pow(l,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const q5=12;function H5(t,e,n){let r=n;for(let i=1;i<q5;i++)r=r-t(r)/e(r);return r}function Ym(t,e){return t*Math.sqrt(1-e*e)}const G5=["duration","bounce"],K5=["stiffness","damping","mass"];function Tw(t,e){return e.some(n=>t[n]!==void 0)}function Q5(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Tw(t,K5)&&Tw(t,G5)){const n=W5(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function pb({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=Q5({...r,velocity:-hi(r.velocity||0)}),g=f||0,w=l/(2*Math.sqrt(a*d)),_=s-i,k=hi(Math.sqrt(a/d)),S=Math.abs(_)<5;n||(n=S?.01:2),e||(e=S?.005:.5);let v;if(w<1){const x=Ym(k,w);v=j=>{const L=Math.exp(-w*k*j);return s-L*((g+w*k*_)/x*Math.sin(x*j)+_*Math.cos(x*j))}}else if(w===1)v=x=>s-Math.exp(-k*x)*(_+(g+k*_)*x);else{const x=k*Math.sqrt(w*w-1);v=j=>{const L=Math.exp(-w*k*j),O=Math.min(x*j,300);return s-L*((g+w*k*_)*Math.sinh(O)+x*_*Math.cosh(O))/x}}return{calculatedDuration:p&&h||null,next:x=>{const j=v(x);if(p)o.done=x>=h;else{let L=g;x!==0&&(w<1?L=fb(v,x,j):L=0);const O=Math.abs(L)<=n,E=Math.abs(s-j)<=e;o.done=O&&E}return o.value=o.done?s:j,o}}}function Sw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:d=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=T=>a!==void 0&&T<a||l!==void 0&&T>l,w=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let _=n*e;const k=f+_,S=o===void 0?k:o(k);S!==k&&(_=S-f);const v=T=>-_*Math.exp(-T/r),x=T=>S+v(T),j=T=>{const b=v(T),A=x(T);p.done=Math.abs(b)<=d,p.value=p.done?S:A};let L,O;const E=T=>{g(p.value)&&(L=T,O=pb({keyframes:[p.value,w(p.value)],velocity:fb(x,T,p.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return E(0),{calculatedDuration:null,next:T=>{let b=!1;return!O&&L===void 0&&(b=!0,j(T),E(T)),L!==void 0&&T>L?O.next(T-L):(!b&&j(T),p)}}}const Y5=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Je.update(e,!0),stop:()=>vi(e),now:()=>tn.isProcessing?tn.timestamp:performance.now()}},Ew=2e4;function bw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Ew;)e+=n,r=t.next(e);return e>=Ew?1/0:e}const X5={decay:Sw,inertia:Sw,tween:Yd,keyframes:Yd,spring:pb};function Xd({autoplay:t=!0,delay:e=0,driver:n=Y5,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:d,onComplete:h,onUpdate:f,...p}){let g=1,w=!1,_,k;const S=()=>{k=new Promise(D=>{_=D})};S();let v;const x=X5[i]||Yd;let j;x!==Yd&&typeof r[0]!="number"&&(j=db([0,100],r,{clamp:!1}),r=[0,100]);const L=x({...p,keyframes:r});let O;a==="mirror"&&(O=x({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let E="idle",T=null,b=null,A=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=bw(L));const{calculatedDuration:P}=L;let N=1/0,I=1/0;P!==null&&(N=P+o,I=N*(s+1)-o);let K=0;const fe=D=>{if(b===null)return;g>0&&(b=Math.min(b,D)),g<0&&(b=Math.min(D-I/g,b)),T!==null?K=T:K=Math.round(D-b)*g;const W=K-e*(g>=0?1:-1),Z=g>=0?W<0:W>I;K=Math.max(W,0),E==="finished"&&T===null&&(K=I);let ee=K,re=L;if(s){const pe=Math.min(K,I)/N;let Ee=Math.floor(pe),me=pe%1;!me&&pe>=1&&(me=1),me===1&&Ee--,Ee=Math.min(Ee,s+1),!!(Ee%2)&&(a==="reverse"?(me=1-me,o&&(me-=o/N)):a==="mirror"&&(re=O)),ee=vs(0,1,me)*N}const B=Z?{done:!1,value:r[0]}:re.next(ee);j&&(B.value=j(B.value));let{done:H}=B;!Z&&P!==null&&(H=g>=0?K>=I:K<=0);const ie=T===null&&(E==="finished"||E==="running"&&H);return f&&f(B.value),ie&&U(),B},Y=()=>{v&&v.stop(),v=void 0},ne=()=>{E="idle",Y(),_(),S(),b=A=null},U=()=>{E="finished",h&&h(),Y(),_()},X=()=>{if(w)return;v||(v=n(fe));const D=v.now();l&&l(),T!==null?b=D-T:(!b||E==="finished")&&(b=D),E==="finished"&&S(),A=b,T=null,E="running",v.start()};t&&X();const M={then(D,W){return k.then(D,W)},get time(){return hi(K)},set time(D){D=us(D),K=D,T!==null||!v||g===0?T=D:b=v.now()-D/g},get duration(){const D=L.calculatedDuration===null?bw(L):L.calculatedDuration;return hi(D)},get speed(){return g},set speed(D){D===g||!v||(g=D,M.time=hi(K))},get state(){return E},play:X,pause:()=>{E="paused",T=K},stop:()=>{w=!0,E!=="idle"&&(E="idle",d&&d(),ne())},cancel:()=>{A!==null&&fe(A),ne()},complete:()=>{E="finished"},sample:D=>(b=0,fe(D))};return M}function J5(t){let e;return()=>(e===void 0&&(e=t()),e)}const Z5=J5(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),e4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ju=10,t4=2e4,n4=(t,e)=>e.type==="spring"||t==="backgroundColor"||!qE(e.ease);function r4(t,e,{onUpdate:n,onComplete:r,...i}){if(!(Z5()&&e4.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,d=!1;const h=()=>{l=new Promise(x=>{a=x})};h();let{keyframes:f,duration:p=300,ease:g,times:w}=i;if(n4(e,i)){const x=Xd({...i,repeat:0,delay:0});let j={done:!1,value:f[0]};const L=[];let O=0;for(;!j.done&&O<t4;)j=x.sample(O),L.push(j.value),O+=ju;w=void 0,f=L,p=O-ju,g="linear"}const _=f5(t.owner.current,e,f,{...i,duration:p,ease:g,times:w}),k=()=>{d=!1,_.cancel()},S=()=>{d=!0,Je.update(k),a(),h()};return _.onfinish=()=>{d||(t.set(p5(f,i)),r&&r(),S())},{then(x,j){return l.then(x,j)},attachTimeline(x){return _.timeline=x,_.onfinish=null,vt},get time(){return hi(_.currentTime||0)},set time(x){_.currentTime=us(x)},get speed(){return _.playbackRate},set speed(x){_.playbackRate=x},get duration(){return hi(p)},play:()=>{o||(_.play(),vi(k))},pause:()=>_.pause(),stop:()=>{if(o=!0,_.playState==="idle")return;const{currentTime:x}=_;if(x){const j=Xd({...i,autoplay:!1});t.setWithVelocity(j.sample(x-ju).value,j.sample(x).value,ju)}S()},complete:()=>{d||_.finish()},cancel:S}}function i4({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:vt,pause:vt,stop:vt,then:s=>(s(),Promise.resolve()),cancel:vt,complete:vt});return e?Xd({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const s4={type:"spring",stiffness:500,damping:25,restSpeed:10},o4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),a4={type:"keyframes",duration:.8},l4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},c4=(t,{keyframes:e})=>e.length>2?a4:So.has(t)?t.startsWith("scale")?o4(e[1]):s4:l4,Xm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ws.test(e)||e==="0")&&!e.startsWith("url(")),u4=new Set(["brightness","contrast","saturate","opacity"]);function d4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Jh)||[];if(!r)return t;const i=n.replace(r,"");let s=u4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const h4=/([a-z-]*)\(.*?\)/g,Jm={...ws,getAnimatableNone:t=>{const e=t.match(h4);return e?e.map(d4).join(" "):t}},f4={...kE,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:Jm,WebkitFilter:Jm},Zy=t=>f4[t];function mb(t,e){let n=Zy(t);return n!==Jm&&(n=ws),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gb=t=>/^0[^.\s]+$/.test(t);function p4(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||gb(t)}function m4(t,e,n,r){const i=Xm(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let d=0;d<s.length;d++)s[d]===null&&(s[d]=d===0?o:s[d-1]),p4(s[d])&&l.push(d),typeof s[d]=="string"&&s[d]!=="none"&&s[d]!=="0"&&(a=s[d]);if(i&&l.length&&a)for(let d=0;d<l.length;d++){const h=l[d];s[h]=mb(e,a)}return s}function g4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:d,...h}){return!!Object.keys(h).length}function e0(t,e){return t[e]||t.default||t}const y4={skipAnimations:!1},t0=(t,e,n,r={})=>i=>{const s=e0(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-us(o);const l=m4(e,t,n,s),d=l[0],h=l[l.length-1],f=Xm(t,d),p=Xm(t,h);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:w=>{e.set(w),s.onUpdate&&s.onUpdate(w)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(g4(s)||(g={...g,...c4(t,g)}),g.duration&&(g.duration=us(g.duration)),g.repeatDelay&&(g.repeatDelay=us(g.repeatDelay)),!f||!p||h5.current||s.type===!1||y4.skipAnimations)return i4(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const w=r4(e,t,g);if(w)return w}return Xd(g)};function Jd(t){return!!(kn(t)&&t.add)}const yb=t=>/^\-?\d*\.?\d+$/.test(t);function n0(t,e){t.indexOf(e)===-1&&t.push(e)}function r0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class i0{constructor(){this.subscriptions=[]}add(e){return n0(this.subscriptions,e),()=>r0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const v4=t=>!isNaN(parseFloat(t));class w4{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=tn;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Je.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Je.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=v4(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new i0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?hb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pa(t,e){return new w4(t,e)}const vb=t=>e=>e.test(t),x4={test:t=>t==="auto",parse:t=>t},wb=[Eo,Te,Hr,Vi,CP,IP,x4],yl=t=>wb.find(vb(t)),_4=[...wb,cn,ws],T4=t=>_4.find(vb(t));function S4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Pa(n))}function E4(t,e){const n=ef(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=zP(s[o]);S4(t,o,a)}}function b4(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],d=e[l];let h=null;Array.isArray(d)&&(h=d[0]),h===null&&(h=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(yb(h)||gb(h))?h=parseFloat(h):!T4(h)&&ws.test(d)&&(h=mb(l,d)),t.addValue(l,Pa(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function I4(t,e){return e?(e[t]||e.default||e).from:void 0}function C4(t,e,n){const r={};for(const i in t){const s=I4(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function k4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function A4(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function xb(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f),g=a[f];if(!p||g===void 0||h&&k4(h,f))continue;const w={delay:n,elapsed:0,...e0(s||{},f)};if(window.HandoffAppearAnimations){const S=t.getProps()[_E];if(S){const v=window.HandoffAppearAnimations(S,f,p,Je);v!==null&&(w.elapsed=v,w.isHandoff=!0)}}let _=!w.isHandoff&&!A4(p,g);if(w.type==="spring"&&(p.getVelocity()||w.velocity)&&(_=!1),p.animation&&(_=!1),_)continue;p.start(t0(f,p,g,t.shouldReduceMotion&&So.has(f)?{type:!1}:w));const k=p.animation;Jd(l)&&(l.add(f),k.then(()=>l.remove(f))),d.push(k)}return o&&Promise.all(d).then(()=>{o&&E4(t,o)}),d}function Zm(t,e,n={}){const r=ef(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(xb(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return R4(t,e,d+l,h,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,d]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function R4(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(d=0)=>d*r:(d=0)=>a-d*r;return Array.from(t.variantChildren).sort(P4).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(Zm(d,e,{...s,delay:n+l(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function P4(t,e){return t.sortNodePosition(e)}function D4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Zm(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Zm(t,e,n);else{const i=typeof e=="function"?ef(t,e,n.custom):e;r=Promise.all(xb(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const N4=[...Fy].reverse(),j4=Fy.length;function L4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>D4(t,n,r)))}function M4(t){let e=L4(t);const n=O4();let r=!0;const i=(l,d)=>{const h=ef(t,d);if(h){const{transition:f,transitionEnd:p,...g}=h;l={...l,...g,...p}}return l};function s(l){e=l(t)}function o(l,d){const h=t.getProps(),f=t.getVariantContext(!0)||{},p=[],g=new Set;let w={},_=1/0;for(let S=0;S<j4;S++){const v=N4[S],x=n[v],j=h[v]!==void 0?h[v]:f[v],L=pc(j),O=v===d?x.isActive:null;O===!1&&(_=S);let E=j===f[v]&&j!==h[v]&&L;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),x.protectedKeys={...w},!x.isActive&&O===null||!j&&!x.prevProp||Yh(j)||typeof j=="boolean")continue;let b=V4(x.prevProp,j)||v===d&&x.isActive&&!E&&L||S>_&&L,A=!1;const P=Array.isArray(j)?j:[j];let N=P.reduce(i,{});O===!1&&(N={});const{prevResolvedValues:I={}}=x,K={...I,...N},fe=Y=>{b=!0,g.has(Y)&&(A=!0,g.delete(Y)),x.needsAnimating[Y]=!0};for(const Y in K){const ne=N[Y],U=I[Y];if(w.hasOwnProperty(Y))continue;let X=!1;Kd(ne)&&Kd(U)?X=!$E(ne,U):X=ne!==U,X?ne!==void 0?fe(Y):g.add(Y):ne!==void 0&&g.has(Y)?fe(Y):x.protectedKeys[Y]=!0}x.prevProp=j,x.prevResolvedValues=N,x.isActive&&(w={...w,...N}),r&&t.blockInitialAnimation&&(b=!1),b&&(!E||A)&&p.push(...P.map(Y=>({animation:Y,options:{type:v,...l}})))}if(g.size){const S={};g.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(S[v]=x)}),p.push({animation:S})}let k=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(p):Promise.resolve()}function a(l,d,h){var f;if(n[l].isActive===d)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var w;return(w=g.animationState)===null||w===void 0?void 0:w.setActive(l,d)}),n[l].isActive=d;const p=o(h,l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function V4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$E(e,t):!1}function Us(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O4(){return{animate:Us(!0),whileInView:Us(),whileHover:Us(),whileTap:Us(),whileDrag:Us(),whileFocus:Us(),exit:Us()}}class F4 extends Ps{constructor(e){super(e),e.animationState||(e.animationState=M4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Yh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let U4=0;class z4 extends Ps{constructor(){super(...arguments),this.id=U4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const B4={animation:{Feature:F4},exit:{Feature:z4}},Iw=(t,e)=>Math.abs(t-e);function $4(t,e){const n=Iw(t.x,e.x),r=Iw(t.y,e.y);return Math.sqrt(n**2+r**2)}class _b{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Rp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=$4(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:w}=f,{timestamp:_}=tn;this.history.push({...w,timestamp:_});const{onStart:k,onMove:S}=this.handlers;p||(k&&k(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Ap(p,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Rp(f.type==="pointercancel"?this.lastMoveEventInfo:Ap(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,k),w&&w(f,k)},!OE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Zh(e),a=Ap(o,this.transformPagePoint),{point:l}=a,{timestamp:d}=tn;this.history=[{...l,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Rp(a,this.history)),this.removeListeners=cs(di(this.contextWindow,"pointermove",this.handlePointerMove),di(this.contextWindow,"pointerup",this.handlePointerUp),di(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vi(this.updatePoint)}}function Ap(t,e){return e?{point:e(t.point)}:t}function Cw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rp({point:t},e){return{point:t,delta:Cw(t,Tb(e)),offset:Cw(t,W4(e)),velocity:q4(e,.1)}}function W4(t){return t[0]}function Tb(t){return t[t.length-1]}function q4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Tb(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>us(e)));)n--;if(!r)return{x:0,y:0};const s=hi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function $n(t){return t.max-t.min}function eg(t,e=0,n=.01){return Math.abs(t-e)<=n}function kw(t,e,n,r=.5){t.origin=r,t.originPoint=dt(e.min,e.max,t.origin),t.scale=$n(n)/$n(e),(eg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=dt(n.min,n.max,t.origin)-t.originPoint,(eg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function zl(t,e,n,r){kw(t.x,e.x,n.x,r?r.originX:void 0),kw(t.y,e.y,n.y,r?r.originY:void 0)}function Aw(t,e,n){t.min=n.min+e.min,t.max=t.min+$n(e)}function H4(t,e,n){Aw(t.x,e.x,n.x),Aw(t.y,e.y,n.y)}function Rw(t,e,n){t.min=e.min-n.min,t.max=t.min+$n(e)}function Bl(t,e,n){Rw(t.x,e.x,n.x),Rw(t.y,e.y,n.y)}function G4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?dt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?dt(n,t,r.max):Math.min(t,n)),t}function Pw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function K4(t,{top:e,left:n,bottom:r,right:i}){return{x:Pw(t.x,n,i),y:Pw(t.y,e,r)}}function Dw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Q4(t,e){return{x:Dw(t.x,e.x),y:Dw(t.y,e.y)}}function Y4(t,e){let n=.5;const r=$n(t),i=$n(e);return i>r?n=gc(e.min,e.max-r,t.min):r>i&&(n=gc(t.min,t.max-i,e.min)),vs(0,1,n)}function X4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const tg=.35;function J4(t=tg){return t===!1?t=0:t===!0&&(t=tg),{x:Nw(t,"left","right"),y:Nw(t,"top","bottom")}}function Nw(t,e,n){return{min:jw(t,e),max:jw(t,n)}}function jw(t,e){return typeof t=="number"?t:t[e]||0}const Lw=()=>({translate:0,scale:1,origin:0,originPoint:0}),ta=()=>({x:Lw(),y:Lw()}),Mw=()=>({min:0,max:0}),kt=()=>({x:Mw(),y:Mw()});function Jn(t){return[t("x"),t("y")]}function Sb({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Z4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function eD(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Pp(t){return t===void 0||t===1}function ng({scale:t,scaleX:e,scaleY:n}){return!Pp(t)||!Pp(e)||!Pp(n)}function qs(t){return ng(t)||Eb(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Eb(t){return Vw(t.x)||Vw(t.y)}function Vw(t){return t&&t!=="0%"}function Zd(t,e,n){const r=t-n,i=e*r;return n+i}function Ow(t,e,n,r,i){return i!==void 0&&(t=Zd(t,i,r)),Zd(t,n,r)+e}function rg(t,e=0,n=1,r,i){t.min=Ow(t.min,e,n,r,i),t.max=Ow(t.max,e,n,r,i)}function bb(t,{x:e,y:n}){rg(t.x,e.translate,e.scale,e.originPoint),rg(t.y,n.translate,n.scale,n.originPoint)}function tD(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&na(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,bb(t,o)),r&&qs(s.latestValues)&&na(t,s.latestValues))}e.x=Fw(e.x),e.y=Fw(e.y)}function Fw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ui(t,e){t.min=t.min+e,t.max=t.max+e}function Uw(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=dt(t.min,t.max,s);rg(t,e[n],e[r],o,e.scale)}const nD=["x","scaleX","originX"],rD=["y","scaleY","originY"];function na(t,e){Uw(t.x,e,nD),Uw(t.y,e,rD)}function Ib(t,e){return Sb(eD(t.getBoundingClientRect(),e))}function iD(t,e,n){const r=Ib(t,n),{scroll:i}=e;return i&&(Ui(r.x,i.offset.x),Ui(r.y,i.offset.y)),r}const Cb=({current:t})=>t?t.ownerDocument.defaultView:null,sD=new WeakMap;class oD{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zh(h,"page").point)},s=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:w}=this.getProps();if(p&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=UE(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jn(k=>{let S=this.getAxisMotionValue(k).get()||0;if(Hr.test(S)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[k];x&&(S=$n(x)*(parseFloat(S)/100))}}this.originPoint[k]=S}),w&&Je.update(()=>w(h,f),!1,!0);const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:w,onDrag:_}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:k}=f;if(g&&this.currentDirection===null){this.currentDirection=aD(k),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,k),this.updateAxis("y",f.point,k),this.visualElement.render(),_&&_(h,f)},a=(h,f)=>this.stop(h,f),l=()=>Jn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new _b(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Cb(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Je.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Lu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=G4(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Zo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=K4(i.layoutBox,n):this.constraints=!1,this.elastic=J4(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Jn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=X4(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=iD(r,i.root,this.visualElement.getTransformPagePoint());let o=Q4(i.layout.layoutBox,s);if(n){const a=n(Z4(o));this.hasMutatedConstraints=!!a,a&&(o=Sb(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},d=Jn(h=>{if(!Lu(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(t0(e,r,0,n))}stopAnimation(){Jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Jn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Jn(n=>{const{drag:r}=this.getProps();if(!Lu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-dt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Jn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=Y4({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Jn(o=>{if(!Lu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:d}=this.constraints[o];a.set(dt(l,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;sD.set(this.visualElement,this);const e=this.visualElement.current,n=di(e,"pointerdown",l=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Zo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=ai(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(Jn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=tg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Lu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function aD(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class lD extends Ps{constructor(e){super(e),this.removeGroupControls=vt,this.removeListeners=vt,this.controls=new oD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const zw=t=>(e,n)=>{t&&Je.update(()=>t(e,n))};class cD extends Ps{constructor(){super(...arguments),this.removePointerDownListener=vt}onPointerDown(e){this.session=new _b(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Cb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:zw(e),onStart:zw(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Je.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=di(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function uD(){const t=R.useContext(Kh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();return R.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const ld={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Te.test(t))t=parseFloat(t);else return t;const n=Bw(t,e.target.x),r=Bw(t,e.target.y);return`${n}% ${r}%`}},dD={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ws.parse(t);if(i.length>5)return r;const s=ws.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const d=dt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class hD extends br.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;wP(fD),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ld.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Je.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kb(t){const[e,n]=uD(),r=R.useContext(zy);return br.createElement(hD,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(SE),isPresent:e,safeToRemove:n})}const fD={borderRadius:{...vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vl,borderTopRightRadius:vl,borderBottomLeftRadius:vl,borderBottomRightRadius:vl,boxShadow:dD},Ab=["TopLeft","TopRight","BottomLeft","BottomRight"],pD=Ab.length,$w=t=>typeof t=="string"?parseFloat(t):t,Ww=t=>typeof t=="number"||Te.test(t);function mD(t,e,n,r,i,s){i?(t.opacity=dt(0,n.opacity!==void 0?n.opacity:1,gD(r)),t.opacityExit=dt(e.opacity!==void 0?e.opacity:1,0,yD(r))):s&&(t.opacity=dt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<pD;o++){const a=`border${Ab[o]}Radius`;let l=qw(e,a),d=qw(n,a);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||Ww(l)===Ww(d)?(t[a]=Math.max(dt($w(l),$w(d),r),0),(Hr.test(d)||Hr.test(l))&&(t[a]+="%")):t[a]=d}(e.rotate||n.rotate)&&(t.rotate=dt(e.rotate||0,n.rotate||0,r))}function qw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gD=Rb(0,.5,JE),yD=Rb(.5,.95,vt);function Rb(t,e,n){return r=>r<t?0:r>e?1:n(gc(t,e,r))}function Hw(t,e){t.min=e.min,t.max=e.max}function Qn(t,e){Hw(t.x,e.x),Hw(t.y,e.y)}function Gw(t,e,n,r,i){return t-=e,t=Zd(t,1/n,r),i!==void 0&&(t=Zd(t,1/i,r)),t}function vD(t,e=0,n=1,r=.5,i,s=t,o=t){if(Hr.test(e)&&(e=parseFloat(e),e=dt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dt(s.min,s.max,r);t===s&&(a-=e),t.min=Gw(t.min,e,n,a,i),t.max=Gw(t.max,e,n,a,i)}function Kw(t,e,[n,r,i],s,o){vD(t,e[n],e[r],e[i],e.scale,s,o)}const wD=["x","scaleX","originX"],xD=["y","scaleY","originY"];function Qw(t,e,n,r){Kw(t.x,e,wD,n?n.x:void 0,r?r.x:void 0),Kw(t.y,e,xD,n?n.y:void 0,r?r.y:void 0)}function Yw(t){return t.translate===0&&t.scale===1}function Pb(t){return Yw(t.x)&&Yw(t.y)}function _D(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Db(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Xw(t){return $n(t.x)/$n(t.y)}class TD{constructor(){this.members=[]}add(e){n0(this.members,e),e.scheduleRender()}remove(e){if(r0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jw(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:d,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const SD=(t,e)=>t.depth-e.depth;class ED{constructor(){this.children=[],this.isDirty=!1}add(e){n0(this.children,e),this.isDirty=!0}remove(e){r0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SD),this.isDirty=!1,this.children.forEach(e)}}function bD(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vi(r),t(s-e))};return Je.read(r,!0),()=>vi(r)}function ID(t){window.MotionDebug&&window.MotionDebug.record(t)}function CD(t){return t instanceof SVGElement&&t.tagName!=="svg"}function kD(t,e,n){const r=kn(t)?t:Pa(t);return r.start(t0("",r,e,n)),r.animation}const Zw=["","X","Y","Z"],AD={visibility:"hidden"},ex=1e3;let RD=0;const Hs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Nb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=RD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hs.totalNodes=Hs.resolvedTargetDeltas=Hs.recalculatedProjection=0,this.nodes.forEach(ND),this.nodes.forEach(OD),this.nodes.forEach(FD),this.nodes.forEach(jD),ID(Hs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ED)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new i0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CD(o),this.instance=o;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(d||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=bD(p,250),ld.hasAnimatedSinceResize&&(ld.hasAnimatedSinceResize=!1,this.nodes.forEach(nx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||WD,{onLayoutAnimationStart:k,onLayoutAnimationComplete:S}=h.getProps(),v=!this.targetLayout||!Db(this.targetLayout,w)||g,x=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const j={...e0(_,"layout"),onPlay:k,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else p||nx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UD),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tx);return}this.isUpdating||this.nodes.forEach(MD),this.isUpdating=!1,this.nodes.forEach(VD),this.nodes.forEach(PD),this.nodes.forEach(DD),this.clearAllSnapshots();const a=performance.now();tn.delta=vs(0,1e3/60,a-tn.timestamp),tn.timestamp=a,tn.isProcessing=!0,_p.update.process(tn),_p.preRender.process(tn),_p.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(LD),this.sharedNodes.forEach(zD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Pb(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(a||qs(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),qD(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return kt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ui(a.x,l.offset.x),Ui(a.y,l.offset.y)),a}removeElementScroll(o){const a=kt();Qn(a,o);for(let l=0;l<this.path.length;l++){const d=this.path[l],{scroll:h,options:f}=d;if(d!==this.root&&h&&f.layoutScroll){if(h.isRoot){Qn(a,o);const{scroll:p}=this.root;p&&(Ui(a.x,-p.offset.x),Ui(a.y,-p.offset.y))}Ui(a.x,h.offset.x),Ui(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=kt();Qn(l,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&na(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),qs(h.latestValues)&&na(l,h.latestValues)}return qs(this.latestValues)&&na(l,this.latestValues),l}removeTransform(o){const a=kt();Qn(a,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!qs(d.latestValues))continue;ng(d.latestValues)&&d.updateSnapshot();const h=kt(),f=d.measurePageBox();Qn(h,f),Qw(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return qs(this.latestValues)&&Qw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),H4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qn(this.target,this.layout.layoutBox),bb(this.target,this.targetDelta)):Qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),Bl(this.relativeTargetOrigin,this.target,g.target),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ng(this.parent.latestValues)||Eb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Qn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;tD(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:w}=a;if(!w){this.projectionTransform&&(this.projectionDelta=ta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ta(),this.projectionDeltaWithTransform=ta());const _=this.projectionTransform;zl(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=Jw(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==p||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Hs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,d=l?l.latestValues:{},h={...this.latestValues},f=ta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=kt(),g=l?l.source:void 0,w=this.layout?this.layout.source:void 0,_=g!==w,k=this.getStack(),S=!k||k.members.length<=1,v=!!(_&&!S&&this.options.crossfade===!0&&!this.path.some($D));this.animationProgress=0;let x;this.mixTargetDelta=j=>{const L=j/1e3;rx(f.x,o.x,L),rx(f.y,o.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BD(this.relativeTarget,this.relativeTargetOrigin,p,L),x&&_D(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=kt()),Qn(x,this.relativeTarget)),_&&(this.animationValues=h,mD(h,d,this.latestValues,L,v,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{ld.hasAnimatedSinceResize=!0,this.currentAnimation=kD(0,ex,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ex),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:d,latestValues:h}=o;if(!(!a||!l||!d)){if(this!==o&&this.layout&&d&&jb(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||kt();const f=$n(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=$n(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Qn(a,l),na(a,h),zl(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new TD),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const d={};for(let h=0;h<Zw.length;h++){const f="rotate"+Zw[h];l[f]&&(d[f]=l[f],o.setStaticValue(f,0))}o.render();for(const h in d)o.setStaticValue(h,d[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AD;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=ad(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=ad(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!qs(this.latestValues)&&(_.transform=h?h({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=Jw(this.projectionDeltaWithTransform,this.treeScale,p),h&&(d.transform=h(p,d.transform));const{x:g,y:w}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,f.animationValues?d.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Hd){if(p[_]===void 0)continue;const{correct:k,applyTo:S}=Hd[_],v=d.transform==="none"?p[_]:k(p[_],f);if(S){const x=S.length;for(let j=0;j<x;j++)d[S[j]]=v}else d[_]=v}return this.options.layoutId&&(d.pointerEvents=f===this?ad(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(tx),this.root.sharedNodes.clear()}}}function PD(t){t.updateLayout()}function DD(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Jn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=$n(p);p.min=r[f].min,p.max=p.min+g}):jb(s,n.layoutBox,r)&&Jn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=$n(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=ta();zl(a,r,n.layoutBox);const l=ta();o?zl(l,t.applyTransform(i,!0),n.measuredBox):zl(l,r,n.layoutBox);const d=!Pb(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const w=kt();Bl(w,n.layoutBox,p.layoutBox);const _=kt();Bl(_,r,g.layoutBox),Db(w,_)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function ND(t){Hs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function LD(t){t.clearSnapshot()}function tx(t){t.clearMeasurements()}function MD(t){t.isLayoutDirty=!1}function VD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function OD(t){t.resolveTargetDelta()}function FD(t){t.calcProjection()}function UD(t){t.resetRotation()}function zD(t){t.removeLeadSnapshot()}function rx(t,e,n){t.translate=dt(e.translate,0,n),t.scale=dt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ix(t,e,n,r){t.min=dt(e.min,n.min,r),t.max=dt(e.max,n.max,r)}function BD(t,e,n,r){ix(t.x,e.x,n.x,r),ix(t.y,e.y,n.y,r)}function $D(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WD={duration:.45,ease:[.4,0,.1,1]},sx=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),ox=sx("applewebkit/")&&!sx("chrome/")?Math.round:vt;function ax(t){t.min=ox(t.min),t.max=ox(t.max)}function qD(t){ax(t.x),ax(t.y)}function jb(t,e,n){return t==="position"||t==="preserve-aspect"&&!eg(Xw(e),Xw(n),.2)}const HD=Nb({attachResizeListener:(t,e)=>ai(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dp={current:void 0},Lb=Nb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dp.current){const t=new HD({});t.mount(window),t.setOptions({layoutScroll:!0}),Dp.current=t}return Dp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GD={pan:{Feature:cD},drag:{Feature:lD,ProjectionNode:Lb,MeasureLayout:kb}},KD=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function QD(t){const e=KD.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function ig(t,e,n=1){const[r,i]=QD(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return yb(o)?parseFloat(o):o}else return Gm(i)?ig(i,e,n+1):i}function YD(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Gm(s))return;const o=ig(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Gm(s))continue;const o=ig(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const XD=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Mb=t=>XD.has(t),JD=t=>Object.keys(t).some(Mb),lx=t=>t===Eo||t===Te,cx=(t,e)=>parseFloat(t.split(", ")[e]),ux=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return cx(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?cx(s[1],t):0}},ZD=new Set(["x","y","z"]),eN=Mc.filter(t=>!ZD.has(t));function tN(t){const e=[];return eN.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Da={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ux(4,13),y:ux(5,14)};Da.translateX=Da.x;Da.translateY=Da.y;const nN=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(d=>{a[d]=Da[d](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(d=>{const h=e.getValue(d);h&&h.jump(a[d]),t[d]=Da[d](l,s)}),t},rN=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Mb);let s=[],o=!1;const a=[];if(i.forEach(l=>{const d=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],f=yl(h);const p=e[l];let g;if(Kd(p)){const w=p.length,_=p[0]===null?1:0;h=p[_],f=yl(h);for(let k=_;k<w&&p[k]!==null;k++)g?Qy(yl(p[k])===g):g=yl(p[k])}else g=yl(p);if(f!==g)if(lx(f)&&lx(g)){const w=d.get();typeof w=="string"&&d.set(parseFloat(w)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&g===Te&&(e[l]=p.map(parseFloat))}else f!=null&&f.transform&&(g!=null&&g.transform)&&(h===0||p===0)?h===0?d.set(g.transform(h)):e[l]=f.transform(p):(o||(s=tN(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],d.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,d=nN(e,t,a);return s.length&&s.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),Qh&&l!==null&&window.scrollTo({top:l}),{target:d,transitionEnd:r}}else return{target:e,transitionEnd:r}};function iN(t,e,n,r){return JD(e)?rN(t,e,n,r):{target:e,transitionEnd:r}}const sN=(t,e,n,r)=>{const i=YD(t,e,r);return e=i.target,r=i.transitionEnd,iN(t,e,n,r)},sg={current:null},Vb={current:!1};function oN(){if(Vb.current=!0,!!Qh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>sg.current=t.matches;t.addListener(e),e()}else sg.current=!1}function aN(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(kn(s))t.addValue(i,s),Jd(r)&&r.add(i);else if(kn(o))t.addValue(i,Pa(s,{owner:t})),Jd(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Pa(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const dx=new WeakMap,Ob=Object.keys(mc),lN=Ob.length,hx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cN=Uy.length;class uN{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Je.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Xh(n),this.isVariantNode=TE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const p=h[f];a[f]!==void 0&&kn(p)&&(p.set(a[f],!1),Jd(d)&&d.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,dx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Vb.current||oN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dx.delete(this.current),this.projection&&this.projection.unmount(),vi(this.notifyUpdate),vi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=So.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Je.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<lN;l++){const d=Ob[l],{isEnabled:h,Feature:f,ProjectionNode:p,MeasureLayout:g}=mc[d];p&&(o=p),h(n)&&(!this.features[d]&&f&&(this.features[d]=new f(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:d,drag:h,dragConstraints:f,layoutScroll:p,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:d,alwaysMeasureLayout:!!h||f&&Zo(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hx.length;r++){const i=hx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=aN(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<cN;r++){const i=Uy[r],s=this.props[i];(pc(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Pa(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Ky(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!kn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new i0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Fb extends uN{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=C4(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){b4(this,r,o);const a=sN(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function dN(t){return window.getComputedStyle(t)}class hN extends Fb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(So.has(n)){const r=Zy(n);return r&&r.default||0}else{const r=dN(e),i=(IE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Ib(e,n)}build(e,n,r,i){$y(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Gy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){DE(e,n,r,i)}}class fN extends Fb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(So.has(n)){const r=Zy(n);return r&&r.default||0}return n=NE.has(n)?n:Oy(n),e.getAttribute(n)}measureInstanceViewportBox(){return kt()}scrapeMotionValuesFromProps(e,n){return LE(e,n)}build(e,n,r,i){qy(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){jE(e,n,r,i)}mount(e){this.isSVGTag=Hy(e.tagName),super.mount(e)}}const pN=(t,e)=>By(t)?new fN(e,{enableHardwareAcceleration:!1}):new hN(e,{enableHardwareAcceleration:!0}),mN={layout:{ProjectionNode:Lb,MeasureLayout:kb}},gN={...B4,...l5,...GD,...mN},Fe=yP((t,e)=>QP(t,e,gN,pN));function Ub(){const t=R.useRef(!1);return Vy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function yN(){const t=Ub(),[e,n]=R.useState(0),r=R.useCallback(()=>{t.current&&n(e+1)},[e]);return[R.useCallback(()=>Je.postRender(r),[r]),e]}class vN extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wN({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0});return R.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),R.createElement(vN,{isPresent:e,childRef:r,sizeRef:i},R.cloneElement(t,{ref:r}))}const Np=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=ME(xN),l=R.useId(),d=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return R.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=R.createElement(wN,{isPresent:n},t)),R.createElement(Kh.Provider,{value:d},t)};function xN(){return new Map}function _N(t){return R.useEffect(()=>()=>t(),[])}const Gs=t=>t.key||"";function TN(t,e){t.forEach(n=>{const r=Gs(n);e.set(r,n)})}function SN(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const Sn=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=R.useContext(zy).forceRender||yN()[0],l=Ub(),d=SN(t);let h=d;const f=R.useRef(new Map).current,p=R.useRef(h),g=R.useRef(new Map).current,w=R.useRef(!0);if(Vy(()=>{w.current=!1,TN(d,g),p.current=h}),_N(()=>{w.current=!0,g.clear(),f.clear()}),w.current)return R.createElement(R.Fragment,null,h.map(v=>R.createElement(Np,{key:Gs(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},v)));h=[...h];const _=p.current.map(Gs),k=d.map(Gs),S=_.length;for(let v=0;v<S;v++){const x=_[v];k.indexOf(x)===-1&&!f.has(x)&&f.set(x,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((v,x)=>{if(k.indexOf(x)!==-1)return;const j=g.get(x);if(!j)return;const L=_.indexOf(x);let O=v;if(!O){const E=()=>{f.delete(x);const T=Array.from(g.keys()).filter(b=>!k.includes(b));if(T.forEach(b=>g.delete(b)),p.current=d.filter(b=>{const A=Gs(b);return A===x||T.includes(A)}),!f.size){if(l.current===!1)return;a(),r&&r()}};O=R.createElement(Np,{key:Gs(j),isPresent:!1,onExitComplete:E,custom:e,presenceAffectsLayout:s,mode:o},j),f.set(x,O)}h.splice(L,0,O)}),h=h.map(v=>{const x=v.key;return f.has(x)?v:R.createElement(Np,{key:Gs(v),isPresent:!0,presenceAffectsLayout:s,mode:o},v)}),R.createElement(R.Fragment,null,f.size?h:h.map(v=>R.cloneElement(v)))},EN=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,d=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|d>>6,g=d&63;l||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||d==null||f==null)throw new IN;const p=s<<2|a>>4;if(r.push(p),d!==64){const g=a<<4&240|d>>2;if(r.push(g),f!==64){const w=d<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CN=function(t){const e=zb(t);return Bb.encodeByteArray(e,!0)},eh=function(t){return CN(t).replace(/\./g,"")},$b=function(t){try{return Bb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=()=>kN().__FIREBASE_DEFAULTS__,RN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$b(t[1]);return e&&JSON.parse(e)},tf=()=>{try{return EN()||AN()||RN()||PN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wb=t=>{var e,n;return(n=(e=tf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},s0=t=>{const e=Wb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qb=()=>{var t;return(t=tf())==null?void 0:t.config},Hb=t=>{var e;return(e=tf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[eh(JSON.stringify(n)),eh(JSON.stringify(o)),a].join(".")}const $l={};function NN(){const t={prod:[],emulator:[]};for(const e of Object.keys($l))$l[e]?t.emulator.push(e):t.prod.push(e);return t}function jN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fx=!1;function rf(t,e){if(typeof window>"u"||typeof document>"u"||!Zr(window.location.host)||$l[t]===e||$l[t]||fx)return;$l[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=NN().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{fx=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=jN(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),k=document.getElementById(_)||document.createElement("a"),S=n("preprendIcon"),v=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(k,_);const j=d();l(v,S),x.append(v,w,k,j),document.body.appendChild(x)}s?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function MN(){var e;const t=(e=tf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ON(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UN(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zN(){return!MN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BN(){try{return typeof indexedDB=="object"}catch{return!1}}function $N(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WN,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uc.prototype.create)}}class Uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kr(i,a,r)}}function qN(t,e){return t.replace(HN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const HN=/\{\$([^}]+)}/g;function GN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(px(s)&&px(o)){if(!mo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function px(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KN(t,e){const n=new QN(t,e);return n.subscribe.bind(n)}class QN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jp),i.error===void 0&&(i.error=jp),i.complete===void 0&&(i.complete=jp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){return t&&t._delegate?t._delegate:t}class wi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZN(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JN(t){return t===Ks?void 0:t}function ZN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const tj={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},nj=je.INFO,rj={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ij=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=nj,this._logHandler=ij,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const sj=(t,e)=>e.some(n=>t instanceof n);let mx,gx;function oj(){return mx||(mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aj(){return gx||(gx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kb=new WeakMap,og=new WeakMap,Qb=new WeakMap,Lp=new WeakMap,a0=new WeakMap;function lj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ds(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kb.set(n,t)}).catch(()=>{}),a0.set(e,t),e}function cj(t){if(og.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});og.set(t,e)}let ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uj(t){ag=t(ag)}function dj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mp(this),e,...n);return Qb.set(r,e.sort?e.sort():[e]),ds(r)}:aj().includes(t)?function(...e){return t.apply(Mp(this),e),ds(Kb.get(this))}:function(...e){return ds(t.apply(Mp(this),e))}}function hj(t){return typeof t=="function"?dj(t):(t instanceof IDBTransaction&&cj(t),sj(t,oj())?new Proxy(t,ag):t)}function ds(t){if(t instanceof IDBRequest)return lj(t);if(Lp.has(t))return Lp.get(t);const e=hj(t);return e!==t&&(Lp.set(t,e),a0.set(e,t)),e}const Mp=t=>a0.get(t);function fj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ds(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ds(o.result),l.oldVersion,l.newVersion,ds(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const pj=["get","getKey","getAll","getAllKeys","count"],mj=["put","add","delete","clear"],Vp=new Map;function yx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pj.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let d=l.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),i&&l.done]))[0]};return Vp.set(e,s),s}uj(t=>({...t,get:(e,n,r)=>yx(e,n)||t.get(e,n,r),has:(e,n)=>!!yx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",vx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new o0("@firebase/app"),vj="@firebase/app-compat",wj="@firebase/analytics-compat",xj="@firebase/analytics",_j="@firebase/app-check-compat",Tj="@firebase/app-check",Sj="@firebase/auth",Ej="@firebase/auth-compat",bj="@firebase/database",Ij="@firebase/data-connect",Cj="@firebase/database-compat",kj="@firebase/functions",Aj="@firebase/functions-compat",Rj="@firebase/installations",Pj="@firebase/installations-compat",Dj="@firebase/messaging",Nj="@firebase/messaging-compat",jj="@firebase/performance",Lj="@firebase/performance-compat",Mj="@firebase/remote-config",Vj="@firebase/remote-config-compat",Oj="@firebase/storage",Fj="@firebase/storage-compat",Uj="@firebase/firestore",zj="@firebase/ai",Bj="@firebase/firestore-compat",$j="firebase",Wj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",qj={[lg]:"fire-core",[vj]:"fire-core-compat",[xj]:"fire-analytics",[wj]:"fire-analytics-compat",[Tj]:"fire-app-check",[_j]:"fire-app-check-compat",[Sj]:"fire-auth",[Ej]:"fire-auth-compat",[bj]:"fire-rtdb",[Ij]:"fire-data-connect",[Cj]:"fire-rtdb-compat",[kj]:"fire-fn",[Aj]:"fire-fn-compat",[Rj]:"fire-iid",[Pj]:"fire-iid-compat",[Dj]:"fire-fcm",[Nj]:"fire-fcm-compat",[jj]:"fire-perf",[Lj]:"fire-perf-compat",[Mj]:"fire-rc",[Vj]:"fire-rc-compat",[Oj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Uj]:"fire-fst",[Bj]:"fire-fst-compat",[zj]:"fire-vertex","fire-js":"fire-js",[$j]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,Hj=new Map,ug=new Map;function wx(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xs(t){const e=t.name;if(ug.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,t);for(const n of th.values())wx(n,t);for(const n of Hj.values())wx(n,t);return!0}function Bc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Uc("app","Firebase",Gj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=Wj;function Yb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:cg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw hs.create("bad-app-name",{appName:String(i)});if(n||(n=qb()),!n)throw hs.create("no-options");const s=th.get(i);if(s){if(mo(n,s.options)&&mo(r,s.config))return s;throw hs.create("duplicate-app",{appName:i})}const o=new ej(i);for(const l of ug.values())o.addComponent(l);const a=new Kj(n,r,o);return th.set(i,a),a}function sf(t=cg){const e=th.get(t);if(!e&&t===cg&&qb())return Yb();if(!e)throw hs.create("no-app",{appName:t});return e}function sr(t,e,n){let r=qj[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(o.join(" "));return}xs(new wi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="firebase-heartbeat-database",Yj=1,yc="firebase-heartbeat-store";let Op=null;function Xb(){return Op||(Op=fj(Qj,Yj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw hs.create("idb-open",{originalErrorMessage:t.message})})),Op}async function Xj(t){try{const n=(await Xb()).transaction(yc),r=await n.objectStore(yc).get(Jb(t));return await n.done,r}catch(e){if(e instanceof kr)xi.warn(e.message);else{const n=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function xx(t,e){try{const r=(await Xb()).transaction(yc,"readwrite");await r.objectStore(yc).put(e,Jb(t)),await r.done}catch(n){if(n instanceof kr)xi.warn(n.message);else{const r=hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(r.message)}}}function Jb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=1024,Zj=30;class eL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_x();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Zj){const o=rL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_x(),{heartbeatsToSend:r,unsentEntries:i}=tL(this._heartbeatsCache.heartbeats),s=eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xi.warn(n),""}}}function _x(){return new Date().toISOString().substring(0,10)}function tL(t,e=Jj){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Tx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BN()?$N().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Xj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Tx(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}function rL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){xs(new wi("platform-logger",e=>new gj(e),"PRIVATE")),xs(new wi("heartbeat",e=>new eL(e),"PRIVATE")),sr(lg,vx,t),sr(lg,vx,"esm2020"),sr("fire-js","")}iL("");var sL="firebase",oL="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(sL,oL,"app");var Sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,Zb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function b(){}b.prototype=T.prototype,E.F=T.prototype,E.prototype=new b,E.prototype.constructor=E,E.D=function(A,P,N){for(var I=Array(arguments.length-2),K=2;K<arguments.length;K++)I[K-2]=arguments[K];return T.prototype[P].apply(A,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,T,b){b||(b=0);const A=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)A[P]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(P=0;P<16;++P)A[P]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=E.g[0],b=E.g[1],P=E.g[2];let N=E.g[3],I;I=T+(N^b&(P^N))+A[0]+3614090360&4294967295,T=b+(I<<7&4294967295|I>>>25),I=N+(P^T&(b^P))+A[1]+3905402710&4294967295,N=T+(I<<12&4294967295|I>>>20),I=P+(b^N&(T^b))+A[2]+606105819&4294967295,P=N+(I<<17&4294967295|I>>>15),I=b+(T^P&(N^T))+A[3]+3250441966&4294967295,b=P+(I<<22&4294967295|I>>>10),I=T+(N^b&(P^N))+A[4]+4118548399&4294967295,T=b+(I<<7&4294967295|I>>>25),I=N+(P^T&(b^P))+A[5]+1200080426&4294967295,N=T+(I<<12&4294967295|I>>>20),I=P+(b^N&(T^b))+A[6]+2821735955&4294967295,P=N+(I<<17&4294967295|I>>>15),I=b+(T^P&(N^T))+A[7]+4249261313&4294967295,b=P+(I<<22&4294967295|I>>>10),I=T+(N^b&(P^N))+A[8]+1770035416&4294967295,T=b+(I<<7&4294967295|I>>>25),I=N+(P^T&(b^P))+A[9]+2336552879&4294967295,N=T+(I<<12&4294967295|I>>>20),I=P+(b^N&(T^b))+A[10]+4294925233&4294967295,P=N+(I<<17&4294967295|I>>>15),I=b+(T^P&(N^T))+A[11]+2304563134&4294967295,b=P+(I<<22&4294967295|I>>>10),I=T+(N^b&(P^N))+A[12]+1804603682&4294967295,T=b+(I<<7&4294967295|I>>>25),I=N+(P^T&(b^P))+A[13]+4254626195&4294967295,N=T+(I<<12&4294967295|I>>>20),I=P+(b^N&(T^b))+A[14]+2792965006&4294967295,P=N+(I<<17&4294967295|I>>>15),I=b+(T^P&(N^T))+A[15]+1236535329&4294967295,b=P+(I<<22&4294967295|I>>>10),I=T+(P^N&(b^P))+A[1]+4129170786&4294967295,T=b+(I<<5&4294967295|I>>>27),I=N+(b^P&(T^b))+A[6]+3225465664&4294967295,N=T+(I<<9&4294967295|I>>>23),I=P+(T^b&(N^T))+A[11]+643717713&4294967295,P=N+(I<<14&4294967295|I>>>18),I=b+(N^T&(P^N))+A[0]+3921069994&4294967295,b=P+(I<<20&4294967295|I>>>12),I=T+(P^N&(b^P))+A[5]+3593408605&4294967295,T=b+(I<<5&4294967295|I>>>27),I=N+(b^P&(T^b))+A[10]+38016083&4294967295,N=T+(I<<9&4294967295|I>>>23),I=P+(T^b&(N^T))+A[15]+3634488961&4294967295,P=N+(I<<14&4294967295|I>>>18),I=b+(N^T&(P^N))+A[4]+3889429448&4294967295,b=P+(I<<20&4294967295|I>>>12),I=T+(P^N&(b^P))+A[9]+568446438&4294967295,T=b+(I<<5&4294967295|I>>>27),I=N+(b^P&(T^b))+A[14]+3275163606&4294967295,N=T+(I<<9&4294967295|I>>>23),I=P+(T^b&(N^T))+A[3]+4107603335&4294967295,P=N+(I<<14&4294967295|I>>>18),I=b+(N^T&(P^N))+A[8]+1163531501&4294967295,b=P+(I<<20&4294967295|I>>>12),I=T+(P^N&(b^P))+A[13]+2850285829&4294967295,T=b+(I<<5&4294967295|I>>>27),I=N+(b^P&(T^b))+A[2]+4243563512&4294967295,N=T+(I<<9&4294967295|I>>>23),I=P+(T^b&(N^T))+A[7]+1735328473&4294967295,P=N+(I<<14&4294967295|I>>>18),I=b+(N^T&(P^N))+A[12]+2368359562&4294967295,b=P+(I<<20&4294967295|I>>>12),I=T+(b^P^N)+A[5]+4294588738&4294967295,T=b+(I<<4&4294967295|I>>>28),I=N+(T^b^P)+A[8]+2272392833&4294967295,N=T+(I<<11&4294967295|I>>>21),I=P+(N^T^b)+A[11]+1839030562&4294967295,P=N+(I<<16&4294967295|I>>>16),I=b+(P^N^T)+A[14]+4259657740&4294967295,b=P+(I<<23&4294967295|I>>>9),I=T+(b^P^N)+A[1]+2763975236&4294967295,T=b+(I<<4&4294967295|I>>>28),I=N+(T^b^P)+A[4]+1272893353&4294967295,N=T+(I<<11&4294967295|I>>>21),I=P+(N^T^b)+A[7]+4139469664&4294967295,P=N+(I<<16&4294967295|I>>>16),I=b+(P^N^T)+A[10]+3200236656&4294967295,b=P+(I<<23&4294967295|I>>>9),I=T+(b^P^N)+A[13]+681279174&4294967295,T=b+(I<<4&4294967295|I>>>28),I=N+(T^b^P)+A[0]+3936430074&4294967295,N=T+(I<<11&4294967295|I>>>21),I=P+(N^T^b)+A[3]+3572445317&4294967295,P=N+(I<<16&4294967295|I>>>16),I=b+(P^N^T)+A[6]+76029189&4294967295,b=P+(I<<23&4294967295|I>>>9),I=T+(b^P^N)+A[9]+3654602809&4294967295,T=b+(I<<4&4294967295|I>>>28),I=N+(T^b^P)+A[12]+3873151461&4294967295,N=T+(I<<11&4294967295|I>>>21),I=P+(N^T^b)+A[15]+530742520&4294967295,P=N+(I<<16&4294967295|I>>>16),I=b+(P^N^T)+A[2]+3299628645&4294967295,b=P+(I<<23&4294967295|I>>>9),I=T+(P^(b|~N))+A[0]+4096336452&4294967295,T=b+(I<<6&4294967295|I>>>26),I=N+(b^(T|~P))+A[7]+1126891415&4294967295,N=T+(I<<10&4294967295|I>>>22),I=P+(T^(N|~b))+A[14]+2878612391&4294967295,P=N+(I<<15&4294967295|I>>>17),I=b+(N^(P|~T))+A[5]+4237533241&4294967295,b=P+(I<<21&4294967295|I>>>11),I=T+(P^(b|~N))+A[12]+1700485571&4294967295,T=b+(I<<6&4294967295|I>>>26),I=N+(b^(T|~P))+A[3]+2399980690&4294967295,N=T+(I<<10&4294967295|I>>>22),I=P+(T^(N|~b))+A[10]+4293915773&4294967295,P=N+(I<<15&4294967295|I>>>17),I=b+(N^(P|~T))+A[1]+2240044497&4294967295,b=P+(I<<21&4294967295|I>>>11),I=T+(P^(b|~N))+A[8]+1873313359&4294967295,T=b+(I<<6&4294967295|I>>>26),I=N+(b^(T|~P))+A[15]+4264355552&4294967295,N=T+(I<<10&4294967295|I>>>22),I=P+(T^(N|~b))+A[6]+2734768916&4294967295,P=N+(I<<15&4294967295|I>>>17),I=b+(N^(P|~T))+A[13]+1309151649&4294967295,b=P+(I<<21&4294967295|I>>>11),I=T+(P^(b|~N))+A[4]+4149444226&4294967295,T=b+(I<<6&4294967295|I>>>26),I=N+(b^(T|~P))+A[11]+3174756917&4294967295,N=T+(I<<10&4294967295|I>>>22),I=P+(T^(N|~b))+A[2]+718787259&4294967295,P=N+(I<<15&4294967295|I>>>17),I=b+(N^(P|~T))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.v=function(E,T){T===void 0&&(T=E.length);const b=T-this.blockSize,A=this.C;let P=this.h,N=0;for(;N<T;){if(P==0)for(;N<=b;)i(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<T;)if(A[P++]=E.charCodeAt(N++),P==this.blockSize){i(this,A),P=0;break}}else for(;N<T;)if(A[P++]=E[N++],P==this.blockSize){i(this,A),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;T=this.o*8;for(var b=E.length-8;b<E.length;++b)E[b]=T&255,T/=256;for(this.v(E),E=Array(16),T=0,b=0;b<4;++b)for(let A=0;A<32;A+=8)E[T++]=this.g[b]>>>A&255;return E};function s(E,T){var b=a;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=T(E)}function o(E,T){this.h=T;const b=[];let A=!0;for(let P=E.length-1;P>=0;P--){const N=E[P]|0;A&&N==T||(b[P]=N,A=!1)}this.g=b}var a={};function l(E){return-128<=E&&E<128?s(E,function(T){return new o([T|0],T<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return k(d(-E));const T=[];let b=1;for(let A=0;E>=b;A++)T[A]=E/b|0,b*=4294967296;return new o(T,0)}function h(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return k(h(E.substring(1),T));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(T,8));let A=f;for(let N=0;N<E.length;N+=8){var P=Math.min(8,E.length-N);const I=parseInt(E.substring(N,N+P),T);P<8?(P=d(Math.pow(T,P)),A=A.j(P).add(d(I))):(A=A.j(b),A=A.add(d(I)))}return A}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-k(this).m();let E=0,T=1;for(let b=0;b<this.g.length;b++){const A=this.i(b);E+=(A>=0?A:4294967296+A)*T,T*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(_(this))return"-"+k(this).toString(E);const T=d(Math.pow(E,6));var b=this;let A="";for(;;){const P=j(b,T).g;b=S(b,P.j(T));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(E);if(b=P,w(b))return N+A;for(;N.length<6;)N="0"+N;A=N+A}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(let T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function _(E){return E.h==-1}t.l=function(E){return E=S(this,E),_(E)?-1:w(E)?0:1};function k(E){const T=E.g.length,b=[];for(let A=0;A<T;A++)b[A]=~E.g[A];return new o(b,~E.h).add(p)}t.abs=function(){return _(this)?k(this):this},t.add=function(E){const T=Math.max(this.g.length,E.g.length),b=[];let A=0;for(let P=0;P<=T;P++){let N=A+(this.i(P)&65535)+(E.i(P)&65535),I=(N>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);A=I>>>16,N&=65535,I&=65535,b[P]=I<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function S(E,T){return E.add(k(T))}t.j=function(E){if(w(this)||w(E))return f;if(_(this))return _(E)?k(this).j(k(E)):k(k(this).j(E));if(_(E))return k(this.j(k(E)));if(this.l(g)<0&&E.l(g)<0)return d(this.m()*E.m());const T=this.g.length+E.g.length,b=[];for(var A=0;A<2*T;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<E.g.length;P++){const N=this.i(A)>>>16,I=this.i(A)&65535,K=E.i(P)>>>16,fe=E.i(P)&65535;b[2*A+2*P]+=I*fe,v(b,2*A+2*P),b[2*A+2*P+1]+=N*fe,v(b,2*A+2*P+1),b[2*A+2*P+1]+=I*K,v(b,2*A+2*P+1),b[2*A+2*P+2]+=N*K,v(b,2*A+2*P+2)}for(E=0;E<T;E++)b[E]=b[2*E+1]<<16|b[2*E];for(E=T;E<2*T;E++)b[E]=0;return new o(b,0)};function v(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function x(E,T){this.g=E,this.h=T}function j(E,T){if(w(T))throw Error("division by zero");if(w(E))return new x(f,f);if(_(E))return T=j(k(E),T),new x(k(T.g),k(T.h));if(_(T))return T=j(E,k(T)),new x(k(T.g),T.h);if(E.g.length>30){if(_(E)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=T;A.l(E)<=0;)b=L(b),A=L(A);var P=O(b,1),N=O(A,1);for(A=O(A,2),b=O(b,2);!w(A);){var I=N.add(A);I.l(E)<=0&&(P=P.add(b),N=I),A=O(A,1),b=O(b,1)}return T=S(E,P.j(T)),new x(P,T)}for(P=f;E.l(T)>=0;){for(b=Math.max(1,Math.floor(E.m()/T.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),N=d(b),I=N.j(T);_(I)||I.l(E)>0;)b-=A,N=d(b),I=N.j(T);w(N)&&(N=p),P=P.add(N),E=S(E,I)}return new x(P,E)}t.B=function(E){return j(this,E).h},t.and=function(E){const T=Math.max(this.g.length,E.g.length),b=[];for(let A=0;A<T;A++)b[A]=this.i(A)&E.i(A);return new o(b,this.h&E.h)},t.or=function(E){const T=Math.max(this.g.length,E.g.length),b=[];for(let A=0;A<T;A++)b[A]=this.i(A)|E.i(A);return new o(b,this.h|E.h)},t.xor=function(E){const T=Math.max(this.g.length,E.g.length),b=[];for(let A=0;A<T;A++)b[A]=this.i(A)^E.i(A);return new o(b,this.h^E.h)};function L(E){const T=E.g.length+1,b=[];for(let A=0;A<T;A++)b[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(b,E.h)}function O(E,T){const b=T>>5;T%=32;const A=E.g.length-b,P=[];for(let N=0;N<A;N++)P[N]=T>0?E.i(N+b)>>>T|E.i(N+b+1)<<32-T:E.i(N+b);return new o(P,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,fs=o}).apply(typeof Sx<"u"?Sx:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e2,Il,t2,cd,dg,n2,r2,i2;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var y=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var V=c[C];if(!(V in y))break e;y=y[V]}c=c[c.length-1],C=y[c],m=m(C),m!=C&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(m){var y=[],C;for(C in m)Object.prototype.hasOwnProperty.call(m,C)&&y.push([C,m[C]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function l(c,m,y){return c.call.apply(c.bind,arguments)}function d(c,m,y){return d=l,d.apply(null,arguments)}function h(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function f(c,m){function y(){}y.prototype=m.prototype,c.Z=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Ob=function(C,V,F){for(var te=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)te[Re-2]=arguments[Re];return m.prototype[V].apply(C,te)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const m=c.length;if(m>0){const y=Array(m);for(let C=0;C<m;C++)y[C]=c[C];return y}return[]}function w(c,m){for(let C=1;C<arguments.length;C++){const V=arguments[C];var y=typeof V;if(y=y!="object"?y:V?Array.isArray(V)?"array":y:"null",y=="array"||y=="object"&&typeof V.length=="number"){y=c.length||0;const F=V.length||0;c.length=y+F;for(let te=0;te<F;te++)c[y+te]=V[te]}else c.push(V)}}class _{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(c){o.setTimeout(()=>{throw c},0)}function S(){var c=E;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,y){const C=x.get();C.set(m,y),this.h?this.h.next=C:this.g=C,this.h=C}}var x=new _(()=>new j,c=>c.reset());class j{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,O=!1,E=new v,T=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(b)}};function b(){for(var c;c=S();){try{c.h.call(c.g)}catch(y){k(y)}var m=x;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}O=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return c}();function I(c){return/^[\s\xa0]*$/.test(c)}function K(c,m){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}f(K,P),K.prototype.init=function(c,m){const y=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ne(c,m,y,C,V){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!C,this.ha=V,this.key=++Y,this.da=this.fa=!1}function U(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function X(c,m,y){for(const C in c)m.call(y,c[C],C,c)}function M(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function D(c){const m={};for(const y in c)m[y]=c[y];return m}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(c,m){let y,C;for(let V=1;V<arguments.length;V++){C=arguments[V];for(y in C)c[y]=C[y];for(let F=0;F<W.length;F++)y=W[F],Object.prototype.hasOwnProperty.call(C,y)&&(c[y]=C[y])}}function ee(c){this.src=c,this.g={},this.h=0}ee.prototype.add=function(c,m,y,C,V){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const te=B(c,m,C,V);return te>-1?(m=c[te],y||(m.fa=!1)):(m=new ne(m,this.src,F,!!C,V),m.fa=y,c.push(m)),m};function re(c,m){const y=m.type;if(y in c.g){var C=c.g[y],V=Array.prototype.indexOf.call(C,m,void 0),F;(F=V>=0)&&Array.prototype.splice.call(C,V,1),F&&(U(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function B(c,m,y,C){for(let V=0;V<c.length;++V){const F=c[V];if(!F.da&&F.listener==m&&F.capture==!!y&&F.ha==C)return V}return-1}var H="closure_lm_"+(Math.random()*1e6|0),ie={};function pe(c,m,y,C,V){if(C&&C.once)return ke(c,m,y,C,V);if(Array.isArray(m)){for(let F=0;F<m.length;F++)pe(c,m[F],y,C,V);return null}return y=_t(y),c&&c[fe]?c.J(m,y,a(C)?!!C.capture:!!C,V):Ee(c,m,y,!1,C,V)}function Ee(c,m,y,C,V,F){if(!m)throw Error("Invalid event type");const te=a(V)?!!V.capture:!!V;let Re=Ge(c);if(Re||(c[H]=Re=new ee(c)),y=Re.add(m,y,C,te,F),y.proxy)return y;if(C=me(),y.proxy=C,C.src=c,C.listener=y,c.addEventListener)N||(V=te),V===void 0&&(V=!1),c.addEventListener(m.toString(),C,V);else if(c.attachEvent)c.attachEvent(Ce(m.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function me(){function c(y){return m.call(c.src,c.listener,y)}const m=at;return c}function ke(c,m,y,C,V){if(Array.isArray(m)){for(let F=0;F<m.length;F++)ke(c,m[F],y,C,V);return null}return y=_t(y),c&&c[fe]?c.K(m,y,a(C)?!!C.capture:!!C,V):Ee(c,m,y,!0,C,V)}function q(c,m,y,C,V){if(Array.isArray(m))for(var F=0;F<m.length;F++)q(c,m[F],y,C,V);else C=a(C)?!!C.capture:!!C,y=_t(y),c&&c[fe]?(c=c.i,F=String(m).toString(),F in c.g&&(m=c.g[F],y=B(m,y,C,V),y>-1&&(U(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete c.g[F],c.h--)))):c&&(c=Ge(c))&&(m=c.g[m.toString()],c=-1,m&&(c=B(m,y,C,V)),(y=c>-1?m[c]:null)&&ce(y))}function ce(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[fe])re(m.i,c);else{var y=c.type,C=c.proxy;m.removeEventListener?m.removeEventListener(y,C,c.capture):m.detachEvent?m.detachEvent(Ce(y),C):m.addListener&&m.removeListener&&m.removeListener(C),(y=Ge(m))?(re(y,c),y.h==0&&(y.src=null,m[H]=null)):U(c)}}}function Ce(c){return c in ie?ie[c]:ie[c]="on"+c}function at(c,m){if(c.da)c=!0;else{m=new K(m,this);const y=c.listener,C=c.ha||c.src;c.fa&&ce(c),c=y.call(C,m)}return c}function Ge(c){return c=c[H],c instanceof ee?c:null}var Ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function _t(c){return typeof c=="function"?c:(c[Ke]||(c[Ke]=function(m){return c.handleEvent(m)}),c[Ke])}function Ne(){A.call(this),this.i=new ee(this),this.M=this,this.G=null}f(Ne,A),Ne.prototype[fe]=!0,Ne.prototype.removeEventListener=function(c,m,y,C){q(this,c,m,y,C)};function Qe(c,m){var y,C=c.G;if(C)for(y=[];C;C=C.G)y.push(C);if(c=c.M,C=m.type||m,typeof m=="string")m=new P(m,c);else if(m instanceof P)m.target=m.target||c;else{var V=m;m=new P(C,c),Z(m,V)}V=!0;let F,te;if(y)for(te=y.length-1;te>=0;te--)F=m.g=y[te],V=Gn(F,C,!0,m)&&V;if(F=m.g=c,V=Gn(F,C,!0,m)&&V,V=Gn(F,C,!1,m)&&V,y)for(te=0;te<y.length;te++)F=m.g=y[te],V=Gn(F,C,!1,m)&&V}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const y=c.g[m];for(let C=0;C<y.length;C++)U(y[C]);delete c.g[m],c.h--}}this.G=null},Ne.prototype.J=function(c,m,y,C){return this.i.add(String(c),m,!1,y,C)},Ne.prototype.K=function(c,m,y,C){return this.i.add(String(c),m,!0,y,C)};function Gn(c,m,y,C){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let F=0;F<m.length;++F){const te=m[F];if(te&&!te.da&&te.capture==y){const Re=te.listener,Dt=te.ha||te.src;te.fa&&re(c.i,te),V=Re.call(Dt,C)!==!1&&V}}return V&&!C.defaultPrevented}function Rr(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function an(c){c.g=Rr(()=>{c.g=null,c.i&&(c.i=!1,an(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class lr extends A{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:an(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function we(c){A.call(this),this.h=c,this.g={}}f(we,A);var et=[];function Be(c){X(c.g,function(m,y){this.g.hasOwnProperty(y)&&ce(m)},c),c.g={}}we.prototype.N=function(){we.Z.N.call(this),Be(this)},we.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=o.JSON.stringify,Ae=o.JSON.parse,tt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Ye(){}function An(){}var yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pr(){P.call(this,"d")}f(Pr,P);function ei(){P.call(this,"c")}f(ei,P);var Kn={},G=null;function ae(){return G=G||new Ne}Kn.Ia="serverreachability";function he(c){P.call(this,Kn.Ia,c)}f(he,P);function J(c){const m=ae();Qe(m,new he(m))}Kn.STAT_EVENT="statevent";function _e(c,m){P.call(this,Kn.STAT_EVENT,c),this.stat=m}f(_e,P);function oe(c){const m=ae();Qe(m,new _e(m,c))}Kn.Ja="timingevent";function qe(c,m){P.call(this,Kn.Ja,c),this.size=m}f(qe,P);function ze(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function Tt(){this.g=!0}Tt.prototype.ua=function(){this.g=!1};function Ls(c,m,y,C,V,F){c.info(function(){if(c.g)if(F){var te="",Re=F.split("&");for(let He=0;He<Re.length;He++){var Dt=Re[He].split("=");if(Dt.length>1){const Vt=Dt[0];Dt=Dt[1];const Nr=Vt.split("_");te=Nr.length>=2&&Nr[1]=="type"?te+(Vt+"="+Dt+"&"):te+(Vt+"=redacted&")}}}else te=null;else te=F;return"XMLHTTP REQ ("+C+") [attempt "+V+"]: "+m+`
`+y+`
`+te})}function Po(c,m,y,C,V,F,te){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+V+"]: "+m+`
`+y+`
`+F+" "+te})}function Yt(c,m,y,C){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+gk(c,y)+(C?" "+C:"")})}function mk(c,m){c.info(function(){return"TIMEOUT: "+m})}Tt.prototype.info=function(){};function gk(c,m){if(!c.g)return m;if(!m)return null;try{const F=JSON.parse(m);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var y=F[c];if(!(y.length<2)){var C=y[1];if(Array.isArray(C)&&!(C.length<1)){var V=C[0];if(V!="noop"&&V!="stop"&&V!="close")for(let te=1;te<C.length;te++)C[te]=""}}}}return ye(F)}catch{return m}}var su={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gv;function jf(){}f(jf,Ye),jf.prototype.g=function(){return new XMLHttpRequest},gv=new jf;function Ja(c){return encodeURIComponent(String(c))}function yk(c){var m=1;c=c.split(":");const y=[];for(;m>0&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function Ii(c,m,y,C){this.j=c,this.i=m,this.l=y,this.S=C||1,this.V=new we(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yv}function yv(){this.i=null,this.g="",this.h=!1}var vv={},Lf={};function Mf(c,m,y){c.M=1,c.A=au(Dr(m)),c.u=y,c.R=!0,wv(c,null)}function wv(c,m){c.F=Date.now(),ou(c),c.B=Dr(c.A);var y=c.B,C=c.S;Array.isArray(C)||(C=[String(C)]),Dv(y.i,"t",C),c.C=0,y=c.j.L,c.h=new yv,c.g=Yv(c.j,y?m:null,!c.u),c.P>0&&(c.O=new lr(d(c.Y,c,c.g),c.P)),m=c.V,y=c.g,C=c.ba;var V="readystatechange";Array.isArray(V)||(V&&(et[0]=V.toString()),V=et);for(let F=0;F<V.length;F++){const te=pe(y,V[F],C||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=c.J?D(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),J(),Ls(c.i,c.v,c.B,c.l,c.S,c.u)}Ii.prototype.ba=function(c){c=c.target;const m=this.O;m&&Ai(c)==3?m.j():this.Y(c)},Ii.prototype.Y=function(c){try{if(c==this.g)e:{const Re=Ai(this.g),Dt=this.g.ya(),He=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Fv(this.g)))){this.K||Re!=4||Dt==7||(Dt==8||He<=0?J(3):J(2)),Vf(this);var m=this.g.ca();this.X=m;var y=vk(this);if(this.o=m==200,Po(this.i,this.v,this.B,this.l,this.S,Re,m),this.o){if(this.U&&!this.L){t:{if(this.g){var C,V=this.g;if((C=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var F=C;break t}}F=null}if(c=F)Yt(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Of(this,c);else{this.o=!1,this.m=3,oe(12),Ms(this),Za(this);break e}}if(this.R){c=!0;let Vt;for(;!this.K&&this.C<y.length;)if(Vt=wk(this,y),Vt==Lf){Re==4&&(this.m=4,oe(14),c=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==vv){this.m=4,oe(15),Yt(this.i,this.l,y,"[Invalid Chunk]"),c=!1;break}else Yt(this.i,this.l,Vt,null),Of(this,Vt);if(xv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||y.length!=0||this.h.h||(this.m=1,oe(16),c=!1),this.o=this.o&&c,!c)Yt(this.i,this.l,y,"[Invalid Chunked Response]"),Ms(this),Za(this);else if(y.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Hf(te),te.P=!0,oe(11))}}else Yt(this.i,this.l,y,null),Of(this,y);Re==4&&Ms(this),this.o&&!this.K&&(Re==4?Hv(this.j,this):(this.o=!1,ou(this)))}else Nk(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,oe(12)):(this.m=0,oe(13)),Ms(this),Za(this)}}}catch{}finally{}};function vk(c){if(!xv(c))return c.g.la();const m=Fv(c.g);if(m==="")return"";let y="";const C=m.length,V=Ai(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ms(c),Za(c),"";c.h.i=new o.TextDecoder}for(let F=0;F<C;F++)c.h.h=!0,y+=c.h.i.decode(m[F],{stream:!(V&&F==C-1)});return m.length=0,c.h.g+=y,c.C=0,c.h.g}function xv(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function wk(c,m){var y=c.C,C=m.indexOf(`
`,y);return C==-1?Lf:(y=Number(m.substring(y,C)),isNaN(y)?vv:(C+=1,C+y>m.length?Lf:(m=m.slice(C,C+y),c.C=C+y,m)))}Ii.prototype.cancel=function(){this.K=!0,Ms(this)};function ou(c){c.T=Date.now()+c.H,_v(c,c.H)}function _v(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ze(d(c.aa,c),m)}function Vf(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Ii.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(mk(this.i,this.B),this.M!=2&&(J(),oe(17)),Ms(this),this.m=2,Za(this)):_v(this,this.T-c)};function Za(c){c.j.I==0||c.K||Hv(c.j,c)}function Ms(c){Vf(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,Be(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Of(c,m){try{var y=c.j;if(y.I!=0&&(y.g==c||Ff(y.h,c))){if(!c.L&&Ff(y.h,c)&&y.I==3){try{var C=y.Ba.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var V=C;if(V[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<c.F)hu(y),uu(y);else break e;qf(y),oe(18)}}else y.xa=V[1],0<y.xa-y.K&&V[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=ze(d(y.Va,y),6e3));Ev(y.h)<=1&&y.ta&&(y.ta=void 0)}else Os(y,11)}else if((c.L||y.g==c)&&hu(y),!I(m))for(V=y.Ba.g.parse(m),m=0;m<V.length;m++){let He=V[m];const Vt=He[0];if(!(Vt<=y.K))if(y.K=Vt,He=He[1],y.I==2)if(He[0]=="c"){y.M=He[1],y.ba=He[2];const Nr=He[3];Nr!=null&&(y.ka=Nr,y.j.info("VER="+y.ka));const Fs=He[4];Fs!=null&&(y.za=Fs,y.j.info("SVER="+y.za));const Ri=He[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(C=1.5*Ri,y.O=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const Pi=c.g;if(Pi){const pu=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pu){var F=C.h;F.g||pu.indexOf("spdy")==-1&&pu.indexOf("quic")==-1&&pu.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Uf(F,F.h),F.h=null))}if(C.G){const Gf=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Gf&&(C.wa=Gf,nt(C.J,C.G,Gf))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-c.F,y.j.info("Handshake RTT: "+y.T+"ms")),C=y;var te=c;if(C.na=Qv(C,C.L?C.ba:null,C.W),te.L){bv(C.h,te);var Re=te,Dt=C.O;Dt&&(Re.H=Dt),Re.D&&(Vf(Re),ou(Re)),C.g=te}else Wv(C);y.i.length>0&&du(y)}else He[0]!="stop"&&He[0]!="close"||Os(y,7);else y.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Os(y,7):Wf(y):He[0]!="noop"&&y.l&&y.l.qa(He),y.A=0)}}J(4)}catch{}}var xk=class{constructor(c,m){this.g=c,this.map=m}};function Tv(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sv(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ev(c){return c.h?1:c.g?c.g.size:0}function Ff(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Uf(c,m){c.g?c.g.add(m):c.h=m}function bv(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Tv.prototype.cancel=function(){if(this.i=Iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Iv(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.G);return m}return g(c.i)}var Cv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _k(c,m){if(c){c=c.split("&");for(let y=0;y<c.length;y++){const C=c[y].indexOf("=");let V,F=null;C>=0?(V=c[y].substring(0,C),F=c[y].substring(C+1)):V=c[y],m(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ci(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Ci?(this.l=c.l,el(this,c.j),this.o=c.o,this.g=c.g,tl(this,c.u),this.h=c.h,zf(this,Nv(c.i)),this.m=c.m):c&&(m=String(c).match(Cv))?(this.l=!1,el(this,m[1]||"",!0),this.o=nl(m[2]||""),this.g=nl(m[3]||"",!0),tl(this,m[4]),this.h=nl(m[5]||"",!0),zf(this,m[6]||"",!0),this.m=nl(m[7]||"")):(this.l=!1,this.i=new il(null,this.l))}Ci.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(rl(m,kv,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(rl(m,kv,!0),"@"),c.push(Ja(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&c.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(rl(y,y.charAt(0)=="/"?Ek:Sk,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",rl(y,Ik)),c.join("")},Ci.prototype.resolve=function(c){const m=Dr(this);let y=!!c.j;y?el(m,c.j):y=!!c.o,y?m.o=c.o:y=!!c.g,y?m.g=c.g:y=c.u!=null;var C=c.h;if(y)tl(m,c.u);else if(y=!!c.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var V=m.h.lastIndexOf("/");V!=-1&&(C=m.h.slice(0,V+1)+C)}if(V=C,V==".."||V==".")C="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){C=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let te=0;te<V.length;){const Re=V[te++];Re=="."?C&&te==V.length&&F.push(""):Re==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),C&&te==V.length&&F.push("")):(F.push(Re),C=!0)}C=F.join("/")}else C=V}return y?m.h=C:y=c.i.toString()!=="",y?zf(m,Nv(c.i)):y=!!c.m,y&&(m.m=c.m),m};function Dr(c){return new Ci(c)}function el(c,m,y){c.j=y?nl(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function tl(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function zf(c,m,y){m instanceof il?(c.i=m,Ck(c.i,c.l)):(y||(m=rl(m,bk)),c.i=new il(m,c.l))}function nt(c,m,y){c.i.set(m,y)}function au(c){return nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function nl(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rl(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,Tk),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Tk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var kv=/[#\/\?@]/g,Sk=/[#\?:]/g,Ek=/[#\?]/g,bk=/[#\?@]/g,Ik=/#/g;function il(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Vs(c){c.g||(c.g=new Map,c.h=0,c.i&&_k(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=il.prototype,t.add=function(c,m){Vs(this),this.i=null,c=Do(this,c);let y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function Av(c,m){Vs(c),m=Do(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Rv(c,m){return Vs(c),m=Do(c,m),c.g.has(m)}t.forEach=function(c,m){Vs(this),this.g.forEach(function(y,C){y.forEach(function(V){c.call(m,V,C,this)},this)},this)};function Pv(c,m){Vs(c);let y=[];if(typeof m=="string")Rv(c,m)&&(y=y.concat(c.g.get(Do(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)y=y.concat(c[m]);return y}t.set=function(c,m){return Vs(this),this.i=null,c=Do(this,c),Rv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=Pv(this,c),c.length>0?String(c[0]):m):m};function Dv(c,m,y){Av(c,m),y.length>0&&(c.i=null,c.g.set(Do(c,m),g(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let C=0;C<m.length;C++){var y=m[C];const V=Ja(y);y=Pv(this,y);for(let F=0;F<y.length;F++){let te=V;y[F]!==""&&(te+="="+Ja(y[F])),c.push(te)}}return this.i=c.join("&")};function Nv(c){const m=new il;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Do(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Ck(c,m){m&&!c.j&&(Vs(c),c.i=null,c.g.forEach(function(y,C){const V=C.toLowerCase();C!=V&&(Av(this,C),Dv(this,V,y))},c)),c.j=m}function kk(c,m){const y=new Tt;if(o.Image){const C=new Image;C.onload=h(ki,y,"TestLoadImage: loaded",!0,m,C),C.onerror=h(ki,y,"TestLoadImage: error",!1,m,C),C.onabort=h(ki,y,"TestLoadImage: abort",!1,m,C),C.ontimeout=h(ki,y,"TestLoadImage: timeout",!1,m,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else m(!1)}function Ak(c,m){const y=new Tt,C=new AbortController,V=setTimeout(()=>{C.abort(),ki(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:C.signal}).then(F=>{clearTimeout(V),F.ok?ki(y,"TestPingServer: ok",!0,m):ki(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),ki(y,"TestPingServer: error",!1,m)})}function ki(c,m,y,C,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),C(y)}catch{}}function Rk(){this.g=new tt}function Bf(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Bf,Ye),Bf.prototype.g=function(){return new lu(this.i,this.h)};function lu(c,m){Ne.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(lu,Ne),t=lu.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,ol(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jv(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function jv(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?sl(this):ol(this),this.readyState==3&&jv(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,sl(this))},t.Na=function(c){this.g&&(this.response=c,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ol(c)}t.setRequestHeader=function(c,m){this.A.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function ol(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Lv(c){let m="";return X(c,function(y,C){m+=C,m+=":",m+=y,m+=`\r
`}),m}function $f(c,m,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=Lv(y),typeof c=="string"?y!=null&&Ja(y):nt(c,m,y))}function gt(c){Ne.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(gt,Ne);var Pk=/^https?$/i,Dk=["POST","PUT"];t=gt.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,m,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gv.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(F){Mv(this,F);return}if(c=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var V in C)y.set(V,C[V]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const F of C.keys())y.set(F,C.get(F));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(Dk,m,void 0)>=0)||C||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,te]of y)this.g.setRequestHeader(F,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Mv(this,F)}};function Mv(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Vv(c),cu(c)}function Vv(c){c.A||(c.A=!0,Qe(c,"complete"),Qe(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Qe(this,"complete"),Qe(this,"abort"),cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cu(this,!0)),gt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ov(this):this.Xa())},t.Xa=function(){Ov(this)};function Ov(c){if(c.h&&typeof s<"u"){if(c.v&&Ai(c)==4)setTimeout(c.Ca.bind(c),0);else if(Qe(c,"readystatechange"),Ai(c)==4){c.h=!1;try{const F=c.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var C;if(C=F===0){let te=String(c.D).match(Cv)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),C=!Pk.test(te?te.toLowerCase():"")}y=C}if(y)Qe(c,"complete"),Qe(c,"success");else{c.o=6;try{var V=Ai(c)>2?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.ca()+"]",Vv(c)}}finally{cu(c)}}}}function cu(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const y=c.g;c.g=null,m||Qe(c,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ai(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Ae(m)}};function Fv(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nk(c){const m={};c=(c.g&&Ai(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(I(c[C]))continue;var y=yk(c[C]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=m[V]||[];m[V]=F,F.push(y)}M(m,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function Uv(c){this.za=0,this.i=[],this.j=new Tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=al("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=al("baseRetryDelayMs",5e3,c),this.Za=al("retryDelaySeedMs",1e4,c),this.Ta=al("forwardChannelMaxRetries",2,c),this.va=al("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Tv(c&&c.concurrentRequestLimit),this.Ba=new Rk,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Uv.prototype,t.ka=8,t.I=1,t.connect=function(c,m,y,C){oe(0),this.W=c,this.H=m||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.J=Qv(this,null,this.W),du(this)};function Wf(c){if(zv(c),c.I==3){var m=c.V++,y=Dr(c.J);if(nt(y,"SID",c.M),nt(y,"RID",m),nt(y,"TYPE","terminate"),ll(c,y),m=new Ii(c,c.j,m),m.M=2,m.A=au(Dr(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=Yv(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ou(m)}Kv(c)}function uu(c){c.g&&(Hf(c),c.g.cancel(),c.g=null)}function zv(c){uu(c),c.v&&(o.clearTimeout(c.v),c.v=null),hu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function du(c){if(!Sv(c.h)&&!c.m){c.m=!0;var m=c.Ea;L||T(),O||(L(),O=!0),E.add(m,c),c.D=0}}function jk(c,m){return Ev(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ze(d(c.Ea,c,m),Gv(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const V=new Ii(this,this.j,c);let F=this.o;if(this.U&&(F?(F=D(F),Z(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=$v(this,V,m),y=Dr(this.J),nt(y,"RID",c),nt(y,"CVER",22),this.G&&nt(y,"X-HTTP-Session-Id",this.G),ll(this,y),F&&(this.R?m="headers="+Ja(Lv(F))+"&"+m:this.u&&$f(y,this.u,F)),Uf(this.h,V),this.Ra&&nt(y,"TYPE","init"),this.S?(nt(y,"$req",m),nt(y,"SID","null"),V.U=!0,Mf(V,y,null)):Mf(V,y,m),this.I=2}}else this.I==3&&(c?Bv(this,c):this.i.length==0||Sv(this.h)||Bv(this))};function Bv(c,m){var y;m?y=m.l:y=c.V++;const C=Dr(c.J);nt(C,"SID",c.M),nt(C,"RID",y),nt(C,"AID",c.K),ll(c,C),c.u&&c.o&&$f(C,c.u,c.o),y=new Ii(c,c.j,y,c.D+1),c.u===null&&(y.J=c.o),m&&(c.i=m.G.concat(c.i)),m=$v(c,y,1e3),y.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Uf(c.h,y),Mf(y,C,m)}function ll(c,m){c.H&&X(c.H,function(y,C){nt(m,C,y)}),c.l&&X({},function(y,C){nt(m,C,y)})}function $v(c,m,y){y=Math.min(c.i.length,y);const C=c.l?d(c.l.Ka,c.l,c):null;e:{var V=c.i;let Re=-1;for(;;){const Dt=["count="+y];Re==-1?y>0?(Re=V[0].g,Dt.push("ofs="+Re)):Re=0:Dt.push("ofs="+Re);let He=!0;for(let Vt=0;Vt<y;Vt++){var F=V[Vt].g;const Nr=V[Vt].map;if(F-=Re,F<0)Re=Math.max(0,V[Vt].g-100),He=!1;else try{F="req"+F+"_"||"";try{var te=Nr instanceof Map?Nr:Object.entries(Nr);for(const[Fs,Ri]of te){let Pi=Ri;a(Ri)&&(Pi=ye(Ri)),Dt.push(F+Fs+"="+encodeURIComponent(Pi))}}catch(Fs){throw Dt.push(F+"type="+encodeURIComponent("_badmap")),Fs}}catch{C&&C(Nr)}}if(He){te=Dt.join("&");break e}}te=void 0}return c=c.i.splice(0,y),m.G=c,te}function Wv(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;L||T(),O||(L(),O=!0),E.add(m,c),c.A=0}}function qf(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ze(d(c.Da,c),Gv(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,qv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ze(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,oe(10),uu(this),qv(this))};function Hf(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function qv(c){c.g=new Ii(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Dr(c.na);nt(m,"RID","rpc"),nt(m,"SID",c.M),nt(m,"AID",c.K),nt(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&nt(m,"TO",c.ia),nt(m,"TYPE","xmlhttp"),ll(c,m),c.u&&c.o&&$f(m,c.u,c.o),c.O&&(c.g.H=c.O);var y=c.g;c=c.ba,y.M=1,y.A=au(Dr(m)),y.u=null,y.R=!0,wv(y,c)}t.Va=function(){this.C!=null&&(this.C=null,uu(this),qf(this),oe(19))};function hu(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Hv(c,m){var y=null;if(c.g==m){hu(c),Hf(c),c.g=null;var C=2}else if(Ff(c.h,m))y=m.G,bv(c.h,m),C=1;else return;if(c.I!=0){if(m.o)if(C==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var V=c.D;C=ae(),Qe(C,new qe(C,y)),du(c)}else Wv(c);else if(V=m.m,V==3||V==0&&m.X>0||!(C==1&&jk(c,m)||C==2&&qf(c)))switch(y&&y.length>0&&(m=c.h,m.i=m.i.concat(y)),V){case 1:Os(c,5);break;case 4:Os(c,10);break;case 3:Os(c,6);break;default:Os(c,2)}}}function Gv(c,m){let y=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(y*=2),y*m}function Os(c,m){if(c.j.info("Error code "+m),m==2){var y=d(c.bb,c),C=c.Ua;const V=!C;C=new Ci(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||el(C,"https"),au(C),V?kk(C.toString(),y):Ak(C.toString(),y)}else oe(2);c.I=0,c.l&&c.l.pa(m),Kv(c),zv(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function Kv(c){if(c.I=0,c.ja=[],c.l){const m=Iv(c.h);(m.length!=0||c.i.length!=0)&&(w(c.ja,m),w(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Qv(c,m,y){var C=y instanceof Ci?Dr(y):new Ci(y);if(C.g!="")m&&(C.g=m+"."+C.g),tl(C,C.u);else{var V=o.location;C=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const F=new Ci(null);C&&el(F,C),m&&(F.g=m),V&&tl(F,V),y&&(F.h=y),C=F}return y=c.G,m=c.wa,y&&m&&nt(C,y,m),nt(C,"VER",c.ka),ll(c,C),C}function Yv(c,m,y){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new gt(new Bf({ab:y})):new gt(c.ma),m.Fa(c.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xv(){}t=Xv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function fu(){}fu.prototype.g=function(c,m){return new Rn(c,m)};function Rn(c,m){Ne.call(this),this.g=new Uv(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!I(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new No(this)}f(Rn,Ne),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Wf(this.g)},Rn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.v&&(y={},y.__data__=ye(c),c=y);m.i.push(new xk(m.Ya++,c)),m.I==3&&du(m)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Wf(this.g),delete this.g,Rn.Z.N.call(this)};function Jv(c){Pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}f(Jv,Pr);function Zv(){ei.call(this),this.status=1}f(Zv,ei);function No(c){this.g=c}f(No,Xv),No.prototype.ra=function(){Qe(this.g,"a")},No.prototype.qa=function(c){Qe(this.g,new Jv(c))},No.prototype.pa=function(c){Qe(this.g,new Zv)},No.prototype.oa=function(){Qe(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,i2=function(){return new fu},r2=function(){return ae()},n2=Kn,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},su.NO_ERROR=0,su.TIMEOUT=8,su.HTTP_ERROR=6,cd=su,mv.COMPLETE="complete",t2=mv,An.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",Ne.prototype.listen=Ne.prototype.J,Il=An,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,e2=gt}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="12.8.0";function aL(t){Ha=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new o0("@firebase/firestore");function Vo(){return go.logLevel}function le(t,...e){if(go.logLevel<=je.DEBUG){const n=e.map(l0);go.debug(`Firestore (${Ha}): ${t}`,...n)}}function _i(t,...e){if(go.logLevel<=je.ERROR){const n=e.map(l0);go.error(`Firestore (${Ha}): ${t}`,...n)}}function Na(t,...e){if(go.logLevel<=je.WARN){const n=e.map(l0);go.warn(`Firestore (${Ha}): ${t}`,...n)}}function l0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,s2(t,r,n)}function s2(t,e,n){let r=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _i(r),new Error(r)}function Oe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||s2(e,i,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class cL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uL{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new o2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class dL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new dL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ex(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ex(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=pL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function hg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Fp(i)===Fp(s)?Le(i,s):Fp(i)?1:-1}return Le(t.length,e.length)}const mL=55296,gL=57343;function Fp(t){const e=t.charCodeAt(0);return e>=mL&&e<=gL}function ja(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__name__";class Or{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Or.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Le(e.length,n.length)}static compareSegments(e,n){const r=Or.isNumericId(e),i=Or.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Or.extractNumericId(e).compare(Or.extractNumericId(n)):hg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class We extends Or{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const yL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Or{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return yL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new Ht([bx])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(We.fromString(e))}static fromName(e){return new ve(We.fromString(e).popFirst(5))}static empty(){return new ve(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t,e,n){if(!n)throw new se(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vL(t,e,n,r){if(e===!0&&r===!0)throw new se(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ix(t){if(!ve.isDocumentKey(t))throw new se(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cx(t){if(ve.isDocumentKey(t))throw new se(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function of(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(t);throw new se(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function $c(t,e){if(!l2(t))throw new se(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new se(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=-62135596800,Ax=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ax);return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kx)throw new se(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ax}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($c(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Pt("string",st._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new st(0,0))}static max(){return new Se(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function wL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new _s(i,ve.empty(),e)}function xL(t){return new _s(t.readTime,t.key,vc)}class _s{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _s(Se.min(),ve.empty(),vc)}static max(){return new _s(Se.max(),ve.empty(),vc)}}function _L(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==TL)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const d=l;n(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function EL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ka(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}af.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=-1;function Wc(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function bL(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="";function IL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rx(e)),e=CL(t.get(n),e);return Rx(e)}function CL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case c2:n+="";break;default:n+=s}}return n}function Rx(t){return t+c2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vu(this.root,e,this.comparator,!0)}}class Vu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=i??Wt.EMPTY,this.right=s??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dx(this.data.getIterator())}getIteratorFrom(e){return new Dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Mt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new d2("Invalid base64 string: "+s):s}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const kL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=kL.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="server_timestamp",f2="__type__",p2="__previous_value__",m2="__local_write_time__";function d0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[f2])==null?void 0:r.stringValue)===h2}function lf(t){const e=t.mapValue.fields[p2];return d0(e)?lf(e):e}function wc(t){const e=Ts(t.mapValue.fields[m2].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,r,i,s,o,a,l,d,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=f}}const rh="(default)";class xc{constructor(e,n){this.projectId=e,this.database=n||rh}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===rh}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}function RL(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new se(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="__type__",y2="__max__",Ou={mapValue:{fields:{__type__:{stringValue:y2}}}},v2="__vector__",ih="value";function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d0(t)?4:DL(t)?9007199254740991:PL(t)?10:11:xe(28295,{value:t})}function Xr(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wc(t).isEqual(wc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ts(i.timestampValue),a=Ts(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ss(i.bytesValue).isEqual(Ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?nh(o)===nh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ja(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Px(o)!==Px(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Xr(o[l],a[l])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function _c(t,e){return(t.values||[]).find(n=>Xr(n,e))!==void 0}function La(t,e){if(t===e)return 0;const n=Es(t),r=Es(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Et(s.integerValue||s.doubleValue),l=Et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Nx(t.timestampValue,e.timestampValue);case 4:return Nx(wc(t),wc(e));case 5:return hg(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ss(s),l=Ss(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let d=0;d<a.length&&d<l.length;d++){const h=Le(a[d],l[d]);if(h!==0)return h}return Le(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Le(Et(s.latitude),Et(o.latitude));return a!==0?a:Le(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,g,w,_;const a=s.fields||{},l=o.fields||{},d=(p=a[ih])==null?void 0:p.arrayValue,h=(g=l[ih])==null?void 0:g.arrayValue,f=Le(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return f!==0?f:jx(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ou.mapValue&&o===Ou.mapValue)return 0;if(s===Ou.mapValue)return 1;if(o===Ou.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=hg(l[f],h[f]);if(p!==0)return p;const g=La(a[l[f]],d[h[f]]);if(g!==0)return g}return Le(l.length,h.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function Nx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Ts(t),r=Ts(e),i=Le(n.seconds,r.seconds);return i!==0?i:Le(n.nanos,r.nanos)}function jx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=La(n[i],r[i]);if(s)return s}return Le(n.length,r.length)}function Ma(t){return fg(t)}function fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ts(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=fg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${fg(n.fields[o])}`;return i+"}"}(t.mapValue):xe(61005,{value:t})}function ud(t){switch(Es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lf(t);return e?16+ud(e):16;case 5:return 2*t.stringValue.length;case 6:return Ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ud(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ds(r.fields,(s,o)=>{i+=s.length+ud(o)}),i}(t.mapValue);default:throw xe(13486,{value:t})}}function Lx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pg(t){return!!t&&"integerValue"in t}function h0(t){return!!t&&"arrayValue"in t}function Mx(t){return!!t&&"nullValue"in t}function Vx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dd(t){return!!t&&"mapValue"in t}function PL(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[g2])==null?void 0:r.stringValue)===v2}function Wl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wl(t.arrayValue.values[n]);return e}return{...t}}function DL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===y2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Wl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());dd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ds(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dn(Wl(this.value))}}function w2(t){const e=[];return Ds(t.fields,(n,r)=>{const i=new Ht([n]);if(dd(r)){const s=w2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,Se.min(),Se.min(),Se.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,Se.min(),Se.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,Se.min(),Se.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.position=e,this.inclusive=n}}function Ox(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),n.key):r=La(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function NL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{}class Rt extends x2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LL(e,n,r):n==="array-contains"?new OL(e,r):n==="in"?new FL(e,r):n==="not-in"?new UL(e,r):n==="array-contains-any"?new zL(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ML(e,r):new VL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(La(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(La(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends x2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cr(e,n)}matches(e){return _2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _2(t){return t.op==="and"}function T2(t){return jL(t)&&_2(t)}function jL(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function mg(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+Ma(t.value);if(T2(t))return t.filters.map(e=>mg(e)).join(",");{const e=t.filters.map(n=>mg(n)).join(",");return`${t.op}(${e})`}}function S2(t,e){return t instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)}(t,e):t instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&S2(o,i.filters[a]),!0):!1}(t,e):void xe(19439)}function E2(t){return t instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ma(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(E2).join(" ,")+"}"}(t):"Filter"}class LL extends Rt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class ML extends Rt{constructor(e,n){super(e,"in",n),this.keys=b2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VL extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=b2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class OL extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return h0(n)&&_c(n.arrayValue,this.value)}}class FL extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_c(this.value.arrayValue,n)}}class UL extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_c(this.value.arrayValue,n)}}class zL extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!h0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Ux(t,e=null,n=[],r=[],i=null,s=null,o=null){return new BL(t,e,n,r,i,s,o)}function f0(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ma(r)).join(",")),e.Te=n}return e.Te}function p0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!S2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fx(t.startAt,e.startAt)&&Fx(t.endAt,e.endAt)}function gg(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $L(t,e,n,r,i,s,o,a){return new qc(t,e,n,r,i,s,o,a)}function cf(t){return new qc(t)}function zx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WL(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function I2(t){return t.collectionGroup!==null}function ql(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(Ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new oh(s,r))}),n.has(Ht.keyField().canonicalString())||e.Ie.push(new oh(Ht.keyField(),r))}return e.Ie}function Kr(t){const e=Ie(t);return e.Ee||(e.Ee=qL(e,ql(t))),e.Ee}function qL(t,e){if(t.limitType==="F")return Ux(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new oh(i.field,s)});const n=t.endAt?new sh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sh(t.startAt.position,t.startAt.inclusive):null;return Ux(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yg(t,e){const n=t.filters.concat([e]);return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vg(t,e,n){return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uf(t,e){return p0(Kr(t),Kr(e))&&t.limitType===e.limitType}function C2(t){return`${f0(Kr(t))}|lt:${t.limitType}`}function Oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>E2(i)).join(", ")}]`),Wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ma(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ma(i)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function df(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ql(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const d=Ox(o,a,l);return o.inclusive?d<=0:d<0}(r.startAt,ql(r),i)||r.endAt&&!function(o,a,l){const d=Ox(o,a,l);return o.inclusive?d>=0:d>0}(r.endAt,ql(r),i))}(t,e)}function HL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function k2(t){return(e,n)=>{let r=!1;for(const i of ql(t)){const s=GL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function GL(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),d=a.data.field(s);return l!==null&&d!==null?La(l,d):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return u2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new mt(ve.comparator);function Ti(){return KL}const A2=new mt(ve.comparator);function Cl(...t){let e=A2;for(const n of t)e=e.insert(n.key,n);return e}function R2(t){let e=A2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function eo(){return Hl()}function P2(){return Hl()}function Hl(){return new Io(t=>t.toString(),(t,e)=>t.isEqual(e))}const QL=new mt(ve.comparator),YL=new Mt(ve.comparator);function Me(...t){let e=YL;for(const n of t)e=e.add(n);return e}const XL=new Mt(Le);function JL(){return XL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function D2(t){return{integerValue:""+t}}function ZL(t,e){return bL(e)?D2(e):m0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function eM(t,e,n){return t instanceof Tc?function(i,s){const o={fields:{[f2]:{stringValue:h2},[m2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&d0(s)&&(s=lf(s)),s&&(o.fields[p2]=s),{mapValue:o}}(n,e):t instanceof Sc?j2(t,e):t instanceof Ec?L2(t,e):function(i,s){const o=N2(i,s),a=Bx(o)+Bx(i.Ae);return pg(o)&&pg(i.Ae)?D2(a):m0(i.serializer,a)}(t,e)}function tM(t,e,n){return t instanceof Sc?j2(t,e):t instanceof Ec?L2(t,e):n}function N2(t,e){return t instanceof ah?function(r){return pg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Tc extends hf{}class Sc extends hf{constructor(e){super(),this.elements=e}}function j2(t,e){const n=M2(e);for(const r of t.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ec extends hf{constructor(e){super(),this.elements=e}}function L2(t,e){let n=M2(e);for(const r of t.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}class ah extends hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Bx(t){return Et(t.integerValue||t.doubleValue)}function M2(t){return h0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n){this.field=e,this.transform=n}}function rM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Sc&&i instanceof Sc||r instanceof Ec&&i instanceof Ec?ja(r.elements,i.elements,Xr):r instanceof ah&&i instanceof ah?Xr(r.Ae,i.Ae):r instanceof Tc&&i instanceof Tc}(t.transform,e.transform)}class iM{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ff{}function V2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g0(t.key,hn.none()):new Hc(t.key,t.data,hn.none());{const n=t.data,r=dn.empty();let i=new Mt(Ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ns(t.key,r,new Vn(i.toArray()),hn.none())}}function sM(t,e,n){t instanceof Hc?function(i,s,o){const a=i.value.clone(),l=Wx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(i,s,o){if(!hd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Wx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(O2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Gl(t,e,n,r){return t instanceof Hc?function(s,o,a,l){if(!hd(s.precondition,o))return a;const d=s.value.clone(),h=qx(s.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ns?function(s,o,a,l){if(!hd(s.precondition,o))return a;const d=qx(s.fieldTransforms,l,o),h=o.data;return h.setAll(O2(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return hd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=N2(r.transform,i||null);s!=null&&(n===null&&(n=dn.empty()),n.set(r.field,s))}return n||null}function $x(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ja(r,i,(s,o)=>rM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hc extends ff{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ns extends ff{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function O2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wx(t,e,n){const r=new Map;Oe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tM(o,a,n[i]))}return r}function qx(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,eM(s,o,e))}return r}class g0 extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F2 extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=P2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=V2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(n,r)=>$x(n,r))&&ja(this.baseMutations,e.baseMutations,(n,r)=>$x(n,r))}}class y0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return QL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new y0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ve;function U2(t){switch(t){case z.OK:return xe(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function z2(t){if(t===void 0)return _i("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ct.OK:return z.OK;case Ct.CANCELLED:return z.CANCELLED;case Ct.UNKNOWN:return z.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return z.INTERNAL;case Ct.UNAVAILABLE:return z.UNAVAILABLE;case Ct.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ct.NOT_FOUND:return z.NOT_FOUND;case Ct.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ct.ABORTED:return z.ABORTED;case Ct.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ct.DATA_LOSS:return z.DATA_LOSS;default:return xe(39323,{code:t})}}(Ve=Ct||(Ct={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new fs([4294967295,4294967295],0);function Hx(t){const e=uM().encode(t),n=new Zb;return n.update(e),new Uint8Array(n.digest())}function Gx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fs([n,r],0),new fs([i,s],0)]}class v0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new kl(`Invalid padding: ${n}`);if(r<0)throw new kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(fs.fromNumber(r)));return i.compare(dM)===1&&(i=new fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Hx(e),[r,i]=Gx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new v0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Hx(e),[r,i]=Gx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pf(Se.min(),i,new mt(Le),Ti(),Me())}}class Gc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gc(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class B2{constructor(e,n){this.targetId=e,this.Ce=n}}class $2{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Kx{constructor(){this.ve=0,this.Fe=Qx(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),r=Me();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:xe(38017,{changeType:s})}}),new Gc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Qx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class hM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.He=Fu(),this.Je=Fu(),this.Ze=new mt(Le)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(gg(s))if(r===0){const o=new ve(s.path);this.et(n,o,Ut.newNoDocument(o,Se.min()))}else Oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ss(r).toUint8Array()}catch(l){if(l instanceof d2)return Na("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new v0(o,i,s)}catch(l){return Na(l instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&gg(a.target)){const l=new ve(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ut.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}});let r=Me();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new pf(e,n,this.Ze,this.je,r);return this.je=Ti(),this.He=Fu(),this.Je=Fu(),this.Ze=new mt(Le),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Kx,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Mt(Le),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Mt(Le),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fu(){return new mt(ve.comparator)}function Qx(){return new mt(ve.comparator)}const fM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),pM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),mM=(()=>({and:"AND",or:"OR"}))();class gM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wg(t,e){return t.useProto3Json||Wc(e)?e:{value:e}}function lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yM(t,e){return lh(t,e.toTimestamp())}function zn(t){return Oe(!!t,49232),Se.fromTimestamp(function(n){const r=Ts(n);return new st(r.seconds,r.nanos)}(t))}function w0(t,e){return xg(t,e).canonicalString()}function xg(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q2(t){const e=We.fromString(t);return Oe(X2(e),10190,{key:e.toString()}),e}function ch(t,e){return w0(t.databaseId,e.path)}function Kl(t,e){const n=q2(e);if(n.get(1)!==t.databaseId.projectId)throw new se(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(G2(n))}function H2(t,e){return w0(t.databaseId,e)}function vM(t){const e=q2(t);return e.length===4?We.emptyPath():G2(e)}function _g(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G2(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Yx(t,e,n){return{name:ch(t,e),fields:n.value.mapValue.fields}}function wM(t,e){return"found"in e?function(r,i){Oe(!!i.found,43571),i.found.name,i.found.updateTime;const s=Kl(r,i.found.name),o=zn(i.found.updateTime),a=i.found.createTime?zn(i.found.createTime):Se.min(),l=new dn({mapValue:{fields:i.found.fields}});return Ut.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Oe(!!i.missing,3894),Oe(!!i.readTime,22933);const s=Kl(r,i.missing),o=zn(i.readTime);return Ut.newNoDocument(s,o)}(t,e):xe(7234,{result:e})}function xM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Oe(h===void 0||typeof h=="string",58123),Qt.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?z.UNKNOWN:z2(d.code);return new se(h,d.message||"")}(o);n=new $2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kl(t,r.document.name),s=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):Se.min(),a=new dn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new fd(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Kl(t,r.document),s=r.readTime?zn(r.readTime):Se.min(),o=Ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Kl(t,r.document),s=r.removedTargetIds||[];n=new fd([],s,i,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new cM(i,s),a=r.targetId;n=new B2(a,o)}}return n}function K2(t,e){let n;if(e instanceof Hc)n={update:Yx(t,e.key,e.value)};else if(e instanceof g0)n={delete:ch(t,e.key)};else if(e instanceof Ns)n={update:Yx(t,e.key,e.data),updateMask:AM(e.fieldMask)};else{if(!(e instanceof F2))return xe(16599,{dt:e.type});n={verify:ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ec)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ah)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw xe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xe(27497)}(t,e.precondition)),n}function _M(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?zn(i.updateTime):zn(s);return o.isEqual(Se.min())&&(o=zn(s)),new iM(o,i.transformResults||[])}(n,e))):[]}function TM(t,e){return{documents:[H2(t,e.path)]}}function SM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=H2(t,i);const s=function(d){if(d.length!==0)return Y2(Cr.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Fo(p.field),direction:IM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function EM(t){let e=vM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Oe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=Q2(f);return p instanceof Cr&&T2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new oh(Uo(w.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Wc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new sh(g,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,g=f.values||[];return new sh(g,p)}(n.endAt)),$L(e,i,o,s,a,"F",l,d)}function bM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uo(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uo(n.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uo(n.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uo(n.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Rt.create(Uo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>Q2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function IM(t){return fM[t]}function CM(t){return pM[t]}function kM(t){return mM[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Uo(t){return Ht.fromServerFormat(t.fieldPath)}function Y2(t){return t instanceof Rt?function(n){if(n.op==="=="){if(Vx(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(Mx(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vx(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(Mx(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:CM(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(i=>Y2(i));return r.length===1?r[0]:{compositeFilter:{op:kM(n.op),filters:r}}}(t):xe(54877,{filter:t})}function AM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function J2(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,i,s=Se.min(),o=Se.min(),a=Qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.yt=e}}function PM(t){const e=EM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.Sn=new NM}addToCollectionParentIndex(e,n){return this.Sn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(_s.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class NM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z2=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(Z2,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Va(0)}static ar(){return new Va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="LruGarbageCollector",jM=1048576;function Zx([t,e],[n,r]){const i=Le(t,n);return i===0?Le(e,r):i}class LM{constructor(e){this.Pr=e,this.buffer=new Mt(Zx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Zx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){le(Jx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ka(n)?le(Jx,"Ignoring IndexedDB error during garbage collection: ",n):await Ga(n)}await this.Ar(3e5)})}}class VM{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(af.ce);const r=new LM(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Xx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xx):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,a,l,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Vo()<=je.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(d-l)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function OM(t,e){return new VM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.changes=new Io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gl(r.mutation,i,Vn.empty(),st.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const i=eo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Cl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=eo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ti();const o=Hl(),a=function(){return Hl()}();return n.forEach((l,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ns)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Gl(h.mutation,d,h.mutation.getFieldMask(),st.now())):o.set(d.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>a.set(d,new UM(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Hl();let i=new mt((o,a)=>o-a),s=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const d=n.get(l);if(d===null)return;let h=r.get(l)||Vn.empty();h=a.applyToLocalView(d,h),r.set(l,h);const f=(i.get(a.batchId)||Me()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),d=l.key,h=l.value,f=P2();h.forEach(p=>{if(!s.has(p)){const g=V2(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return WL(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):I2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(eo());let a=vc,l=s;return o.next(d=>$.forEach(d,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,Me())).next(h=>({batchId:a,changes:R2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let i=Cl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Cl();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const d=function(f,p){return new qc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))});let a=Cl();return o.forEach((l,d)=>{const h=s.get(l);h!==void 0&&Gl(h.mutation,d,Vn.empty(),st.now()),df(n,d)&&(a=a.insert(l,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return $.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:PM(i.bundledQuery),readTime:zn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.overlays=new mt(ve.comparator),this.Lr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=eo();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=eo(),s=n.length+1,o=new ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new mt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=eo(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=eo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return $.resolve(a)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lM(n,r));let s=this.Lr.get(n);s===void 0&&(s=Me(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.kr=new Mt(Ot.Kr),this.qr=new Mt(Ot.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ot(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ot(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new ve(new We([])),r=new Ot(n,e),i=new Ot(n,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ve(new We([])),r=new Ot(n,e),i=new Ot(n,e+1);let s=Me();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ot(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ve.comparator(e.key,n.key)||Le(e.Hr,n.Hr)}static Ur(e,n){return Le(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Mt(Ot.Kr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Jr=this.Jr.add(new Ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?u0:this.Yn-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ot(n,0),i=new Ot(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Le);return n.forEach(i=>{const s=new Ot(i,0),o=new Ot(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),$.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ve.isDocumentKey(s)||(s=s.child(""));const o=new Ot(new ve(s),0);let a=new Mt(Le);return this.Jr.forEachWhile(l=>{const d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(l.Hr)),!0)},o),$.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Oe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return $.forEach(n.mutations,i=>{const s=new Ot(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ot(n,0),i=this.Jr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.ti=e,this.docs=function(){return new mt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=Ti();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ti();const o=n.path,a=new ve(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||_L(xL(h),r)<=0||(i.has(h.key)||df(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){xe(9500)}ni(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GM(this)}getSize(e){return $.resolve(this.size)}}class GM extends FM{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.persistence=e,this.ri=new Io(n=>f0(n),p0),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new x0,this.targetCount=0,this.oi=Va._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),$.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Va(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.lr(n),$.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this._i={},this.overlays={},this.ai=new af(0),this.ui=!1,this.ui=!0,this.ci=new WM,this.referenceDelegate=e(this),this.li=new KM(this),this.indexManager=new DM,this.remoteDocumentCache=function(i){return new HM(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new RM(n),this.Pi=new BM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $M,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new qM(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new QM(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return $.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class QM extends SL{constructor(e){super(),this.currentSequenceNumber=e}}class _0{constructor(e){this.persistence=e,this.Ri=new x0,this.Ai=null}static Vi(e){return new _0(e)}get di(){if(this.Ai)return this.Ai;throw xe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,r=>{const i=ve.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,Se.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class uh{constructor(e,n){this.persistence=e,this.fi=new Io(r=>IL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=OM(this,n)}static Vi(e,n){return new uh(e,n)}Ti(){}Ii(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return $.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),$.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ud(e.data.value)),n}wr(e,n,r){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=Me(),i=Me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new T0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return zN()?8:EL(on())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new YM;return this.ys(e,n,o).next(a=>{if(s.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Vo()<=je.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(Vo()<=je.DEBUG&&le("QueryEngine","Query:",Oo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Vo()<=je.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):$.resolve())}gs(e,n){if(zx(n))return $.resolve(null);let r=Kr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vg(n,null,"F"),r=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Me(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const d=this.bs(n,a);return this.Ss(n,d,o,l.readTime)?this.gs(e,vg(n,null,"F")):this.Ds(e,d,n,l)}))})))}ps(e,n,r,i){return zx(n)||i.isEqual(Se.min())?$.resolve(null):this.fs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?$.resolve(null):(Vo()<=je.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oo(n)),this.Ds(e,o,n,wL(i,vc)).next(a=>a))})}bs(e,n){let r=new Mt(k2(e));return n.forEach((i,s)=>{df(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Vo()<=je.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.fs.getDocumentsMatchingQuery(e,n,_s.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="LocalStore",JM=3e8;class ZM{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new mt(Le),this.Fs=new Io(s=>f0(s),p0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function eV(t,e,n,r){return new ZM(t,e,n,r)}async function tI(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Me();for(const d of i){o.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}for(const d of s){a.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function tV(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,d,h){const f=d.batch,p=f.keys();let g=$.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(l,w)).next(_=>{const k=d.docVersions.get(w);Oe(k!==null,48541),_.version.compareTo(k)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Me();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nI(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function nV(t,e){const n=Ie(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.li.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.li.addMatchingKeys(s,h.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Qt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(_,k,S){return _.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=JM?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,g,h)&&a.push(n.li.updateTargetData(s,g))});let l=Ti(),d=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(rV(s,o,e.documentUpdates).next(h=>{l=h.Bs,d=h.Ls})),!r.isEqual(Se.min())){const h=n.li.getLastRemoteSnapshotVersion(s).next(f=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(n.vs=i,s))}function rV(t,e,n){let r=Me(),i=Me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ti();return n.forEach((a,l)=>{const d=s.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le(S0,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{Bs:o,Ls:i}})}function iV(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=u0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sV(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new Xi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Tg(t,e,n){const r=Ie(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ka(o))throw o;le(S0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function e_(t,e,n){const r=Ie(t);let i=Se.min(),s=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){const f=Ie(l),p=f.Fs.get(h);return p!==void 0?$.resolve(f.vs.get(p)):f.li.getTargetData(d,h)}(r,o,Kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Se.min(),n?s:Me())).next(a=>(oV(r,HL(e),a),{documents:a,ks:s})))}function oV(t,e,n){let r=t.Ms.get(e)||Se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class t_{constructor(){this.activeTargetIds=JL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aV{constructor(){this.vo=new t_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new t_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="ConnectivityMonitor";class r_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(n_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){le(n_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function Sg(){return Uu===null?Uu=function(){return 268435456+Math.round(2147483648*Math.random())}():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",cV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class uV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===rh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=Sg(),a=this.Qo(e,n.toUriEncodedString());le(Up,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,s);const{host:d}=new URL(a),h=Zr(d);return this.zo(e,a,l,r,h).then(f=>(le(Up,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Na(Up,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=cV[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection",wl=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class ha extends uV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ha.c_){const e=r2();wl(e,n2.STAT_EVENT,n=>{n.stat===dg.PROXY?le(Zt,"STAT_EVENT: detected buffering proxy"):n.stat===dg.NOPROXY&&le(Zt,"STAT_EVENT: detected no buffering proxy")}),ha.c_=!0}}zo(e,n,r,i,s){const o=Sg();return new Promise((a,l)=>{const d=new e2;d.setWithCredentials(!0),d.listenOnce(t2.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case cd.NO_ERROR:const f=d.getResponseJson();le(Zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case cd.TIMEOUT:le(Zt,`RPC '${e}' ${o} timed out`),l(new se(z.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const p=d.getStatus();if(le(Zt,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let g=d.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const _=function(S){const v=S.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(w.status);l(new se(_,w.message))}else l(new se(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new se(z.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{le(Zt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);le(Zt,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Sg(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=s.join("");le(Zt,`Creating RPC '${e}' stream ${i}: ${d}`,a);const h=o.createWebChannel(d,a);this.I_(h);let f=!1,p=!1;const g=new dV({Ho:w=>{p?le(Zt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(le(Zt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),le(Zt,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Jo:()=>h.close()});return wl(h,Il.EventType.OPEN,()=>{p||(le(Zt,`RPC '${e}' stream ${i} transport opened.`),g.i_())}),wl(h,Il.EventType.CLOSE,()=>{p||(p=!0,le(Zt,`RPC '${e}' stream ${i} transport closed`),g.o_(),this.E_(h))}),wl(h,Il.EventType.ERROR,w=>{p||(p=!0,Na(Zt,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),g.o_(new se(z.UNAVAILABLE,"The operation could not be completed")))}),wl(h,Il.EventType.MESSAGE,w=>{var _;if(!p){const k=w.data[0];Oe(!!k,16349);const S=k,v=(S==null?void 0:S.error)||((_=S[0])==null?void 0:_.error);if(v){le(Zt,`RPC '${e}' stream ${i} received error:`,v);const x=v.status;let j=function(E){const T=Ct[E];if(T!==void 0)return z2(T)}(x),L=v.message;j===void 0&&(j=z.INTERNAL,L="Unknown error status: "+x+" with message "+v.message),p=!0,g.o_(new se(j,L)),h.close()}else le(Zt,`RPC '${e}' stream ${i} received:`,k),g.__(k)}}),ha.u_(),setTimeout(()=>{g.s_()},0),g}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return i2()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){return new ha(t)}function zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){return new gM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ha.c_=!1;class E0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="PersistentStream";class rI{constructor(e,n,r,i,s,o,a,l){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new E0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(_i(n.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new se(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le(i_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(le(i_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fV extends rI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xM(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?zn(o.readTime):Se.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=_g(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=gg(l)?{documents:TM(s,l)}:{query:SM(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=W2(s,o.resumeToken);const d=wg(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=lh(s,o.snapshotVersion.toTimestamp());const d=wg(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=bM(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=_g(this.serializer),n.removeTarget=e,this.K_(n)}}class pV extends rI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_M(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_g(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>K2(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{}class gV extends mV{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new se(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,xg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(z.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,xg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function yV(t,e,n,r){return new gV(t,e,n,r)}class vV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_i(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class wV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Co(this)&&(le(yo,"Restarting streams for network reachability change."),await async function(l){const d=Ie(l);d.Ea.add(4),await Kc(d),d.Va.set("Unknown"),d.Ea.delete(4),await gf(d)}(this))})}),this.Va=new vV(r,i)}}async function gf(t){if(Co(t))for(const e of t.Ra)await e(!0)}async function Kc(t){for(const e of t.Ra)await e(!1)}function iI(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),k0(n)?C0(n):Qa(n).O_()&&I0(n,e))}function b0(t,e){const n=Ie(t),r=Qa(n);n.Ia.delete(e),r.O_()&&sI(n,e),n.Ia.size===0&&(r.O_()?r.L_():Co(n)&&n.Va.set("Unknown"))}function I0(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).Z_(e)}function sI(t,e){t.da.$e(e),Qa(t).X_(e)}function C0(t){t.da=new hM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.Va.ua()}function k0(t){return Co(t)&&!Qa(t).x_()&&t.Ia.size>0}function Co(t){return Ie(t).Ea.size===0}function oI(t){t.da=void 0}async function xV(t){t.Va.set("Online")}async function _V(t){t.Ia.forEach((e,n)=>{I0(t,e)})}async function TV(t,e){oI(t),k0(t)?(t.Va.ha(e),C0(t)):t.Va.set("Unknown")}async function SV(t,e,n){if(t.Va.set("Online"),e instanceof $2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))}(t,e)}catch(r){le(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dh(t,r)}else if(e instanceof fd?t.da.Xe(e):e instanceof B2?t.da.st(e):t.da.tt(e),!n.isEqual(Se.min()))try{const r=await nI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.da.Tt(o);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,d)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Qt.EMPTY_BYTE_STRING,h.snapshotVersion)),sI(s,l);const f=new Xi(h.target,l,d,h.sequenceNumber);I0(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le(yo,"Failed to raise snapshot:",r),await dh(t,r)}}async function dh(t,e,n){if(!Ka(e))throw e;t.Ea.add(1),await Kc(t),t.Va.set("Offline"),n||(n=()=>nI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(yo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gf(t)})}function aI(t,e){return e().catch(n=>dh(t,n,e))}async function yf(t){const e=Ie(t),n=bs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:u0;for(;EV(e);)try{const i=await iV(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,bV(e,i)}catch(i){await dh(e,i)}lI(e)&&cI(e)}function EV(t){return Co(t)&&t.Ta.length<10}function bV(t,e){t.Ta.push(e);const n=bs(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function lI(t){return Co(t)&&!bs(t).x_()&&t.Ta.length>0}function cI(t){bs(t).start()}async function IV(t){bs(t).ra()}async function CV(t){const e=bs(t);for(const n of t.Ta)e.ea(n.mutations)}async function kV(t,e,n){const r=t.Ta.shift(),i=y0.from(r,e,n);await aI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yf(t)}async function AV(t,e){e&&bs(t).Y_&&await async function(r,i){if(function(o){return U2(o)&&o!==z.ABORTED}(i.code)){const s=r.Ta.shift();bs(r).B_(),await aI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yf(r)}}(t,e),lI(t)&&cI(t)}async function s_(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),le(yo,"RemoteStore received new credentials");const r=Co(n);n.Ea.add(3),await Kc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gf(n)}async function RV(t,e){const n=Ie(t);e?(n.Ea.delete(2),await gf(n)):e||(n.Ea.add(2),await Kc(n),n.Va.set("Unknown"))}function Qa(t){return t.ma||(t.ma=function(n,r,i){const s=Ie(n);return s.sa(),new fV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:xV.bind(null,t),Yo:_V.bind(null,t),t_:TV.bind(null,t),J_:SV.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),k0(t)?C0(t):t.Va.set("Unknown")):(await t.ma.stop(),oI(t))})),t.ma}function bs(t){return t.fa||(t.fa=function(n,r,i){const s=Ie(n);return s.sa(),new pV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:IV.bind(null,t),t_:AV.bind(null,t),ta:CV.bind(null,t),na:kV.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await yf(t)):(await t.fa.stop(),t.Ta.length>0&&(le(yo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new A0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R0(t,e){if(_i("AsyncQueue",`${e}: ${t}`),Ka(t))return new se(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{static emptySet(e){return new fa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Cl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.ga=new mt(ve.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oa{constructor(e,n,r,i,s,o,a,l,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oa(e,n,fa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class DV{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ie(n),s=i.queries;i.queries=a_(),s.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new se(z.ABORTED,"Firestore shutting down"))}}function a_(){return new Io(t=>C2(t),uf)}async function P0(t,e){const n=Ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new PV,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=R0(o,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&N0(n)}async function D0(t,e){const n=Ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NV(t,e){const n=Ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&N0(n)}function jV(t,e,n){const r=Ie(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function N0(t){t.Ca.forEach(e=>{e.next()})}var Eg,l_;(l_=Eg||(Eg={})).Ma="default",l_.Cache="cache";class j0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.key=e}}class dI{constructor(e){this.key=e}}class LV{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.eu=k2(e),this.tu=new fa(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new o_,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),g=df(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;p&&g?p.data.isEqual(g.data)?w!==_&&(r.track({type:3,doc:g}),k=!0):this.su(p,g)||(r.track({type:2,doc:g}),k=!0,(l&&this.eu(g,l)>0||d&&this.eu(g,d)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),k=!0):p&&!g&&(r.track({type:1,doc:p}),k=!0,(l||d)&&(a=!0)),k&&(g?(o=o.add(g),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,w){const _=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:k})}};return _(g)-_(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Xa;return this.Xa=l,o.length!==0||d?{snapshot:new Oa(this.query,e.tu,s,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new dI(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new uI(r))}),n}cu(e){this.Za=e.ks,this.Ya=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const L0="SyncEngine";class MV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VV{constructor(e){this.key=e,this.hu=!1}}class OV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Io(a=>C2(a),uf),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(ve.comparator),this.Au=new Map,this.Vu=new x0,this.du={},this.mu=new Map,this.fu=Va.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FV(t,e,n=!0){const r=yI(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await hI(r,e,n,!0),i}async function UV(t,e){const n=yI(t);await hI(n,e,!0,!1)}async function hI(t,e,n,r){const i=await sV(t.localStore,Kr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await zV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iI(t.remoteStore,i),a}async function zV(t,e,n,r,i){t.pu=(f,p,g)=>async function(_,k,S,v){let x=k.view.ru(S);x.Ss&&(x=await e_(_.localStore,k.query,!1).then(({documents:E})=>k.view.ru(E,x)));const j=v&&v.targetChanges.get(k.targetId),L=v&&v.targetMismatches.get(k.targetId)!=null,O=k.view.applyChanges(x,_.isPrimaryClient,j,L);return u_(_,k.targetId,O.au),O.snapshot}(t,f,p,g);const s=await e_(t.localStore,e,!0),o=new LV(e,s.ks),a=o.ru(s.documents),l=Gc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(a,t.isPrimaryClient,l);u_(t,n,d.au);const h=new MV(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function BV(t,e,n){const r=Ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!uf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Tg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&b0(r.remoteStore,i.targetId),bg(r,i.targetId)}).catch(Ga)):(bg(r,i.targetId),await Tg(r.localStore,i.targetId,!0))}async function $V(t,e){const n=Ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b0(n.remoteStore,r.targetId))}async function WV(t,e,n){const r=XV(t);try{const i=await function(o,a){const l=Ie(o),d=st.now(),h=a.reduce((g,w)=>g.add(w.key),Me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Ti(),_=Me();return l.xs.getEntries(g,h).next(k=>{w=k,w.forEach((S,v)=>{v.isValidDocument()||(_=_.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(k=>{f=k;const S=[];for(const v of a){const x=oM(v,f.get(v.key).overlayedDocument);x!=null&&S.push(new Ns(v.key,x,w2(x.value.mapValue),hn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,d,S,a)}).next(k=>{p=k;const S=k.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(g,k.batchId,S)})}).then(()=>({batchId:p.batchId,changes:R2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let d=o.du[o.currentUser.toKey()];d||(d=new mt(Le)),d=d.insert(a,l),o.du[o.currentUser.toKey()]=d}(r,i.batchId,n),await Qc(r,i.changes),await yf(r.remoteStore)}catch(i){const s=R0(i,"Failed to persist write");n.reject(s)}}async function fI(t,e){const n=Ie(t);try{const r=await nV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Oe(o.hu,14607):i.removedDocuments.size>0&&(Oe(o.hu,42227),o.hu=!1))}),await Qc(n,r,e)}catch(r){await Ga(r)}}function c_(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let d=!1;l.queries.forEach((h,f)=>{for(const p of f.ba)p.va(a)&&(d=!0)}),d&&N0(l)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qV(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new mt(ve.comparator);o=o.insert(s,Ut.newNoDocument(s,Se.min()));const a=Me().add(s),l=new pf(Se.min(),new Map,new mt(Le),o,a);await fI(r,l),r.Ru=r.Ru.remove(s),r.Au.delete(e),M0(r)}else await Tg(r.localStore,e,!1).then(()=>bg(r,e,n)).catch(Ga)}async function HV(t,e){const n=Ie(t),r=e.batch.batchId;try{const i=await tV(n.localStore,e);mI(n,r,null),pI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qc(n,i)}catch(i){await Ga(i)}}async function GV(t,e,n){const r=Ie(t);try{const i=await function(o,a){const l=Ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,a).next(f=>(Oe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(d,f))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(r.localStore,e);mI(r,e,n),pI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qc(r,i)}catch(i){await Ga(i)}}function pI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function mI(t,e,n){const r=Ie(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function bg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||gI(t,r)})}function gI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(b0(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),M0(t))}function u_(t,e,n){for(const r of n)r instanceof uI?(t.Vu.addReference(r.key,e),KV(t,r)):r instanceof dI?(le(L0,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||gI(t,r.key)):xe(19791,{wu:r})}function KV(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(le(L0,"New document in limbo: "+n),t.Eu.add(r),M0(t))}function M0(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ve(We.fromString(e)),r=t.fu.next();t.Au.set(r,new VV(n)),t.Ru=t.Ru.insert(n,r),iI(t.remoteStore,new Xi(Kr(cf(n.path)),r,"TargetPurposeLimboResolution",af.ce))}}async function Qc(t,e,n){const r=Ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(d){i.push(d);const f=T0.Es(l.targetId,d);s.push(f)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(l,d){const h=Ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(d,p=>$.forEach(p.Ts,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>$.forEach(p.Is,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Ka(f))throw f;le(S0,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const g=h.vs.get(p),w=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(w);h.vs=h.vs.insert(p,_)}}}(r.localStore,s))}async function QV(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){le(L0,"User change. New user:",e.toKey());const r=await tI(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new se(z.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qc(n,r.Ns)}}function YV(t,e){const n=Ie(t),r=n.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let i=Me();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function yI(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qV.bind(null,e),e.Pu.J_=NV.bind(null,e.eventManager),e.Pu.yu=jV.bind(null,e.eventManager),e}function XV(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GV.bind(null,e),e}class hh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return eV(this.persistence,new XM,e.initialUser,this.serializer)}Cu(e){return new eI(_0.Vi,this.serializer)}Du(e){return new aV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hh.provider={build:()=>new hh};class JV extends hh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof uh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new eI(r=>uh.Vi(r,n),this.serializer)}}class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QV.bind(null,this.syncEngine),await RV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DV}()}createDatastore(e){const n=mf(e.databaseInfo.databaseId),r=hV(e.databaseInfo);return yV(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new wV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>c_(this.syncEngine,n,0),function(){return r_.v()?new r_:new lV}())}createSyncEngine(e,n){return function(i,s,o,a,l,d,h){const f=new OV(i,s,o,a,l,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ie(i);le(yo,"RemoteStore shutting down."),s.Ea.add(5),await Kc(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZV=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Ie(i),a={documents:s.map(f=>ch(o.serializer,f))},l=await o.jo("BatchGetDocuments",o.serializer.databaseId,We.emptyPath(),a,s.length),d=new Map;l.forEach(f=>{const p=wM(o.serializer,f);d.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=d.get(f.toString());Oe(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new g0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ve.fromPath(r);this.mutations.push(new F2(i,this.precondition(i)))}),await async function(r,i){const s=Ie(r),o={writes:i.map(a=>K2(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,We.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw xe(50498,{Gu:e.constructor.name});n=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new se(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?hn.exists(!1):hn.updateTime(n):hn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new se(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hn.updateTime(n)}return hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new E0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{const e=new ZV(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Zu(i)}))}).catch(r=>{this.Zu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!Wc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!U2(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class t3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{le(Is,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le(Is,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bp(t,e){t.asyncQueue.verifyOperationInProgress(),le(Is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await n3(t);le(Is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>s_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>s_(e.remoteStore,i)),t._onlineComponents=e}async function n3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Is,"Using user provided OfflineComponentProvider");try{await Bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Na("Error using user provided cache. Falling back to memory cache: "+n),await Bp(t,new hh)}}else le(Is,"Using default OfflineComponentProvider"),await Bp(t,new JV(void 0));return t._offlineComponents}async function O0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Is,"Using user provided OnlineComponentProvider"),await d_(t,t._uninitializedComponentsProvider._online)):(le(Is,"Using default OnlineComponentProvider"),await d_(t,new Ig))),t._onlineComponents}function r3(t){return O0(t).then(e=>e.syncEngine)}function i3(t){return O0(t).then(e=>e.datastore)}async function fh(t){const e=await O0(t),n=e.eventManager;return n.onListen=FV.bind(null,e.syncEngine),n.onUnlisten=BV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$V.bind(null,e.syncEngine),n}function s3(t,e,n,r){const i=new V0(r),s=new j0(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>P0(await fh(t),s)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>D0(await fh(t),s))}}function o3(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,d){const h=new V0({next:p=>{h.Nu(),o.enqueueAndForget(()=>D0(s,f));const g=p.docs.has(a);!g&&p.fromCache?d.reject(new se(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?d.reject(new se(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new j0(cf(a.path),h,{includeMetadataChanges:!0,Ka:!0});return P0(s,f)}(await fh(t),t.asyncQueue,e,n,r)),r.promise}function a3(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,d){const h=new V0({next:p=>{h.Nu(),o.enqueueAndForget(()=>D0(s,f)),p.fromCache&&l.source==="server"?d.reject(new se(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new j0(a,h,{includeMetadataChanges:!0,Ka:!0});return P0(s,f)}(await fh(t),t.asyncQueue,e,n,r)),r.promise}function l3(t,e){const n=new Gr;return t.asyncQueue.enqueueAndForget(async()=>WV(await r3(t),e,n)),n.promise}function c3(t,e,n){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>{const i=await i3(t);new e3(t.asyncQueue,i,n,e,r).ju()}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="ComponentProvider",h_=new Map;function d3(t,e,n,r,i){return new AL(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,vI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="firestore.googleapis.com",f_=!0;class p_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wI,this.ssl=f_}else this.host=e.host,this.ssl=e.ssl??f_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jM)throw new se(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lL;switch(r.type){case"firstParty":return new hL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=h_.get(n);r&&(le(u3,"Removing Datastore"),h_.delete(n),r.terminate())}(this),Promise.resolve()}}function h3(t,e,n,r={}){var d;t=Un(t,vf);const i=Zr(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(nf(`https://${a}`),rf("Firestore",!0)),s.host!==wI&&s.host!==a&&Na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!mo(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=nn.MOCK_USER;else{h=Gb(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new se(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new nn(p)}t._authCredentials=new cL(new o2(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($c(n,ht._jsonSchema))return new ht(e,r||null,new ve(We.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:Pt("string",ht._jsonSchemaVersion),referencePath:Pt("string")};class ps extends ko{constructor(e,n,r){super(e,n,cf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new ve(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function $p(t,e,...n){if(t=Ze(t),a2("collection","path",e),t instanceof vf){const r=We.fromString(e,...n);return Cx(r),new ps(t,null,r)}{if(!(t instanceof ht||t instanceof ps))throw new se(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return Cx(r),new ps(t.firestore,null,r)}}function zs(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=c0.newId()),a2("doc","path",e),t instanceof vf){const r=We.fromString(e,...n);return Ix(r),new ht(t,null,new ve(r))}{if(!(t instanceof ht||t instanceof ps))throw new se(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return Ix(r),new ht(t.firestore,t instanceof ps?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="AsyncQueue";class g_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new E0(this,"async_queue_retry"),this._c=()=>{const r=zp();r&&le(m_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=zp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=zp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Gr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ka(e))throw e;le(m_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_i("INTERNAL UNHANDLED ERROR: ",y_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=A0.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&xe(47125,{Pc:y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function y_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cs extends vf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new g_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g_(e),this._firestoreClient=void 0,await e}}}function f3(t,e){const n=typeof t=="object"?t:sf(),r=typeof t=="string"?t:e||rh,i=Bc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=s0("firestore");s&&h3(i,...s)}return i}function Yc(t){if(t._terminated)throw new se(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p3(t),t._firestoreClient}function p3(t){var r,i,s,o;const e=t._freezeSettings(),n=d3(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new t3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const d=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Qt.fromBase64String(e))}catch(n){throw new se(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($c(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Pt("string",Ln._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if($c(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:Pt("string",Qr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($c(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sr(e.vectorValues);throw new se(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Pt("string",Sr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=/^__.*__$/;class g3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hc(e,this.data,n,this.fieldTransforms)}}class xI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _I(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{dataSource:t})}}class F0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new F0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ph(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(_I(this.dataSource)&&m3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class y3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mf(e)}createContext(e,n,r,i=!1){return new F0({dataSource:e,methodName:n,targetDoc:r,path:Ht.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _f(t){const e=t._freezeSettings(),n=mf(t._databaseId);return new y3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TI(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);z0("Data must be an object, but it was:",o,r);const a=bI(r,o);let l,d;if(s.merge)l=new Vn(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Fa(e,f,n);if(!o.contains(p))throw new se(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kI(h,p)||h.push(p)}l=new Vn(h),d=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,d=o.fieldTransforms;return new g3(new dn(a),l,d)}class Tf extends xf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}class U0 extends xf{_toFieldTransform(e){return new nM(e.path,new Tc)}isEqual(e){return e instanceof U0}}function SI(t,e,n,r){const i=t.createContext(1,e,n);z0("Data must be an object, but it was:",i,r);const s=[],o=dn.empty();Ds(r,(l,d)=>{const h=CI(e,l,n);d=Ze(d);const f=i.childContextForFieldPath(h);if(d instanceof Tf)s.push(h);else{const p=Xc(d,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Vn(s);return new xI(o,a,i.fieldTransforms)}function EI(t,e,n,r,i,s){const o=t.createContext(1,e,n),a=[Fa(e,r,n)],l=[i];if(s.length%2!=0)throw new se(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Fa(e,s[p])),l.push(s[p+1]);const d=[],h=dn.empty();for(let p=a.length-1;p>=0;--p)if(!kI(d,a[p])){const g=a[p];let w=l[p];w=Ze(w);const _=o.childContextForFieldPath(g);if(w instanceof Tf)d.push(g);else{const k=Xc(w,_);k!=null&&(d.push(g),h.set(g,k))}}const f=new Vn(d);return new xI(h,f,o.fieldTransforms)}function v3(t,e,n,r=!1){return Xc(n,t.createContext(r?4:3,e))}function Xc(t,e){if(II(t=Ze(t)))return z0("Unsupported field value:",e,t),bI(t,e);if(t instanceof xf)return function(r,i){if(!_I(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Xc(a,i.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=st.fromDate(r);return{timestampValue:lh(i.serializer,s)}}if(r instanceof st){const s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lh(i.serializer,s)}}if(r instanceof Qr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:W2(i.serializer,r._byteString)};if(r instanceof ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sr)return function(o,a){const l=o instanceof Sr?o.toArray():o;return{mapValue:{fields:{[g2]:{stringValue:v2},[ih]:{arrayValue:{values:l.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return m0(a.serializer,h)})}}}}}}(r,i);if(J2(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${of(r)}`)}(t,e)}function bI(t,e){const n={};return u2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,(r,i)=>{const s=Xc(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function II(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Qr||t instanceof Ln||t instanceof ht||t instanceof xf||t instanceof Sr||J2(t))}function z0(t,e,n){if(!II(n)||!l2(n)){const r=of(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Fa(t,e,n){if((e=Ze(e))instanceof wf)return e._internalPath;if(typeof e=="string")return CI(t,e);throw ph("Field path arguments must be of type string or ",t,!1,void 0,n)}const w3=new RegExp("[~\\*/\\[\\]]");function CI(t,e,n){if(e.search(w3)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wf(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ph(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new se(z.INVALID_ARGUMENT,a+t+l)}function kI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ds(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ih].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Et(o.doubleValue));return new Sr(n)}convertGeoPoint(e){return new Qr(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const n=Ts(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Oe(X2(r),9688,{name:e});const i=new xc(r.get(1),r.get(3)),s=new ve(r.popFirst(5));return i.isEqual(n)||_i(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function Lo(){return new U0("serverTimestamp")}const v_="@firebase/firestore",w_="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Fa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x3 extends mh{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B0{}class _3 extends B0{}function Wp(t,e,...n){let r=[];e instanceof B0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof $0).length,a=s.filter(l=>l instanceof Ef).length;if(o>1||o>0&&a>0)throw new se(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ef extends _3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ef(e,n,r)}_apply(e){const n=this._parse(e);return PI(e._query,n),new ko(e.firestore,e.converter,yg(e._query,n))}_parse(e){const n=_f(e.firestore);return function(s,o,a,l,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){S_(f,h);const w=[];for(const _ of f)w.push(T_(l,s,_));p={arrayValue:{values:w}}}else p=T_(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||S_(f,h),p=v3(a,o,f,h==="in"||h==="not-in");return Rt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function __(t,e,n){const r=e,i=Fa("where",t);return Ef._create(i,r,n)}class $0 extends B0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)PI(o,l),o=yg(o,l)}(e._query,n),new ko(e.firestore,e.converter,yg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function T_(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new se(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I2(e)&&n.indexOf("/")!==-1)throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!ve.isDocumentKey(r))throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lx(t,new ve(r))}if(n instanceof ht)return Lx(t,n._key);throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(n)}.`)}function S_(t,e){if(!Array.isArray(t)||t.length===0)throw new se(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function DI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class T3 extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}class ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends mh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:Pt("string",ms._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class pd extends ms{data(e={}){return super.data(e)}}class so{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ra(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pd(this._firestore,this._userDataWriter,r.key,r,new ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new pd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ra(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new pd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ra(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:S3(a.type),doc:l,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:Pt("string",so._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};const E3={maxAttempts:5};function Al(t,e){if((t=Ze(t)).firestore!==e)throw new se(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=_f(e)}get(e){const n=Al(e,this._firestore),r=new T3(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return xe(24041);const s=i[0];if(s.isFoundDocument())return new mh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new mh(this._firestore,r,n._key,null,n.converter);throw xe(18433,{doc:s})})}set(e,n,r){const i=Al(e,this._firestore),s=DI(i.converter,n,r),o=TI(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Al(e,this._firestore);let o;return o=typeof(n=Ze(n))=="string"||n instanceof wf?EI(this._dataReader,"Transaction.update",s._key,n,r,i):SI(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Al(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3 extends b3{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Al(e,this._firestore),r=new Sf(this._firestore);return super.get(e).then(i=>new ms(this._firestore,r,n._key,i._document,new ra(!1,!1),n.converter))}}function zu(t,e,n){t=Un(t,Cs);const r={...E3,...n};(function(o){if(o.maxAttempts<1)throw new se(z.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=Yc(t);return c3(i,s=>e(new I3(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){t=Un(t,ht);const e=Un(t.firestore,Cs),n=Yc(e);return o3(n,t._key).then(r=>jI(e,t,r))}function qp(t){t=Un(t,ko);const e=Un(t.firestore,Cs),n=Yc(e),r=new Sf(e);return RI(t._query),a3(n,t._query).then(i=>new so(e,r,t,i))}function C3(t,e,n){t=Un(t,ht);const r=Un(t.firestore,Cs),i=DI(t.converter,e,n),s=_f(r);return NI(r,[TI(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,hn.none())])}function k3(t,e,n,...r){t=Un(t,ht);const i=Un(t.firestore,Cs),s=_f(i);let o;return o=typeof(e=Ze(e))=="string"||e instanceof wf?EI(s,"updateDoc",t._key,e,n,r):SI(s,"updateDoc",t._key,e),NI(i,[o.toMutation(t._key,hn.exists(!0))])}function ZU(t,...e){var d,h,f;t=Ze(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||x_(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(x_(e[r])){const p=e[r];e[r]=(d=p.next)==null?void 0:d.bind(p),e[r+1]=(h=p.error)==null?void 0:h.bind(p),e[r+2]=(f=p.complete)==null?void 0:f.bind(p)}let s,o,a;if(t instanceof ht)o=Un(t.firestore,Cs),a=cf(t._key.path),s={next:p=>{e[r]&&e[r](jI(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Un(t,ko);o=Un(p.firestore,Cs),a=p._query;const g=new Sf(o);s={next:w=>{e[r]&&e[r](new so(o,g,p,w))},error:e[r+1],complete:e[r+2]},RI(t._query)}const l=Yc(o);return s3(l,a,i,s)}function NI(t,e){const n=Yc(t);return l3(n,e)}function jI(t,e,n){const r=n.docs.get(e._key),i=new Sf(t);return new ms(t,i,e._key,r,new ra(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){aL(bo),xs(new wi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Cs(new uL(r.getProvider("auth-internal")),new fL(o,r.getProvider("app-check-internal")),RL(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),sr(v_,w_,e),sr(v_,w_,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="firebasestorage.googleapis.com",MI="storageBucket",A3=2*60*1e3,R3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt extends kr{constructor(e,n,r=0){super(Hp(e),`Firebase Storage: ${n} (${Hp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wt||(wt={}));function Hp(t){return"storage/"+t}function W0(){const t="An unknown error occurred, please check the error payload for server response.";return new xt(wt.UNKNOWN,t)}function P3(t){return new xt(wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function D3(t){return new xt(wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function N3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(wt.UNAUTHENTICATED,t)}function j3(){return new xt(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function L3(t){return new xt(wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function M3(){return new xt(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V3(){return new xt(wt.CANCELED,"User canceled the upload/download.")}function O3(t){return new xt(wt.INVALID_URL,"Invalid URL '"+t+"'.")}function F3(t){return new xt(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function U3(){return new xt(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MI+"' property when initializing the app?")}function z3(){return new xt(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B3(){return new xt(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $3(t){return new xt(wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cg(t){return new xt(wt.INVALID_ARGUMENT,t)}function VI(){return new xt(wt.APP_DELETED,"The Firebase app was deleted.")}function W3(t){return new xt(wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ql(t,e){return new xt(wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xl(t){throw new xt(wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=On.makeFromUrl(e,n)}catch{return new On(e,"")}if(r.path==="")return r;throw F3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),w={bucket:1,path:3},_=n===LI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",S=new RegExp(`^https?://${_}/${i}/${k}`,"i"),x=[{regex:a,indices:l,postModify:s},{regex:g,indices:w,postModify:d},{regex:S,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<x.length;j++){const L=x[j],O=L.regex.exec(e);if(O){const E=O[L.indices.bucket];let T=O[L.indices.path];T||(T=""),r=new On(E,T),L.postModify(r);break}}if(r==null)throw O3(e);return r}}class q3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function f(k){i=setTimeout(()=>{i=null,t(g,l())},k)}function p(){s&&clearTimeout(s)}function g(k,...S){if(d){p();return}if(k){p(),h.call(null,k,...S);return}if(l()||o){p(),h.call(null,k,...S);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let w=!1;function _(k){w||(w=!0,p(),!d&&(i!==null?(k||(a=2),clearTimeout(i),f(0)):k||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function G3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){return t!==void 0}function Q3(t){return typeof t=="object"&&!Array.isArray(t)}function q0(t){return typeof t=="string"||t instanceof String}function b_(t){return H0()&&t instanceof Blob}function H0(){return typeof Blob<"u"}function I_(t,e,n,r){if(r<e)throw Cg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Cg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function OI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var oo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oo||(oo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n,r,i,s,o,a,l,d,h,f,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===oo.NO_ERROR,l=s.getStatus();if(!a||Y3(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===oo.ABORT;r(!1,new Bu(!1,null,h));return}const d=this.successCodes_.indexOf(l)!==-1;r(!0,new Bu(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());K3(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=W0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?VI():V3();o(l)}else{const l=M3();o(l)}};this.canceled_?n(!1,new Bu(!1,null,!0)):this.backoffId_=H3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&G3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function J3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Z3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function e6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function t6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function n6(t,e,n,r,i,s,o=!0,a=!1){const l=OI(t.urlParams),d=t.url+l,h=Object.assign({},t.headers);return e6(h,e),J3(h,n),Z3(h,s),t6(h,r),new X3(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function i6(...t){const e=r6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(H0())return new Blob(t);throw new xt(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function s6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t){if(typeof atob>"u")throw $3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gp{constructor(e,n){this.data=e,this.contentType=n||null}}function a6(t,e){switch(t){case Br.RAW:return new Gp(FI(e));case Br.BASE64:case Br.BASE64URL:return new Gp(UI(t,e));case Br.DATA_URL:return new Gp(c6(e),u6(e))}throw W0()}function FI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function l6(t){let e;try{e=decodeURIComponent(t)}catch{throw Ql(Br.DATA_URL,"Malformed data URL.")}return FI(e)}function UI(t,e){switch(t){case Br.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ql(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Br.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ql(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=o6(e)}catch(i){throw i.message.includes("polyfill")?i:Ql(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class zI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ql(Br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=d6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function c6(t){const e=new zI(t);return e.base64?UI(Br.BASE64,e.rest):l6(e.rest)}function u6(t){return new zI(t).contentType}function d6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){let r=0,i="";b_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(b_(this.data_)){const r=this.data_,i=s6(r,e,n);return i===null?null:new $i(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new $i(r,!0)}}static getBlob(...e){if(H0()){const n=e.map(r=>r instanceof $i?r.data_:r);return new $i(i6.apply(null,n))}else{const n=e.map(o=>q0(o)?a6(Br.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new $i(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){let e;try{e=JSON.parse(t)}catch{return null}return Q3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function f6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $I(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t,e){return e}class ln{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||p6}}let $u=null;function m6(t){return!q0(t)||t.length<2?t:$I(t)}function WI(){if($u)return $u;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(s,o){return m6(o)}const n=new ln("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ln("size");return i.xform=r,t.push(i),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),$u=t,$u}function g6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new On(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function y6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return g6(r,t),r}function qI(t,e,n){const r=BI(e);return r===null?null:y6(t,r,n)}function v6(t,e,n,r){const i=BI(e);if(i===null||!q0(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),g=G0(p,n,r),w=OI({alt:"media",token:d});return g+w})[0]}function w6(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class HI{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){if(!t)throw W0()}function x6(t,e){function n(r,i){const s=qI(t,i,e);return GI(s!==null),s}return n}function _6(t,e){function n(r,i){const s=qI(t,i,e);return GI(s!==null),v6(s,i,t.host,t._protocol)}return n}function KI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=j3():i=N3():n.getStatus()===402?i=D3(t.bucket):n.getStatus()===403?i=L3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function T6(t){const e=KI(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=P3(t.path)),s.serverResponse=i.serverResponse,s}return n}function S6(t,e,n){const r=e.fullServerUrl(),i=G0(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new HI(i,s,_6(t,n),o);return a.errorHandler=T6(e),a}function E6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function b6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=E6(null,e)),r}function I6(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let j=0;j<2;j++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const d=b6(e,r,i),h=w6(d,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=$i.getBlob(f,r,p);if(g===null)throw z3();const w={name:d.fullPath},_=G0(s,t.host,t._protocol),k="POST",S=t.maxUploadRetryTime,v=new HI(_,k,x6(t,n),S);return v.urlParams=w,v.headers=o,v.body=g.uploadData(),v.errorHandler=KI(e),v}class C6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw xl("cannot .send() more than once");if(Zr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class k6 extends C6{initXhr(){this.xhr_.responseType="text"}}function QI(){return new k6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this._service=e,n instanceof On?this._location=n:this._location=On.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vo(e,n)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $I(this._location.path)}get storage(){return this._service}get parent(){const e=h6(this._location.path);if(e===null)return null;const n=new On(this._location.bucket,e);return new vo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw W3(e)}}function A6(t,e,n){t._throwIfRoot("uploadBytes");const r=I6(t.storage,t._location,WI(),new $i(e,!0),n);return t.storage.makeRequestWithTokens(r,QI).then(i=>({metadata:i,ref:t}))}function R6(t){t._throwIfRoot("getDownloadURL");const e=S6(t.storage,t._location,WI());return t.storage.makeRequestWithTokens(e,QI).then(n=>{if(n===null)throw B3();return n})}function P6(t,e){const n=f6(t._location.path,e),r=new On(t._location.bucket,n);return new vo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(t){return/^[A-Za-z]+:\/\//.test(t)}function N6(t,e){return new vo(t,e)}function YI(t,e){if(t instanceof K0){const n=t;if(n._bucket==null)throw U3();const r=new vo(n,n._bucket);return e!=null?YI(r,e):r}else return e!==void 0?P6(t,e):t}function j6(t,e){if(e&&D6(e)){if(t instanceof K0)return N6(t,e);throw Cg("To use ref(service, url), the first argument must be a Storage instance.")}else return YI(t,e)}function C_(t,e){const n=e==null?void 0:e[MI];return n==null?null:On.makeFromBucketSpec(n,t)}function L6(t,e,n,r={}){t.host=`${e}:${n}`;const i=Zr(e);i&&(nf(`https://${t.host}/b`),rf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Gb(s,t.app.options.projectId))}class K0{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=LI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A3,this._maxUploadRetryTime=R3,this._requests=new Set,i!=null?this._bucket=On.makeFromBucketSpec(i,this._host):this._bucket=C_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=C_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){I_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){I_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new q3(VI());{const o=n6(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const k_="@firebase/storage",A_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="storage";function ez(t,e,n){return t=Ze(t),A6(t,e,n)}function tz(t){return t=Ze(t),R6(t)}function nz(t,e){return t=Ze(t),j6(t,e)}function M6(t=sf(),e){t=Ze(t);const r=Bc(t,XI).getImmediate({identifier:e}),i=s0("storage");return i&&V6(r,...i),r}function V6(t,e,n,r={}){L6(t,e,n,r)}function O6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new K0(n,r,i,e,bo)}function F6(){xs(new wi(XI,O6,"PUBLIC").setMultipleInstances(!0)),sr(k_,A_,""),sr(k_,A_,"esm2020")}F6();function JI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U6=JI,ZI=new Uc("auth","Firebase",JI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new o0("@firebase/auth");function z6(t,...e){gh.logLevel<=je.WARN&&gh.warn(`Auth (${bo}): ${t}`,...e)}function md(t,...e){gh.logLevel<=je.ERROR&&gh.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw Y0(t,...e)}function Er(t,...e){return Y0(t,...e)}function Q0(t,e,n){const r={...U6(),[e]:n};return new Uc("auth","Firebase",r).create(e,{appName:t.name})}function ao(t){return Q0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function B6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(t,"argument-error"),Q0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZI.create(t,...e)}function be(t,e,...n){if(!t)throw Y0(e,...n)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw md(e),new Error(e)}function Si(t,e){t||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $6(){return R_()==="http:"||R_()==="https:"}function R_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($6()||ON()||"connection"in navigator)?navigator.onLine:!0}function q6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=LN()||FN()}get(){return W6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){Si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K6=new Jc(3e4,6e4);function J0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ya(t,e,n,r,i={}){return tC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=zc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:l,...s};return VN()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Zr(t.emulatorConfig.host)&&(d.credentials="include"),eC.fetch()(await nC(t,t.config.apiHost,n,a),d)})}async function tC(t,e,n){t._canInitEmulator=!1;const r={...H6,...e};try{const i=new Y6(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Q0(t,h,d);Jr(t,h)}}catch(i){if(i instanceof kr)throw i;Jr(t,"network-request-failed",{message:String(i)})}}async function Q6(t,e,n,r,i={}){const s=await Ya(t,e,n,r,i);return"mfaPendingCredential"in s&&Jr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function nC(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?X0(t.config,i):`${t.config.apiScheme}://${i}`;return G6.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class Y6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),K6.get())})}}function Wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Er(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function yh(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J6(t,e=!1){const n=Ze(t),r=await n.getIdToken(e),i=Z0(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yl(Kp(i.auth_time)),issuedAtTime:Yl(Kp(i.iat)),expirationTime:Yl(Kp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kp(t){return Number(t)*1e3}function Z0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return md("JWT malformed, contained fewer than 3 sections"),null;try{const i=$b(n);return i?JSON.parse(i):(md("Failed to decode base64 JWT payload"),null)}catch(i){return md("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function P_(t){const e=Z0(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&Z6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await bc(t,yh(e,{idToken:n}));be(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?rC(i.providerUserInfo):[],o=nO(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ag(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function tO(t){const e=Ze(t);await vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e){const n=await tC(t,{},async()=>{const r=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await nC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Zr(t.emulatorConfig.host)&&(l.credentials="include"),eC.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iO(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",J0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=P_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await rO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pa;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new eO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ag(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bc(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J6(this,e)}reload(){return tO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await bc(this,X6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:_}=n;be(f&&_,e,"internal-error");const k=pa.fromJSON(this.name,_);be(typeof f=="string",e,"internal-error"),Ni(r,e.name),Ni(i,e.name),be(typeof p=="boolean",e,"internal-error"),be(typeof g=="boolean",e,"internal-error"),Ni(s,e.name),Ni(o,e.name),Ni(a,e.name),Ni(l,e.name),Ni(d,e.name),Ni(h,e.name);const S=new xr({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:k,createdAt:d,lastLoginAt:h});return w&&Array.isArray(w)&&(S.providerData=w.map(v=>({...v}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new pa;i.updateFromServerResponse(n);const s=new xr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new pa;a.updateFromIdToken(r);const l=new xr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ag(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new Map;function ci(t){Si(t instanceof Function,"Expected a class definition");let e=D_.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,D_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iC.type="NONE";const N_=iC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e,n){return`firebase:${t}:${e}:${n}`}class ma{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=gd(this.userKey,i.apiKey,s),this.fullPersistenceKey=gd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yh(this.auth,{idToken:e}).catch(()=>{});return n?xr._fromGetAccountInfoResponse(this.auth,n,e):null}return xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ma(ci(N_),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||ci(N_);const o=gd(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const p=await yh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await xr._fromGetAccountInfoResponse(e,p,h)}else f=xr._fromJSON(e,h);d!==s&&(a=f),s=d;break}}catch{}const l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ma(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new ma(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uC(e))return"Blackberry";if(dC(e))return"Webos";if(oC(e))return"Safari";if((e.includes("chrome/")||aC(e))&&!e.includes("edge/"))return"Chrome";if(cC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sC(t=on()){return/firefox\//i.test(t)}function oC(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aC(t=on()){return/crios\//i.test(t)}function lC(t=on()){return/iemobile/i.test(t)}function cC(t=on()){return/android/i.test(t)}function uC(t=on()){return/blackberry/i.test(t)}function dC(t=on()){return/webos/i.test(t)}function ev(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sO(t=on()){var e;return ev(t)&&!!((e=window.navigator)!=null&&e.standalone)}function oO(){return UN()&&document.documentMode===10}function hC(t=on()){return ev(t)||cC(t)||dC(t)||uC(t)||/windows phone/i.test(t)||lC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e=[]){let n;switch(t){case"Browser":n=j_(on());break;case"Worker":n=`${j_(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",J0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=6;class uO{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new aO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ci(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yh(this,{idToken:e}),r=await xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(ao(this));const n=e?Ze(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lO(this),n=new uO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ci(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&z6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zc(t){return Ze(t)}class L_{constructor(e){this.auth=e,this.observer=null,this.addObserver=KN(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hO(t){tv=t}function fO(t){return tv.loadJS(t)}function pO(){return tv.gapiScript}function mO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e){const n=Bc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(mo(s,e??{}))return i;Jr(i,"already-initialized")}return n.initialize({options:e})}function yO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vO(t,e,n){const r=Zc(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=pC(e),{host:o,port:a}=wO(e),l=a===null?"":`:${a}`,d={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(mo(d,r.config.emulator)&&mo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Zr(o)?(nf(`${s}//${o}${l}`),rf("Auth",!0)):i||xO()}function pC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wO(t){const e=pC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:M_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:M_(o)}}}function M_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,n){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(t,e){return Q6(t,"POST","/v1/accounts:signInWithIdp",J0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="http://localhost";class wo extends mC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new wo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ga(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ga(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ga(e,n)}buildRequest(){const e={requestUri:_O,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends nv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends eu{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wo._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends eu{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends eu{constructor(){super("twitter.com")}static credential(e,n){return wo._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hi.credential(n,r)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xr._fromIdTokenResponse(e,r,i),o=V_(r);return new Ua({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=V_(r);return new Ua({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function V_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends kr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wh(e,n,r,i)}}function gC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(t,s,e,r):s})}async function TO(t,e,n=!1){const r=await bc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ua._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t,e,n=!1){const{auth:r}=t;if(jn(r.app))return Promise.reject(ao(r));const i="reauthenticate";try{const s=await bc(t,gC(r,i,e,t),n);be(s.idToken,r,"internal-error");const o=Z0(s.idToken);be(o,r,"internal-error");const{sub:a}=o;return be(t.uid===a,r,"user-mismatch"),Ua._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e,n=!1){if(jn(t.app))return Promise.reject(ao(t));const r="signIn",i=await gC(t,r,e),s=await Ua._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function bO(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function IO(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function CO(t){return Ze(t).signOut()}const xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1e3,AO=10;class vC extends yC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);oO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vC.type="LOCAL";const RO=vC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends yC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wC.type="SESSION";const xC=wC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new bf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async d=>d(n.origin,s)),l=await PO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const d=rv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function NO(t){Yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function jO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function MO(){return _C()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="firebaseLocalStorageDb",VO=1,_h="firebaseLocalStorage",SC="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function If(t,e){return t.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function OO(){const t=indexedDB.deleteDatabase(TC);return new tu(t).toPromise()}function Rg(){const t=indexedDB.open(TC,VO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_h,{keyPath:SC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_h)?e(r):(r.close(),await OO(),e(await Rg()))})})}async function O_(t,e,n){const r=If(t,!0).put({[SC]:e,value:n});return new tu(r).toPromise()}async function FO(t,e){const n=If(t,!1).get(e),r=await new tu(n).toPromise();return r===void 0?null:r.value}function F_(t,e){const n=If(t,!0).delete(e);return new tu(n).toPromise()}const UO=800,zO=3;class EC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bf._getInstance(MO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await jO(),!this.activeServiceWorker)return;this.sender=new DO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rg();return await O_(e,xh,"1"),await F_(e,xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=If(i,!1).getAll();return new tu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EC.type="LOCAL";const BO=EC;new Jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e){return e?ci(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends mC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $O(t){return EO(t.auth,new iv(t),t.bypassAuthState)}function WO(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),SO(n,new iv(t),t.bypassAuthState)}async function qO(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),TO(n,new iv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $O;case"linkViaPopup":case"linkViaRedirect":return qO;case"reauthViaPopup":case"reauthViaRedirect":return WO;default:Jr(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Jc(2e3,1e4);async function GO(t,e,n){if(jn(t.app))return Promise.reject(Er(t,"operation-not-supported-in-this-environment"));const r=Zc(t);B6(t,e,nv);const i=bC(r,n);return new to(r,"signInViaPopup",e,i).executeNotNull()}class to extends IC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,to.currentPopupAction&&to.currentPopupAction.cancel(),to.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=rv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,to.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HO.get())};e()}}to.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="pendingRedirect",yd=new Map;class QO extends IC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yd.get(this.auth._key());if(!e){try{const r=await YO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yd.set(this.auth._key(),e)}return this.bypassAuthState||yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YO(t,e){const n=ZO(e),r=JO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function XO(t,e){yd.set(t._key(),e)}function JO(t){return ci(t._redirectPersistence)}function ZO(t){return gd(KO,t.config.apiKey,t.name)}async function eF(t,e){return await Zc(t)._initializationPromise,CC(t,e,!1)}async function CC(t,e,n=!1){if(jn(t.app))return Promise.reject(ao(t));const r=Zc(t),i=bC(r,e),o=await new QO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=10*60*1e3;class nF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Er(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tF&&this.cachedEventUids.clear(),this.cachedEventUids.has(U_(e))}saveEventToCache(e){this.cachedEventUids.add(U_(e)),this.lastProcessedEventTime=Date.now()}}function U_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e={}){return Ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oF=/^https?/;async function aF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iF(t);for(const n of e)try{if(lF(n))return}catch{}Jr(t,"unauthorized-domain")}function lF(t){const e=kg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oF.test(n))return!1;if(sF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=new Jc(3e4,6e4);function z_(){const t=Yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uF(t){return new Promise((e,n)=>{var i,s,o;function r(){z_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z_(),n(Er(t,"network-request-failed"))},timeout:cF.get()})}if((s=(i=Yr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Yr().gapi)!=null&&o.load)r();else{const a=mO("iframefcb");return Yr()[a]=()=>{gapi.load?r():n(Er(t,"network-request-failed"))},fO(`${pO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw vd=null,e})}let vd=null;function dF(t){return vd=vd||uF(t),vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new Jc(5e3,15e3),fF="__/auth/iframe",pF="emulator/auth/iframe",mF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yF(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?X0(e,pF):`https://${t.config.authDomain}/${fF}`,r={apiKey:e.apiKey,appName:t.name,v:bo},i=gF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${zc(r).slice(1)}`}async function vF(t){const e=await dF(t),n=Yr().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:yF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Er(t,"network-request-failed"),a=Yr().setTimeout(()=>{s(o)},hF.get());function l(){Yr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xF=500,_F=600,TF="_blank",SF="http://localhost";class B_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EF(t,e,n,r=xF,i=_F){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...wF,width:r.toString(),height:i.toString(),top:s,left:o},d=on().toLowerCase();n&&(a=aC(d)?TF:n),sC(d)&&(e=e||SF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(sO(d)&&a!=="_self")return bF(e||"",a),new B_(null);const f=window.open(e||"",a,h);be(f,t,"popup-blocked");try{f.focus()}catch{}return new B_(f)}function bF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="__/auth/handler",CF="emulator/auth/handler",kF=encodeURIComponent("fac");async function $_(t,e,n,r,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bo,eventId:i};if(e instanceof nv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof eu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),d=l?`#${kF}=${encodeURIComponent(l)}`:"";return`${AF(t)}?${zc(a).slice(1)}${d}`}function AF({config:t}){return t.emulator?X0(t,CF):`https://${t.authDomain}/${IF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class RF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xC,this._completeRedirectFn=CC,this._overrideRedirectResult=XO}async _openPopup(e,n,r,i){var o;Si((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await $_(e,n,r,kg(),i);return EF(e,s,rv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $_(e,n,r,kg(),i);return NO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Si(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vF(e),r=new nF(e);return n.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Qp];s!==void 0&&n(!!s),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hC()||oC()||ev()}}const PF=RF;var W_="@firebase/auth",q_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jF(t){xs(new wi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fC(t)},d=new dO(r,i,s,l);return yO(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xs(new wi("auth-internal",e=>{const n=Zc(e.getProvider("auth").getImmediate());return(r=>new DF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(W_,q_,NF(t)),sr(W_,q_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=5*60,MF=Hb("authIdTokenMaxAge")||LF;let H_=null;const VF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MF)return;const i=n==null?void 0:n.token;H_!==i&&(H_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OF(t=sf()){const e=Bc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gO(t,{popupRedirectResolver:PF,persistence:[BO,RO,xC]}),r=Hb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=VF(s.toString());IO(n,o,()=>o(n.currentUser)),bO(n,a=>o(a))}}const i=Wb("auth");return i&&vO(n,`http://${i}`),n}function FF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Er("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",FF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jF("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="type.googleapis.com/google.protobuf.Int64Value",zF="type.googleapis.com/google.protobuf.UInt64Value";function AC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Th(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Th(e));if(typeof t=="function"||typeof t=="object")return AC(t,e=>Th(e));throw new Error("Data cannot be encoded in JSON: "+t)}function za(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case UF:case zF:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>za(e)):typeof t=="function"||typeof t=="object"?AC(t,e=>za(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class En extends kr{constructor(e,n,r){super(`${sv}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,En.prototype)}}function BF(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Sh(t,e){let n=BF(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!G_[o])return new En("internal","internal");n=G_[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=za(i))}}catch{}return n==="ok"?null:new En(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="us-central1",WF=/^data: (.*?)(?:\n|$)/;function qF(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new En("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class HF{constructor(e,n,r,i,s=Pg,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new $F(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Pg}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function GF(t,e,n){const r=Zr(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(nf(t.emulatorOrigin+"/backends"),rf("Functions",!0))}function KF(t,e,n){const r=i=>YF(t,e,i,n||{});return r.stream=(i,s)=>JF(t,e,i,s),r}function RC(t){return t.emulatorOrigin&&Zr(t.emulatorOrigin)?"include":void 0}async function QF(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:RC(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function PC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function YF(t,e,n,r){const i=t._url(e);return XF(t,i,n,r)}async function XF(t,e,n,r){n=Th(n);const i={data:n},s=await PC(t,r),o=r.timeout||7e4,a=qF(o),l=await Promise.race([QF(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new En("cancelled","Firebase Functions instance was deleted.");const d=Sh(l.status,l.json);if(d)throw d;if(!l.json)throw new En("internal","Response is not valid JSON object.");let h=l.json.data;if(typeof h>"u"&&(h=l.json.result),typeof h>"u")throw new En("internal","Response is missing data field.");return{data:za(h)}}function JF(t,e,n,r){const i=t._url(e);return ZF(t,i,n,r||{})}async function ZF(t,e,n,r){var p;n=Th(n);const i={data:n},s=await PC(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:RC(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const _=new En("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const w=Sh(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,l;const d=new Promise((g,w)=>{a=g,l=w});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const g=new En("cancelled","Request was cancelled.");l(g)});const h=o.body.getReader(),f=e8(h,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const g=f.getReader();return{async next(){const{value:w,done:_}=await g.read();return{value:w,done:_}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:d}}function e8(t,e,n,r){const i=(o,a)=>{const l=o.match(WF);if(!l)return;const d=l[1];try{const h=JSON.parse(d);if("result"in h){e(za(h.result));return}if("message"in h){a.enqueue(za(h.message));return}if("error"in h){const f=Sh(0,h);a.error(f),n(f);return}}catch(h){if(h instanceof En){a.error(h),n(h);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const d=new En("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:h}=await t.read();if(h){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new En("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=s.decode(d,{stream:!0});const f=a.split(`
`);a=f.pop()||"";for(const p of f)p.trim()&&i(p.trim(),o);return l()}catch(d){const h=d instanceof En?d:Sh(0,null);o.error(h),n(h)}}},cancel(){return t.cancel()}})}const K_="@firebase/functions",Q_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="auth-internal",n8="app-check-internal",r8="messaging-internal";function i8(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(t8),o=n.getProvider(r8),a=n.getProvider(n8);return new HF(i,s,o,a,r)};xs(new wi(sv,e,"PUBLIC").setMultipleInstances(!0)),sr(K_,Q_,t),sr(K_,Q_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t=sf(),e=Pg){const r=Bc(Ze(t),sv).getImmediate({identifier:e}),i=s0("functions");return i&&o8(r,...i),r}function o8(t,e,n){GF(Ze(t),e,n)}function a8(t,e,n){return KF(Ze(t),e,n)}i8();const l8={apiKey:"AIzaSyCbQY1wxVEoQVGdnylLPMq1-_4sNgucxg0",authDomain:"mindcraft-admin.firebaseapp.com",projectId:"mindcraft-admin",storageBucket:"mindcraft-admin.firebasestorage.app",messagingSenderId:"375110192152",appId:"1:375110192152:web:ade8d56b867b194944076d"},Cf=Yb(l8),vn=f3(Cf),rz=M6(Cf),dr=OF(Cf),c8=s8(Cf);var hr,Cc,ii,Qs;class Dg{constructor(e="cic_",n=null){lt(this,ii);lt(this,hr,void 0);lt(this,Cc,void 0);rt(this,hr,e),rt(this,Cc,n)}get(e,n=null){var r;try{const i=(r=de(this,ii,Qs))==null?void 0:r.getItem(de(this,hr)+e);return i==null?n:JSON.parse(i)}catch(i){return console.error(`[StorageStore] Read error for "${e}":`,i),n}}set(e,n){var r,i;try{const s=JSON.stringify(n,(o,a)=>{if(!(o.startsWith("_")||o.startsWith("$"))&&!(typeof a=="function"||a instanceof Element))return a});(r=de(this,ii,Qs))==null||r.setItem(de(this,hr)+e,s)}catch(s){console.error(`[StorageStore] Write error for "${e}":`,s);try{const o=JSON.parse(JSON.stringify(n,u8()));(i=de(this,ii,Qs))==null||i.setItem(de(this,hr)+e,JSON.stringify(o))}catch{console.error(`[StorageStore] Total failure for "${e}"`)}}}remove(e){var n;(n=de(this,ii,Qs))==null||n.removeItem(de(this,hr)+e)}purge(){const e=de(this,ii,Qs);if(!e)return;const n=[];for(let r=0;r<e.length;r++){const i=e.key(r);i!=null&&i.startsWith(de(this,hr))&&n.push(i)}n.forEach(r=>e.removeItem(r))}keys(){const e=de(this,ii,Qs);if(!e)return[];const n=[];for(let r=0;r<e.length;r++){const i=e.key(r);i!=null&&i.startsWith(de(this,hr))&&n.push(i.replace(de(this,hr),""))}return n}}hr=new WeakMap,Cc=new WeakMap,ii=new WeakSet,Qs=function(){return de(this,Cc)||(typeof window<"u"?window.localStorage:null)};function u8(){const t=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}}const ji=new Dg("cic_v1_");var wa,fr,kc,Ch,DC;const ia=class ia{constructor(){lt(this,Ch);lt(this,fr,null);lt(this,kc,void 0);if(de(ia,wa))return de(ia,wa);rt(this,kc,new Dg("cic_global_")),this.startSession=this.startSession.bind(this),this.endSession=this.endSession.bind(this),rt(ia,wa,this)}startSession(e){if(!e)throw new Error("Security Violation: Attempted to start session without UID");de(this,fr)&&de(this,fr).uid!==e&&(console.warn("[SessionManager] Hot-swapping sessions. Purging previous."),this.endSession()),It(this,Ch,DC).call(this,e);const n=`cic_user_${e}_`;rt(this,fr,{uid:e,store:new Dg(n)}),console.info(`[SessionManager] Secure session initialized for ${e}`)}endSession(){if(!de(this,fr))return;const e=de(this,fr).uid;console.info(`[SessionManager] Ending session for ${e}`),rt(this,fr,null)}get userStore(){if(!de(this,fr))throw new Error("Security Violation: Attempted to access user storage without active session");return de(this,fr).store}get globalStore(){return de(this,kc)}static purgeAllUserSessions(){console.info("[SessionManager] Executing FULL Manual Purge...");const e=window.localStorage,n=[];for(let r=0;r<e.length;r++){const i=e.key(r);i&&(i.startsWith("cic_user_")||i.startsWith("cic_lesson_")||i.startsWith("cic_v1_lessons"))&&n.push(i)}n.forEach(r=>e.removeItem(r)),console.info(`[SessionManager] Purged ${n.length} sensitive keys.`)}};wa=new WeakMap,fr=new WeakMap,kc=new WeakMap,Ch=new WeakSet,DC=function(e){const n=window.localStorage,r=[],i=`cic_user_${e}_`;for(let s=0;s<n.length;s++){const o=n.key(s);o&&(o.startsWith("cic_user_")&&!o.startsWith(i)&&r.push(o),(o.startsWith("cic_lesson_")||o.startsWith("cic_v1_lessons"))&&r.push(o))}r.length>0&&(console.info(`[SessionManager] Cleaning up ${r.length} stale/legacy session keys.`),r.forEach(s=>n.removeItem(s)))},lt(ia,wa,void 0);let Ng=ia;const ya=new Ng,en={IDLE:"IDLE",INITIALIZING:"INITIALIZING",READY:"READY",AUTHENTICATING:"AUTHENTICATING",SUCCESS:"SUCCESS",ERROR:"ERROR"},d8=["https://www.googleapis.com/auth/drive.file"];var xa,_a,Pn,Ta,Zn,Dn,no,kh,Ac,Lg,Sa,wd,Rc,Mg,er,Mr,Ah,NC,Rh,jC;const sa=class sa{constructor(){lt(this,Ac);lt(this,Sa);lt(this,Rc);lt(this,er);lt(this,Ah);lt(this,Rh);lt(this,_a,en.IDLE);lt(this,Pn,null);lt(this,Ta,new Set);lt(this,Zn,null);lt(this,Dn,null);lt(this,no,null);lt(this,kh,!1);if(de(sa,xa))return de(sa,xa);rt(sa,xa,this)}subscribe(e){return de(this,Ta).add(e),e(this.getSnapshot()),()=>de(this,Ta).delete(e)}getSnapshot(){var e;return{user:this.user,status:de(this,_a),error:de(this,Pn),token:(e=de(this,Dn))==null?void 0:e.token,hasDrive:this.hasDriveAccess}}get state(){return de(this,_a)}get error(){return de(this,Pn)}get user(){var n;return!de(this,Zn)&&!dr.currentUser?null:{...de(this,Zn)||It(this,Sa,wd).call(this,dr.currentUser),token:(n=de(this,Dn))==null?void 0:n.token}}get token(){var e;return(e=de(this,Dn))==null?void 0:e.token}get uid(){var e,n;return((e=dr.currentUser)==null?void 0:e.uid)||((n=de(this,Zn))==null?void 0:n.id)}get hasDriveAccess(){var e;return!!((e=de(this,Dn))!=null&&e.token)}async initialize(){return de(this,no)?de(this,no):(rt(this,no,(async()=>{It(this,er,Mr).call(this,en.INITIALIZING);try{const e=await eF(dr);if(e){const n=yr.credentialFromResult(e);await It(this,Ac,Lg).call(this,e.user,n)}else if(dr.currentUser){console.info("[IdentityManager] User restored from Firebase persistence."),rt(this,Zn,It(this,Sa,wd).call(this,dr.currentUser)),ya.startSession(de(this,Zn).id);try{console.info("[IdentityManager] Attempting silent Drive token restoration..."),await this.signIn({prompt:"none"})}catch(n){console.warn("[IdentityManager] Silent Drive token restoration skipped/failed:",n.message)}}}catch(e){console.error("[IdentityManager] Initialization Error:",e),It(this,Rc,Mg).call(this,e)}rt(this,kh,!0),It(this,er,Mr).call(this,de(this,Zn)?en.SUCCESS:en.READY)})()),de(this,no))}async ensureDriveAccess(){var e,n;if((e=de(this,Dn))!=null&&e.token&&de(this,Dn).expiresAt>Date.now()+3e5)return de(this,Dn).token;console.info("[IdentityManager] Drive token missing/stale. Re-acquiring...");try{return await this.signIn({prompt:"none"}),(n=de(this,Dn))==null?void 0:n.token}catch(r){throw console.warn("[IdentityManager] Silent re-acquisition failed. User action required."),r}}async signIn(e={prompt:"select_account"}){It(this,er,Mr).call(this,en.AUTHENTICATING);const n=new yr;d8.forEach(r=>n.addScope(r)),e.prompt&&n.setCustomParameters({prompt:e.prompt});try{const r=await GO(dr,n),i=yr.credentialFromResult(r);await It(this,Ac,Lg).call(this,r.user,i)}catch(r){switch(console.error("[IdentityManager] Sign-In Failed:",r.code,r.message),r.code){case"auth/popup-closed-by-user":It(this,er,Mr).call(this,de(this,Zn)?en.SUCCESS:en.READY);return;case"auth/popup-blocked":rt(this,Pn,"Pop-up was blocked by your browser. Please allow pop-ups for this site and try again.");break;case"auth/cancelled-popup-request":It(this,er,Mr).call(this,en.READY);return;case"auth/network-request-failed":rt(this,Pn,"Network error. Please check your internet connection.");break;default:rt(this,Pn,`Authentication failed: ${r.message}`)}It(this,er,Mr).call(this,en.ERROR,de(this,Pn))}}async requestDriveAccess(){return this.signIn({prompt:"consent"})}async signOut(){try{await CO(dr),It(this,Rh,jC).call(this)}catch(e){console.error("[IdentityManager] SignOut Error:",e),It(this,Rc,Mg).call(this,e)}}};xa=new WeakMap,_a=new WeakMap,Pn=new WeakMap,Ta=new WeakMap,Zn=new WeakMap,Dn=new WeakMap,no=new WeakMap,kh=new WeakMap,Ac=new WeakSet,Lg=async function(e,n){rt(this,Zn,It(this,Sa,wd).call(this,e)),ya.startSession(e.uid),n!=null&&n.accessToken?rt(this,Dn,{token:n.accessToken,expiresAt:Date.now()+3600*1e3}):console.warn("[IdentityManager] No Access Token returned. Drive access may fail."),It(this,er,Mr).call(this,en.SUCCESS),console.info("[IdentityManager] Enterprise Login Success:",e.uid)},Sa=new WeakSet,wd=function(e){return e?{id:e.uid,name:e.displayName,email:e.email,picture:e.photoURL,uid:e.uid}:null},Rc=new WeakSet,Mg=function(e){rt(this,Pn,`Authentication Error: ${e.message||String(e)}`),It(this,er,Mr).call(this,en.ERROR,de(this,Pn))},er=new WeakSet,Mr=function(e,n=null){rt(this,_a,e),n&&rt(this,Pn,n),It(this,Ah,NC).call(this)},Ah=new WeakSet,NC=function(){const e=this.getSnapshot();de(this,Ta).forEach(n=>n(e))},Rh=new WeakSet,jC=function(){rt(this,Zn,null),rt(this,Dn,null),rt(this,Pn,null),ya.endSession(),It(this,er,Mr).call(this,en.IDLE)},lt(sa,xa,null);let jg=sa;const vr=new jg,h8=t=>vr.signIn(t),f8=()=>vr.requestDriveAccess(),LC=R.createContext(null),MC=({children:t})=>{const[e,n]=R.useState(vr.getSnapshot());R.useEffect(()=>{const o=vr.subscribe(a=>{n(a)});return vr.initialize().catch(a=>{console.error("[AuthProvider] Identity Initialization Failed:",a)}),()=>o()},[]);const r=R.useCallback((o="select_account")=>vr.signIn({prompt:o}),[]),i=R.useCallback(()=>{vr.signOut()},[]),s={user:e.user,authStatus:e.status,error:e.error,token:e.token,hasDrive:e.hasDrive,signIn:r,signOut:i,isLoading:e.status===en.INITIALIZING||e.status===en.AUTHENTICATING,isReady:e.status!==en.IDLE&&e.status!==en.INITIALIZING};return u.jsx(LC.Provider,{value:s,children:t})},Ao=()=>{const t=R.useContext(LC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},p8="modulepreload",m8=function(t){return"/chethan-in-cardland/beta/"+t},Y_={},Fr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=m8(s),s in Y_)return;Y_[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":p8,o||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),o)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},X_=3,J_=1e3,lo=async(t,e={},n=0)=>{var r,i,s,o,a,l,d,h;try{const f=await fetch(t,e);if(f.ok)return f;if(f.status===401&&n<1){console.info("[Network] Token invalid. Attempting silent refresh...");try{const g=await vr.acquireToken({prompt:"none",elevated:e._isElevated}),w={...e,headers:{...e.headers,Authorization:`Bearer ${g}`}};return await lo(t,w,n+1)}catch(g){throw console.error("[Network] Refresh failed.",g),new Error("REAUTH_NEEDED")}}if(f.status===403){const g=await f.json().catch(()=>({})),w=((s=(i=(r=g.error)==null?void 0:r.errors)==null?void 0:i[0])==null?void 0:s.reason)||"unknown",_=((o=g.error)==null?void 0:o.message)||"No detailed message";if(console.error("[Audit] 403 Forbidden detected.",{url:t,reason:w,message:_,tokenPrefix:((l=(a=e.headers)==null?void 0:a.Authorization)==null?void 0:l.substring(0,17))+"...",fullError:g}),w==="accessNotConfigured")console.error("[Audit] ROOT CAUSE: Google Drive API is likely DISABLED in the Google Cloud Console for this project.");else if(w==="insufficientPermissions"){console.error("[Audit] ROOT CAUSE: OAuth token is missing required scopes (drive.file or drive).");try{const k=(h=(d=e.headers)==null?void 0:d.Authorization)==null?void 0:h.replace("Bearer ","");if(k){const v=await(await fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?access_token=${k}`)).json();console.info("[Audit] Token Scope Info:",{scopes:v.scope,expires_in:v.expires_in,email:v.email})}}catch(k){console.warn("[Audit] Could not verify token scopes:",k)}}throw new Error(`REAUTH_NEEDED: ${w}: ${_}`)}if((f.status>=500||f.status===429)&&n<X_){const g=J_*Math.pow(2,n);return console.warn(`[Network] Transient error ${f.status}. Retrying in ${g}ms...`),await new Promise(w=>setTimeout(w,g)),await lo(t,e,n+1)}return f}catch(f){if(n<X_){const p=J_*Math.pow(2,n);return await new Promise(g=>setTimeout(g,p)),await lo(t,e,n+1)}throw f}},ov="https://www.googleapis.com/drive/v3/files",Z_="https://www.googleapis.com/upload/drive/v3/files",VC="lesson_content_cache",kf=()=>{try{const t=ya.userStore.get(VC,{});return new Map(Object.entries(t))}catch{return new Map}},av=t=>{try{t.size>50&&Array.from(t.keys()).slice(0,t.size-50).forEach(i=>t.delete(i));const e=Object.fromEntries(t);ya.userStore.set(VC,e)}catch(e){console.warn("Failed to save cache:",e)}},Af=t=>({Authorization:`Bearer ${t}`,"Content-Type":"application/json"}),g8=async t=>{const e="mimeType = 'application/json' and (name contains 'cic_lesson_' or name contains 'flashcard_stack_') and trashed = false",n="files(id, name, owners, permissions, ownedByMe, sharingUser, starred, createdTime, modifiedTime, appProperties)",r=`${ov}?q=${encodeURIComponent(e)}&fields=${n}&supportsAllDrives=true&includeItemsFromAllDrives=true&spaces=drive&t=${Date.now()}`,i=await lo(r,{headers:Af(t),_isElevated:!0});if(i.status===401)throw new Error("REAUTH_NEEDED");return(await i.json()).files||[]},y8=(t,e)=>{const r=kf().get(t);return r&&r.modifiedTime===e?{...r.content,driveFileId:t,_isCached:!0}:null},v8=async(t,e)=>{var n,r,i,s,o,a;try{const l=y8(e.id,e.modifiedTime);if(l)return{...l,ownedByMe:e.ownedByMe,ownerName:(r=(n=e.owners)==null?void 0:n[0])==null?void 0:r.displayName,sharingUser:e.sharingUser,isAccepted:e.ownedByMe||e.starred};const d=await w8(t,e.id),h=kf();return h.set(e.id,{content:d,modifiedTime:e.modifiedTime}),av(h),typeof d=="string"?{encryptedContent:d,driveFileId:e.id,ownedByMe:e.ownedByMe,ownerName:(s=(i=e.owners)==null?void 0:i[0])==null?void 0:s.displayName,sharingUser:e.sharingUser,isAccepted:e.ownedByMe||e.starred,modifiedTime:e.modifiedTime}:{...d,driveFileId:e.id,ownedByMe:e.ownedByMe,ownerName:(a=(o=e.owners)==null?void 0:o[0])==null?void 0:a.displayName,sharingUser:e.sharingUser,isAccepted:e.ownedByMe||e.starred}}catch(l){return console.error(`[Drive] Fetch failed for ${e.id}`,l),{...x8(e),error:!0,errorMessage:l.message}}},w8=async(t,e)=>{const n=`${ov}/${e}?alt=media&t=${Date.now()}`,r=await lo(n,{headers:Af(t),_isElevated:!0});if(r.status===401)throw new Error("REAUTH_NEEDED");const i=await r.text();try{return JSON.parse(i)}catch{return i}},x8=t=>{const e=t.appProperties||{};return{id:e.id||t.id,driveFileId:t.id,title:e.title||t.name.replace("cic_lesson_","").replace("flashcard_stack_","").replace(".json","")||"Error Loading Lesson",label:e.label||"Unknown",questions:[],questionCount:parseInt(e.questionCount||e.cardsCount)||0,modifiedTime:t.modifiedTime,ownedByMe:t.ownedByMe,source:"drive"}},_8=async(t,e,n=null,r=null)=>{var o,a;const i={id:e.id,title:e.title,label:e.label||"",questionCount:String(e.questionCount!==void 0?e.questionCount:((o=e.questions)==null?void 0:o.length)||((a=e.cards)==null?void 0:a.length)||0),lastMarks:e.lastMarks!==void 0?String(e.lastMarks):"",nextReview:e.nextReview||"",reviewStage:e.reviewStage!==void 0?String(e.reviewStage):"-1"},s=`cic_lesson_${e.id}.json`;return T8(t,s,e,n,"application/json",r,i)},OC=async(t,e)=>{const n=await lo(`${ov}/${e}`,{method:"DELETE",headers:Af(t),_isElevated:!0});if(!n.ok&&n.status!==404)throw new Error(`Drive Delete Failed: ${n.status}`);if(e){const r=kf();r.delete(e),av(r)}return!0},T8=async(t,e,n,r=null,i="application/json",s=null,o=null)=>{var w;const a={name:e,mimeType:i};o&&(a.appProperties=o),s&&!r&&(a.parents=[s]);const l=r?`${Z_}/${r}?uploadType=multipart`:`${Z_}?uploadType=multipart`,d=r?"PATCH":"POST",h="-------314159265358979323846",f=`\r
--`+h+`\r
`,p=`\r
--`+h+"--",g=f+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(a)+f+`Content-Type: application/json\r
\r
`+(typeof n=="string"?n:JSON.stringify(n))+p;try{const _=await lo(l,{method:d,headers:{...Af(t),"Content-Type":`multipart/related; boundary=${h}`},body:g,_isElevated:!0});if(_.status===401)throw new Error("REAUTH_NEEDED");if(!_.ok){const v=await _.json();throw new Error(((w=v.error)==null?void 0:w.message)||"Failed to save to Google Drive")}const k=await _.json(),S=kf();return S.set(k.id,{content:n,modifiedTime:k.modifiedTime||new Date().toISOString()}),av(S),k}catch(_){throw _}},S8="DC3xQSHS3NL1vuxaPknC7KQI8mSv4VptXtLlKNBkJFE=",lv="AES-GCM",eT="PBKDF2",E8="SHA-256",b8=1e5,tT=async(t,e="cic_default_salt")=>{const n=new TextEncoder,r=await crypto.subtle.importKey("raw",n.encode(S8+t),{name:eT},!1,["deriveBits","deriveKey"]),i=n.encode(e);return await crypto.subtle.deriveKey({name:eT,salt:i,iterations:b8,hash:E8},r,{name:lv,length:256},!1,["encrypt","decrypt"])},I8=async(t,e)=>{const n=new TextEncoder,r=typeof t=="string"?t:JSON.stringify(t),i=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.encrypt({name:lv,iv:i},e,n.encode(r)),o=new Uint8Array(i.length+s.byteLength);return o.set(i),o.set(new Uint8Array(s),i.length),btoa(String.fromCharCode(...o))},C8=async(t,e)=>{try{let n,r;if(t.startsWith("v1:")){const o=t.split(":"),a=o[1],l=o[2];n=new Uint8Array(a.match(/.{1,2}/g).map(h=>parseInt(h,16)));const d=atob(l);r=new Uint8Array(d.length);for(let h=0;h<d.length;h++)r[h]=d.charCodeAt(h)}else{const o=new Uint8Array(atob(t).split("").map(a=>a.charCodeAt(0)));n=o.slice(0,12),r=o.slice(12)}const i=await crypto.subtle.decrypt({name:lv,iv:n},e,r),s=new TextDecoder().decode(i);try{return JSON.parse(s)}catch{return s}}catch(n){throw console.error("[LessonCrypto] Decryption failed:",n),new Error("Lesson decryption failed. This content might be owned by another user or corrupted.")}},qu=()=>{try{return ya.userStore}catch{return{get:(e,n)=>n,set:()=>{},remove:()=>{}}}};var Ki,wn;class k8{constructor(){lt(this,Ki,!1);lt(this,wn,null)}setDriveAccess(e,n=null){rt(this,Ki,e),rt(this,wn,n),console.info(`[Storage] Strategy initialized: ${e?"Google Drive":"Local Persistence (Recruiter Mode)"}`)}async listLessons(){const e=qu(),n=e.get("lessons",[]);if(!de(this,Ki)||!de(this,wn))return n;try{const s=[...(await g8(de(this,wn))).map(o=>{const a=o.appProperties||{};return{id:a.id||o.id,driveFileId:o.id,title:a.title||o.name.replace("cic_lesson_","").replace(".json",""),questionCount:parseInt(a.questionCount||a.cardsCount)||0,lastMarks:a.lastMarks?parseInt(a.lastMarks):void 0,nextReview:a.nextReview||void 0,label:a.label||"No label",modifiedTime:o.modifiedTime,ownedByMe:o.ownedByMe}})];return n.forEach(o=>{s.find(a=>a.id===o.id)?o.driveFileId:s.push(o)}),e.set("lessons",s),s}catch(r){return console.error("[Storage] Drive fetch failed. Falling back to local.",r),n}}async getLessonContent(e){let n=null;const r=qu();if(de(this,Ki)&&de(this,wn)&&e.driveFileId)try{n=await v8(de(this,wn),{id:e.driveFileId,modifiedTime:e.modifiedTime});const s=vr.uid;if(n&&n.encryptedContent&&s){const o=await tT(s),a=await C8(n.encryptedContent,o);n={...n,...a,encryptedContent:void 0}}}catch{console.warn("[Storage] Drive content fetch failed, hitting local cache:",e.id)}const i=s=>!s||!s.questions&&!s.cards||s.error;if(i(n)){const o=r.get("lessons_full",{})[e.id];i(o)||(console.info("[Storage] Rehydrated from local cache:",e.id),n=o)}return n||e}async saveLesson(e,n=null){var h,f;const r=p=>!p||!p.questions&&!p.cards,i=qu(),s=i.get("lessons_full",{});let o={...e};if(r(o)){const p=s[e.id];r(p)||(console.info("[Storage] Merging metadata update with existing full content:",e.id),o={...p,...o})}try{const p=JSON.parse(JSON.stringify(o,(g,w)=>{if(!(typeof w=="function"||w instanceof Element))return w}));s[e.id]=p,o=p}catch(p){console.warn("[Storage] Lesson purification failed, saving as-is (risk of circular error)",p),s[e.id]=o}i.set("lessons_full",s);const a=i.get("lessons",[]),l=a.findIndex(p=>p.id===e.id),d={...o,questions:void 0,cards:void 0,questionCount:o.questionCount!==void 0?o.questionCount:((h=o.questions)==null?void 0:h.length)||((f=o.cards)==null?void 0:f.length)||0};if(l>=0?a[l]=d:a.push(d),i.set("lessons",a),de(this,Ki)){if(!de(this,wn))try{const p=await vr.ensureDriveAccess();p&&rt(this,wn,p)}catch(p){console.warn("[Storage] Silent token recovery failed:",p.message)}if(!de(this,wn))throw new Error("REAUTH_NEEDED");try{let p=o;const g=vr.uid;if(g){const _=await tT(g);p=await I8(o,_)}const w=await _8(de(this,wn),p,o.driveFileId,n);o.driveFileId=w.id,d.driveFileId=w.id,s[e.id]=o,i.set("lessons_full",s),i.set("lessons",a)}catch(p){console.warn("[Storage] Drive sync delayed.",p);const g=p.message||String(p);if(g.includes("REAUTH_NEEDED")||g.includes("403"))throw p}}return o}async deleteLesson(e){de(this,Ki)&&de(this,wn)&&e.driveFileId&&await OC(de(this,wn),e.driveFileId).catch(()=>{});const n=qu(),r=n.get("lessons",[]);n.set("lessons",r.filter(s=>s.id!==e.id));const i=n.get("lessons_full",{});delete i[e.id],n.set("lessons_full",i)}}Ki=new WeakMap,wn=new WeakMap;const Ji=new k8,cv="/chethan-in-cardland/beta/assets/logo-423dc48b.png",Ei={}.VITE_ADMIN_EMAIL||"chethanincardland@gmail.com",iz="https://us-central1-mindcraft-admin.cloudfunctions.net/decryptPublicLesson",A8={}.VITE_UPI_ID||"vinayarajh1-1@okhdfcbank",R8={}.VITE_SUPPORT_PHONE||"919497449115",P8="ChethanInCardland",Hu={id:"demo-lesson",title:"General Knowledge (Demo)",titleImage:cv,label:"Science",questions:[{id:1,question:{text:"What is the role of red blood cells?",image:"",audio:""},answer:{text:"They carry oxygen to body tissues.",image:"",audio:""}},{id:2,question:{text:"Why do we need sleep?",image:"",audio:""},answer:{text:"Sleep helps the body and brain recover and function properly.",image:"",audio:""}},{id:3,type:"mcq",question:{text:"Which part of the human body has no blood supply?",image:"",audio:""},options:[{id:"a",text:"Retina",isCorrect:!1},{id:"b",text:"Cornea",isCorrect:!0},{id:"c",text:"Brain",isCorrect:!1},{id:"d",text:"Liver",isCorrect:!1}],answer:{text:"Cornea",image:"",audio:""}},{id:4,question:{text:"Who was known as the Iron Man of India?",image:"",audio:""},answer:{text:"Sardar Vallabhbhai Patel was known as the Iron Man of India.",image:"",audio:""}},{id:5,type:"mcq",question:{text:"Which planet spins backwards compared to others?",image:"",audio:""},options:[{id:"a",text:"Mars",isCorrect:!1},{id:"b",text:"Earth",isCorrect:!1},{id:"c",text:"Venus",isCorrect:!0},{id:"d",text:"Jupiter",isCorrect:!1}],answer:{text:"Venus",image:"",audio:""}}],owner:Ei,ownerName:"Demo User",avgRating:4.8,lastReviewed:"Jan 7, 2026",nextReview:new Date(Date.now()+3*24*60*60*1e3).toISOString(),reviewStage:0,isPublic:!1},D8=(t,e,n)=>{const[r,i]=R.useState([Hu]),[s,o]=R.useState([]),[a,l]=R.useState(!1),[d,h]=R.useState(!1),f=R.useRef(0),p=R.useRef([]),g=R.useRef(null);R.useEffect(()=>{Ji.setDriveAccess(e,t==null?void 0:t.token)},[e,t==null?void 0:t.token]);const w=R.useCallback(v=>{i(x=>{const j=x.findIndex(L=>L.id===v.id);if(j>=0){const L=[...x];return L[j]={...L[j],...v},L}return[v,...x]})},[]),_=R.useCallback(async()=>{console.log("[Lessons] Public lessons are now real-time synced.")},[]);R.useEffect(()=>{let v=()=>{},x=!0;return(async()=>{h(!0);try{const[L,O]=await Promise.all([Fr(()=>import("./localLessonsService-b405e72b.js"),[]),Fr(()=>import("./publicDrive-fa900bb1.js"),[])]);if(!x)return;const E=await L.listLocalLessons();v=O.subscribeToPublicLessons(T=>{if(!x)return;const b=new Set(T.map(P=>P.id)),A=[...T,...E.filter(P=>!b.has(P.id))];console.log(`[Lessons] Synced ${T.length} Cloud + ${E.length} Local`),o(A),h(!1)})}catch(L){console.error("[Lessons] Subscription failed:",L),x&&h(!1)}})(),()=>{x=!1,v()}},[]);const k=R.useCallback(async(v=!1)=>{if(!t){i([Hu]);return}if(!(!v&&Date.now()-f.current<6e4)){f.current=Date.now(),l(!0);try{const j=(await Ji.listLessons()).filter(E=>E.id!==Hu.id);i([Hu,...j]),l(!1),g.current&&clearInterval(g.current),p.current=[],g.current=setInterval(()=>{const E=p.current.splice(0,p.current.length);E.length>0&&i(T=>{const b=[...T];return E.forEach(A=>{const P=b.findIndex(N=>N.id===A.id);P>=0&&(b[P]={...b[P],...A,loading:!1})}),b})},500);const L=[...j],O=async()=>{if(L.length===0)return;const E=L.shift();try{const T=await Ji.getLessonContent(E);p.current.push(T)}catch{}await O()};if(await Promise.all([O(),O()]),p.current.length>0){const E=p.current.splice(0,p.current.length);i(T=>{const b=[...T];return E.forEach(A=>{const P=b.findIndex(N=>N.id===A.id);P>=0&&(b[P]={...b[P],...A,loading:!1})}),b})}g.current&&(clearInterval(g.current),g.current=null)}catch(x){console.error("[Lessons] Load failed:",x),l(!1)}}},[t]),S=R.useCallback(async v=>{if(v){l(!0);try{const x=(t==null?void 0:t.email)===Ei,j=v.source==="firestore"||v.isPublic&&!v.isLocal;if(x&&j){const{deletePublicLesson:L}=await Fr(()=>import("./publicDrive-fa900bb1.js"),[]);await L(v.id),o(O=>O.filter(E=>E.id!==v.id))}else await Ji.deleteLesson(v),i(L=>L.filter(O=>O.id!==v.id))}catch(x){console.error(x)}finally{l(!1)}}},[n]);return{lessons:r,publicLessons:s,loading:a,publicLoading:d,setLessons:i,setPublicLessons:o,fetchLessons:k,fetchPublicLessons:_,handleUpdateLocalLesson:w,deleteLesson:S}};var N8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const j8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L8=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},d)=>R.createElement("svg",{ref:d,...N8,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${j8(t)}`,...l},[...e.map(([h,f])=>R.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var ge=L8;const FC=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),UC=ge("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),zC=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Eh=ge("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),M8=ge("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),V8=ge("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),O8=ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Vg=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),xo=ge("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),F8=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),U8=ge("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Rf=ge("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),z8=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),BC=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),B8=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),$8=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),W8=ge("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),q8=ge("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Og=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),H8=ge("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Fg=ge("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),G8=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),K8=ge("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Q8=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$C=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Y8=ge("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),Zi=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),bh=ge("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),nT=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),X8=ge("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),J8=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Z8=ge("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),uv=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Pf=ge("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Gi=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ic=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),e9=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),t9=ge("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),n9=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ug=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),r9=ge("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),WC=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),i9=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),qC=ge("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),s9=ge("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),zg=ge("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),o9=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),fi=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),a9=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),xd=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),HC=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),l9=ge("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),c9=ge("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),fn=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),u9=ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),d9=ge("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),h9=ge("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),GC=R.createContext(null),f9=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(null),[s,o]=R.useState({showMenu:!1,showAddModal:!1,showFeedback:!1,showKnowMore:!1,showReferral:!1,showAdminPanel:!1,showCoinModal:!1,showNamePrompt:!1}),[a,l]=R.useState(!1),[d,h]=R.useState(null),[f,p]=R.useState(null),[g,w]=R.useState(null),[_,k]=R.useState(null),S=R.useCallback(()=>{o({showMenu:!1,showAddModal:!1,showFeedback:!1,showKnowMore:!1,showReferral:!1,showAdminPanel:!1,showCoinModal:!1,showNamePrompt:!1}),p(null),w(null),k(null)},[]),v=R.useCallback((b,A=null)=>{o(P=>({...P,[b]:A!==null?A:!P[b]}))},[]),x=R.useCallback((b,A,P=null)=>{n({type:b,message:A,onConfirm:P})},[]),j=R.useCallback(()=>{n(null)},[]),L=R.useCallback(({message:b,type:A="info",onUndo:P=null,duration:N=5e3,onClose:I=null})=>{i({id:Date.now(),message:b,type:A,onUndo:P,duration:N,onCloseCallback:I})},[]),O=R.useCallback(()=>{i(b=>(b!=null&&b.onCloseCallback&&b.onCloseCallback(),null))},[]),E=R.useCallback((b,A=3e3)=>{const P=Date.now();h({id:P,message:b}),setTimeout(()=>{h(N=>(N==null?void 0:N.id)===P?null:N)},A)},[]),T=R.useCallback(()=>{h(null)},[]);return u.jsxs(GC.Provider,{value:{modals:s,toggleModal:v,closeAllModals:S,activeLesson:f,setActiveLesson:p,reviewLesson:g,setReviewLesson:w,noteLesson:_,setNoteLesson:k,notification:e,showNotification:x,clearNotification:j,toast:r,showToast:L,hideToast:O,headerLoading:a,setHeaderLoading:l,headerNotice:d,showHeaderNotice:E,clearHeaderNotice:T},children:[t,u.jsx(Sn,{})]})},nu=()=>{const t=R.useContext(GC);if(!t)throw new Error("useUI must be used within a UIProvider");return t},KC=R.createContext(null),p9=({children:t})=>{const{user:e,hasDrive:n}=Ao(),{showNotification:r}=nu(),i=R.useCallback(o=>{o&&r(o.type,o.message,o.onConfirm)},[r]),s=D8(e,n,i);return u.jsx(KC.Provider,{value:s,children:t})},QC=()=>{const t=R.useContext(KC);if(!t)throw new Error("useLesson must be used within a LessonProvider");return t},Lr="users",es={async syncProfile(t,e={}){if(console.log("[UserService] syncProfile called with:",{uid:t==null?void 0:t.uid,email:t==null?void 0:t.email}),!(t!=null&&t.uid))return console.warn("[UserService] syncProfile aborted: No UID provided"),null;const n=zs(vn,Lr,t.uid),r=await E_(n),i={uid:t.uid,email:t.email,displayName:t.displayName||e.displayName||"Learner",photoURL:t.photoURL||null,lastSeen:Lo(),coins:e.coins||0,totalReviews:e.totalReviews||0,loginCount:(e.loginCount||0)+1};if(r.exists()){const s=r.data(),o={displayName:t.displayName||s.displayName,photoURL:t.photoURL||s.photoURL,lastSeen:Lo(),loginCount:(s.loginCount||0)+1};return await k3(n,o),{...s,...o}}else return await C3(n,{...i,createdAt:Lo()}),{...i,id:t.uid}},async getProfile(t){if(!t)return null;const e=zs(vn,Lr,t),n=await E_(e);return n.exists()?{...n.data(),id:n.id}:null},async getProfileByEmail(t){if(!t)return null;const e=Wp($p(vn,Lr),__("email","==",t)),n=await qp(e);return n.empty?null:{...n.docs[0].data(),id:n.docs[0].id}},async listUsers(){const t=Wp($p(vn,Lr));return(await qp(t)).docs.map(n=>({...n.data(),id:n.id}))},async updateBalance(t,e){const n=zs(vn,Lr,t);return await zu(vn,async r=>{const i=await r.get(n);if(!i.exists())throw new Error("User does not exist!");const s=(i.data().coins||0)+Number(e);return r.update(n,{coins:s}),s})},async checkDailyBonus(t){const e=zs(vn,Lr,t);return await zu(vn,async n=>{var a;const r=await n.get(e);if(!r.exists())return{awarded:!1};const i=r.data(),s=((a=i.lastBonusDate)==null?void 0:a.toDate())||new Date(0),o=new Date;if(o.setHours(0,0,0,0),s<o){const d=(i.coins||0)+10;return n.update(e,{coins:d,lastBonusDate:Lo()}),{awarded:!0,bonus:10,newBalance:d}}return{awarded:!1}})},async applyReferral(t,e){const n=zs(vn,Lr,t);return await zu(vn,async r=>{const i=await r.get(n);if(!i.exists()||i.data().referredBy)return!1;const s=Wp($p(vn,Lr),__("referralCode","==",e)),o=await qp(s);if(o.empty)return!1;const a=o.docs[0].id;r.update(n,{referredBy:e,coins:(i.data().coins||0)+50});const l=zs(vn,Lr,a),d=await r.get(l);return r.update(l,{coins:(d.data().coins||0)+100}),!0})},async purchaseLesson(t,e,n){const r=zs(vn,Lr,t);return await zu(vn,async i=>{const s=await i.get(r);if(!s.exists())throw new Error("User does not exist!");const o=s.data(),a=o.coins||0;if(a<n)throw new Error("Insufficient coins.");const l=o.purchasedLessons||{};if(l[e])return{success:!0,alreadyOwned:!0};const d=a-n;return{...l,[e]:Lo()},i.update(r,{coins:d,[`purchasedLessons.${e}`]:{purchaseDate:Lo(),cost:n}}),{success:!0,newBalance:d}})}},m9=(t,e,n)=>{const[r,i]=R.useState(null),[s,o]=R.useState(!1),[a,l]=R.useState(0),d=R.useRef(0);R.useEffect(()=>{if(!(t!=null&&t.uid)){i(null);return}let f=!0;const p=async()=>{r||o(!0);try{const w=await es.syncProfile(t);if(!f)return;const _=localStorage.getItem("pendingReferral");if(_&&!w.referredBy&&await es.applyReferral(t.uid,_))return localStorage.removeItem("pendingReferral"),e&&e({type:"alert",message:"Referral bonus applied!"}),p();const k=await es.checkDailyBonus(t.uid);if(!f)return;if(k.awarded&&(n&&n({amount:k.bonus,type:"Daily Login"}),w.coins=k.newBalance),w.coins>d.current&&d.current>0){const S=w.coins-d.current;n&&n({amount:S,type:"Gift Received"})}d.current=w.coins,i(w)}catch(w){console.error("[useUserProfile] Sync Failed:",w)}finally{f&&o(!1)}};p();const g=()=>{document.visibilityState==="visible"&&(t!=null&&t.uid)&&p()};return window.addEventListener("visibilitychange",g),()=>{f=!1,window.removeEventListener("visibilitychange",g)}},[t==null?void 0:t.uid,e,n,a]);const h=R.useCallback(async f=>{if(!(!t||!r)){i(p=>({...p,coins:f}));try{const p=f-r.coins;await es.updateBalance(t.uid,p,"Manual Adjustment or Purchase")}catch(p){console.error("Failed to persist coin balance:",p),i(g=>({...g,coins:r.coins})),e&&e({type:"alert",message:"Failed to save coin balance. Please check connection."})}}},[t,r,e]);return{userProfile:r,setUserProfile:i,isProfileLoading:s,handleUpdateCoins:h,loadProfile:R.useCallback(()=>l(f=>f+1),[])}},g9=(t,e="")=>{const n=R.useRef(!1);R.useEffect(()=>{const i=s=>{if(t&&!n.current)return s.preventDefault(),s.returnValue=e,e};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[t,e]);const r=R.useCallback(()=>{n.current=!0},[]);return R.useEffect(()=>{var i;t&&!n.current&&((i=window.history.state)==null?void 0:i.guard)!=="active"&&window.history.pushState({guard:"active"},"")},[t]),{allowExit:r}},YC=R.createContext(null),XC=({children:t})=>{const[e,n]=R.useState({isActive:!1,currentStep:1,isComplete:localStorage.getItem("tour_complete")==="true",isDemoGracePeriod:!1,eventQueue:[]}),r=R.useRef(null);R.useEffect(()=>{e.isComplete&&localStorage.setItem("tour_complete","true")},[e.isComplete]);const i=R.useCallback(()=>{n(f=>({...f,isActive:!0,currentStep:1}))},[]),s=R.useCallback(()=>{n(f=>({...f,isActive:!1,currentStep:1}))},[]),o=R.useCallback(()=>{n(f=>({...f,currentStep:f.currentStep+1}))},[]),a=R.useCallback(f=>{n(p=>({...p,currentStep:f}))},[]),l=R.useCallback(f=>{n(p=>({...p,eventQueue:[...p.eventQueue,f]}))},[]),d=R.useCallback(()=>{if(e.eventQueue.length===0)return;const[f,...p]=e.eventQueue;f(),n(g=>({...g,eventQueue:p}))},[e.eventQueue]);R.useEffect(()=>{if(e.eventQueue.length===0||e.isActive)return;const f=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{d()},3e3)};return window.addEventListener("mousemove",f),window.addEventListener("keydown",f),window.addEventListener("click",f),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("keydown",f),window.removeEventListener("click",f),r.current&&clearTimeout(r.current)}},[e.eventQueue,e.isActive,d]);const h={...e,startTour:i,endTour:s,nextStep:o,setStep:a,queuePostTourEvent:l,setIsDemoGracePeriod:f=>n(p=>({...p,isDemoGracePeriod:f}))};return u.jsx(YC.Provider,{value:h,children:t})},ru=()=>{const t=R.useContext(YC);if(!t)throw new Error("useTour must be used within a TourProvider");return t},Bg=(t,e=["image/","audio/"])=>{if(!t||typeof t!="string"||t.toLowerCase().startsWith("javascript:")||t.toLowerCase().startsWith("data:text/html"))return!1;if(t.startsWith("data:")){const n=t.match(/^data:([^;,]+)/);if(!n)return!1;const r=n[1].toLowerCase();if(!e.some(s=>r.startsWith(s)))return!1}return!0},va=(t,e=1e4)=>{if(!t||typeof t!="string")return"";let n=t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"");return n.length>e&&(n=n.substring(0,e)),n},y9=t=>{if(!t||typeof t!="string")return"Untitled";let e=t.replace(/[\x00-\x1F\x7F]/g,"");return e=e.trim(),e.length>50&&(e=e.substring(0,50)),e=e.replace(/[&=?#]/g,""),e||"Untitled"},v9=t=>{if(!t||typeof t!="string")return"";let e=t.substring(0,500);return e=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,""),e=e.replace(/[*_~`]/g,""),e.trim()},w9=t=>!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),rT=({lesson:t,onReview:e,onEdit:n,onImport:r,user:i,onDelete:s,showConfirm:o})=>{var f,p,g,w,_;const a=y9(t.title),d=(i==null?void 0:i.email)===Ei||!t.isPublic;let h=null;return t.titleImage&&Bg(t.titleImage,["image/"])?h=t.titleImage:(g=(p=(f=t.questions)==null?void 0:f[0])==null?void 0:p.question)!=null&&g.image&&Bg(t.questions[0].question.image,["image/"])?h=t.questions[0].question.image:h=`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&background=random&color=fff&size=128`,t.loading?u.jsxs("div",{className:"neo-flat lesson-card",style:{height:"100%",position:"relative",overflow:"hidden"},children:[u.jsxs("div",{className:"shimmer-wrapper",children:[u.jsx("div",{className:"shimmer",style:{width:"40px",height:"20px",borderRadius:"12px",marginBottom:"1rem"}}),u.jsx("div",{className:"shimmer",style:{width:"100%",height:"140px",borderRadius:"12px",marginBottom:"1rem"}}),t.title&&t.title!=="Loading..."?u.jsx("div",{style:{marginBottom:"0.5rem",height:"40px",fontWeight:"600",fontSize:"0.95rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"shimmer",style:{width:"80%",height:"20px",borderRadius:"4px",marginBottom:"0.5rem"}}),u.jsx("div",{className:"shimmer",style:{width:"60%",height:"20px",borderRadius:"4px"}})]})]}),u.jsx("style",{children:`
                    .shimmer-wrapper { padding: 0.5rem; width: 100%; height: 100%; }
                    .shimmer {
                        background: linear-gradient(90deg, var(--bg-color) 0%, var(--neo-shadow-light) 50%, var(--bg-color) 100%);
                        background-size: 200% 100%;
                        animation: shimmer 1.5s infinite;
                    }
                    @keyframes shimmer {
                        0% { background-position: -200% 0; }
                        100% { background-position: 200% 0; }
                    }
                `})]}):u.jsxs("div",{className:"neo-flat lesson-card",id:t.id==="demo-lesson"?"lesson-card-demo-lesson":void 0,onClick:()=>e(t),style:{position:"relative",display:"flex",flexDirection:"column",height:"100%"},children:[d&&u.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:2,display:"flex",gap:"8px"},children:[u.jsx("button",{className:"neo-button icon-btn",onClick:k=>{k.stopPropagation(),n(t)},style:{background:"var(--bg-color)",opacity:.8},title:"Edit Lesson",children:u.jsx(uv,{size:18,color:"var(--accent-color)"})}),u.jsx("button",{className:"neo-button icon-btn",onClick:k=>{k.stopPropagation(),s(t)},style:{background:"var(--bg-color)",opacity:.8,color:"#ef4444"},title:"Delete Lesson",children:u.jsx(fi,{size:18})})]}),u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:"12px",left:"12px",zIndex:2,display:"flex",alignItems:"center",gap:"4px",fontSize:"0.8rem",fontWeight:"600",padding:"4px 8px",borderRadius:"12px",opacity:.9},children:[u.jsx(Fg,{size:14}),t.questionCount!==void 0?t.questionCount:((w=t.questions)==null?void 0:w.length)||((_=t.cards)==null?void 0:_.length)||0]}),u.jsx("img",{src:h,alt:t.title,style:{width:"100%",height:"140px",objectFit:"contain",borderRadius:"12px",background:"var(--bg-color)"}}),u.jsx("div",{style:{marginTop:"0.8rem"},children:u.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:"600",marginBottom:"0.2rem",display:"-webkit-box",WebkitLineClamp:5,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.35",minHeight:"2.7em",textAlign:"left",color:"var(--text-color)",opacity:.9,padding:"0 2px"},title:t.title,children:t.title})}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",gap:"1rem",paddingTop:"1rem"},children:[t.isPublic&&u.jsxs("button",{className:`neo-button ${t.isOwned?"owned-btn":""}`,style:{flex:1,padding:"0.6rem",background:t.isOwned?"var(--neo-shadow-light)":t.cost>0?"#f59e0b":"var(--accent-color)",color:t.isOwned?"var(--text-color)":"white",border:"none",fontSize:"0.85rem",display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",borderRadius:"12px",cursor:t.isOwned?"default":"pointer",opacity:t.isOwned?.7:1},onClick:k=>{k.stopPropagation(),!t.isOwned&&(i?r(t):e(t))},children:[t.isOwned?u.jsx(Fg,{size:14}):i?t.cost>0?u.jsx(Rf,{size:14}):u.jsx(Gi,{size:14}):null,t.isOwned?"Owned":i?t.cost>0?`Buy for ${t.cost}`:"Free - Add to My Lessons":"Login with Google to Open"]}),!t.isPublic&&u.jsx("div",{className:"neo-flat",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.3rem",fontSize:"0.85rem",color:"var(--accent-color)",padding:"6px 8px",borderRadius:"12px",minWidth:"110px",whiteSpace:"nowrap"},children:u.jsxs("span",{style:{fontWeight:"700"},children:["Marks : ",t.lastMarks!==void 0?t.lastMarks:"","/",t.questions?t.questions.length*2:t.cards?t.cards.length*2:0]})}),!t.isPublic&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.1rem",fontSize:"0.75rem",opacity:.8,minWidth:"100px",textAlign:"right"},children:[t.nextReview&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",opacity:.7},children:[u.jsx(V8,{size:12}),u.jsx("span",{children:"Review in"})]}),u.jsx("div",{id:t.id==="demo-lesson"?"next-review-indicator-demo-lesson":void 0,children:u.jsx(x9,{nextReview:t.nextReview})})]})]}),u.jsx("style",{children:`
        .lesson-card:hover { transform: translateY(-5px); }
      `})]})},x9=({nextReview:t})=>{if(!t)return u.jsx("span",{children:"New"});const e=()=>{const i=new Date(t)-new Date,s=Math.floor(i/(1e3*60*60*24)),o=Math.floor(i%(1e3*60*60*24)/(1e3*60*60));return s<0||s===0&&o<0?{text:`Due: ${Math.abs(s)} days ago`,isDue:!0}:s===0?{text:`${o} hours`,isDue:!1}:{text:`${s} days`,isDue:!1}},{text:n,isDue:r}=e();return u.jsx("span",{style:{color:r?"#ef4444":"inherit",fontWeight:r?"700":"600",fontSize:r?"0.85rem":"0.9rem"},children:n})},gr=({label:t,value:e,options:n,onChange:r,placeholder:i="Select...",displayValue:s=l=>l,style:o={},children:a})=>{const[l,d]=R.useState(!1),h=R.useRef(null);return R.useEffect(()=>{const f=p=>{h.current&&!h.current.contains(p.target)&&d(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),u.jsxs("div",{ref:h,style:{display:"flex",flexDirection:"column",gap:"0.4rem",position:"relative",width:"100%",...o},children:[t&&u.jsx("span",{style:{fontSize:"0.85rem",opacity:.6,fontWeight:"600",marginLeft:"4px"},children:t}),u.jsxs("button",{className:"neo-select",style:{textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",width:"100%",position:"relative",height:"48px"},onClick:()=>d(!l),children:[u.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e?s(e):i}),u.jsx(F8,{size:18,style:{transform:l?"rotate(180deg)":"none",transition:"transform 0.3s",marginLeft:"8px",flexShrink:0}})]}),l&&u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"8px",zIndex:1e3,padding:"8px",display:"flex",flexDirection:"column",gap:"4px",maxHeight:"300px",overflowY:"auto",boxShadow:"10px 10px 20px var(--shadow-dark), -10px -10px 20px var(--shadow-light)"},children:[a,n.map((f,p)=>{const g=e===f.value;return u.jsx("button",{className:`neo-button ${g?"neo-inset":""}`,style:{padding:"10px 14px",fontSize:"0.9rem",cursor:"pointer",boxShadow:g?"inset 2px 2px 5px var(--shadow-dark), inset -2px -2px 5px var(--shadow-light)":"none",background:g?"var(--accent-soft)":"transparent",border:"none",borderRadius:"8px",width:"100%",textAlign:"left",justifyContent:"flex-start",color:g?"var(--accent-color)":"var(--text-color)",fontWeight:g?"700":"500"},onClick:()=>{r(f.value),d(!1)},children:f.label},p)})]})]})},_9=({activeTab:t,setActiveTab:e,lessons:n,publicLessons:r,loading:i,publicLoading:s,onReview:o,onEdit:a,onImport:l,searchQuery:d,setSearchQuery:h,onShowFeedback:f,filters:p,setFilters:g,user:w,onLogin:_,sortBy:k,onSortChange:S,filterLabel:v,onLabelChange:x,availableLabels:j,onShowKnowMore:L,onDelete:O,showConfirm:E,onAddLesson:T,onRefresh:b})=>{const{isActive:A,startTour:P}=ru(),{error:N,isReady:I,user:K}=Ao(),fe=t==="my-lessons"?i:s,Y=t==="my-lessons"&&!i&&!w&&!A,[ne,U]=R.useState(!1),X=br.useRef(null),M=br.useMemo(()=>{const q={standards:new Set,syllabuses:new Set,mediums:new Set,subjects:new Set};return r.forEach(ce=>{ce.standard&&q.standards.add(ce.standard),ce.syllabus&&q.syllabuses.add(ce.syllabus),ce.medium&&q.mediums.add(ce.medium),ce.subject&&q.subjects.add(ce.subject)}),{standards:Array.from(q.standards).sort(),syllabuses:Array.from(q.syllabuses).sort(),mediums:Array.from(q.mediums).sort(),subjects:Array.from(q.subjects).sort()}},[r]),{standards:D,syllabuses:W,mediums:Z,subjects:ee}=M,re=new Set(n.map(q=>q.lessonId||q.storagePath||q.driveFileId||q.id)),B=r.filter(q=>{if(!q||!q.title)return!1;const ce=q.title.toLowerCase().includes(d.toLowerCase()),Ce=!p.standard||q.standard===p.standard,at=!p.syllabus||q.syllabus===p.syllabus,Ge=!p.medium||q.medium===p.medium,Ke=!p.subject||q.subject===p.subject;return ce&&Ce&&at&&Ge&&Ke}).map(q=>({...q,isOwned:re.has(q.lessonId||q.storagePath||q.id)})).sort((q,ce)=>k==="Title"?q.title.localeCompare(ce.title):(parseInt(ce.id||0)||0)-(parseInt(q.id||0)||0)),H=t==="my-lessons"?n:B,ie=(q,ce)=>{g(Ce=>({...Ce,[q]:ce}))},pe=()=>u.jsxs("div",{style:{position:"relative",display:"inline-flex"},ref:X,children:[u.jsx("button",{className:`icon-btn ${ne?"active":""}`,onClick:q=>{q.stopPropagation(),U(!ne)},style:{background:"none",border:"none",boxShadow:"none",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)",cursor:"pointer",opacity:.6,padding:0},title:"Settings",children:ne?u.jsx(fn,{size:20}):u.jsx(WC,{size:20})}),ne&&u.jsxs("div",{className:"neo-flat settings-dropdown",style:{position:"absolute",top:"calc(100% + 10px)",right:0,width:"280px",padding:"2rem 1.5rem",zIndex:2e3,borderRadius:"24px",display:"flex",flexDirection:"column",gap:"1.75rem",border:"1px solid rgba(255,255,255,0.4)",boxShadow:"var(--neo-box-shadow)"},children:[u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ug,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",opacity:.5}}),u.jsx("input",{className:"neo-input",placeholder:"Search...",value:d,onChange:q=>h(q.target.value),style:{width:"100%",paddingLeft:"38px",fontSize:"0.9rem",height:"44px",boxShadow:"inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light)"}})]})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:700,opacity:.5,marginLeft:"4px"},children:"Sort By"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:(t==="my-lessons"?[{label:"Date",value:"Creation Date"},{label:"Title",value:"Title"},{label:"Marks",value:"Average Rating"},{label:"Reviews",value:"Upcoming Review"}]:[{label:"Newest",value:"Creation Date"},{label:"Title",value:"Title"}]).map(q=>u.jsx("button",{className:`neo-button ${k===q.value?"neo-glow-blue":""}`,onClick:()=>S(q.value),style:{padding:"0.6rem 0.4rem",fontSize:"0.8rem",borderRadius:"10px",justifyContent:"center"},children:q.label},q.value))})]}),u.jsxs("button",{className:"neo-button",onClick:()=>{b==null||b(),U(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"0.9rem",borderRadius:"14px"},children:[u.jsx(Ic,{size:18})," Refresh Lessons"]})]})]}),Ee=()=>u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem",gap:"0.5rem",alignItems:"center"},children:u.jsxs("div",{id:"tabs-container",className:"neo-tabs-container",style:{margin:0},children:[u.jsx("button",{id:"tab-my-lessons",className:`neo-tab-item ${t==="my-lessons"?"active":""}`,onClick:()=>e("my-lessons"),children:"My Lessons"}),u.jsx("button",{id:"tab-lessons",className:`neo-tab-item ${t==="lessons"?"active":""}`,onClick:()=>e("lessons"),children:"Lessons"})]})}),me=()=>{const q=[{label:"All Labels",value:null},...j.map(ce=>({label:ce,value:ce}))];return u.jsxs("div",{style:{marginBottom:"2rem",padding:"0 0.5rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:"4px",paddingRight:"10px"},children:[u.jsx("span",{style:{fontSize:"0.85rem",opacity:.6,fontWeight:"600"},children:"Filter by Label"}),pe()]}),u.jsx(gr,{value:v,options:q,onChange:x,placeholder:"All Labels",displayValue:ce=>ce||"All Labels"})]})},ke=()=>u.jsxs("div",{className:"filter-bar neo-inset",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1.25rem",padding:"1.25rem",paddingTop:"2.5rem",marginBottom:"2.5rem",borderRadius:"20px",position:"relative"},children:[u.jsx("div",{style:{position:"absolute",top:"12px",right:"10px",zIndex:10},children:pe()}),u.jsx(gr,{label:"Medium",value:p.medium,options:[{label:"All Mediums",value:""},...Z.map(q=>({label:q,value:q}))],onChange:q=>ie("medium",q),placeholder:"All Mediums",displayValue:q=>q||"All Mediums"}),u.jsx(gr,{label:"Syllabus",value:p.syllabus,options:[{label:"All Syllabuses",value:""},...W.map(q=>({label:q,value:q}))],onChange:q=>ie("syllabus",q),placeholder:"All Syllabuses",displayValue:q=>q||"All Syllabuses"}),u.jsx(gr,{label:"Standard",value:p.standard,options:[{label:"All Standards",value:""},...D.map(q=>({label:`Standard ${q}`,value:q}))],onChange:q=>ie("standard",q),placeholder:"All Standards",displayValue:q=>q?`Standard ${q}`:"All Standards"}),u.jsx(gr,{label:"Subject",value:p.subject,options:[{label:"All Subjects",value:""},...ee.map(q=>({label:q,value:q}))],onChange:q=>ie("subject",q),placeholder:"All Subjects",displayValue:q=>q||"All Subjects"})]});return u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[(!Y||fe)&&u.jsxs(u.Fragment,{children:[Ee(),t==="my-lessons"&&me(),t==="lessons"&&ke()]}),Y&&!fe&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem 1rem",textAlign:"center",minHeight:"50vh"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginBottom:"1rem"},children:[u.jsxs("h1",{style:{fontSize:"clamp(2.5rem, 8vw, 3.5rem)",fontWeight:"800",lineHeight:"1.1",color:"#4f46e5",margin:0},children:["Study smarter.",u.jsx("br",{}),"Remember longer."]}),u.jsxs("p",{style:{fontSize:"clamp(1rem, 3vw, 1.15rem)",fontWeight:"500",opacity:.9,marginTop:"1.5rem",maxWidth:"650px",margin:"1.5rem auto 0 auto",lineHeight:"1.7",padding:"0 10px"},children:["Powered by scientifically proven strategies such as spaced repetition and active recall, this app makes learning easier and helps you remember longer.",u.jsx("button",{onClick:L,style:{background:"rgba(79, 70, 229, 0.1)",border:"none",color:"#4f46e5",cursor:"pointer",padding:"2px 8px",fontSize:"0.8rem",fontWeight:"700",display:"inline-block",marginLeft:"8px",borderRadius:"6px",verticalAlign:"middle",boxShadow:"inset 1px 1px 2px rgba(255,255,255,0.5), inset -1px -1px 2px rgba(0,0,0,0.05)"},children:"know more"})]})]}),u.jsxs("div",{className:"hero-cta-container",children:[u.jsxs("div",{className:"hero-btn-group",children:[u.jsx("button",{className:"hero-btn primary-btn",onClick:P,children:"Beginners Guide"}),K&&!(w!=null&&w.hasDrive)?u.jsxs("button",{className:"hero-btn primary-btn neo-glow-blue",onClick:()=>_("consent"),style:{background:"var(--accent-color)",color:"white"},children:[u.jsx(Ic,{size:20,className:i?"spin":""}),"Complete Sync Setup"]}):K?null:u.jsx("button",{className:"hero-btn hero-btn-google",onClick:()=>_("consent"),style:{color:"var(--text-color)"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:["Continue with",u.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"1px",fontWeight:"700",fontSize:"1.2rem",letterSpacing:"-0.02em",marginLeft:"2px"},children:[u.jsx("span",{style:{color:"#4285F4"},children:"G"}),u.jsx("span",{style:{color:"#EA4335"},children:"o"}),u.jsx("span",{style:{color:"#FBBC05"},children:"o"}),u.jsx("span",{style:{color:"#4285F4"},children:"g"}),u.jsx("span",{style:{color:"#34A853"},children:"l"}),u.jsx("span",{style:{color:"#EA4335"},children:"e"})]})]})})]}),N&&u.jsxs("div",{style:{padding:"1rem",background:"var(--error-soft)",borderRadius:"16px",border:"1px solid var(--error-color)",color:"var(--error-color)",fontSize:"0.85rem",marginTop:"1rem",maxWidth:"350px",textAlign:"left"},children:[u.jsx("strong",{children:"Connectivity Notice:"})," ",N]})]})]}),u.jsxs("div",{style:{padding:"0 1rem",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"2rem",position:"relative",minHeight:"48px"},children:u.jsx("h2",{className:"responsive-heading",style:{fontSize:"2rem",fontWeight:"800",color:"var(--accent-color)",flex:1},children:"Lessons"})}),ke(),s?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem"},children:[u.jsxs("div",{className:"card-loader-container",children:[u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"})]}),u.jsx("p",{style:{marginTop:"1rem",opacity:.6,fontSize:"0.9rem",fontWeight:500},children:"Loading lessons..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"lessons-grid",style:{padding:"0 1.25rem"},children:B.map(q=>u.jsx(rT,{lesson:q,onReview:o,onEdit:a,onImport:l,user:w,onDelete:O,showConfirm:E},q.driveFileId||q.id))}),B.length===0&&u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"2rem"},children:u.jsxs("div",{style:{maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"2rem",borderRadius:"24px",opacity:.8},children:u.jsx(Zi,{size:64,color:"var(--accent-color)"})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.4rem"},children:"No lessons found"}),u.jsx("p",{style:{opacity:.7},children:"This filter does not have any files. You can request lessons to the developer via the feedback option."})]}),u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:f,style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Zi,{size:18})," Request Lessons"]})]})})]})]})]}),fe?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem"},children:[u.jsxs("div",{className:"card-loader-container",children:[u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"}),u.jsx("div",{className:"card-loader-item"})]}),u.jsx("p",{style:{marginTop:"1rem",opacity:.6,fontSize:"0.9rem",fontWeight:500},children:"Loading lessons..."})]}):!Y&&u.jsxs(u.Fragment,{children:[H.length===0&&t==="my-lessons"&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"2rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"3rem",borderRadius:"32px"},children:u.jsx("img",{src:cv,alt:"Welcome",style:{width:"120px",height:"auto"}})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.4rem"},children:"Welcome to Chethan in Cardland!"}),u.jsx("p",{style:{opacity:.7},children:"You don't have any lessons yet. Create your own or explore our Lessons collection."})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"center"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:T,style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Gi,{size:18})," Create New Lesson"]}),u.jsxs("button",{className:"neo-button",onClick:()=>e("lessons"),style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Ug,{size:18})," Browse Lessons"]})]})]}),H.length===0&&t==="lessons"&&u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center",gap:"2rem"},children:u.jsxs("div",{style:{maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"2rem",borderRadius:"24px",opacity:.8},children:u.jsx(Zi,{size:64,color:"var(--accent-color)"})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.4rem"},children:"No lessons found"}),u.jsx("p",{style:{opacity:.7},children:"This filter does not have any files. You can request lessons to the developer via the feedback option."})]}),u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:f,style:{padding:"0.8rem 2rem",gap:"8px"},children:[u.jsx(Zi,{size:18})," Request Lessons"]})]})}),H.length>0&&u.jsx("div",{className:"lessons-grid",children:H.map(q=>u.jsx(rT,{lesson:q,onReview:o,onEdit:a,onImport:l,user:w,onDelete:O,showConfirm:E},q.driveFileId||q.id))})]})]})},T9=({coins:t,isUnlimited:e})=>u.jsxs("div",{className:"neo-inset",style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",borderRadius:"20px",color:"#FFB800",fontWeight:"800",marginRight:"8px",position:"relative"},children:[u.jsx(Rf,{size:18,fill:"currentColor"}),u.jsx("span",{style:{opacity:e?.5:1},children:t}),e&&u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255, 255, 255, 0.9)",borderRadius:"10px",padding:"0 4px",color:"#8b5cf6",fontSize:"1.2rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:""})]}),S9=({user:t,userProfile:e,isUnlimited:n,isAdmin:r,isTourActive:i,onShowCoinModal:s,onShowMenu:o,onAddLesson:a,onLogin:l,isProfileLoading:d,headerLoading:h,children:f})=>{const{headerNotice:p,clearHeaderNotice:g,toast:w,hideToast:_,notification:k,clearNotification:S}=nu();return br.useEffect(()=>{if(w&&w.duration){const v=setTimeout(()=>{_()},w.duration);return()=>clearTimeout(v)}},[w,_]),u.jsxs("div",{className:"app-layout",children:[u.jsx("header",{className:"main-header",style:{position:"relative"},children:u.jsx(Sn,{mode:"wait",children:h?u.jsx(Fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{position:"absolute",left:"1rem",right:"1rem",top:"0.5rem",bottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-color)",zIndex:10,borderRadius:"16px",boxShadow:"5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light)"},children:u.jsxs("div",{className:"card-loader-small",children:[u.jsx("div",{className:"card-loader-item-small"}),u.jsx("div",{className:"card-loader-item-small"}),u.jsx("div",{className:"card-loader-item-small"})]})},"loader"):k?u.jsxs(Fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{position:"absolute",left:"1rem",right:"1rem",top:"0.5rem",bottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",background:"var(--bg-color)",zIndex:11,borderRadius:"16px",boxShadow:"5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light)",padding:"0 1rem"},children:[u.jsx("span",{style:{fontWeight:"600",fontSize:"0.9rem",color:"var(--text-color)",flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k.message}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:k.type==="confirm"?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"neo-button",onClick:v=>{v.stopPropagation(),k.onConfirm&&k.onConfirm(),S()},style:{padding:"0.3rem 0.8rem",fontSize:"0.8rem",height:"auto",minHeight:"unset",color:"var(--accent-color)"},children:"Confirm"}),u.jsx("button",{className:"neo-button icon-btn",onClick:v=>{v.stopPropagation(),S()},style:{padding:"4px",width:"28px",height:"28px",minWidth:"28px",background:"var(--bg-color)",border:"none",boxShadow:"2px 2px 5px var(--shadow-dark), -2px -2px 5px var(--shadow-light)"},children:u.jsx(fn,{size:14,color:"#ef4444"})})]}):u.jsx("button",{className:"neo-button",onClick:v=>{v.stopPropagation(),S()},style:{padding:"0.3rem 0.8rem",fontSize:"0.8rem",height:"auto",minHeight:"unset"},children:"Got it"})})]},"notification"):w?u.jsxs(Fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{position:"absolute",left:"1rem",right:"1rem",top:"0.5rem",bottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",background:"var(--bg-color)",color:"var(--text-color)",zIndex:10,borderRadius:"16px",fontWeight:"600",fontSize:"0.9rem",padding:"0 1rem",boxShadow:"5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light)"},children:[u.jsx("span",{style:{flex:1,textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:w.message}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[w.onUndo&&u.jsx("button",{className:"neo-button",style:{padding:"0.3rem 0.8rem",fontSize:"0.8rem",height:"auto",minHeight:"unset"},onClick:v=>{v.stopPropagation(),w.onUndo(),w.onClose?w.onClose():_()},children:"Undo"}),u.jsx("button",{className:"neo-button icon-btn",onClick:v=>{v.stopPropagation(),_()},style:{padding:"4px",width:"28px",height:"28px",minWidth:"28px",background:"var(--bg-color)",display:"flex",alignItems:"center",justifyContent:"center",border:"none",boxShadow:"2px 2px 5px var(--shadow-dark), -2px -2px 5px var(--shadow-light)"},children:u.jsx(fn,{size:14,color:"#ef4444"})})]})]},"toast"):p?u.jsxs(Fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{position:"absolute",left:"1rem",right:"1rem",top:"0.5rem",bottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-color)",color:"var(--accent-color)",zIndex:10,borderRadius:"16px",fontWeight:"700",fontSize:"1rem",padding:"0 1.5rem",textAlign:"center",boxShadow:"5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light)"},children:[u.jsx("span",{children:p.message}),u.jsx("button",{className:"neo-button icon-btn",onClick:v=>{v.stopPropagation(),g()},style:{position:"absolute",right:"0.5rem",padding:"4px",width:"28px",height:"28px",minWidth:"28px",background:"var(--bg-color)",display:"flex",alignItems:"center",justifyContent:"center",border:"none",boxShadow:"2px 2px 5px var(--shadow-dark), -2px -2px 5px var(--shadow-light)"},children:u.jsx(fn,{size:14,color:"#ef4444"})})]},"notice"):u.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("img",{src:cv,alt:"Chethan",className:"app-logo"}),u.jsxs("div",{className:"header-actions",children:[t&&u.jsx("div",{onClick:s,style:{display:"flex",alignItems:"center",gap:"4px"},children:u.jsx(T9,{coins:(e==null?void 0:e.coins)||0,isUnlimited:n})}),u.jsx("button",{className:"neo-button icon-btn",onClick:o,children:u.jsx($C,{size:24})})]})]},"content")})}),u.jsxs("div",{className:"app-container",children:[u.jsx("main",{className:"main-content",children:f}),(t||i)&&u.jsx("button",{id:"fab-add-lesson",className:"neo-button neo-glow-blue fab-add-button",onClick:a,children:u.jsx(Gi,{size:32})})]}),u.jsx("style",{children:`
                .app-layout {
                    display: flex;
                    flex-direction: column;
                    min-height: 100dvh;
                    background: var(--bg-color);
                }
                .main-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 1rem 1.5rem;
                    background: var(--bg-color);
                    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
                    z-index: 1000;
                    position: sticky;
                    top: 0;
                }
                .header-actions {
                    display: flex;
                    gap: 0.75rem;
                    align-items: center;
                }
                .app-logo {
                    height: 2.5rem;
                    width: auto;
                    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
                }
                .main-content {
                    flex: 1;
                    padding-bottom: 5rem; /* Space for FAB */
                }
                
                @media (max-width: 480px) {
                    .main-header {
                        padding: 0.75rem 1rem;
                    }
                    .app-logo {
                        height: 2rem;
                    }
                }
            `})]})},Ar=({onClick:t,style:e,size:n=20,className:r=""})=>u.jsx("button",{onClick:t,className:`neo-button ${r}`,style:{width:"36px",height:"36px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#ef4444",background:"var(--bg-color)",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 4px rgba(239, 68, 68, 0.2)",transition:"all 0.2s ease",...e},onMouseEnter:i=>{i.currentTarget.style.boxShadow="4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 8px rgba(239, 68, 68, 0.4)",i.currentTarget.style.transform="scale(1.05)"},onMouseLeave:i=>{i.currentTarget.style.boxShadow="4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 4px rgba(239, 68, 68, 0.2)",i.currentTarget.style.transform="scale(1)"},title:"Close",children:u.jsx(fn,{size:n})}),E9=({user:t,theme:e,onToggleTheme:n,soundsEnabled:r,onToggleSounds:i,onShowFeedback:s,onClose:o,onLogout:a,onLogin:l,onDeleteData:d,onShowAdminPanel:h,onShowReferral:f,onShowTour:p,appVersion:g})=>{const w=()=>{window.confirm("Check for updates? This will refresh the page.")&&window.location.reload(!0)};return u.jsxs("div",{className:"fixed inset-0",style:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:5e3,pointerEvents:"none",display:"flex",justifyContent:"flex-end"},children:[u.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",pointerEvents:"auto"},onClick:o}),u.jsxs("div",{className:"relative w-80 h-full bg-white dark:bg-gray-800 shadow-2xl p-6 flex flex-col gap-6 overflow-y-auto",style:{position:"relative",width:"320px",height:"100%",background:"var(--bg-color)",boxShadow:"-5px 0 25px rgba(0,0,0,0.1)",padding:"2rem",paddingBottom:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem",pointerEvents:"auto",borderLeft:"1px solid var(--border-color)",animation:"slideIn 0.3s ease-out",overflowY:"auto",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",touchAction:"pan-y"},onClick:_=>_.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",margin:0},children:"Menu"}),u.jsx(Ar,{onClick:o})]}),t?u.jsxs("div",{className:"neo-card flex items-center gap-3 p-3",style:{padding:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsxs("div",{style:{position:"relative",width:"48px",height:"48px",flexShrink:0},children:[t.picture?u.jsx("img",{src:t.picture,alt:t.name,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},onError:_=>{_.target.style.display="none",_.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:"var(--accent-soft)",display:t.picture?"none":"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(xd,{size:24})})]}),u.jsxs("div",{style:{overflow:"hidden",flex:1},children:[u.jsx("div",{style:{fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-color)",opacity:.6,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.email})]})]}):u.jsxs("button",{className:"neo-button",style:{width:"100%",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",textAlign:"left"},onClick:()=>{o(),l()},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-secondary)"},children:u.jsx(xd,{size:20})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[u.jsx("span",{style:{fontWeight:"600",fontSize:"1rem"},children:"Guest User"}),u.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:"Sign in to save progress"})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:e==="dark"?"Eye Safe On":"Eye Safe Off"}),u.jsx("button",{className:`neo-button icon-btn ${e==="dark"?"neo-glow-blue":""}`,onClick:n,children:e==="dark"?u.jsx(nT,{size:20}):u.jsx(nT,{size:20})})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:r?"Sounds On":"Sounds Off"}),u.jsx("button",{className:`neo-button icon-btn ${r?"neo-glow-blue":""}`,onClick:i,children:r?u.jsx(l9,{size:20}):u.jsx(c9,{size:20})})]}),u.jsx("div",{style:{flex:1}}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(t==null?void 0:t.email)===Ei&&u.jsxs("button",{className:"neo-button neo-glow-blue",style:{width:"100%",color:"var(--accent-color)",fontWeight:"bold"},onClick:h,children:[u.jsx(WC,{size:18})," Admin Panel"]}),u.jsxs("button",{className:"neo-button",style:{width:"100%",color:"var(--accent-color)"},onClick:s,children:[u.jsx(Zi,{size:18})," Help/Feedback"]}),t&&u.jsxs("button",{className:"neo-button",style:{width:"100%",color:"#f59e0b"},onClick:f,children:[u.jsx(HC,{size:18})," Refer a Friend"]}),t?u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"neo-button",style:{width:"100%",color:"#8b5cf6"},onClick:p,children:[u.jsx(qC,{size:18})," Beginner's Guide"]}),u.jsxs("button",{className:"neo-button",style:{width:"100%"},onClick:a,children:[u.jsx(Q8,{size:18})," Logout"]}),u.jsxs("button",{className:"neo-button neo-glow-red",style:{width:"100%",color:"var(--error-color)"},onClick:d,children:[u.jsx(fi,{size:18})," Delete Data"]})]}):u.jsxs("button",{className:"neo-button neo-glow-blue",style:{width:"100%",backgroundColor:"var(--accent-color)",color:"white"},onClick:()=>{o(),l()},children:[u.jsx(xd,{size:18})," Sign in with Google"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",marginTop:"0.5rem",opacity:.5},children:[u.jsxs("span",{style:{fontSize:"0.7rem",fontWeight:"500"},children:["v",g]}),u.jsx("button",{onClick:w,style:{background:"none",border:"none",color:"var(--accent-color)",fontSize:"0.65rem",textDecoration:"underline",cursor:"pointer",padding:"4px"},children:"Check for updates"})]})]}),u.jsx("style",{children:`
            @keyframes slideIn {
                from { transform: translateX(100%); }
                to { transform: translateX(0); }
            }
            `})]})},Li=(t,e)=>{if(!e)return"";const n=String(e).trim();switch(t){case"standard":const r=n.toUpperCase().replace(/^(STANDARD|STD|CLASS|GRADE)\s*/i,"");return{5:"V",V:"V",6:"VI",VI:"VI",7:"VII",VII:"VII",8:"VIII",VIII:"VIII",9:"IX",IX:"IX",10:"X",X:"X"}[r]||r;case"syllabus":const s=n.toUpperCase();return s.includes("NCERT")?"NCERT":s.includes("KERALA")?"Kerala":n;case"medium":const o=n.toLowerCase();return o.includes("malayalam")?"Malayalam":o.includes("english")?"English":n.charAt(0).toUpperCase()+n.slice(1);case"subject":const a=n.toLowerCase();return a.includes("math")?"Maths":a.includes("social")?"Social Science":a.includes("science")?"Science":a.includes("malayalam")?"Malayalam":a.includes("hindi")?"Hindi":a.includes("english")?"English":n.charAt(0).toUpperCase()+n.slice(1);default:return n}},b9=t=>{if(!t||!t.trim())return{title:"",label:"",importantNote:"",questions:[],sections:[]};let e=null,n="",r="",i="",s=[],o="",a="",l="",d="",h=0,f=[];try{const _=t.match(/\[[\s\S]*\]|\{[\s\S]*\}/);_&&(e=JSON.parse(_[0]))}catch{}if(e)Array.isArray(e)?s=e:(n=e.title||"",r=e.label||e.tag||"",i=e.importantNote||e.note||"",o=Li("standard",e.standard||e.Standard),a=Li("syllabus",e.syllabus||e.Syllabus),l=Li("medium",e.medium||e.Medium),d=Li("subject",e.subject||e.Subject),h=e.cost||e.Cost||0,f=e.sections||[],s=e.questions||e.cards||[]);else{const _=t.match(/^(?:Title|Lesson Title|Stack Title|Name):\s*(.*)$/im),k=t.match(/^(?:Label|Category|Tag):\s*(.*)$/im),S=t.match(/^(?:Important Note|Note|Description):\s*(.*)$/im);n=_?_[1].trim():"",r=k?k[1].trim():"",i=S?S[1].trim():"";const v=t.match(/^(?:Standard|Class|Grade):\s*(.*)$/im),x=t.match(/^(?:Syllabus|Board):\s*(.*)$/im),j=t.match(/^(?:Medium|Language):\s*(.*)$/im),L=t.match(/^(?:Subject):\s*(.*)$/im),O=t.match(/^(?:Cost|Coins|Price):\s*(\d+)$/im);o=Li("standard",v?v[1].trim():""),a=Li("syllabus",x?x[1].trim():""),l=Li("medium",j?j[1].trim():""),d=Li("subject",L?L[1].trim():""),h=O?parseInt(O[1],10):0,t.split(/(?=Q:|Question:|Q\d+:|Question \d+:)/i).forEach(T=>{if(!T.trim())return;const b=T.match(/(?:Q:|Question:|Q\d+:|Question \d+:)\s*([\s\S]*?)(?=A:|Answer:|A\d+:|Answer \d+:|$)/i),A=T.match(/(?:A:|Answer:|A\d+:|Answer \d+:)\s*([\s\S]*?)(?=Q:|Question:|Q\d+:|Question \d+:|$)/i);b&&A&&s.push({question:b[1].trim(),answer:A[1].trim()})})}const p=_=>{var O,E,T,b;const k=_.choices||_.options||[],S=_.type==="mcq"||k&&Array.isArray(k)&&k.length>0,v=S?"mcq":"flashcard";let x=[];if(S){const A=_.correctAnswer||_.answer;x=k.map((P,N)=>{const I=typeof P=="string"?P:P.text||"";let K=!1;return typeof A=="number"?K=N===A:typeof P=="object"&&P.isCorrect!==void 0?K=P.isCorrect:A&&(K=I.trim().toLowerCase()===String(A).trim().toLowerCase()),{id:Math.random(),text:I,isCorrect:K}})}const j=()=>{var A;return typeof _.question=="string"?_.question:typeof _.question=="object"&&((A=_.question)!=null&&A.text)?_.question.text:typeof _.q=="string"?_.q:""},L=()=>{var A;return typeof _.answer=="string"?_.answer:typeof _.answer=="object"&&((A=_.answer)!=null&&A.text)?_.answer.text:typeof _.a=="string"?_.a:""};return{id:Math.random(),type:v,question:{text:j(),image:((O=_.question)==null?void 0:O.image)||"",audio:((E=_.question)==null?void 0:E.audio)||""},answer:{text:L(),image:((T=_.answer)==null?void 0:T.image)||"",audio:((b=_.answer)==null?void 0:b.audio)||""},options:x}},g=f.map(_=>({noteSegment:_.noteSegment||"",questions:(_.questions||_.cards||[]).map(p)})),w=g.length>0?g.flatMap(_=>_.questions):s.map(p);return{title:n,label:r,importantNote:i,standard:o,syllabus:a,medium:l,subject:d,cost:parseInt(h)||0,sections:g,questions:w,cards:w}},Yp=t=>{if(!t)return t;const e=i=>{var f,p,g,w;if(i.question&&typeof i.question=="object"&&"text"in i.question)return i;const s=i.choices||i.options||[],o=i.type==="mcq"||s&&Array.isArray(s)&&s.length>0,a=o?"mcq":"flashcard";let l=[];if(o){const _=i.correctAnswer||(typeof i.answer=="string"?i.answer:null);l=s.map((k,S)=>{const v=typeof k=="string"?k:k.text||"";let x=!1;return typeof _=="number"?x=S===_:typeof k=="object"&&k.isCorrect!==void 0?x=k.isCorrect:_&&(x=v.trim().toLowerCase()===String(_).trim().toLowerCase()),{id:i.id?`${i.id}-opt-${S}`:Math.random(),text:v,isCorrect:x}})}const d=()=>{var _;return typeof i.question=="string"?i.question:typeof i.question=="object"&&((_=i.question)!=null&&_.text)?i.question.text:typeof i.q=="string"?i.q:""},h=()=>{var _;return typeof i.answer=="string"?i.answer:typeof i.answer=="object"&&((_=i.answer)!=null&&_.text)?i.answer.text:typeof i.a=="string"?i.a:""};return{id:i.id||Math.random(),type:a,question:{text:d(),image:((f=i.question)==null?void 0:f.image)||"",audio:((p=i.question)==null?void 0:p.audio)||""},answer:{text:h(),image:((g=i.answer)==null?void 0:g.image)||"",audio:((w=i.answer)==null?void 0:w.audio)||""},options:l,lastRating:i.lastRating}};let n=[],r=[];return t.sections&&Array.isArray(t.sections)&&t.sections.length>0?(n=t.sections.map((i,s)=>{const o=i.noteSegment||"",a=(i.questions||i.cards||[]).map((l,d)=>({...e(l),sectionIndex:s,sectionNoteSegment:o,isFirstInSection:d===0&&o}));return{noteSegment:o,questions:a}}),r=n.flatMap(i=>i.questions)):(t.questions||t.cards)&&(r=(t.questions||t.cards||[]).map(e)),{...t,sections:n,questions:r,cards:r}},JC=({imageUrl:t,onClose:e})=>{const[n,r]=R.useState(1),[i,s]=R.useState(0),[o,a]=R.useState({x:0,y:0}),l=()=>{r(g=>Math.min(g+.5,5))},d=()=>{const g=Math.max(n-.5,.5);r(g),g<=1&&a({x:0,y:0})},h=()=>{s(g=>(g+90)%360)},f=()=>{r(1),s(0),a({x:0,y:0})},p=(g,w)=>{n>1&&a({x:o.x+w.offset.x,y:o.y+w.offset.y})};return u.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"image-viewer-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"hidden"},onClick:e,children:[u.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",gap:"0.5rem",zIndex:1e4},onClick:g=>g.stopPropagation(),children:[u.jsx("button",{className:"neo-button icon-btn",onClick:l,title:"Zoom In",style:{background:"var(--bg-color)"},children:u.jsx(d9,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:d,title:"Zoom Out",style:{background:"var(--bg-color)"},children:u.jsx(h9,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:h,title:"Rotate",style:{background:"var(--bg-color)"},children:u.jsx(t9,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:f,title:"Reset",style:{background:"var(--bg-color)",fontSize:"0.8rem",padding:"8px 12px"},children:"Reset"}),u.jsx(Ar,{onClick:e,size:20})]}),u.jsxs("div",{style:{position:"absolute",bottom:"2rem",left:"50%",transform:"translateX(-50%)",background:"var(--bg-color)",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"bold",boxShadow:"4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light)"},onClick:g=>g.stopPropagation(),children:[Math.round(n*100),"% ",n>1&&" Drag to pan"]}),u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},onClick:g=>g.stopPropagation(),children:u.jsx(Fe.img,{src:t,alt:"Full screen view",drag:n>1,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.1,dragMomentum:!1,onDragEnd:p,animate:{scale:n,rotate:i,x:o.x,y:o.y},transition:{type:"spring",stiffness:200,damping:20},style:{maxWidth:n<=1?"90vw":"none",maxHeight:n<=1?"90vh":"none",width:n>1?"auto":void 0,height:n>1?"90vh":void 0,objectFit:"contain",cursor:n>1?"grab":"zoom-in",userSelect:"none"},whileDrag:{cursor:"grabbing"},onClick:g=>{g.stopPropagation(),n===1&&l()},draggable:!1})})]})},Ih=({value:t,onChange:e,placeholder:n,style:r={},...i})=>{const s=R.useRef(null),o=a=>{a&&(a.style.height="auto",a.style.height=`${a.scrollHeight}px`)};return R.useEffect(()=>{o(s.current)},[t]),u.jsx("textarea",{ref:s,className:"neo-input",placeholder:n,value:t,onChange:a=>{e(a),o(a.target)},style:{...r,overflow:"hidden",resize:"none",minHeight:"40px",display:"block"},...i})},iT=({question:t,index:e,totalQuestions:n,onUpdate:r,onRemove:i,onMove:s,recording:o,startRecording:a,stopRecording:l,cancelRecording:d,recordingTime:h,handleFileUpload:f,handleOptionChange:p,setViewingImage:g,showSplitUI:w,selectedQuestions:_,toggleQuestionSelection:k})=>{var v;const S=x=>{const j=Math.floor(x/60),L=x%60;return`${j}:${L.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"neo-inset",style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem",position:"relative"},children:[w&&u.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:5},children:u.jsx("input",{type:"checkbox",className:"neo-checkbox",checked:_==null?void 0:_.has(t.id),onChange:()=>k==null?void 0:k(t.id)})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",opacity:.5,display:"flex",alignItems:"center",gap:"0.5rem"},children:u.jsxs("span",{children:[t.type==="mcq"?"MCQ":"QUESTION"," ",e+1]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"var(--bg-color)",padding:"4px 8px",borderRadius:"8px",boxShadow:"inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light)"},children:[u.jsx("span",{style:{fontSize:"0.75rem",opacity:.6},children:"Pos:"}),u.jsx("input",{type:"number",className:"neo-input",style:{width:"40px",padding:"2px",textAlign:"center",boxShadow:"none",background:"transparent",height:"auto",fontSize:"0.9rem",fontWeight:"bold"},placeholder:"#",onBlur:x=>{x.target.value&&(s(x.target.value),x.target.value="")},onKeyDown:x=>{x.key==="Enter"&&x.target.value&&(s(x.target.value),x.target.value="")}})]}),u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",color:"var(--error-color)",boxShadow:"none"},onClick:i,title:"Delete Question",children:u.jsx(fi,{size:16})})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:"QUESTION"}),u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[o?o.id===t.id&&o.field==="question"?u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,borderRadius:"12px",display:"flex",alignItems:"center",padding:"0 1rem",gap:"1rem",background:"var(--bg-color)"},children:[u.jsx("div",{style:{width:"10px",height:"10px",background:"red",borderRadius:"50%",animation:"pulse 1s infinite"}}),u.jsxs("span",{style:{flex:1,fontWeight:"600"},children:["Recording... ",S(h)]}),u.jsx("button",{className:"neo-button icon-btn",title:"Cancel",style:{width:"32px",height:"32px"},onClick:d,children:u.jsx(fn,{size:14,color:"var(--error-color)"})}),u.jsx("button",{className:"neo-button icon-btn",title:"Stop & Save",style:{width:"32px",height:"32px"},onClick:l,children:u.jsx(xo,{size:14,color:"var(--accent-color)"})})]}):null:u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",color:t.question.audio?"var(--accent-color)":"currentColor"},onClick:()=>a(t.id,"question"),children:u.jsx(bh,{size:14})}),t.question.audio&&u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px"},onClick:()=>r("question",{...t.question,audio:""}),children:u.jsx(fi,{size:12,color:"var(--error-color)"})})]}),u.jsxs("label",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",cursor:"pointer"},children:[u.jsx(Og,{size:14,color:t.question.image?"var(--accent-color)":"currentColor"}),u.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:x=>f(x,j=>r("question",{...t.question,image:j}))})]})]})]}),t.question.image&&u.jsxs("div",{style:{position:"relative",width:"100%",maxHeight:"150px"},children:[u.jsx("img",{src:t.question.image,style:{width:"100%",height:"100%",maxHeight:"150px",objectFit:"contain",borderRadius:"8px",cursor:"pointer"},onClick:()=>g(t.question.image)}),u.jsx("button",{className:"neo-button icon-btn",style:{position:"absolute",top:"5px",right:"5px",width:"24px",height:"24px"},onClick:()=>r("question",{...t.question,image:""}),children:u.jsx(fn,{size:12})})]}),u.jsx("div",{style:{position:"relative"},children:u.jsx(Ih,{placeholder:"The question... ",value:t.question.text,onChange:x=>r("question",{...t.question,text:va(x.target.value)}),style:{paddingRight:"30px"}})})]}),t.type==="mcq"?u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:"OPTIONS"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:(v=t.options)==null?void 0:v.map((x,j)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("input",{type:"radio",name:`correct-${t.id}`,checked:x.isCorrect,onChange:()=>p(x.id,"isCorrect",!0),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--accent-color)"}}),u.jsx("input",{className:"neo-input",placeholder:`Option ${String.fromCharCode(65+j)}`,value:x.text,onChange:L=>p(x.id,"text",va(L.target.value)),style:{borderColor:x.isCorrect?"var(--accent-color)":"transparent",borderWidth:x.isCorrect?"2px":"1px"}})]},x.id))})]}):u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:"ANSWER"}),u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[o?o.id===t.id&&o.field==="answer"?u.jsxs("div",{className:"neo-flat",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,borderRadius:"12px",display:"flex",alignItems:"center",padding:"0 1rem",gap:"1rem",background:"var(--bg-color)"},children:[u.jsx("div",{style:{width:"10px",height:"10px",background:"red",borderRadius:"50%",animation:"pulse 1s infinite"}}),u.jsxs("span",{style:{flex:1,fontWeight:"600"},children:["Recording... ",S(h)]}),u.jsx("button",{className:"neo-button icon-btn",title:"Cancel",style:{width:"32px",height:"32px"},onClick:d,children:u.jsx(fn,{size:14,color:"var(--error-color)"})}),u.jsx("button",{className:"neo-button icon-btn",title:"Stop & Save",style:{width:"32px",height:"32px"},onClick:l,children:u.jsx(xo,{size:14,color:"var(--accent-color)"})})]}):null:u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",color:t.answer.audio?"var(--accent-color)":"currentColor"},onClick:()=>a(t.id,"answer"),children:u.jsx(bh,{size:14})}),t.answer.audio&&u.jsx("button",{className:"neo-button icon-btn",style:{width:"32px",height:"32px"},onClick:()=>r("answer",{...t.answer,audio:""}),children:u.jsx(fi,{size:12,color:"var(--error-color)"})})]}),u.jsxs("label",{className:"neo-button icon-btn",style:{width:"32px",height:"32px",cursor:"pointer"},children:[u.jsx(Og,{size:14,color:t.answer.image?"var(--accent-color)":"currentColor"}),u.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:x=>f(x,j=>r("answer",{...t.answer,image:j}))})]})]})]}),t.answer.image&&u.jsxs("div",{style:{position:"relative",width:"100%",maxHeight:"150px"},children:[u.jsx("img",{src:t.answer.image,style:{width:"100%",height:"100%",maxHeight:"150px",objectFit:"contain",borderRadius:"8px",cursor:"pointer"},onClick:()=>g(t.answer.image)}),u.jsx("button",{className:"neo-button icon-btn",style:{position:"absolute",top:"5px",right:"5px",width:"24px",height:"24px"},onClick:()=>r("answer",{...t.answer,image:""}),children:u.jsx(fn,{size:12})})]}),u.jsx(Ih,{placeholder:"The answer... ",value:t.answer.text,onChange:x=>r("answer",{...t.answer,text:va(x.target.value)})})]})]},t.id)},I9=({user:t,lesson:e,onClose:n,onSave:r,onDelete:i,showAlert:s,showConfirm:o,availableLabels:a,allLessons:l,activeTab:d,defaultMetadata:h})=>{const[f,p]=R.useState((e==null?void 0:e.title)||""),[g,w]=R.useState((e==null?void 0:e.titleImage)||""),[_,k]=R.useState((e==null?void 0:e.label)||"No label"),[S,v]=R.useState((e==null?void 0:e.importantNote)||""),[x,j]=R.useState(""),[L,O]=R.useState((e==null?void 0:e.questions)||(e==null?void 0:e.cards)||[{id:Date.now(),question:{text:"",image:"",audio:""},answer:{text:"",image:"",audio:""}}]),[E,T]=R.useState((e==null?void 0:e.standard)||(e?"":(h==null?void 0:h.standard)||"")),[b,A]=R.useState((e==null?void 0:e.syllabus)||(e?"":(h==null?void 0:h.syllabus)||"")),[P,N]=R.useState((e==null?void 0:e.medium)||(e?"":(h==null?void 0:h.medium)||"")),[I,K]=R.useState((e==null?void 0:e.subject)||(e?"":(h==null?void 0:h.subject)||"")),[fe,Y]=R.useState((e==null?void 0:e.cost)||0),[ne,U]=R.useState((e==null?void 0:e.sections)||[]),[X,M]=R.useState(d==="lessons"&&(t==null?void 0:t.email)===Ei),[D,W]=R.useState(null);R.useRef(null);const[Z,ee]=R.useState(!1),[re,B]=R.useState(new Set),[H,ie]=R.useState(!1),[pe,Ee]=R.useState(""),[me,ke]=R.useState(!1),q=R.useRef(null),ce=R.useRef(null),[Ce,at]=R.useState(null),[Ge,Ke]=R.useState(0),[_t,Ne]=R.useState(null),Qe=R.useRef(null),Gn=()=>{const G={id:Date.now(),type:"flashcard",question:{text:"",image:"",audio:""},answer:{text:"",image:"",audio:""}};if(ne.length>0){const ae=ne.length-1,he=[...ne];he[ae].questions=he[ae].questions||he[ae].cards||[],he[ae].questions.push(G),U(he),O(he.flatMap(J=>J.questions||J.cards))}else O([...L,G]);lr()},Rr=()=>{const G={id:Date.now(),type:"mcq",question:{text:"",image:"",audio:""},options:[{id:Date.now()+1,text:"",isCorrect:!1},{id:Date.now()+2,text:"",isCorrect:!1},{id:Date.now()+3,text:"",isCorrect:!1},{id:Date.now()+4,text:"",isCorrect:!1}],answer:{text:"",image:"",audio:""}};if(ne.length>0){const ae=ne.length-1,he=[...ne];he[ae].questions=he[ae].questions||he[ae].cards||[],he[ae].questions.push(G),U(he),O(he.flatMap(J=>J.questions||J.cards))}else O([...L,G]);lr()},an=()=>{U([...ne,{noteSegment:"",questions:[]}])},lr=()=>{setTimeout(()=>{ce.current&&ce.current.scrollTo({top:ce.current.scrollHeight,behavior:"smooth"})},100)},we=(G,ae,he=null)=>{const J=parseInt(ae)-1;if(he!==null){const _e=[...ne],oe=_e[he].questions||_e[he].cards||[];if(isNaN(J)||J<0||J>=oe.length||J===G)return;const[qe]=oe.splice(G,1);oe.splice(J,0,qe),_e[he].questions=oe,U(_e),O(_e.flatMap(ze=>ze.questions||ze.cards))}else{if(isNaN(J)||J<0||J>=L.length||J===G)return;const _e=[...L],[oe]=_e.splice(G,1);_e.splice(J,0,oe),O(_e)}},et=(G,ae,he,J)=>{O(L.map(_e=>_e.id!==G?_e:he==="isCorrect"?{..._e,options:_e.options.map(oe=>({...oe,isCorrect:oe.id===ae}))}:{..._e,options:_e.options.map(oe=>oe.id===ae?{...oe,[he]:J}:oe)}))},Be=G=>{L.length>1&&O(L.filter(ae=>ae.id!==G))},ye=(G,ae,he)=>{O(L.map(J=>J.id===G?{...J,[ae]:he}:J))},Ae=(G,ae,he="image")=>{const J=G.target.files[0];if(!J)return;const _e=new FileReader;_e.onloadend=()=>{const oe=_e.result;if(!Bg(oe,he==="image"?["image/"]:["audio/"])){s(`Invalid ${he} file. Only ${he} files are allowed.`);return}ae(oe)},_e.readAsDataURL(J)},tt=async(G,ae)=>{at({id:G,field:ae}),Ke(0);try{const he=await navigator.mediaDevices.getUserMedia({audio:!0}),J=new MediaRecorder(he),_e=[];J.ondataavailable=oe=>_e.push(oe.data),J.onstop=()=>{const oe=new Blob(_e,{type:"audio/webm"}),qe=new FileReader;qe.onloadend=()=>{O(ze=>ze.map(Tt=>Tt.id===G?{...Tt,[ae]:{...Tt[ae],audio:qe.result}}:Tt))},qe.readAsDataURL(oe),he.getTracks().forEach(ze=>ze.stop()),clearInterval(Qe.current),Ke(0)},J.start(),Ne(J),Qe.current=setInterval(()=>Ke(oe=>oe+1),1e3)}catch{s("Could not access microphone."),at(null),Ke(0)}},Ye=()=>{_t&&(_t.stop(),Ne(null),at(null))},An=()=>{_t&&(_t.onstop=()=>{clearInterval(Qe.current),Ke(0),Ne(null),at(null)},_t.stop())},yn=async()=>{var he;if(!f.trim())return s("Please enter a title");const G=ne.length>0?ne.flatMap(J=>J.questions||J.cards):L;for(let J=0;J<G.length;J++){const _e=G[J],oe=_e.question.text.trim()||_e.question.image||_e.question.audio,qe=_e.answer.text.trim()||_e.answer.image||_e.answer.audio;if(_e.type==="mcq"){const ze=(he=_e.options)==null?void 0:he.some(Tt=>Tt.isCorrect);if(!oe)return s(`Question is required for MCQ ${J+1}`);if(!ze)return s(`Please select a correct answer for MCQ ${J+1}`)}else{if(!oe)return s(`Question is required for question ${J+1}`);if(!qe)return s(`Answer is required for question ${J+1}`)}}const ae={id:(e==null?void 0:e.id)||Date.now().toString(),title:f,titleImage:g,label:_,standard:E,syllabus:b,medium:P,subject:I,importantNote:S,questions:G,sections:ne,owner:t.email,avgRating:(e==null?void 0:e.avgRating)||null,lastReviewed:(e==null?void 0:e.lastReviewed)||null,cost:parseInt(fe)||0,questionCount:G.length};try{ke(!0);let J;if(X){const{savePublicLesson:oe}=await Fr(()=>import("./publicDrive-fa900bb1.js"),[]);J=await oe(ae)}else J=await Ji.saveLesson(ae);const _e=J.driveFileId||J.id;r({...J,driveFileId:_e},!0,X)}catch(J){if(ke(!1),J.message==="REAUTH_NEEDED"||J.message.includes("REAUTH_NEEDED")){s("Please reconnect to Google Drive to save.");try{await h8({prompt:"consent"}),await yn()}catch(_e){console.error("Re-auth failed/cancelled",_e)}}else console.error("Save failed:",J),J.code==="storage/unknown"||J.message.includes("storage/unknown")?s('Cloud upload failed (likely CORS). Please use the "Download" button to save locally.'):s(`Failed to save lesson: ${J.message}`)}},Pr=()=>{if(re.size===0)return s("Please select at least one question to split.");if(re.size===L.length)return s("Cannot split all questions.");o(`Split ${re.size} question(s) into a new lesson?`,async()=>{const G=L.filter(J=>re.has(J.id)),ae=L.filter(J=>!re.has(J.id)),he={id:Date.now().toString(),title:`${f} (Split)`,titleImage:g,label:_,questions:G,owner:t.email,questionCount:G.length};try{const J=await Ji.saveLesson(he);r({...J,driveFileId:J.driveFileId||J.id},!1),O(ae),B(new Set),ee(!1),s("Lesson split successfully!"),await yn()}catch{s("Failed to split lesson.")}})},ei=async()=>{if(!pe)return s("Please select a lesson to merge with.");const G=l==null?void 0:l.find(ae=>ae.id===pe);if(!G)return s("Target lesson not found.");o(`Merge "${f}" into "${G.title}"?`,async()=>{try{const ae=G.questions||G.cards||[],he={...G,questions:[...ae,...L],questionCount:ae.length+L.length};await Ji.saveLesson(he),e!=null&&e.driveFileId&&await OC(t.token,e.driveFileId),s("Lessons merged successfully!"),n()}catch{s("Failed to merge lessons.")}})},Kn=G=>{B(ae=>{const he=new Set(ae);return he.has(G)?he.delete(G):he.add(G),he})};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:u.jsxs("div",{ref:q,className:"modal-content neo-flat",style:{width:"100%",maxWidth:"600px",height:window.innerWidth<768?"100%":"90vh",maxHeight:"100%",padding:0,display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:window.innerWidth<768?0:"24px"},children:[u.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid var(--shadow-dark)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-color)",zIndex:10},children:[u.jsx("h2",{style:{fontSize:"1.5rem",margin:0},children:e?"Edit Lesson":"New Lesson"}),u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:u.jsx(Ar,{onClick:n,size:18})})]}),u.jsxs("div",{ref:ce,style:{padding:"2rem",flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsx("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.8rem"},children:[u.jsx("label",{style:{fontWeight:"600",opacity:.7},children:"Title & Cover Image"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsxs("div",{style:{position:"relative",flex:1},children:[u.jsx("input",{id:"lesson-modal-title-input",className:"neo-input",placeholder:"Lesson Title ",value:f,onChange:G=>p(va(G.target.value)),style:{paddingRight:"30px"}}),!f&&u.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"red",pointerEvents:"none"},children:"*"})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsxs("label",{className:"neo-button icon-btn",style:{cursor:"pointer",flexShrink:0,color:g?"var(--accent-color)":"currentColor"},children:[u.jsx(Og,{size:18}),u.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:G=>Ae(G,w)})]}),g&&u.jsx("button",{className:"neo-button icon-btn",style:{flexShrink:0},onClick:()=>w(""),children:u.jsx(fi,{size:16,color:"var(--error-color)"})})]})]}),u.jsx(gr,{label:"Label",value:_,options:[{label:"No label",value:"No label"},...a.filter(G=>G!=="No label").map(G=>({label:G,value:G}))],onChange:k,placeholder:"Select label...",children:u.jsxs("div",{style:{display:"flex",gap:"8px",padding:"8px",borderBottom:"1px solid var(--shadow-dark)",marginBottom:"4px"},children:[u.jsx("input",{className:"neo-input",placeholder:"Create new label...",value:x,onChange:G=>j(va(G.target.value)),onKeyPress:G=>{G.key==="Enter"&&x.trim()&&(k(x.trim()),j(""))},style:{flex:1,fontSize:"0.85rem",padding:"8px 12px",height:"36px"}}),u.jsx("button",{className:"neo-button",style:{padding:"8px 12px",fontSize:"0.85rem",height:"36px"},onClick:()=>{x.trim()&&(k(x.trim()),j(""))},children:u.jsx(Gi,{size:14})})]})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",marginTop:"0.5rem"},children:[u.jsx("label",{style:{fontWeight:"600",opacity:.7},children:"Important Note (Optional)"}),u.jsx(Ih,{placeholder:"Add an important note...",value:S,onChange:G=>v(va(G.target.value))})]})]})}),(t==null?void 0:t.email)===Ei&&u.jsxs("div",{className:"neo-inset",style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.25rem",borderRadius:"16px"},children:[u.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",opacity:.6},children:"COMMUNITY METADATA"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem"},children:[u.jsx(gr,{label:"Standard",value:E,options:["V","VI","VII","VIII","IX","X"].map(G=>({label:`Standard ${G}`,value:G})),onChange:T,placeholder:"Select Standard"}),u.jsx(gr,{label:"Syllabus",value:b,options:["NCERT","Kerala"].map(G=>({label:G,value:G})),onChange:A,placeholder:"Select Syllabus"}),u.jsx(gr,{label:"Medium",value:P,options:["Malayalam","English"].map(G=>({label:G,value:G})),onChange:N,placeholder:"Select Medium"}),u.jsx(gr,{label:"Subject",value:I,options:["Maths","Social Science","Science","English","Malayalam","Hindi"].map(G=>({label:G,value:G})),onChange:K,placeholder:"Select Subject"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[u.jsx("label",{style:{fontSize:"0.7rem",fontWeight:"700",color:"#94a3b8",textTransform:"uppercase"},children:"Cost (Coins)"}),u.jsx("input",{type:"number",className:"neo-input",value:fe,onChange:G=>Y(G.target.value),placeholder:"0 for free",style:{padding:"10px 12px"}})]})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"1rem",cursor:"pointer",padding:"0.5rem",borderRadius:"8px",background:X?"var(--accent-soft)":"transparent"},children:[u.jsx("input",{type:"checkbox",checked:X,onChange:G=>M(G.target.checked),style:{width:"18px",height:"18px"}}),u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600",color:X?"var(--accent-color)":"inherit"},children:"Publish to Community Pool"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:ne&&ne.length>0?ne.map((G,ae)=>{const he=G.questions||G.cards||[];return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem",borderRadius:"12px",border:"1px solid var(--shadow-dark)"},children:[u.jsxs("div",{className:"neo-flat",style:{padding:"1rem",borderLeft:"4px solid var(--accent-color)",borderRadius:"8px"},children:[u.jsx("label",{style:{fontSize:"0.7rem",fontWeight:"bold",opacity:.5,textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Section Note"}),u.jsx(Ih,{value:G.noteSegment,onChange:J=>{const _e=[...ne];_e[ae].noteSegment=J.target.value,U(_e)},placeholder:"Enter section note...",style:{minHeight:"40px",background:"transparent",boxShadow:"none"}})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:he.map((J,_e)=>u.jsx(iT,{question:J,index:_e,totalQuestions:he.length,onUpdate:(oe,qe)=>{const ze=[...ne],Tt=ze[ae].questions||ze[ae].cards||[];Tt[_e]={...J,[oe]:qe},ze[ae].questions=Tt,U(ze),O(ze.flatMap(Ls=>Ls.questions||Ls.cards))},onRemove:()=>{const oe=[...ne],qe=oe[ae].questions||oe[ae].cards||[];qe.splice(_e,1),oe[ae].questions=qe,U(oe),O(oe.flatMap(ze=>ze.questions||ze.cards))},onMove:oe=>we(_e,oe,ae),recording:Ce,startRecording:tt,stopRecording:Ye,cancelRecording:An,recordingTime:Ge,handleFileUpload:Ae,handleOptionChange:(oe,qe,ze)=>{const Tt=[...ne],Ls=Tt[ae].questions||Tt[ae].cards||[],Po=Ls[_e];qe==="isCorrect"?Po.options=Po.options.map(Yt=>({...Yt,isCorrect:Yt.id===oe})):Po.options=Po.options.map(Yt=>Yt.id===oe?{...Yt,[qe]:ze}:Yt),Tt[ae].questions=Ls,U(Tt),O(Tt.flatMap(Yt=>Yt.questions||Yt.cards))},setViewingImage:W,showSplitUI:Z,selectedQuestions:re,toggleQuestionSelection:Kn},J.id))}),u.jsxs("button",{className:"neo-button",style:{alignSelf:"center",fontSize:"0.8rem",opacity:.6},onClick:()=>{const J=[...ne];J.splice(ae+1,0,{noteSegment:"",questions:[]}),U(J)},children:[u.jsx(Gi,{size:14})," Insert Section Here"]})]},ae)}):L.map((G,ae)=>u.jsx(iT,{question:G,index:ae,totalQuestions:L.length,onUpdate:(he,J)=>ye(G.id,he,J),onRemove:()=>Be(G.id),onMove:he=>we(ae,he),recording:Ce,startRecording:tt,stopRecording:Ye,cancelRecording:An,recordingTime:Ge,handleFileUpload:Ae,handleOptionChange:(he,J,_e)=>et(G.id,he,J,_e),setViewingImage:W,showSplitUI:Z,selectedQuestions:re,toggleQuestionSelection:Kn},G.id))}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",style:{flex:1,justifyContent:"center",background:"var(--accent-soft)",color:"var(--accent-color)"},onClick:Gn,children:[u.jsx(Gi,{size:18})," Add Question"]}),u.jsxs("button",{className:"neo-button neo-glow-blue",style:{flex:1,justifyContent:"center",background:"var(--accent-soft)",color:"var(--accent-color)"},onClick:Rr,children:[u.jsx(Gi,{size:18})," Add MCQ"]}),u.jsxs("button",{className:"neo-button neo-glow-blue",style:{flex:1,justifyContent:"center",background:"var(--bg-color)",color:"var(--accent-color)"},onClick:an,children:[u.jsx(Gi,{size:18})," Add Section"]})]}),e&&L.length>1&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsxs("button",{className:`neo-button ${Z?"neo-inset":""}`,style:{flex:1,justifyContent:"center",fontSize:"0.9rem"},onClick:()=>{ee(!Z),ie(!1),B(new Set)},children:[u.jsx(s9,{size:16})," ",Z?"Cancel Split":"Split Lesson"]}),l&&l.filter(G=>G.id!==(e==null?void 0:e.id)).length>0&&u.jsxs("button",{className:`neo-button ${H?"neo-inset":""}`,style:{flex:1,justifyContent:"center",fontSize:"0.9rem"},onClick:()=>{ie(!H),ee(!1),B(new Set)},children:[u.jsx(Y8,{size:16})," ",H?"Cancel Merge":"Merge Lesson"]})]}),Z&&u.jsxs("div",{className:"neo-inset",style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("p",{style:{fontSize:"0.9rem",opacity:.7},children:"Select questions to move to a new lesson:"}),u.jsxs("button",{className:"neo-button neo-glow-blue",style:{background:"var(--accent-color)",color:"white",border:"none",justifyContent:"center"},onClick:Pr,children:["Create New Lesson with ",re.size," Selected Question(s)"]})]}),H&&u.jsxs("div",{className:"neo-inset",style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("p",{style:{fontSize:"0.9rem",opacity:.7},children:"Select lesson to merge into:"}),u.jsx(gr,{value:pe,options:l==null?void 0:l.filter(G=>G.id!==(e==null?void 0:e.id)).map(G=>{var ae,he;return{label:`${G.title} (${((ae=G.questions)==null?void 0:ae.length)||((he=G.cards)==null?void 0:he.length)||0} questions)`,value:G.id}}),onChange:Ee,placeholder:"-- Select Lesson --",displayValue:G=>{var ae;return(ae=l.find(he=>he.id===G))==null?void 0:ae.title}}),u.jsx("button",{className:"neo-button neo-glow-blue",style:{background:"var(--accent-color)",color:"white",border:"none",justifyContent:"center"},onClick:ei,disabled:!pe,children:"Merge Into Selected Lesson"})]})]})]}),u.jsx("div",{style:{padding:"1.5rem",borderTop:"1px solid var(--shadow-dark)",display:"flex",flexDirection:"column",gap:"1rem",background:"var(--bg-color)",zIndex:10},children:u.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e&&u.jsxs("button",{className:"neo-button neo-glow-red",style:{flex:"1 1 8.75rem",justifyContent:"center",color:"var(--error-color)",padding:"0.8rem"},onClick:()=>i(e),children:[u.jsx(fi,{size:18})," Delete Lesson"]}),u.jsx("button",{className:"neo-button",style:{flex:"1 1 6.25rem",justifyContent:"center",padding:"0.8rem"},onClick:n,children:"Cancel"}),u.jsx("button",{className:`neo-button ${me?"neo-inset":""}`,style:{flex:"2 1 12.5rem",justifyContent:"center",background:me?"var(--bg-color)":"var(--accent-color)",color:me?"var(--accent-color)":"white",border:"none",padding:"0.8rem",cursor:me?"not-allowed":"pointer",opacity:me?.8:1},onClick:yn,disabled:me,children:me?u.jsxs(u.Fragment,{children:[u.jsx(Ic,{size:18,className:"spin",style:{marginRight:"8px"}})," Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(n9,{size:18,style:{marginRight:"8px"}})," ",e?"Save Changes":"Create Lesson"]})})]})}),u.jsx(Sn,{children:D&&u.jsx(JC,{imageUrl:D,onClose:()=>W(null)})})]})})},dv="/chethan-in-cardland/beta/assets/avatar_guide_new-9cb767fe.png",C9="/chethan-in-cardland/beta/assets/congratulations-565fc759.png",k9=({currentIndex:t,totalQuestions:e,masteredCount:n,totalOriginalQuestions:r,rating:i,onClose:s,user:o,lesson:a})=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[u.jsxs("div",{className:"neo-button",style:{height:"2.25rem",padding:"0 1rem",fontSize:"1rem",justifyContent:"center",minWidth:"5rem"},children:[t+1," / ",e]}),u.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 20px"},children:u.jsxs("div",{style:{width:"100%",maxWidth:"14rem",height:"1rem",background:"rgba(0,0,0,0.05)",borderRadius:"0.625rem",position:"relative",display:"flex",alignItems:"center",boxShadow:"inset 0.125rem 0.125rem 0.25rem var(--shadow-dark), inset -0.1rem -0.1rem 0.2rem var(--shadow-light)"},children:[u.jsx(Fe.div,{animate:{left:`${r>0?n/r*100:0}%`,y:i===2?[0,-15,0]:i===1?[0,-5,0]:0},transition:{left:{type:"spring",stiffness:50,damping:15},y:{duration:.4,ease:"easeOut"}},style:{position:"absolute",left:0,top:-4,zIndex:10,x:"-50%"},children:u.jsx(M8,{size:24,color:i===2?"#22c55e":"var(--accent-color)",fill:i===2?"#dcfce7":"none"})}),u.jsx("div",{style:{width:`${r>0?n/r*100:0}%`,height:"100%",background:i===2?"linear-gradient(90deg, var(--accent-color), #22c55e)":"var(--accent-color)",borderRadius:"10px",transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),u.jsx("div",{style:{position:"absolute",right:-12,top:-4,opacity:.9},children:u.jsx(Eh,{size:24,color:"var(--accent-color)",fill:"var(--bg-color)"})})]})}),u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:u.jsx(Ar,{onClick:s,size:18})})]}),Xp=({audioData:t})=>{const[e,n]=R.useState(!1),[r,i]=R.useState(0),s=R.useRef(null),o=R.useRef(),a=R.useRef();s.current||(s.current=new Audio(t)),R.useEffect(()=>{const f=s.current;f.src!==t&&(f.pause(),f.src=t,f.load(),i(0),n(!1))},[t]),R.useEffect(()=>{const f=s.current,p=()=>{f.duration&&i(f.currentTime/f.duration*100),o.current=requestAnimationFrame(p)},g=()=>{n(!0),o.current=requestAnimationFrame(p)},w=()=>{n(!1),cancelAnimationFrame(o.current)},_=()=>{n(!1),i(0),cancelAnimationFrame(o.current)};return f.addEventListener("play",g),f.addEventListener("pause",w),f.addEventListener("ended",_),()=>{f.pause(),f.removeEventListener("play",g),f.removeEventListener("pause",w),f.removeEventListener("ended",_),cancelAnimationFrame(o.current)}},[]);const l=f=>{f.stopPropagation();const p=s.current;e?p.pause():p.play()},d=f=>{f.stopPropagation();const p=s.current;p.pause(),p.currentTime=0,i(0)},h=f=>{f.stopPropagation();const p=a.current.getBoundingClientRect(),g=f.clientX-p.left,w=Math.max(0,Math.min(100,g/p.width*100)),_=s.current;_.duration&&(_.currentTime=w/100*_.duration,i(w))};return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.5rem",width:"100%",maxWidth:"250px"},onClick:f=>f.stopPropagation(),children:[u.jsx("button",{className:"neo-button icon-btn",onClick:l,style:{width:"30px",height:"30px",background:"var(--accent-soft)",color:"var(--accent-color)",borderRadius:"50%",flexShrink:0},children:e?u.jsx(X8,{size:12,fill:"currentColor"}):u.jsx(Pf,{size:12,fill:"currentColor"})}),u.jsx("button",{className:"neo-button icon-btn",onClick:d,style:{width:"30px",height:"30px",borderRadius:"50%",flexShrink:0},children:u.jsx(zg,{size:10,fill:"currentColor"})}),u.jsx("div",{ref:a,className:"neo-inset",onClick:h,style:{flex:1,height:"6px",borderRadius:"3px",overflow:"hidden",position:"relative",cursor:"pointer"},children:u.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${r}%`,background:"var(--accent-color)",transition:"width 0.1s linear"}})})]})},A9=t=>t?t.split(`
`).map((e,n)=>{const i=e.split(/(\*\*[^*]+\*\*)/g).map((s,o)=>s.startsWith("**")&&s.endsWith("**")?u.jsx("strong",{children:s.slice(2,-2)},o):s);return u.jsxs("span",{children:[i,n<t.split(`
`).length-1&&u.jsx("br",{})]},n)}):null,R9=({noteText:t,onStart:e})=>t?u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},"data-testid":"section-note-card",children:u.jsxs("div",{className:"neo-flat",style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsx("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:u.jsx("div",{style:{fontSize:"1.2rem",lineHeight:"1.6",color:"var(--text-color)",textAlign:"left"},children:A9(t)})})}),u.jsx("div",{style:{width:"100%",marginTop:"auto",display:"flex",justifyContent:"center",paddingTop:"1rem"},children:u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:e,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"var(--accent-color)",color:"white",border:"none",borderRadius:"1rem"},children:[u.jsx("span",{children:"Start Questions"}),u.jsx(zC,{size:20})]})})]})}):null,P9=({currentQuestion:t,isFlipped:e,setIsFlipped:n,setViewingImage:r,onRateMCQ:i,feedback:s,showSectionNotes:o=!0})=>{var h;const[a,l]=R.useState(!1);return R.useEffect(()=>{t&&t.isFirstInSection&&l(!1)},[t==null?void 0:t.id,t==null?void 0:t.isFirstInSection]),t?o&&t.isFirstInSection&&t.sectionNoteSegment&&!a?u.jsx(R9,{noteText:t.sectionNoteSegment,onStart:()=>l(!0)}):t.type==="mcq"?u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},"data-testid":"question-card-mcq",children:u.jsxs("div",{className:"neo-flat",style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsxs("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:[t.question.image&&u.jsx("img",{src:t.question.image,style:{maxWidth:"100%",maxHeight:"12rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1.5rem",cursor:"pointer"},alt:"Q",onClick:()=>r(t.question.image)}),u.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:"800",margin:0,textAlign:"left",lineHeight:"1.4"},children:t.question.text}),t.question.audio&&u.jsx("div",{style:{marginTop:"1rem"},children:u.jsx(Xp,{audioData:t.question.audio})})]})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.75rem",width:"100%",marginTop:"auto",paddingTop:"1rem"},children:(h=t.options)==null?void 0:h.map((f,p)=>{const g=s&&f.isCorrect;return u.jsx("button",{disabled:!!s,className:"neo-button",onClick:()=>i(f),style:{padding:"1rem",justifyContent:"flex-start",textAlign:"left",minHeight:"3.5rem",background:"var(--bg-color)",borderColor:g?"#22c55e":"var(--border-color)",boxShadow:g?"0 0 15px rgba(34, 197, 94, 0.4)":void 0,color:g?"#16a34a":void 0,opacity:s&&!g?.5:1,fontSize:"0.95rem",lineHeight:"1.3",fontWeight:g?"bold":"500"},children:f.text},f.id||p)})})]})}):u.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},"data-testid":"question-card-flashcard",children:u.jsx("div",{style:{perspective:"62.5rem",flex:1,minHeight:0,cursor:"pointer"},onClick:()=>{e&&n(!1)},children:u.jsxs(Fe.div,{style:{width:"100%",height:"100%",position:"relative",transformStyle:"preserve-3d"},animate:{rotateY:e?180:0},transition:{type:"spring",stiffness:260,damping:20},children:[u.jsxs("div",{className:"neo-flat",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",display:"flex",flexDirection:"column",padding:"1.5rem",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsxs("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:[t&&t.question.image&&u.jsx("img",{src:t.question.image,style:{maxWidth:"100%",maxHeight:"14rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1.5rem",cursor:"pointer"},alt:"Q",onClick:f=>{f.stopPropagation(),r(t.question.image)}}),u.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"800",textAlign:"left",lineHeight:"1.4"},children:t?t.question.text:"No more questions"}),t&&t.question.audio&&u.jsx("div",{style:{marginTop:"1.5rem"},onClick:f=>f.stopPropagation(),children:u.jsx(Xp,{audioData:t.question.audio})})]})}),u.jsx("div",{style:{textAlign:"center",opacity:.3,fontSize:"0.75rem",marginTop:"1rem",fontWeight:"bold"},children:'TAP "SHOW ANSWER" AT THE BOTTOM'})]}),u.jsxs("div",{className:"neo-flat",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",display:"flex",flexDirection:"column",padding:"1.5rem",overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,width:"100%",overflowY:"auto",paddingRight:"0.25rem"},className:"custom-scrollbar",children:u.jsxs("div",{style:{padding:"0.5rem 0.5rem 2rem"},children:[t&&t.answer.image&&u.jsx("img",{src:t.answer.image,style:{maxWidth:"100%",maxHeight:"14rem",objectFit:"contain",borderRadius:"0.75rem",marginBottom:"1.5rem",cursor:"pointer"},alt:"A",onClick:f=>{f.stopPropagation(),r(t.answer.image)}}),u.jsx("h2",{style:{fontSize:"1.6rem",color:"var(--accent-color)",fontWeight:"800",textAlign:"left",lineHeight:"1.4"},children:t?t.answer.text:""}),t&&t.answer.audio&&u.jsx("div",{style:{marginTop:"1.5rem"},onClick:f=>f.stopPropagation(),children:u.jsx(Xp,{audioData:t.answer.audio})})]})}),u.jsx("div",{style:{textAlign:"center",opacity:.3,fontSize:"0.75rem",marginTop:"1rem",fontWeight:"bold"},children:"RATE YOURSELF AT THE BOTTOM"})]})]})})}):null};let Jp=null;const Ro=()=>(Jp||(Jp=new(window.AudioContext||window.webkitAudioContext)),Jp),Xa=()=>localStorage.getItem("soundsEnabled")!=="false",Ba=(t,e,n,r,i=.1)=>{const s=Ro(),o=s.createOscillator(),a=s.createGain();o.type=t,o.frequency.setValueAtTime(e,n),o.connect(a),a.connect(s.destination),a.gain.setValueAtTime(0,n),a.gain.linearRampToValueAtTime(i,n+.05),a.gain.exponentialRampToValueAtTime(.001,n+r),o.start(n),o.stop(n+r)},D9=()=>{if(!Xa())return;const t=Ro();t.state==="suspended"&&t.resume();const e=t.currentTime;[523.25,659.25,783.99,1046.5].forEach((r,i)=>{Ba("sine",r,e+i*.1,.6,.1)})},N9=()=>{if(!Xa())return;const t=Ro();t.state==="suspended"&&t.resume();const e=t.currentTime,n=.5,r=t.sampleRate*n,i=t.createBuffer(1,r,t.sampleRate),s=i.getChannelData(0);for(let d=0;d<r;d++)s[d]=Math.random()*2-1;const o=t.createBufferSource();o.buffer=i;const a=t.createBiquadFilter();a.type="lowpass",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(4e3,e+n);const l=t.createGain();l.gain.setValueAtTime(.05,e),l.gain.linearRampToValueAtTime(.1,e+n/2),l.gain.linearRampToValueAtTime(0,e+n),o.connect(a),a.connect(l),l.connect(t.destination),o.start(e)},j9=()=>{if(!Xa())return;const t=Ro();t.state==="suspended"&&t.resume();const e=t.currentTime;Ba("sine",1975.53,e,.8,.15),Ba("sine",3951.07,e,.4,.05)},L9=()=>{if(!Xa())return;const t=Ro();t.state==="suspended"&&t.resume();const e=t.currentTime;[{freq:392,time:0,dur:.15},{freq:523.25,time:.15,dur:.15},{freq:659.25,time:.3,dur:.15},{freq:783.99,time:.45,dur:.4}].forEach(({freq:r,time:i,dur:s})=>{const o=t.createOscillator(),a=t.createGain(),l=t.createBiquadFilter();o.type="sawtooth",o.frequency.value=r,l.type="lowpass",l.Q.value=2,o.connect(l),l.connect(a),a.connect(t.destination);const d=e+i,h=d+s;l.frequency.setValueAtTime(500,d),l.frequency.linearRampToValueAtTime(3e3,d+.05),l.frequency.exponentialRampToValueAtTime(500,h),a.gain.setValueAtTime(0,d),a.gain.linearRampToValueAtTime(.2,d+.02),a.gain.linearRampToValueAtTime(.15,d+.05),a.gain.exponentialRampToValueAtTime(.001,h),o.start(d),o.stop(h+.1)})},M9=()=>{if(!Xa())return;const t=Ro();t.state==="suspended"&&t.resume();const e=t.currentTime;[{freq:523.25,delay:0,vol:.1},{freq:659.25,delay:.05,vol:.1},{freq:783.99,delay:.1,vol:.1},{freq:1046.5,delay:.15,vol:.08}].forEach(({freq:r,delay:i,vol:s})=>{Ba("sine",r,e+i,1,s)})},V9=()=>{if(!Xa())return;const t=Ro();t.state==="suspended"&&t.resume();const e=t.currentTime;Ba("triangle",440,e,.3,.04),Ba("sine",554.37,e,.3,.04)},O9=({isFlipped:t,currentQuestion:e,isRecording:n,recordedAudio:r,isPlayingRecorded:i,startRecording:s,stopRecording:o,deleteRecording:a,toggleRecordedPlayback:l,setIsFlipped:d,handleRating:h,feedback:f})=>!e||e.type==="mcq"?null:t?f?null:u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",minHeight:"5rem",justifyContent:"center"},children:u.jsx(Sn,{mode:"wait",children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%"},children:[u.jsxs("div",{className:"neo-flat",style:{padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",borderRadius:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"0.6rem",height:"0.6rem",borderRadius:"50%",background:"var(--accent-color)",opacity:.6}}),u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.7},children:"SELECT MATCHING ANSWER"})]}),u.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:r&&u.jsx("button",{className:"neo-button icon-btn",onClick:l,style:{color:"var(--accent-color)",width:"2.25rem",height:"2.25rem"},children:i?u.jsx(zg,{size:16,fill:"currentColor"}):u.jsx(Pf,{size:16,fill:"currentColor"})})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",width:"100%",justifyContent:"center"},children:[u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#fee2e2",color:"#dc2626",border:"1px solid #fecaca",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(-1)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Wrong"})}),u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#f3f4f6",color:"#4b5563",border:"1px solid #e5e7eb",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(0)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Unsure"})}),u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#e0f2fe",color:"#0284c7",border:"1px solid #bae6fd",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(1)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Partly"})}),u.jsx("button",{className:"neo-button",style:{flex:1,flexDirection:"column",padding:"0.75rem 0.25rem",background:"#dcfce7",color:"#16a34a",border:"1px solid #bbf7d0",minWidth:"4rem",borderRadius:"0.75rem",minHeight:"3.75rem"},onClick:p=>{p.stopPropagation(),h(2)},children:u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"By heart"})})]})]})})}):u.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{className:"neo-flat",style:{padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",borderRadius:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"0.6rem",height:"0.6rem",borderRadius:"50%",background:n?"#ff4444":"#ccc",boxShadow:n?"0 0 0.5rem #ff4444":"none",animation:n?"pulse 1.5s infinite":"none"}}),u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold",opacity:.7},children:n?"RECORDING ANSWER...":r?"ANSWER RECORDED":"RECORD YOUR ANSWER"})]}),u.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:!n&&!r?u.jsx("button",{className:"neo-button icon-btn",onClick:s,style:{color:"var(--accent-color)",width:"2.25rem",height:"2.25rem"},children:u.jsx(bh,{size:18})}):n?u.jsx("button",{className:"neo-button icon-btn",onClick:o,style:{color:"#ff4444",width:"2.25rem",height:"2.25rem"},children:u.jsx(zg,{size:18,fill:"currentColor"})}):u.jsx(u.Fragment,{children:u.jsx("button",{className:"neo-button icon-btn",onClick:a,style:{color:"#ff4444",width:"2.25rem",height:"2.25rem"},children:u.jsx(fi,{size:18})})})})]}),u.jsx("button",{className:"neo-button neo-glow-blue",style:{width:"100%",justifyContent:"center",padding:"1rem",fontSize:"1.1rem",background:"var(--accent-color)",color:"white",minHeight:"3.75rem",borderRadius:"1rem"},onClick:()=>{N9(),d(!0),r&&setTimeout(()=>l(),300)},children:"Show Answer"})]});var hv={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;try{var M=new OffscreenCanvas(1,1),D=M.getContext("2d");D.fillRect(0,0,1,1);var W=M.transferToImageBitmap();D.createPattern(W,"no-repeat")}catch{return!1}return!0}();function l(){}function d(M){var D=n.exports.Promise,W=D!==void 0?D:e.Promise;return typeof W=="function"?new W(M):(M(l,l),null)}var h=function(M,D){return{transform:function(W){if(M)return W;if(D.has(W))return D.get(W);var Z=new OffscreenCanvas(W.width,W.height),ee=Z.getContext("2d");return ee.drawImage(W,0,0),D.set(W,Z),Z},clear:function(){D.clear()}}}(a,new Map),f=function(){var M=Math.floor(16.666666666666668),D,W,Z={},ee=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(D=function(re){var B=Math.random();return Z[B]=requestAnimationFrame(function H(ie){ee===ie||ee+M-1<ie?(ee=ie,delete Z[B],re()):Z[B]=requestAnimationFrame(H)}),B},W=function(re){Z[re]&&cancelAnimationFrame(Z[re])}):(D=function(re){return setTimeout(re,M)},W=function(re){return clearTimeout(re)}),{frame:D,cancel:W}}(),p=function(){var M,D,W={};function Z(ee){function re(B,H){ee.postMessage({options:B||{},callback:H})}ee.init=function(H){var ie=H.transferControlToOffscreen();ee.postMessage({canvas:ie},[ie])},ee.fire=function(H,ie,pe){if(D)return re(H,null),D;var Ee=Math.random().toString(36).slice(2);return D=d(function(me){function ke(q){q.data.callback===Ee&&(delete W[Ee],ee.removeEventListener("message",ke),D=null,h.clear(),pe(),me())}ee.addEventListener("message",ke),re(H,Ee),W[Ee]=ke.bind(null,{data:{callback:Ee}})}),D},ee.reset=function(){ee.postMessage({reset:!0});for(var H in W)W[H](),delete W[H]}}return function(){if(M)return M;if(!r&&s){var ee=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{M=new Worker(URL.createObjectURL(new Blob([ee])))}catch(re){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",re),null}Z(M)}return M}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function w(M,D){return D?D(M):M}function _(M){return M!=null}function k(M,D,W){return w(M&&_(M[D])?M[D]:g[D],W)}function S(M){return M<0?0:Math.floor(M)}function v(M,D){return Math.floor(Math.random()*(D-M))+M}function x(M){return parseInt(M,16)}function j(M){return M.map(L)}function L(M){var D=String(M).replace(/[^0-9a-f]/gi,"");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:x(D.substring(0,2)),g:x(D.substring(2,4)),b:x(D.substring(4,6))}}function O(M){var D=k(M,"origin",Object);return D.x=k(D,"x",Number),D.y=k(D,"y",Number),D}function E(M){M.width=document.documentElement.clientWidth,M.height=document.documentElement.clientHeight}function T(M){var D=M.getBoundingClientRect();M.width=D.width,M.height=D.height}function b(M){var D=document.createElement("canvas");return D.style.position="fixed",D.style.top="0px",D.style.left="0px",D.style.pointerEvents="none",D.style.zIndex=M,D}function A(M,D,W,Z,ee,re,B,H,ie){M.save(),M.translate(D,W),M.rotate(re),M.scale(Z,ee),M.arc(0,0,1,B,H,ie),M.restore()}function P(M){var D=M.angle*(Math.PI/180),W=M.spread*(Math.PI/180);return{x:M.x,y:M.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:M.startVelocity*.5+Math.random()*M.startVelocity,angle2D:-D+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:M.color,shape:M.shape,tick:0,totalTicks:M.ticks,decay:M.decay,drift:M.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:M.gravity*3,ovalScalar:.6,scalar:M.scalar,flat:M.flat}}function N(M,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var W=D.tick++/D.totalTicks,Z=D.x+D.random*D.tiltCos,ee=D.y+D.random*D.tiltSin,re=D.wobbleX+D.random*D.tiltCos,B=D.wobbleY+D.random*D.tiltSin;if(M.fillStyle="rgba("+D.color.r+", "+D.color.g+", "+D.color.b+", "+(1-W)+")",M.beginPath(),o&&D.shape.type==="path"&&typeof D.shape.path=="string"&&Array.isArray(D.shape.matrix))M.fill(ne(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(re-Z)*.1,Math.abs(B-ee)*.1,Math.PI/10*D.wobble));else if(D.shape.type==="bitmap"){var H=Math.PI/10*D.wobble,ie=Math.abs(re-Z)*.1,pe=Math.abs(B-ee)*.1,Ee=D.shape.bitmap.width*D.scalar,me=D.shape.bitmap.height*D.scalar,ke=new DOMMatrix([Math.cos(H)*ie,Math.sin(H)*ie,-Math.sin(H)*pe,Math.cos(H)*pe,D.x,D.y]);ke.multiplySelf(new DOMMatrix(D.shape.matrix));var q=M.createPattern(h.transform(D.shape.bitmap),"no-repeat");q.setTransform(ke),M.globalAlpha=1-W,M.fillStyle=q,M.fillRect(D.x-Ee/2,D.y-me/2,Ee,me),M.globalAlpha=1}else if(D.shape==="circle")M.ellipse?M.ellipse(D.x,D.y,Math.abs(re-Z)*D.ovalScalar,Math.abs(B-ee)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):A(M,D.x,D.y,Math.abs(re-Z)*D.ovalScalar,Math.abs(B-ee)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape==="star")for(var ce=Math.PI/2*3,Ce=4*D.scalar,at=8*D.scalar,Ge=D.x,Ke=D.y,_t=5,Ne=Math.PI/_t;_t--;)Ge=D.x+Math.cos(ce)*at,Ke=D.y+Math.sin(ce)*at,M.lineTo(Ge,Ke),ce+=Ne,Ge=D.x+Math.cos(ce)*Ce,Ke=D.y+Math.sin(ce)*Ce,M.lineTo(Ge,Ke),ce+=Ne;else M.moveTo(Math.floor(D.x),Math.floor(D.y)),M.lineTo(Math.floor(D.wobbleX),Math.floor(ee)),M.lineTo(Math.floor(re),Math.floor(B)),M.lineTo(Math.floor(Z),Math.floor(D.wobbleY));return M.closePath(),M.fill(),D.tick<D.totalTicks}function I(M,D,W,Z,ee){var re=D.slice(),B=M.getContext("2d"),H,ie,pe=d(function(Ee){function me(){H=ie=null,B.clearRect(0,0,Z.width,Z.height),h.clear(),ee(),Ee()}function ke(){r&&!(Z.width===i.width&&Z.height===i.height)&&(Z.width=M.width=i.width,Z.height=M.height=i.height),!Z.width&&!Z.height&&(W(M),Z.width=M.width,Z.height=M.height),B.clearRect(0,0,Z.width,Z.height),re=re.filter(function(q){return N(B,q)}),re.length?H=f.frame(ke):me()}H=f.frame(ke),ie=me});return{addFettis:function(Ee){return re=re.concat(Ee),pe},canvas:M,promise:pe,reset:function(){H&&f.cancel(H),ie&&ie()}}}function K(M,D){var W=!M,Z=!!k(D||{},"resize"),ee=!1,re=k(D,"disableForReducedMotion",Boolean),B=s&&!!k(D||{},"useWorker"),H=B?p():null,ie=W?E:T,pe=M&&H?!!M.__confetti_initialized:!1,Ee=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,me;function ke(ce,Ce,at){for(var Ge=k(ce,"particleCount",S),Ke=k(ce,"angle",Number),_t=k(ce,"spread",Number),Ne=k(ce,"startVelocity",Number),Qe=k(ce,"decay",Number),Gn=k(ce,"gravity",Number),Rr=k(ce,"drift",Number),an=k(ce,"colors",j),lr=k(ce,"ticks",Number),we=k(ce,"shapes"),et=k(ce,"scalar"),Be=!!k(ce,"flat"),ye=O(ce),Ae=Ge,tt=[],Ye=M.width*ye.x,An=M.height*ye.y;Ae--;)tt.push(P({x:Ye,y:An,angle:Ke,spread:_t,startVelocity:Ne,color:an[Ae%an.length],shape:we[v(0,we.length)],ticks:lr,decay:Qe,gravity:Gn,drift:Rr,scalar:et,flat:Be}));return me?me.addFettis(tt):(me=I(M,tt,ie,Ce,at),me.promise)}function q(ce){var Ce=re||k(ce,"disableForReducedMotion",Boolean),at=k(ce,"zIndex",Number);if(Ce&&Ee)return d(function(Ne){Ne()});W&&me?M=me.canvas:W&&!M&&(M=b(at),document.body.appendChild(M)),Z&&!pe&&ie(M);var Ge={width:M.width,height:M.height};H&&!pe&&H.init(M),pe=!0,H&&(M.__confetti_initialized=!0);function Ke(){if(H){var Ne={getBoundingClientRect:function(){if(!W)return M.getBoundingClientRect()}};ie(Ne),H.postMessage({resize:{width:Ne.width,height:Ne.height}});return}Ge.width=Ge.height=null}function _t(){me=null,Z&&(ee=!1,e.removeEventListener("resize",Ke)),W&&M&&(document.body.contains(M)&&document.body.removeChild(M),M=null,pe=!1)}return Z&&!ee&&(ee=!0,e.addEventListener("resize",Ke,!1)),H?H.fire(ce,Ge,_t):ke(ce,Ge,_t)}return q.reset=function(){H&&H.reset(),me&&me.reset()},q}var fe;function Y(){return fe||(fe=K(null,{useWorker:!0,resize:!0})),fe}function ne(M,D,W,Z,ee,re,B){var H=new Path2D(M),ie=new Path2D;ie.addPath(H,new DOMMatrix(D));var pe=new Path2D;return pe.addPath(ie,new DOMMatrix([Math.cos(B)*ee,Math.sin(B)*ee,-Math.sin(B)*re,Math.cos(B)*re,W,Z])),pe}function U(M){if(!o)throw new Error("path confetti are not supported in this browser");var D,W;typeof M=="string"?D=M:(D=M.path,W=M.matrix);var Z=new Path2D(D),ee=document.createElement("canvas"),re=ee.getContext("2d");if(!W){for(var B=1e3,H=B,ie=B,pe=0,Ee=0,me,ke,q=0;q<B;q+=2)for(var ce=0;ce<B;ce+=2)re.isPointInPath(Z,q,ce,"nonzero")&&(H=Math.min(H,q),ie=Math.min(ie,ce),pe=Math.max(pe,q),Ee=Math.max(Ee,ce));me=pe-H,ke=Ee-ie;var Ce=10,at=Math.min(Ce/me,Ce/ke);W=[at,0,0,at,-Math.round(me/2+H)*at,-Math.round(ke/2+ie)*at]}return{type:"path",path:D,matrix:W}}function X(M){var D,W=1,Z="#000000",ee='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof M=="string"?D=M:(D=M.text,W="scalar"in M?M.scalar:W,ee="fontFamily"in M?M.fontFamily:ee,Z="color"in M?M.color:Z);var re=10*W,B=""+re+"px "+ee,H=new OffscreenCanvas(re,re),ie=H.getContext("2d");ie.font=B;var pe=ie.measureText(D),Ee=Math.ceil(pe.actualBoundingBoxRight+pe.actualBoundingBoxLeft),me=Math.ceil(pe.actualBoundingBoxAscent+pe.actualBoundingBoxDescent),ke=2,q=pe.actualBoundingBoxLeft+ke,ce=pe.actualBoundingBoxAscent+ke;Ee+=ke+ke,me+=ke+ke,H=new OffscreenCanvas(Ee,me),ie=H.getContext("2d"),ie.font=B,ie.fillStyle=Z,ie.fillText(D,q,ce);var Ce=1/W;return{type:"bitmap",bitmap:H.transferToImageBitmap(),matrix:[Ce,0,0,Ce,-Ee*Ce/2,-me*Ce/2]}}n.exports=function(){return Y().apply(this,arguments)},n.exports.reset=function(){Y().reset()},n.exports.create=K,n.exports.shapeFromPath=U,n.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),hv,!1);const F9=hv.exports;hv.exports.create;const U9=["Great job!","Very good!","Super!","You're on fire!","Excellent work!","Spot on!","You've got this by heart!","Brilliant!","Fantastic!","Wonderful progress!","You're doing amazing!","Perfectly done!","That's the spirit!","Keep it up, champion!","You're a natural!","Masterful!","Impressive memory!","You nailed it!","Outstanding!","Way to go!","You're crushing this!","Incredible focus!","Gold star for you!","You're making this look easy!","Top notch!","Simply superb!","Bravo!","You're unstoppable!","Pure genius!","Love that confidence!","Right on the money!","You're a star student!","Marvelous!","High five!","You're getting so good at this!","That's exactly right!","You're a master in the making!","Spectacular!","So proud of your progress!","You're really shining today!","Unbeatable!","You've mastered this one!","Clear and confident - well done!","Your hard work is paying off!","Solid effort, perfect result!","Keep that momentum going!","You're built for this!","A-plus performance!","You're a knowledge wizard!","Victory is yours!"],z9=["Give it another careful read; well revisit this question.","Take your time and read it again  Ill ask it once more.","No worries! Let's try this one again in a bit.","Almost there! A quick review will help it stick.","Let's keep this one in the loop for a little longer.","Practice makes perfect! We'll come back to this.","Don't lose heart, let's give it another look together.","Every mistake is a step toward mastery. Reviewing now!","Slow and steady wins the race. Read it once more.","I'll ask this again soon to help you remember.","It's okay! Even the best need a second look sometimes.","Let's refine this one. Read carefully and we'll retry.","A little more focus here will do wonders.","Let's polish this answer together. See you again soon!","Deep breaths! Read it again, and we'll revisit.","Learning takes time. Let's keep this one active.","You're doing great, just need to master this specific one.","Give it one more glance. I'll be back with this question.","Let's solidify this. A quick revisit is coming up.","Don't rush! Read it again to let it sink in.","We'll get this one right next time, I promise!","Keep your chin up! Let's re-study this card.","It's just a hurdle, not a wall. Re-reading helps!","Let's refresh your memory on this one shortly.","Stay positive! We'll tackle this again very soon.","A quick recap, and you'll have it in no time.","Let's keep this card in the 'must-know' pile for now.","Reviewing is the key to success. Let's do it again.","One more read-through will make all the difference.","Persistence pays off! We'll cycle back to this.","It's trial and error. Let's try one more trial.","Let's give this one a second chance to shine.","Focus on the details this time. Re-visiting shortly!","You're learning! Let's re-confirm this one later.","A bit more practice is all you need here.","I believe in you! Let's re-read and try again.","Let's not let this one slip away. Re-asking soon!","Each review makes your brain stronger. Ready for round 2?","Patience is a virtue in learning. Re-reading now.","Let's keep the conversation going on this card.","Small steps lead to big jumps. Let's re-step this one.","Almost caught it! Let's throw the question again later.","It's on the tip of your tongue! Let's review to be sure.","Constructive repetition! We'll be back for this.","Let's strengthen this connection in your memory.","Honesty is the first step to learning. Re-trying soon!","A moment of focus now saves a lot of time later.","Let's bridge the gap on this one. Re-reading...","Your friend is here to help! Let's look at this again.","Final check is coming soon. Give it a good read now!"],B9=t=>{const e=t==="mastered"?U9:z9;return e[Math.floor(Math.random()*e.length)]},$9=({lesson:t,user:e,onUpdate:n,onClose:r,showAlert:i,onReviewStart:s})=>{(t.questions||t.cards||[]).some(we=>we.lastRating!==void 0);const a=t.lastSessionIndex!==void 0&&t.lastSessionIndex>0,[l,d]=R.useState(!0),[h,f]=R.useState(!1),[p,g]=R.useState(0),[w,_]=R.useState(!1),[k,S]=R.useState(0),[v,x]=R.useState([]),[j,L]=R.useState([]),[O,E]=R.useState(null),[T,b]=R.useState(null),[A,P]=R.useState(null),[N,I]=R.useState(0),[K,fe]=R.useState({}),[Y,ne]=R.useState(0),[U,X]=R.useState(0),[M,D]=R.useState(t.showSectionNotes!==void 0?t.showSectionNotes:!0),[W,Z]=R.useState(!1),[ee,re]=R.useState(null),[B,H]=R.useState(!1),ie=R.useRef(null),pe=R.useRef(null),Ee=R.useRef([]),me=R.useRef(!1),ke=j[p],q=t.questions||t.cards||[],ce=q.filter(we=>we.lastRating!==void 0&&we.lastRating<2).length,Ce=R.useCallback(()=>{if(U<1||t.isPublic||me.current)return;me.current=!0;const we=q.map(Be=>{var tt;const ye=Be.id||((tt=Be.question)==null?void 0:tt.text),Ae=K[ye];return Ae!==void 0?{...Be,lastRating:Ae}:Be}),et={...t,questions:we,lastSessionIndex:p,partialReviewDate:new Date().toISOString(),showSectionNotes:M};n(et)},[t,q,K,U,p,M,n]),at=R.useCallback(()=>{Ce(),r()},[Ce,r]);R.useEffect(()=>{v.length>0&&s&&s()},[v,s]),R.useEffect(()=>()=>{ie.current&&(ie.current.pause(),ie.current=null)},[]),R.useEffect(()=>{const we=()=>{U>=1&&!t.isPublic&&!me.current&&Ce()};return window.addEventListener("beforeunload",we),()=>{window.removeEventListener("beforeunload",we),U>=1&&!t.isPublic&&!me.current&&Ce()}},[U,t.isPublic,Ce]),R.useEffect(()=>{!l&&!h&&j.length>0&&D9()},[l,h,j.length]);const Ge=R.useCallback((we,et={})=>{const{resumeFromIndex:Be=0}=et,ye=[...t.questions||t.cards||[]];ye.sort((Ye,An)=>{const yn=Ye.lastRating!==void 0?Ye.lastRating:-2,Pr=An.lastRating!==void 0?An.lastRating:-2;return yn-Pr});let Ae=[];we==="all"||we==="resume"?Ae=ye:we==="difficult"&&(Ae=ye.filter(Ye=>Ye.lastRating!==void 0&&Ye.lastRating<2));const tt=we==="resume"?Math.min(Be,Ae.length-1):0;if(L(Ae),ne(Ae.length),d(!1),f(!1),g(tt),x([]),E(null),I(we==="resume"?tt:0),fe({}),P(null),X(0),me.current=!1,we==="all"&&t.lastSessionIndex!==void 0){const Ye={...t,lastSessionIndex:void 0};n(Ye)}},[t,n]),Ke=we=>{const et=[1,3,7,30];return we>=et.length-1?30:et[we+1]},_t=async()=>{const et=k===2;P(null);const Be=et?N+1:N;if(et&&I(Be),Be===Y){const Ye=j.slice(0,Y).map(oe=>{const qe=oe.id||oe.question.text;return K[qe]??0}).reduce((oe,qe)=>oe+qe,0),An=Y*2,yn=Y>0?(Ye/Y).toFixed(1):0,Pr=Ye===An,ei=t.questions||t.cards||[],Kn=ei.filter(oe=>{const qe=oe.id||oe.question.text,ze=K[qe];return ze!==void 0&&ze<2});if(E({avg:yn,totalMarks:Ye,maxPossibleMarks:An,fullMarks:Pr,lowRatedQuestions:Kn}),L9(),Pr&&F9({particleCount:200,spread:160,origin:{y:.6},colors:["#FFD700","#FF4500","#00FF7F","#00BFFF","#FF1493"],zIndex:2001}),t.isPublic||Y<ei.length)return;const G=ei.map(oe=>{const qe=oe.id||oe.question.text,ze=K[qe];return ze!==void 0?{...oe,lastRating:ze}:oe}),ae=t.reviewStage||-1;let he=new Date,J=ae;if(yn>=1.5){J=ae+1;const oe=Ke(J);he.setDate(he.getDate()+oe)}else J=-1;const _e={...t,questions:G,lastMarks:Ye,questionCountAtLastReview:Y,lastReviewed:new Date().toLocaleDateString(),nextReview:he.toISOString(),reviewStage:J};n(_e)}else _(!1),S(0),an(),setTimeout(()=>{g(p+1)},100)},Ne=we=>{L(we),ne(we.length),g(0),_(!1),S(0),x([]),E(null),I(0),fe({}),P(null),an()},Qe=(we,et=null)=>{const Be=we===2;Be?M9():we===1?V9():j9(),S(we);const Ae=ke.id||ke.question.text;K[Ae]===void 0&&fe(Ye=>({...Ye,[Ae]:we})),Be||L(Ye=>[...Ye,ke]);const tt=et||B9(Be?"mastered":"retry");P({message:tt,type:Be?"success":"retry"}),X(Ye=>Ye+1)},Gn=async()=>{try{const we=await navigator.mediaDevices.getUserMedia({audio:!0}),et=new MediaRecorder(we);pe.current=et,Ee.current=[],et.ondataavailable=Be=>{Be.data.size>0&&Ee.current.push(Be.data)},et.onstop=()=>{const Be=new Blob(Ee.current,{type:"audio/webm"}),ye=URL.createObjectURL(Be);re(ye),ie.current=new Audio(ye),ie.current.onended=()=>H(!1),we.getTracks().forEach(Ae=>Ae.stop())},et.start(),Z(!0)}catch{i("Microphone access denied or not available.")}},Rr=()=>{pe.current&&W&&(pe.current.stop(),Z(!1))},an=()=>{ee&&(ie.current&&(ie.current.pause(),ie.current=null),URL.revokeObjectURL(ee),re(null),H(!1))},lr=we=>{we&&we.stopPropagation(),ie.current&&(B?(ie.current.pause(),H(!1)):(ie.current.play(),H(!0)))};return{showStartScreen:l,showModeSelection:h,currentIndex:p,currentQuestion:ke,isFlipped:w,rating:k,sessionResult:O,viewingImage:T,feedback:A,masteredCount:N,totalOriginalQuestions:Y,studyQuestions:j,showSectionNotes:M,hasInterruptedSession:a,lessonTitle:t.title||"Untitled Lesson",lastSessionIndex:t.lastSessionIndex,handleStartReview:Ge,handleNextSession:_t,restartSession:Ne,handleRating:Qe,setIsFlipped:_,setViewingImage:b,handleCloseWithSave:at,setShowSectionNotes:D,isRecording:W,recordedAudio:ee,isPlayingRecorded:B,startRecording:Gn,stopRecording:Rr,deleteRecording:an,toggleRecordedPlayback:lr,difficultQuestionsCount:ce}},W9=({lesson:t,user:e,onClose:n,onEdit:r,onUpdate:i,showAlert:s,userCoins:o,onDeductCoins:a,onReviewStart:l,displayName:d})=>{var H;const{showStartScreen:h,showModeSelection:f,currentIndex:p,currentQuestion:g,isFlipped:w,rating:_,sessionResult:k,viewingImage:S,feedback:v,masteredCount:x,totalOriginalQuestions:j,studyQuestions:L,difficultQuestionsCount:O,handleStartReview:E,handleNextSession:T,restartSession:b,handleRating:A,setIsFlipped:P,setViewingImage:N,isRecording:I,recordedAudio:K,isPlayingRecorded:fe,startRecording:Y,stopRecording:ne,deleteRecording:U,toggleRecordedPlayback:X,handleCloseWithSave:M,showSectionNotes:D,setShowSectionNotes:W,hasInterruptedSession:Z,lessonTitle:ee,lastSessionIndex:re}=$9({lesson:t,user:e,onUpdate:i,onClose:n,showAlert:s,onReviewStart:l}),B=(t.questions||t.cards||[]).length;return h?u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:u.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(Fe.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"neo-flat",style:{width:"100%",maxWidth:"420px",padding:"2rem",position:"relative"},children:[u.jsx(Ar,{onClose:M,theme:"light"}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("div",{style:{width:"5rem",height:"5rem",background:"linear-gradient(135deg, var(--accent-color), var(--primary-color))",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem",color:"white",boxShadow:"0 8px 20px rgba(var(--accent-rgb), 0.3)"},children:u.jsx(Eh,{size:36})}),u.jsx("h2",{style:{fontSize:"1.6rem",fontWeight:"bold",marginBottom:"0.5rem",background:"linear-gradient(135deg, var(--text-color), var(--accent-color))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:ee}),u.jsxs("p",{style:{opacity:.6,fontSize:"0.95rem"},children:[B," questions"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.875rem"},children:[Z&&re>0&&u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:()=>E("resume",{resumeFromIndex:re}),style:{padding:"1.1rem 1rem",display:"flex",alignItems:"center",gap:"1rem",justifyContent:"flex-start",background:"var(--accent-color)",color:"white",border:"none"},children:[u.jsx("div",{style:{padding:"0.6rem",background:"rgba(255,255,255,0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Pf,{size:22,fill:"white"})}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("div",{style:{fontWeight:"bold",fontSize:"1.05rem"},children:"Continue Where You Left"}),u.jsxs("div",{style:{fontSize:"0.8rem",opacity:.85},children:["Resume from question ",re+1]})]})]}),u.jsxs("button",{className:"neo-button",onClick:()=>E("all"),style:{padding:"1.1rem 1rem",display:"flex",alignItems:"center",gap:"1rem",border:"2px solid var(--border-color)",justifyContent:"flex-start"},children:[u.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",overflow:"hidden",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--accent-soft)"},children:u.jsx(e9,{size:22,color:"var(--accent-color)"})}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("div",{style:{fontWeight:"bold",fontSize:"1.05rem"},children:Z?"Start From Beginning":"Start Review"}),u.jsxs("div",{style:{fontSize:"0.8rem",opacity:.6},children:["Go through all ",B," questions"]})]})]}),u.jsxs("button",{className:"neo-button",disabled:O===0,onClick:()=>E("difficult"),style:{padding:"1.1rem 1rem",display:"flex",alignItems:"center",gap:"1rem",border:"2px solid var(--border-color)",justifyContent:"flex-start",opacity:O===0?.5:1},children:[u.jsx("div",{style:{padding:"0.6rem",background:"#fee2e2",borderRadius:"12px",color:"#dc2626"},children:u.jsx(FC,{size:22})}),u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("div",{style:{fontWeight:"bold",fontSize:"1.05rem"},children:"Tough Cards Only"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:O>0?`Focus on ${O} challenging question${O>1?"s":""}`:"No tough cards yet"})]})]})]}),u.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--bg-color)",borderRadius:"1rem",boxShadow:"inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light)"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[D?u.jsx($8,{size:20,color:"var(--accent-color)"}):u.jsx(B8,{size:20,style:{opacity:.5}}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem"},children:"Show Important Notes"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:"Display section notes before questions"})]})]}),u.jsx("button",{onClick:()=>W(!D),style:{width:"52px",height:"28px",borderRadius:"14px",border:"none",background:D?"var(--accent-color)":"var(--shadow-dark)",position:"relative",cursor:"pointer",transition:"background 0.3s ease",boxShadow:D?"0 0 12px rgba(var(--accent-rgb), 0.5)":"inset 2px 2px 4px var(--shadow-dark)"},children:u.jsx(Fe.div,{animate:{x:D?24:2},transition:{type:"spring",stiffness:500,damping:30},style:{width:"22px",height:"22px",borderRadius:"50%",background:"white",position:"absolute",top:"3px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]})})]})})}):(!L||L.length===0)&&!k?u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:u.jsxs(Fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"400px",padding:"2.5rem",display:"flex",flexDirection:"column",gap:"2rem",textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[u.jsx("div",{className:"neo-inset",style:{padding:"20px",borderRadius:"50%",color:"#94a3b8"},children:u.jsx(Fg,{size:48})}),u.jsx("h2",{style:{fontSize:"1.5rem"},children:"No Questions Found"}),u.jsx("p",{style:{opacity:.6},children:"This lesson appears to be empty. Would you like to add some questions?"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("button",{className:"neo-button neo-glow-blue",style:{justifyContent:"center",padding:"1rem"},onClick:r,children:[u.jsx(uv,{size:18,style:{marginRight:"8px"}})," Add Questions Now"]}),u.jsx("button",{className:"neo-button",style:{justifyContent:"center",opacity:.6},onClick:n,children:"Close"})]})]},"empty-lesson")}):k?u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"max(1rem, 2vh)"},children:u.jsxs(Fe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"420px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",textAlign:"center",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsx("h2",{style:{fontSize:"1.8rem"},children:"Study Summary"}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.5rem",borderRadius:"24px"},children:[u.jsx("div",{style:{fontSize:"0.9rem",opacity:.6,marginBottom:"0.5rem",fontWeight:"bold"},children:"SESSION MARKS"}),u.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",color:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[k.totalMarks," ",u.jsxs("span",{style:{fontSize:"1.5rem",opacity:.5},children:["/ ",k.maxPossibleMarks]})]})]}),k.fullMarks?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",width:"100%"},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Fe.div,{initial:{scale:0},animate:{scale:[0,1.2,1],rotate:[0,-10,10,0]},transition:{duration:.8,ease:"backOut"},children:u.jsx(Eh,{size:64,color:"var(--accent-color)"})}),[...Array(8)].map((ie,pe)=>u.jsx(Fe.div,{initial:{opacity:0,x:0,y:0,scale:0},animate:{opacity:[0,1,0],x:(Math.random()-.5)*100,y:(Math.random()-.5)*100-50,scale:[0,1,0]},transition:{duration:1.5,delay:.5+Math.random()*.5,repeat:1/0,repeatDelay:1},style:{position:"absolute",top:"50%",left:"50%",zIndex:0,pointerEvents:"none"},children:u.jsx(qC,{size:20,color:["#FFD700","#FF4500","#00FF7F"][Math.floor(Math.random()*3)]})},pe))]}),u.jsx(Fe.img,{src:C9,alt:"Congratulations",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12,delay:.3},style:{maxWidth:"80%",height:"auto",borderRadius:"12px"}}),u.jsx("div",{className:"neo-inset",style:{padding:"1.5rem",color:"var(--accent-color)",borderRadius:"16px",width:"100%",textAlign:"center"},children:u.jsxs("p",{style:{fontWeight:"bold",fontSize:"1.2rem",lineHeight:"1.6"},children:["Congratulations. ",u.jsx("br",{}),"By royal decree, I name you Master of ",u.jsx("br",{}),u.jsx("span",{style:{color:"var(--accent-color)",fontSize:"1.4rem"},children:t.title})]})})]}):u.jsxs("div",{style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"16px",border:"1px solid #3b82f6"},children:[u.jsx("p",{style:{fontWeight:"bold",color:"#1d4ed8",marginBottom:"0.5rem",fontSize:"1.1rem"},children:"Don't give up!"}),u.jsxs("p",{style:{opacity:.8,fontSize:"0.95rem"},children:["Mastery takes patience. ",u.jsx("br",{}),"Why not try the tough questions again right now?"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"0.5rem"},children:[!k.fullMarks&&u.jsxs("button",{className:"neo-button",style:{justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none",padding:"1rem"},onClick:()=>b(k.lowRatedQuestions),children:["Focus on Weak Questions (",k.lowRatedQuestions.length,")"]}),u.jsx("button",{className:"neo-button",style:{justifyContent:"center",padding:"1rem",background:k.fullMarks?"var(--accent-color)":"transparent",color:k.fullMarks?"white":"inherit",border:k.fullMarks?"none":"1px solid var(--border-color)"},onClick:()=>b(t.questions||t.cards||[]),children:"Try All Questions Again"}),u.jsx("button",{className:"neo-button",style:{justifyContent:"center",padding:"1rem",opacity:.7},onClick:n,children:"Done for now"})]})]},"session-result")}):u.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(1.2rem)",WebkitBackdropFilter:"blur(1.2rem)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:0,height:"100vh",overflow:"hidden"},children:[u.jsx(Sn,{mode:"wait",children:u.jsxs("div",{className:"review-container",style:{width:"100%",maxWidth:"35rem",height:"100%",display:"flex",flexDirection:"column",position:"relative",padding:"10px 1rem",background:"var(--bg-color)"},children:[u.jsx(k9,{currentIndex:p,totalQuestions:L.length,masteredCount:x,totalOriginalQuestions:j,rating:_,onClose:M,user:e,lesson:t}),u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"10px 0",position:"relative",minHeight:0},children:u.jsx(Sn,{mode:"wait",children:u.jsx(Fe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:u.jsx(P9,{currentQuestion:g,isFlipped:w,setIsFlipped:P,setViewingImage:N,showSectionNotes:D,onRateMCQ:ie=>{var pe;if(ie!=null&&ie.isCorrect)A(2);else{const Ee=((pe=g.options.find(me=>me.isCorrect))==null?void 0:pe.text)||"Unknown";A(0,`Incorrect. The right answer is "${Ee}". I shall ask this again.`)}},feedback:v})},g?g.id||((H=g.question)==null?void 0:H.text):"end")})}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",paddingBottom:"0"},children:u.jsx(Sn,{mode:"wait",children:v?u.jsxs(Fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"neo-flat",style:{width:"100%",padding:"1rem",borderRadius:"1.5rem",background:"var(--bg-color)",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem",border:"1px solid var(--border-color)",boxShadow:"var(--neo-box-shadow)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%"},children:[u.jsx("img",{src:dv,alt:"Guide",style:{width:"2rem",height:"2rem",borderRadius:"50%",flexShrink:0,border:"1.5px solid var(--accent-color)"}}),u.jsx("h3",{style:{fontSize:"0.9rem",color:v.type==="success"?"#16a34a":"#dc2626",margin:0,flex:1,fontWeight:"800"},children:v.message})]}),u.jsx("button",{className:"neo-button neo-glow-blue",onClick:T,style:{width:"100%",justifyContent:"center",padding:"1rem",fontSize:"1.1rem",background:v.type==="success"?"#16a34a":"var(--accent-color)",color:"white",fontWeight:"bold",borderRadius:"1rem",minHeight:"3.5rem"},children:"Next Question"})]},"feedback-actions"):u.jsx(O9,{isFlipped:w,currentQuestion:g,isRecording:I,recordedAudio:K,isPlayingRecorded:fe,startRecording:Y,stopRecording:ne,deleteRecording:U,toggleRecordedPlayback:X,setIsFlipped:P,handleRating:(ie,pe)=>A(ie,pe),feedback:v})})})]})}),u.jsx(Sn,{children:S&&u.jsx(JC,{imageUrl:S,onClose:()=>N(null)})})]})},q9=({user:t,onClose:e,showAlert:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState(!1),a=async()=>{if(!r.trim())return n("Please provide some feedback text.");o(!0);try{const l=v9(r),d=w9(t.email)?t.email:"Unknown";let f=`*New Feedback for Chethan in Cardland*

*From:* ${t.name||"Anonymous"} (${d})

*Feedback:* ${l}`;const p=`https://wa.me/919497449115?text=${encodeURIComponent(f)}`;window.open(p,"_blank"),n("Thank you! Redirecting to WhatsApp to send your feedback."),e()}catch{n("Failed to open WhatsApp. Please try again.")}finally{o(!1)}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(255,255,255,0.01)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:u.jsxs("div",{className:"modal-content neo-flat",style:{width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.5rem",position:"relative"},children:[u.jsx(Ar,{onClick:e,style:{position:"absolute",top:"1.5rem",right:"1.5rem"},size:18}),u.jsx("h2",{style:{fontSize:"1.5rem"},children:"Help & Feedback"}),u.jsx("p",{style:{opacity:.7,fontSize:"0.9rem"},children:"Help us improve Chethan in Cardland! Your feedback will be sent via WhatsApp."}),u.jsxs("div",{className:"neo-inset",style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsx("label",{style:{fontWeight:"600",opacity:.7,fontSize:"0.9rem"},children:"Feedback"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("textarea",{className:"neo-input",rows:"6",placeholder:"What's on your mind? ",style:{width:"100%",resize:"none",paddingRight:"30px"},value:r,onChange:l=>i(l.target.value)}),u.jsx("span",{style:{position:"absolute",right:"12px",top:"12px",color:"red",pointerEvents:"none",visibility:r?"hidden":"visible"},children:"*"})]})]}),u.jsx("button",{className:"neo-button neo-glow-blue",style:{justifyContent:"center",background:"var(--accent-color)",color:"white",border:"none",padding:"1rem",opacity:s?.7:1,cursor:s?"not-allowed":"pointer",gap:"10px"},onClick:a,disabled:s,children:s?"Redirecting...":u.jsxs(u.Fragment,{children:[u.jsx(r9,{size:18})," Send via WhatsApp"]})})]})})},H9=({isOpen:t,onClose:e,onLogin:n})=>{const r=[{icon:u.jsx("img",{src:dv,alt:"Chethan",style:{width:"32px",height:"32px",objectFit:"contain"}}),title:"Built for how you learn",text:"Science-based learning, designed to keep you focused and motivated."},{icon:u.jsx(u9,{size:28}),title:"Learns how you remember",text:"A smart algorithm understands your memory, tracks progress, and adapts automatically."},{icon:u.jsx(o9,{size:28}),title:"Learns. Adapts. Guides.",text:"The app creates a personalised learning path that adapts to your memory and progress."},{icon:u.jsx(Z8,{size:28}),title:"Create lessons your way",content:u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 1rem 0",lineHeight:"1.5",fontSize:"0.95rem",opacity:.8},children:"Make lessons using one or more options:"}),u.jsxs("div",{style:{display:"flex",gap:"2.5rem",justifyContent:"flex-start",marginBottom:"0.5rem",marginTop:"1rem"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[u.jsx("div",{className:"neo-inset",style:{width:"50px",height:"50px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(H8,{size:22})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500",opacity:.8},children:"Typing"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[u.jsx("div",{className:"neo-inset",style:{width:"50px",height:"50px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(bh,{size:22})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500",opacity:.8},children:"Voice"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[u.jsx("div",{className:"neo-inset",style:{width:"50px",height:"50px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(O8,{size:22})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"500",opacity:.8},children:"Photo"})]})]})]})},{icon:u.jsx(Eh,{size:28}),title:"Expert Lesson Content",text:"Study curated lessons built from real previous question papers and exam patterns."}];return u.jsx(Sn,{children:t&&u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(Fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"neo-flat",style:{width:"95vw",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",position:"relative",padding:0,overflow:"hidden",borderRadius:"32px"},children:[u.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"800",color:"var(--accent-color)"},children:"How it Works"}),u.jsx(Ar,{onClick:e})]}),u.jsx("div",{style:{padding:"2rem 1.5rem",overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:"2rem"},children:r.map((i,s)=>u.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[u.jsx("div",{className:"neo-flat",style:{padding:"0.8rem",borderRadius:"16px",color:"var(--accent-color)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.icon}),u.jsxs("div",{style:{flex:1},children:[i.title&&u.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.1rem",fontWeight:"700",color:"var(--text-color)"},children:i.title}),i.text&&u.jsx("p",{style:{margin:0,lineHeight:"1.5",fontSize:"0.95rem",opacity:.8},children:i.text}),i.content]})]},s))}),u.jsx("div",{style:{padding:"1.5rem",textAlign:"center",borderTop:"1px solid rgba(0,0,0,0.05)"},children:u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:n,style:{width:"100%",justifyContent:"center",padding:"1rem",gap:"12px",background:"var(--accent-color)",color:"white"},children:[u.jsx(K8,{size:20}),u.jsx("span",{style:{fontWeight:"600"},children:"Get Started with Google"})]})})]})})})};var Df={},ZC={exports:{}},G9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K9=G9,Q9=K9;function ek(){}function tk(){}tk.resetWarningCache=ek;var Y9=function(){function t(r,i,s,o,a,l){if(l!==Q9){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:tk,resetWarningCache:ek};return n.PropTypes=n,n};ZC.exports=Y9();var nk=ZC.exports,rk={L:1,M:0,Q:3,H:2},ik={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},X9=ik;function sk(t){this.mode=X9.MODE_8BIT_BYTE,this.data=t}sk.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var J9=sk,Gu=rk;function zr(t,e){this.totalCount=t,this.dataCount=e}zr.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];zr.getRSBlocks=function(t,e){var n=zr.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=new Array,s=0;s<r;s++)for(var o=n[s*3+0],a=n[s*3+1],l=n[s*3+2],d=0;d<o;d++)i.push(new zr(a,l));return i};zr.getRsBlockTable=function(t,e){switch(e){case Gu.L:return zr.RS_BLOCK_TABLE[(t-1)*4+0];case Gu.M:return zr.RS_BLOCK_TABLE[(t-1)*4+1];case Gu.Q:return zr.RS_BLOCK_TABLE[(t-1)*4+2];case Gu.H:return zr.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var Z9=zr;function ok(){this.buffer=new Array,this.length=0}ok.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var eU=ok,wr={glog:function(t){if(t<1)throw new Error("glog("+t+")");return wr.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return wr.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var qt=0;qt<8;qt++)wr.EXP_TABLE[qt]=1<<qt;for(var qt=8;qt<256;qt++)wr.EXP_TABLE[qt]=wr.EXP_TABLE[qt-4]^wr.EXP_TABLE[qt-5]^wr.EXP_TABLE[qt-6]^wr.EXP_TABLE[qt-8];for(var qt=0;qt<255;qt++)wr.LOG_TABLE[wr.EXP_TABLE[qt]]=qt;var ak=wr,Bs=ak;function _d(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}_d.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=Bs.gexp(Bs.glog(this.get(n))+Bs.glog(t.get(r)));return new _d(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=Bs.glog(this.get(0))-Bs.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<t.getLength();r++)n[r]^=Bs.gexp(Bs.glog(t.get(r))+e);return new _d(n,0).mod(t)}};var lk=_d,Yn=ik,sT=lk,tU=ak,Mi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Bt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Bt.getBCHDigit(e)-Bt.getBCHDigit(Bt.G15)>=0;)e^=Bt.G15<<Bt.getBCHDigit(e)-Bt.getBCHDigit(Bt.G15);return(t<<10|e)^Bt.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Bt.getBCHDigit(e)-Bt.getBCHDigit(Bt.G18)>=0;)e^=Bt.G18<<Bt.getBCHDigit(e)-Bt.getBCHDigit(Bt.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return Bt.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case Mi.PATTERN000:return(e+n)%2==0;case Mi.PATTERN001:return e%2==0;case Mi.PATTERN010:return n%3==0;case Mi.PATTERN011:return(e+n)%3==0;case Mi.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case Mi.PATTERN101:return e*n%2+e*n%3==0;case Mi.PATTERN110:return(e*n%2+e*n%3)%2==0;case Mi.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new sT([1],0),n=0;n<t;n++)e=e.multiply(new sT([1,tU.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Yn.MODE_NUMBER:return 10;case Yn.MODE_ALPHA_NUM:return 9;case Yn.MODE_8BIT_BYTE:return 8;case Yn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Yn.MODE_NUMBER:return 12;case Yn.MODE_ALPHA_NUM:return 11;case Yn.MODE_8BIT_BYTE:return 16;case Yn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Yn.MODE_NUMBER:return 14;case Yn.MODE_ALPHA_NUM:return 13;case Yn.MODE_8BIT_BYTE:return 16;case Yn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var s=0,o=t.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||e<=r+a))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||a==0&&l==0||o==t.isDark(r+a,i+l)&&s++;s>5&&(n+=3+s-5)}for(var r=0;r<e-1;r++)for(var i=0;i<e-1;i++){var d=0;t.isDark(r,i)&&d++,t.isDark(r+1,i)&&d++,t.isDark(r,i+1)&&d++,t.isDark(r+1,i+1)&&d++,(d==0||d==4)&&(n+=3)}for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);for(var h=0,i=0;i<e;i++)for(var r=0;r<e;r++)t.isDark(r,i)&&h++;var f=Math.abs(100*h/e/e-50)/5;return n+=f*10,n}},nU=Bt,rU=J9,ck=Z9,uk=eU,js=nU,iU=lk;function $r(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Hn=$r.prototype;Hn.addData=function(t){var e=new rU(t);this.dataList.push(e),this.dataCache=null};Hn.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};Hn.getModuleCount=function(){return this.moduleCount};Hn.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=ck.getRSBlocks(t,this.errorCorrectLevel),n=new uk,r=0,i=0;i<e.length;i++)r+=e[i].dataCount;for(var i=0;i<this.dataList.length;i++){var s=this.dataList[i];n.put(s.mode,4),n.put(s.getLength(),js.getLengthInBits(s.mode,t)),s.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};Hn.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=$r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};Hn.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[t+n][e+r]=!0:this.modules[t+n][e+r]=!1)};Hn.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=js.getLostPoint(this);(n==0||t>r)&&(t=r,e=n)}return e};Hn.createMovieClip=function(t,e,n){var r=t.createEmptyMovieClip(e,n),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var l=a*i,d=this.modules[s][a];d&&(r.beginFill(0,100),r.moveTo(l,o),r.lineTo(l+i,o),r.lineTo(l+i,o+i),r.lineTo(l,o+i),r.endFill())}return r};Hn.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};Hn.setupPositionAdjustPattern=function(){for(var t=js.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(this.modules[r][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[r+s][i+o]=!0:this.modules[r+s][i+o]=!1}};Hn.setupTypeNumber=function(t){for(var e=js.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}};Hn.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=js.getBCHTypeInfo(n),i=0;i<15;i++){var s=!t&&(r>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t};Hn.mapData=function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[r][o-a]==null){var l=!1;s<t.length&&(l=(t[s]>>>i&1)==1);var d=js.getMask(e,r,o-a);d&&(l=!l),this.modules[r][o-a]=l,i--,i==-1&&(s++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}};$r.PAD0=236;$r.PAD1=17;$r.createData=function(t,e,n){for(var r=ck.getRSBlocks(t,e),i=new uk,s=0;s<n.length;s++){var o=n[s];i.put(o.mode,4),i.put(o.getLength(),js.getLengthInBits(o.mode,t)),o.write(i)}for(var a=0,s=0;s<r.length;s++)a+=r[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put($r.PAD0,8),i.getLengthInBits()>=a*8));)i.put($r.PAD1,8);return $r.createBytes(i,r)};$r.createBytes=function(t,e){for(var n=0,r=0,i=0,s=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var l=e[a].dataCount,d=e[a].totalCount-l;r=Math.max(r,l),i=Math.max(i,d),s[a]=new Array(l);for(var h=0;h<s[a].length;h++)s[a][h]=255&t.buffer[h+n];n+=l;var f=js.getErrorCorrectPolynomial(d),p=new iU(s[a],f.getLength()-1),g=p.mod(f);o[a]=new Array(f.getLength()-1);for(var h=0;h<o[a].length;h++){var w=h+g.getLength()-o[a].length;o[a][h]=w>=0?g.get(w):0}}for(var _=0,h=0;h<e.length;h++)_+=e[h].totalCount;for(var k=new Array(_),S=0,h=0;h<r;h++)for(var a=0;a<e.length;a++)h<s[a].length&&(k[S++]=s[a][h]);for(var h=0;h<i;h++)for(var a=0;a<e.length;a++)h<o[a].length&&(k[S++]=o[a][h]);return k};var sU=$r,fv={};Object.defineProperty(fv,"__esModule",{value:!0});var oU=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aU=nk,Xn=hk(aU),dk=R,Ku=hk(dk);function hk(t){return t&&t.__esModule?t:{default:t}}function lU(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var cU={bgColor:Xn.default.oneOfType([Xn.default.object,Xn.default.string]).isRequired,bgD:Xn.default.string.isRequired,fgColor:Xn.default.oneOfType([Xn.default.object,Xn.default.string]).isRequired,fgD:Xn.default.string.isRequired,size:Xn.default.number.isRequired,title:Xn.default.string,viewBoxSize:Xn.default.number.isRequired,xmlns:Xn.default.string},pv=(0,dk.forwardRef)(function(t,e){var n=t.bgColor,r=t.bgD,i=t.fgD,s=t.fgColor,o=t.size,a=t.title,l=t.viewBoxSize,d=t.xmlns,h=d===void 0?"http://www.w3.org/2000/svg":d,f=lU(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Ku.default.createElement("svg",oU({},f,{height:o,ref:e,viewBox:"0 0 "+l+" "+l,width:o,xmlns:h}),a?Ku.default.createElement("title",null,a):null,Ku.default.createElement("path",{d:r,fill:n}),Ku.default.createElement("path",{d:i,fill:s}))});pv.displayName="QRCodeSvg";pv.propTypes=cU;fv.default=pv;Object.defineProperty(Df,"__esModule",{value:!0});Df.QRCode=void 0;var uU=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dU=nk,ti=iu(dU),hU=rk,fU=iu(hU),pU=sU,mU=iu(pU),fk=R,gU=iu(fk),yU=fv,vU=iu(yU);function iu(t){return t&&t.__esModule?t:{default:t}}function wU(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var xU={bgColor:ti.default.oneOfType([ti.default.object,ti.default.string]),fgColor:ti.default.oneOfType([ti.default.object,ti.default.string]),level:ti.default.string,size:ti.default.number,value:ti.default.string.isRequired},Nf=(0,fk.forwardRef)(function(t,e){var n=t.bgColor,r=n===void 0?"#FFFFFF":n,i=t.fgColor,s=i===void 0?"#000000":i,o=t.level,a=o===void 0?"L":o,l=t.size,d=l===void 0?256:l,h=t.value,f=wU(t,["bgColor","fgColor","level","size","value"]),p=new mU.default(-1,fU.default[a]);p.addData(h),p.make();var g=p.modules;return gU.default.createElement(vU.default,uU({},f,{bgColor:r,bgD:g.map(function(w,_){return w.map(function(k,S){return k?"":"M "+S+" "+_+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:s,fgD:g.map(function(w,_){return w.map(function(k,S){return k?"M "+S+" "+_+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:d,viewBoxSize:g.length}))});Df.QRCode=Nf;Nf.displayName="QRCode";Nf.propTypes=xU;var _U=Df.default=Nf;const TU=({user:t,onClose:e,userCoins:n,onShare:r,onShowFeedback:i})=>{const[s,o]=R.useState(null),a=d=>{const h=(t==null?void 0:t.email)||"UserPayment";return`upi://pay?pa=${A8}&pn=${P8}&am=${d}&cu=INR&tn=${encodeURIComponent(h)}`},l=d=>{const h=a(d);window.innerWidth>768?o({amount:d,link:h}):window.location.href=h};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e,children:u.jsxs(Fe.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"neo-flat",onClick:d=>d.stopPropagation(),style:{width:"90%",maxWidth:"420px",padding:"0",borderRadius:"24px",overflow:"hidden",display:"flex",flexDirection:"column",maxHeight:"90vh",margin:"20px 0",background:"var(--bg-color)",position:"relative"},children:[u.jsx(Sn,{children:s&&u.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"var(--bg-color)",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:[u.jsx("button",{onClick:()=>o(null),className:"neo-button icon-btn",style:{position:"absolute",top:"15px",right:"15px"},children:u.jsx(fn,{size:24})}),u.jsxs("h3",{style:{margin:"0 0 1.5rem 0",color:"var(--text-primary)"},children:["Scan to Pay ",s.amount]}),u.jsx("div",{style:{background:"white",padding:"16px",borderRadius:"16px"},children:u.jsx(_U,{value:s.link,size:200})}),u.jsx("p",{style:{marginTop:"1.5rem",textAlign:"center",opacity:.7,fontSize:"0.9rem"},children:"Scan this QR code using GPay, PhonePe, or Paytm on your mobile."})]})}),u.jsxs("div",{style:{padding:"1.25rem 1.5rem",background:"var(--bg-color)",borderBottom:"1px solid rgba(0,0,0,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"1.4rem",margin:0,fontWeight:"700",color:"var(--text-color)"},children:"Coin Store"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[u.jsx("span",{style:{fontSize:"0.9rem",opacity:.7},children:"Balance:"}),u.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"800",background:"rgba(99, 102, 241, 0.1)",padding:"2px 8px",borderRadius:"8px",color:"var(--accent-color)"},children:[n," "]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i&&u.jsxs("button",{className:"neo-button",onClick:i,style:{padding:"0 16px",height:"36px",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",fontWeight:"600",borderRadius:"12px",color:"var(--accent-color)",border:"none",cursor:"pointer"},title:"Help & Feedback",children:[u.jsx(Zi,{size:18}),u.jsx("span",{children:"Help"})]}),u.jsx(Ar,{onClick:e})]})]}),u.jsxs("div",{style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.5rem",overflowY:"auto",flex:1},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"0.8rem"},children:u.jsx("h4",{style:{margin:0,fontSize:"0.9rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",opacity:.6},children:"Ways to Earn"})}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.5rem",borderRadius:"20px",border:"none",background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(255,255,255,0.05) 100%)",position:"relative",overflow:"hidden",boxShadow:"0 0 15px rgba(59, 130, 246, 0.5), 0 10px 25px -5px rgba(59, 130, 246, 0.15)"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,background:"#3b82f6",color:"white",padding:"4px 12px",borderRadius:"0 0 0 16px",fontWeight:"700",fontSize:"0.75rem",letterSpacing:"0.5px"},children:"MOST POPULAR"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.2rem",marginTop:"0.5rem"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.4rem",margin:"0 0 4px 0",color:"#1d4ed8",fontWeight:"800"},children:"Invite a Friend"}),u.jsx("p",{style:{margin:0,opacity:.8,fontSize:"0.9rem"},children:"Grow our community"})]}),u.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"800",color:"#f59e0b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"+50"})]}),u.jsxs("button",{className:"neo-button",onClick:r,style:{width:"100%",justifyContent:"center",padding:"1rem",background:"#3b82f6",color:"white",border:"none",fontSize:"1rem",fontWeight:"700",borderRadius:"14px",gap:"8px",boxShadow:"0 4px 6px -1px rgba(59, 130, 246, 0.4)"},children:[u.jsx(i9,{size:18})," Invite Now"]})]}),u.jsxs("div",{className:"neo-flat",style:{marginTop:"1rem",padding:"1rem",borderRadius:"16px",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(16, 185, 129, 0.05)",boxShadow:"0 0 10px rgba(16, 185, 129, 0.2)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("div",{style:{background:"#10b981",color:"white",padding:"10px",borderRadius:"12px",boxShadow:"0 2px 5px rgba(16, 185, 129, 0.3)"},children:u.jsx(xo,{size:20,strokeWidth:3})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"700",color:"var(--text-primary)",fontSize:"1rem"},children:"Daily Login"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:"Streak bonus active"})]})]}),u.jsx("div",{style:{fontWeight:"800",color:"#10b981",fontSize:"1.2rem"},children:"+5"})]}),u.jsxs("div",{className:"neo-flat",style:{marginTop:"1rem",padding:"1rem",borderRadius:"16px",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(236, 72, 153, 0.05)",boxShadow:"0 0 10px rgba(236, 72, 153, 0.2)",cursor:"pointer"},onClick:i,children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("div",{style:{background:"#ec4899",color:"white",padding:"10px",borderRadius:"12px",boxShadow:"0 2px 5px rgba(236, 72, 153, 0.3)"},children:u.jsx(Zi,{size:20,strokeWidth:2})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"700",color:"var(--text-primary)",fontSize:"1rem"},children:"Find Mistakes"}),u.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:"Report errors to get free coins"})]})]}),u.jsx("div",{style:{fontWeight:"800",color:"#ec4899",fontSize:"0.9rem"},children:"Bonus"})]})]}),u.jsx("div",{style:{width:"100%",height:"1px",background:"var(--border-color)",opacity:.3}}),u.jsxs("div",{children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"0.8rem"},children:u.jsx("h4",{style:{margin:0,fontSize:"0.9rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",opacity:.6},children:"Store"})}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.2rem",borderRadius:"18px",border:"none",background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(255,255,255,0) 100%)",marginBottom:"1rem",position:"relative",cursor:"pointer",boxShadow:"0 0 15px rgba(59, 130, 246, 0.3)"},onClick:()=>l(79),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 4px 0",color:"#1d4ed8",fontWeight:"700"},children:"50 Coins"}),u.jsx("p",{style:{margin:0,opacity:.7,fontSize:"0.85rem"},children:"Basic Pack"})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#3b82f6"},children:"79"})})]}),u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.8rem",borderTop:"1px dashed rgba(59,130,246,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#1d4ed8",fontWeight:"600",fontSize:"0.9rem"},children:[u.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Google_Pay_Logo.svg",alt:"GPay",style:{height:"16px"}}),u.jsx("span",{children:"Tap to Pay"})]})]}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.2rem",borderRadius:"18px",border:"none",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(255,255,255,0) 100%)",marginBottom:"1rem",position:"relative",cursor:"pointer",boxShadow:"0 0 15px rgba(16, 185, 129, 0.3)"},onClick:()=>l(299),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 4px 0",color:"#059669",fontWeight:"700"},children:"200 Coins"}),u.jsx("p",{style:{margin:0,opacity:.7,fontSize:"0.85rem"},children:"Popular Choice"})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#10b981"},children:"299"})})]}),u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.8rem",borderTop:"1px dashed rgba(16, 185, 129, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#059669",fontWeight:"600",fontSize:"0.9rem"},children:[u.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Google_Pay_Logo.svg",alt:"GPay",style:{height:"16px"}}),u.jsx("span",{children:"Tap to Pay"})]})]}),u.jsxs("div",{className:"neo-flat",style:{padding:"1.2rem",borderRadius:"18px",border:"none",background:"linear-gradient(135deg, rgba(245,158,11,0.08) 0%, rgba(255,255,255,0) 100%)",position:"relative",cursor:"pointer",boxShadow:"0 0 15px rgba(245, 158, 11, 0.5)"},onClick:()=>l(479),children:[u.jsx("div",{style:{position:"absolute",top:-10,left:20,background:"#f59e0b",color:"white",padding:"4px 10px",borderRadius:"8px",fontSize:"0.7rem",fontWeight:"700"},children:"BEST VALUE"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 4px 0",color:"#b45309",fontWeight:"700"},children:"500 Coins"}),u.jsx("p",{style:{margin:0,opacity:.7,fontSize:"0.85rem"},children:"Master Study Pack"})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"800",color:"#f59e0b"},children:"479"})})]}),u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.8rem",borderTop:"1px dashed rgba(245,158,11,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#b45309",fontWeight:"600",fontSize:"0.9rem"},children:[u.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Google_Pay_Logo.svg",alt:"GPay",style:{height:"16px"}}),u.jsx("span",{children:"Tap to Pay"})]})]})]}),u.jsxs("div",{style:{background:"rgba(0,0,0,0.03)",padding:"1rem",borderRadius:"12px",fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[u.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:"Alternative Payment Method:"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsx("span",{children:"GPay to:"}),u.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",fontSize:"1rem"},children:R8.replace("91","")})]}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",opacity:.8},children:"After payment, send the screenshot to the same number on WhatsApp to receive your coins."})]})]})]})})},SU=({user:t,userProfile:e,onClose:n,onUpdateProfile:r,showAlert:i,onShowFeedback:s})=>{const[o,a]=R.useState(""),[l,d]=R.useState(!1),h=`${window.location.origin}/?ref=${(e==null?void 0:e.referralCode)||""}`,f=`Study smarter.
Remember longer.

${t.name} invites you to join Cardland to start easy, efficient and personalised learning journey.

${h}`,p=()=>{navigator.clipboard.writeText(e.referralCode),i("Referral code copied!")},g=()=>{const _=`https://wa.me/?text=${encodeURIComponent(f)}`;window.open(_,"_blank")},w=async()=>{if(o.trim()){if(o.trim()===e.referralCode){i("You can't refer yourself!");return}d(!0);try{const _={...e,referredBy:o.trim()};await r(_),i("Referral code applied! Your friend will get coins when you finish a review."),n()}catch{i("Failed to apply code.")}finally{d(!1)}}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(8px)",background:"rgba(0,0,0,0.5)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(Fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"neo-flat",style:{padding:"2rem",maxWidth:"400px",width:"90%",position:"relative"},children:[u.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",display:"flex",gap:"8px"},children:[s&&u.jsxs("button",{className:"neo-button",onClick:s,style:{padding:"0 12px",height:"36px",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.85rem",fontWeight:"600",borderRadius:"12px",color:"var(--accent-color)",border:"none",cursor:"pointer"},title:"Help & Feedback",children:[u.jsx(Zi,{size:16}),u.jsx("span",{children:"Help"})]}),u.jsx(Ar,{onClick:n,size:20})]}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("div",{className:"neo-inset",style:{width:"60px",height:"60px",borderRadius:"50%",margin:"0 auto 1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(q8,{size:32})}),u.jsx("h2",{style:{margin:0},children:"Sharing Bonus"}),u.jsxs("p",{style:{opacity:.7,marginTop:"0.5rem"},children:["Invite a friend and receive ",u.jsx("strong",{style:{color:"#f59e0b"},children:"50 Coins"})," when they complete their first review!"]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsxs("button",{className:"neo-button",onClick:g,style:{background:"#25D366",color:"white",border:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",fontSize:"1.1rem"},children:[u.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),"Share Invite via WhatsApp"]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[u.jsx("div",{style:{height:"1px",flex:1,background:"var(--border-color)"}}),u.jsx("span",{style:{fontSize:"0.8rem",opacity:.5},children:"OR USE CODE"}),u.jsx("div",{style:{height:"1px",flex:1,background:"var(--border-color)"}})]}),u.jsxs("div",{className:"neo-inset",style:{marginTop:"15px",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"12px",fontSize:"1.2rem",fontWeight:"bold",letterSpacing:"1px"},children:[u.jsx("span",{children:(e==null?void 0:e.referralCode)||"----"}),u.jsx("button",{className:"neo-button icon-btn",onClick:p,title:"Copy Code",children:u.jsx(z8,{size:20})})]})]}),!(e!=null&&e.referredBy)&&u.jsx("div",{style:{marginTop:"10px"},children:u.jsxs("details",{children:[u.jsx("summary",{style:{cursor:"pointer",fontSize:"0.9rem",opacity:.7,listStyle:"none",textAlign:"center"},children:"Have a referral code? Enter it here"}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[u.jsx("input",{className:"neo-input",style:{flex:1},placeholder:"Enter code",value:o,onChange:_=>a(_.target.value)}),u.jsx("button",{className:"neo-button neo-glow-blue",onClick:w,disabled:l||!o,style:{background:"var(--accent-color)",color:"white"},children:l?"...":u.jsx(xo,{size:20})})]})]})}),(e==null?void 0:e.referredBy)&&u.jsxs("div",{className:"neo-inset",style:{padding:"0.8rem",textAlign:"center",fontSize:"0.9rem",color:"green"},children:["Referred by: ",e.referredBy]})]})]})})};class EU{static async getUsers(e,n,r=!1){try{return console.log("[AdminService] Fetching authoritative registry from Firestore..."),(await es.listUsers()).map(s=>{var o,a,l;return{id:s.id||s.uid||s.email,uid:s.uid||s.id,email:s.email,displayName:s.displayName||"Guest User",lastLogin:((l=(a=(o=s.lastSeen)==null?void 0:o.toDate)==null?void 0:a.call(o))==null?void 0:l.toISOString())||null,coins:s.coins||0,loginCount:s.loginCount||0}})}catch(i){throw console.error("[AdminService] Registry Sync Failed:",i),i}}static async grantCoins(e,n,r){let i=n.uid;if(!i&&n.id&&!n.id.includes("@")&&(i=n.id),!i&&n.email){console.log(`[AdminService] UID missing for ${n.email}, performing lookup...`);const s=await es.getProfileByEmail(n.email);i=(s==null?void 0:s.uid)||(s==null?void 0:s.id)}if(!i)throw new Error("Could not identify user ID for transaction.");console.log(`[AdminService] Granting ${r} coins to ${i} via Secure Cloud Function...`);try{const o=await a8(c8,"grantCoins")({uid:i,amount:r}),{newBalance:a}=o.data;return{success:!0,newBalance:a,email:n.email}}catch(s){console.error("[AdminService] Grant Coins failed:",s);const o=s.message||"Unknown error occurred";throw o.includes("permission-denied")?new Error("Permission Denied: You are not authorized to grant coins."):new Error(`Grant failed: ${o}`)}}static async getPrompts(){return[]}}const oT=EU,pk=R.createContext(null),bU=({children:t})=>{const{user:e}=Ao(),[n,r]=R.useState([]),[i,s]=R.useState(!1),[o,a]=R.useState(new Set),[l,d]=R.useState(new Set),[h,f]=R.useState(null),[p,g]=R.useState({totalReceived:0,lastSync:null}),w=R.useCallback(async()=>{if(!e){f("AUTH_REQUIRED");return}s(!0),f(null);try{const _=await oT.getUsers(e.token);r(_||[]),g({totalReceived:(_==null?void 0:_.length)||0,lastSync:new Date().toLocaleTimeString()})}catch(_){console.error("[AdminContext] Discovery Failed:",_),f(_.message||"Failed to synchronize registry.")}finally{s(!1)}},[e]);return R.useEffect(()=>{e&&w()},[w,e]),u.jsx(pk.Provider,{value:{users:n,loading:i,error:h,stats:p,processingIds:o,recentlyGranted:l,refresh:()=>w(),grantCoins:async(_,k)=>{const S=_.id||_.uid||_.email;a(v=>new Set(v).add(S));try{const v=await oT.grantCoins(e.token,_,k);v&&v.newBalance!==void 0&&r(x=>x.map(j=>(j.id||j.uid||j.email)===S?{...j,coins:v.newBalance}:j)),d(x=>new Set(x).add(S)),setTimeout(()=>{d(x=>{const j=new Set(x);return j.delete(S),j})},3e3),w()}catch(v){throw console.error("[AdminContext] Grant failed",v),v}finally{a(v=>{const x=new Set(v);return x.delete(S),x})}}},children:t})},IU=()=>{const t=R.useContext(pk);if(!t)throw new Error("useAdmin must be used within AdminProvider");return t},CU=({children:t,activeSection:e,onNavigate:n,onClose:r})=>{const[i,s]=R.useState(!1),[o,a]=R.useState(!1),[l,d]=R.useState(!1);R.useEffect(()=>{const f=()=>a(window.innerWidth<=768);return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]);const h=()=>s(!i);return u.jsxs("div",{style:St.shell,children:[o&&u.jsxs("div",{style:St.mobileHeader,children:[u.jsx("button",{onClick:h,style:St.iconBtn,children:i?u.jsx(fn,{size:20}):u.jsx($C,{size:20})}),u.jsx("span",{style:St.storeName,children:"Admin Workspace"}),u.jsx("button",{onClick:r,style:{...St.exitBtnTopRight,background:l?"#f1f2f3":"transparent"},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),title:"Exit Admin",children:u.jsx(fn,{size:20})})]}),u.jsxs("aside",{style:{...St.sidebar,transform:o?i?"translateX(0)":"translateX(-100%)":"none",position:o?"absolute":"relative",height:"100%"},className:"admin-sidebar",children:[!o&&u.jsxs("div",{style:St.sidebarHeader,children:[u.jsx("div",{style:St.logoBadge,children:"A"}),u.jsx("span",{style:St.storeName,children:"Admin Workspace"})]}),u.jsxs("nav",{style:St.nav,children:[u.jsx("div",{style:St.sectionLabel,children:"GENERAL"}),u.jsx(Zp,{icon:u.jsx(HC,{size:18}),label:"Registry",active:e==="users",onClick:()=>{n("users"),o&&s(!1)}}),u.jsx(Zp,{icon:u.jsx(BC,{size:18}),label:"Smart Paste",active:e==="smart_paste",onClick:()=>{n("smart_paste"),o&&s(!1)}}),u.jsx(Zp,{icon:u.jsx(W8,{size:18}),label:"Prompts",active:e==="prompts",onClick:()=>{n("prompts"),o&&s(!1)}})]})]}),o&&i&&u.jsx("div",{style:St.backdrop,onClick:()=>s(!1)}),u.jsxs("main",{style:{...St.main,paddingTop:o?"60px":"0"},children:[!o&&u.jsxs("header",{style:St.topBar,children:[u.jsxs("div",{style:St.searchWrapper,children:[u.jsx(Ug,{size:16,style:{opacity:.5}}),u.jsx("input",{type:"text",placeholder:"Search",style:St.globalSearch})]}),u.jsxs("div",{style:St.userMenu,children:[u.jsx("div",{style:St.avatar,children:"A"}),u.jsx("button",{onClick:r,style:{...St.exitBtnTopRight,background:l?"#f1f2f3":"transparent"},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),title:"Exit Admin",children:u.jsx(fn,{size:20})})]})]}),u.jsx("div",{style:St.contentFrame,children:t})]})]})},Zp=({icon:t,label:e,active:n,onClick:r})=>u.jsxs("button",{onClick:r,style:{...St.navItem,background:n?"#ffffff":"transparent",color:n?"#008060":"#5c5f62",fontWeight:n?600:500,boxShadow:n?"0 1px 3px rgba(0,0,0,0.1)":"none"},children:[t,u.jsx("span",{children:e})]}),St={shell:{position:"fixed",inset:0,background:"#f6f6f7",zIndex:5e3,display:"flex",fontFamily:'-apple-system, BlinkMacSystemFont, "San Francisco", "Segoe UI", Roboto, "Helvetica Neue", sans-serif'},mobileHeader:{position:"absolute",top:0,left:0,right:0,height:"56px",background:"white",borderBottom:"1px solid #e1e3e5",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:20},sidebar:{width:"240px",background:"#ebebeb",borderRight:"1px solid #e1e3e5",display:"flex",flexDirection:"column",zIndex:30,transition:"transform 0.3s ease-in-out",boxShadow:"2px 0 8px rgba(0,0,0,0.1)"},backdrop:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",zIndex:25},sidebarHeader:{padding:"1rem",display:"flex",alignItems:"center",gap:"0.75rem",borderBottom:"1px solid rgba(0,0,0,0.05)"},logoBadge:{width:"32px",height:"32px",background:"#5c5f62",color:"white",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700},storeName:{fontWeight:600,fontSize:"0.9rem",color:"#202223"},nav:{padding:"1rem 0.5rem",flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},sectionLabel:{fontSize:"0.75rem",fontWeight:600,color:"#444",padding:"0.5rem 0.75rem",marginTop:"0.5rem"},navItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0.75rem",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",marginBottom:"2px"},exitBtnTopRight:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#5c5f62",borderRadius:"4px",transition:"background 0.2s ease"},main:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},topBar:{height:"56px",background:"white",borderBottom:"1px solid #e1e3e5",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem"},searchWrapper:{width:"400px",height:"36px",background:"#f1f2f3",borderRadius:"4px",display:"flex",alignItems:"center",padding:"0 0.75rem",gap:"0.5rem",border:"1px solid #e1e3e5"},globalSearch:{border:"none",background:"transparent",outline:"none",width:"100%",fontSize:"0.9rem"},contentFrame:{flex:1,overflowY:"auto",padding:"2rem",maxWidth:"1100px",margin:"0 auto",width:"100%"},userMenu:{display:"flex",alignItems:"center",gap:"1rem"},avatar:{width:"32px",height:"32px",borderRadius:"50%",background:"#008060",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:600},iconBtn:{background:"none",border:"none",cursor:"pointer",padding:"4px"}},kU=({user:t,isOpen:e,onClose:n,onGrant:r})=>{const[i,s]=R.useState("50"),[o,a]=R.useState(!1),[l,d]=R.useState(null),[h,f]=R.useState(!1);if(!e||!t)return null;const p=async g=>{g.preventDefault();const w=parseInt(i,10);if(isNaN(w)||w<=0){d("Please enter a valid positive number.");return}a(!0),d(null);try{await r(t,w),f(!0),setTimeout(()=>{n(),f(!1),s("50")},1500)}catch(_){d(_.message||"Failed to grant coins.")}finally{a(!1)}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(4px)",background:"rgba(0,0,0,0.5)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:u.jsxs("div",{className:"neo-flat",style:{background:"white",padding:"2rem",borderRadius:"16px",width:"100%",maxWidth:"400px",position:"relative",display:"flex",flexDirection:"column",gap:"1.5rem",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",margin:0},children:"Grant Coins"}),u.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"#64748b"},children:["to ",u.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:t.displayName||t.email})]})]}),!o&&u.jsx(Ar,{onClick:n})]}),h?u.jsxs("div",{style:{padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",color:"#008060",gap:"1rem"},children:[u.jsx(Vg,{size:48}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0},children:"Success!"}),u.jsxs("p",{style:{margin:0,opacity:.8},children:["Granted ",i," coins."]})]})]}):u.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#475569"},children:"Amount"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Rf,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#f59e0b"}}),u.jsx("input",{type:"number",className:"neo-input",value:i,onChange:g=>s(g.target.value),placeholder:"Enter amount",disabled:o,style:{width:"100%",padding:"12px 12px 12px 40px",fontSize:"1.1rem",fontWeight:"600",borderRadius:"8px",border:"1px solid #e2e8f0",outline:"none"},autoFocus:!0})]})]}),l&&u.jsxs("div",{style:{padding:"0.75rem",background:"#fef2f2",color:"#ef4444",borderRadius:"8px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(UC,{size:16}),l]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[u.jsx("button",{type:"button",onClick:n,disabled:o,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",background:"transparent",color:"#64748b",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{type:"submit",disabled:o||!i,className:"primary-btn",style:{padding:"0.75rem 2rem",borderRadius:"8px",border:"none",background:"#008060",color:"white",fontWeight:"600",cursor:o?"wait":"pointer",opacity:o?.7:1,boxShadow:"0 4px 6px -1px rgba(0, 128, 96, 0.4)"},children:o?"Granting...":"Grant Coins"})]})]})]})})},AU=()=>{const{users:t,loading:e,error:n,stats:r,refresh:i,grantCoins:s,processingIds:o,recentlyGranted:a}=IU(),[l,d]=br.useState(null);return e&&t.length===0?u.jsx(PU,{}):n==="AUTH_REQUIRED"?u.jsx(RU,{}):n?u.jsx(DU,{error:n,retry:i}):u.jsxs("div",{style:Pe.container,children:[u.jsxs("div",{style:Pe.header,children:[u.jsx("h1",{style:Pe.title,children:"Users"}),u.jsxs("div",{style:Pe.actions,children:[u.jsxs("span",{style:Pe.badge,children:[t.length," Records"]}),u.jsx("button",{onClick:i,style:Pe.iconBtn,title:"Refresh Index",children:u.jsx(Ic,{size:16})})]})]}),r.lastSync&&u.jsxs("div",{style:Pe.diagnosticBanner,children:[u.jsx(Vg,{size:14,color:"#008060"}),u.jsxs("span",{children:["Directory Synced at ",r.lastSync,". Status: Live from Firestore"]})]}),t.length===0?u.jsx(NU,{retry:i}):u.jsx("div",{style:Pe.card,children:u.jsx("div",{className:"table-responsive",children:u.jsxs("table",{style:Pe.table,children:[u.jsx("thead",{children:u.jsxs("tr",{style:Pe.theadRow,children:[u.jsx("th",{style:Pe.th,children:"Name"}),u.jsx("th",{style:Pe.th,children:"Email"}),u.jsx("th",{style:Pe.th,children:"Last Active"}),u.jsx("th",{style:Pe.th,children:"Logins"}),u.jsx("th",{style:Pe.th,children:"Coins"}),u.jsx("th",{style:Pe.th,children:"Actions"})]})}),u.jsx("tbody",{children:t.map(h=>{const f=h.id||h.uid||h.email,p=o==null?void 0:o.has(f),g=a==null?void 0:a.has(f);return u.jsxs("tr",{style:Pe.tr,children:[u.jsx("td",{style:Pe.td,children:u.jsx("span",{style:Pe.nameText,children:h.displayName})}),u.jsx("td",{style:Pe.td,children:h.email}),u.jsx("td",{style:Pe.td,children:h.lastLogin?new Date(h.lastLogin).toLocaleDateString():"-"}),u.jsx("td",{style:Pe.td,children:h.loginCount||0}),u.jsx("td",{style:Pe.td,children:u.jsx("span",{style:{color:"#008060",fontWeight:700,background:"#e3f1df",padding:"2px 8px",borderRadius:"10px",fontSize:"0.85rem"},children:h.coins||0})}),u.jsx("td",{style:Pe.td,children:u.jsx("button",{disabled:p,onClick:()=>d(h),style:{...Pe.actionLink,color:g?"#008060":p?"#6d7175":"#101010",opacity:p?.5:1,cursor:p?"wait":"pointer",textDecoration:p?"none":"underline",display:"flex",alignItems:"center",gap:"4px"},children:g?u.jsxs(u.Fragment,{children:[u.jsx(Vg,{size:14})," Success"]}):p?"Granting...":"Grant Coins"})})]},f)})})]})})}),u.jsx(kU,{user:l,isOpen:!!l,onClose:()=>d(null),onGrant:s}),u.jsx("style",{children:`
                .table-responsive { overflow-x: auto; }
                @media (max-width: 600px) {
                    /* Mobile styles can be enhanced here */
                }
            `})]})},RU=()=>{const[t,e]=br.useState(!1);return u.jsxs("div",{style:Pe.errorBox,children:[u.jsx(G8,{size:32,color:"#5c5f62"}),u.jsx("h3",{style:Pe.errorTitle,children:"Authorization Required"}),u.jsx("p",{style:Pe.errorDesc,children:"Admin access requires Google Drive permissions."}),u.jsx("button",{disabled:t,onClick:async()=>{e(!0);try{console.log("[AdminAuth] Requesting Drive Access..."),await f8(),console.log("[AdminAuth] Access Granted. Refreshing context...")}catch(n){console.error("[AdminAuth] Access Denied:",n),alert(`Authorization Failed: ${n.message||n}`)}finally{e(!1)}},style:{...Pe.primaryBtn,opacity:t?.7:1,cursor:t?"wait":"pointer"},children:t?"Authorizing...":"Authorize Admin Access"})]})},PU=()=>u.jsxs("div",{style:Pe.centerBox,children:[u.jsx("div",{className:"polaris-spinner",style:Pe.spinner}),u.jsx("p",{style:{marginTop:"1rem",color:"#6d7175"},children:"Loading Users from Firestore..."})]}),DU=({error:t,retry:e})=>u.jsxs("div",{style:Pe.errorBox,children:[u.jsx(UC,{size:32,color:"#d82c0d"}),u.jsx("h3",{style:Pe.errorTitle,children:"Directory Access Failed"}),u.jsx("p",{style:Pe.errorDesc,children:t}),u.jsx("button",{onClick:e,style:Pe.primaryBtn,children:"Retry Sync"})]}),NU=({retry:t})=>{const{user:e}=Ao(),[n,r]=br.useState(!1),i=async()=>{if(e){r(!0);try{await es.syncProfile(e),t()}catch(s){console.error(s),alert("Registration failed: "+s.message)}finally{r(!1)}}};return u.jsxs("div",{style:Pe.centerBox,children:[u.jsx(BC,{size:48,color:"#babec3"}),u.jsx("h2",{style:Pe.emptyTitle,children:"No Users Found"}),u.jsx("p",{style:Pe.emptyDesc,children:"The user directory is currently empty."}),u.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[u.jsxs("button",{onClick:t,style:Pe.primaryBtn,children:[u.jsx(Ic,{size:14,style:{marginRight:"8px"}})," Refresh List"]}),u.jsxs("button",{onClick:i,disabled:n||!e,style:{...Pe.primaryBtn,background:"white",color:"#008060",border:"1px solid #008060",display:"flex",alignItems:"center"},children:[u.jsx(a9,{size:14,style:{marginRight:"8px"}}),n?"Registering...":"Register Me"]})]})]})},Pe={container:{display:"flex",flexDirection:"column",gap:"1rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},title:{fontSize:"1.5rem",fontWeight:700,color:"#202223",margin:0},actions:{display:"flex",gap:"1rem",alignItems:"center"},badge:{background:"#dfe3e8",color:"#202223",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:600},iconBtn:{background:"white",border:"1px solid #e1e3e5",borderRadius:"4px",padding:"0.5rem",cursor:"pointer",color:"#5c5f62"},diagnosticBanner:{background:"#e3f1df",color:"#008060",padding:"0.75rem 1rem",borderRadius:"4px",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"1px solid #1a1a1a0d"},card:{background:"white",borderRadius:"8px",boxShadow:"0 0 0 1px rgba(63, 63, 68, 0.05), 0 1px 3px 0 rgba(63, 63, 68, 0.15)",overflow:"hidden"},table:{width:"100%",borderCollapse:"collapse",textAlign:"left"},theadRow:{background:"#f9fafb",borderBottom:"1px solid #e1e3e5"},th:{padding:"1rem",fontSize:"0.8rem",fontWeight:600,color:"#6d7175",textTransform:"uppercase"},tr:{borderBottom:"1px solid #e1e3e5"},td:{padding:"1rem",fontSize:"0.9rem",color:"#202223"},nameText:{fontWeight:600},actionLink:{background:"none",border:"none",color:"#008060",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",textDecoration:"underline"},centerBox:{padding:"4rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},primaryBtn:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#008060",color:"white",border:"none",borderRadius:"4px",fontWeight:600,cursor:"pointer"},errorBox:{padding:"2rem",background:"#fff4f4",border:"1px solid #eecaca",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",color:"#8f2316"},errorTitle:{marginTop:"1rem",fontSize:"1.2rem"},errorDesc:{opacity:.8}},jU=({onClose:t,showAlert:e,onEditLesson:n,initialSection:r="users"})=>{var S;const{user:i}=Ao(),[s,o]=R.useState(r),[a,l]=R.useState(""),[d,h]=R.useState(null),[f,p]=R.useState(null),g=v=>{o(v),p(null)},w=()=>{var v;try{p(null);const x=b9(a),j=x.questions||x.cards||[];if(!x.title&&j.length===0&&(((v=x.sections)==null?void 0:v.length)||0)===0)throw new Error("Could not find any valid lesson data in the paste.");h(x),e("Content processed successfully!")}catch(x){p(x.message)}},_=()=>{if(d&&n){const v={...d,questions:d.questions||d.cards||[],id:`draft-${Date.now()}`,isPublic:!0,owner:i==null?void 0:i.email};n(v),t()}},k=d?d.questions||d.cards||[]:[];return u.jsx(bU,{children:u.jsxs(CU,{activeSection:s,onNavigate:g,onClose:t,children:[s==="users"&&u.jsx(AU,{}),s==="smart_paste"&&u.jsxs("div",{style:Nt.card,children:[u.jsx("h2",{style:Nt.cardTitle,children:"Smart Paste (New Schema Support)"}),u.jsx("p",{style:Nt.cardDesc,children:"Paste lesson JSON following the new hierarchical schema (sections, noteSegments, etc.). The system will automatically recognize the structure."}),u.jsxs("div",{style:Nt.pasteWrapper,children:[u.jsx("textarea",{style:Nt.textarea,placeholder:"Paste JSON here...",value:a,onChange:v=>l(v.target.value)}),u.jsxs("div",{style:Nt.pasteActions,children:[u.jsxs("button",{onClick:w,style:Nt.primaryBtn,disabled:!a.trim(),children:[u.jsx(U8,{size:16,style:{marginRight:"8px"}}),"Analyze & Process"]}),a&&u.jsx("button",{onClick:()=>{l(""),h(null)},style:Nt.secondaryBtn,children:"Clear"})]})]}),f&&u.jsxs("div",{style:Nt.errorBanner,children:[u.jsx(FC,{size:18}),u.jsx("span",{children:f})]}),d&&u.jsxs("div",{style:Nt.previewBox,children:[u.jsxs("div",{style:Nt.previewHeader,children:[u.jsx(xo,{size:18,color:"#008060"}),u.jsx("h3",{style:Nt.previewTitle,children:"Analysis Complete"})]}),u.jsxs("div",{style:Nt.metaGrid,children:[u.jsx(Mo,{label:"Title",value:d.title}),u.jsx(Mo,{label:"Subject",value:d.subject}),u.jsx(Mo,{label:"Standard",value:d.standard}),u.jsx(Mo,{label:"Syllabus",value:d.syllabus}),u.jsx(Mo,{label:"Questions",value:k.length}),u.jsx(Mo,{label:"Sections",value:(S=d.sections)==null?void 0:S.length})]}),u.jsxs("button",{onClick:_,style:Nt.editBtn,children:[u.jsx(J8,{size:16}),"Open in Lesson Editor"]})]})]}),s==="prompts"&&u.jsxs("div",{style:Nt.card,children:[u.jsx("h2",{style:Nt.cardTitle,children:"Prompt Library"}),u.jsx("p",{children:"Manage system prompts for AI generation."})]})]})})},Mo=({label:t,value:e})=>u.jsxs("div",{style:Nt.metaItem,children:[u.jsxs("span",{style:Nt.metaLabel,children:[t,":"]}),u.jsx("span",{style:Nt.metaValue,children:e||"N/A"})]}),Nt={card:{background:"white",padding:"2rem",borderRadius:"8px",border:"1px solid #e1e3e5",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},cardTitle:{marginBottom:"0.5rem",fontSize:"1.25rem",fontWeight:600,color:"#202223"},cardDesc:{marginBottom:"1.5rem",fontSize:"0.9rem",color:"#6d7175"},pasteWrapper:{display:"flex",flexDirection:"column",gap:"1rem"},textarea:{width:"100%",height:"200px",padding:"1rem",borderRadius:"4px",border:"1.5px solid #dcdfe3",fontFamily:"monospace",fontSize:"0.85rem",outline:"none",resize:"vertical"},pasteActions:{display:"flex",gap:"1rem"},primaryBtn:{padding:"0.75rem 1.5rem",background:"#008060",color:"white",border:"none",borderRadius:"4px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center"},secondaryBtn:{padding:"0.75rem 1rem",background:"transparent",color:"#5c5f62",border:"1px solid #c9cccf",borderRadius:"4px",cursor:"pointer"},errorBanner:{marginTop:"1rem",padding:"1rem",background:"#fff4f4",color:"#8f2316",borderRadius:"4px",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.9rem"},previewBox:{marginTop:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e1e3e5"},previewHeader:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},previewTitle:{margin:0,fontSize:"1rem",fontWeight:600,color:"#008060"},metaGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},metaItem:{display:"flex",flexDirection:"column",gap:"0.25rem"},metaLabel:{fontSize:"0.75rem",fontWeight:600,color:"#6d7175",textTransform:"uppercase"},metaValue:{fontSize:"0.95rem",fontWeight:500,color:"#202223"},editBtn:{width:"100%",padding:"0.75rem",background:"white",color:"#2c6ecb",border:"1px solid #2c6ecb",borderRadius:"4px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}},LU=({lesson:t,user:e,onStart:n,onClose:r,onEdit:i,onDelete:s,showConfirm:o})=>{const a=R.useRef(null),l=e&&(t.ownedByMe||e.email===Ei);return!t||!t.importantNote?null:(R.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[t]),u.jsxs(Fe.div,{ref:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"var(--bg-color)",zIndex:1500,display:"flex",flexDirection:"column",padding:window.innerWidth<768?"1rem":"2rem",overflowY:"auto",overscrollBehavior:"contain"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexShrink:0},children:[u.jsx("h2",{style:{fontSize:window.innerWidth<768?"1.5rem":"1.8rem",margin:0},children:"Important Note"}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"neo-button icon-btn",onClick:()=>o(`Delete "${t.title}"?`,s),title:"Delete Lesson",style:{color:"#ef4444"},children:u.jsx(fi,{size:20})}),u.jsx("button",{className:"neo-button icon-btn",onClick:i,title:"Edit Lesson",children:u.jsx(uv,{size:20})})]}),u.jsx(Ar,{onClick:r,size:20})]})]}),u.jsx("div",{className:"neo-inset",style:{flex:1,padding:window.innerWidth<768?"1.25rem":"2rem",whiteSpace:"pre-wrap",fontSize:window.innerWidth<768?"1rem":"1.1rem",lineHeight:"1.6",color:"var(--text-color)",marginBottom:"8rem",borderRadius:"16px"},children:t.importantNote}),u.jsxs("button",{className:"neo-button neo-glow-blue",onClick:n,style:{position:"fixed",bottom:"2rem",left:"50%",transform:"translateX(-50%)",padding:"1rem 2.5rem",fontSize:"1.2rem",background:"var(--accent-color)",color:"white",border:"none",borderRadius:"50px",display:"flex",alignItems:"center",gap:"10px",zIndex:1600,boxShadow:"0 4px 15px rgba(0,0,0,0.3)",width:"max-content",maxWidth:"90%"},children:[u.jsx(Pf,{size:24,fill:"currentColor"}),"Start Review"]})]}))},MU=({onSave:t})=>{const[e,n]=R.useState(""),r=i=>{i.preventDefault(),e.trim()&&t(e.trim())};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,right:0,bottom:0,left:0,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",background:"rgba(255,255,255,0.01)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:u.jsxs(Fe.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},className:"neo-flat",style:{width:"100%",maxWidth:"400px",padding:"2.5rem",textAlign:"center",display:"flex",flexDirection:"column",gap:"2rem"},children:[u.jsxs("div",{children:[u.jsx("div",{className:"neo-inset",style:{width:"64px",height:"64px",borderRadius:"50%",margin:"0 auto 1.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--accent-color)"},children:u.jsx(xd,{size:32})}),u.jsx("h2",{style:{fontSize:"1.8rem",marginBottom:"0.5rem"},children:"Welcome, Friend!"}),u.jsx("p",{style:{opacity:.6},children:"I want to be your well-wisher on this learning journey. What should I call you?"})]}),u.jsxs("form",{onSubmit:r,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsx("div",{className:"neo-inset",style:{padding:"4px 15px",borderRadius:"12px",display:"flex",alignItems:"center"},children:u.jsx("input",{autoFocus:!0,type:"text",value:e,onChange:i=>n(i.target.value),placeholder:"Your name...",style:{width:"100%",padding:"12px 5px",background:"transparent",border:"none",fontSize:"1.1rem",color:"inherit",outline:"none"}})}),u.jsxs("button",{type:"submit",disabled:!e.trim(),className:"neo-button neo-glow-blue",style:{padding:"1.2rem",justifyContent:"center",gap:"0.8rem",background:"var(--accent-color)",color:"white",opacity:e.trim()?1:.5},children:[u.jsx(xo,{size:20}),"Get Started"]})]})]})})},VU=({user:t,lessons:e,publicLessons:n,userProfile:r,activeLesson:i,reviewLesson:s,noteLesson:o,theme:a,onToggleTheme:l,soundsEnabled:d,onToggleSounds:h,onLogout:f,onDeleteData:p,onShowTour:g,onSaveLesson:w,onDeleteLesson:_,onImportLesson:k,onUpdateCoins:S,isUnlimited:v,signIn:x,onReviewStart:j,handleEditLesson:L,handleReviewLaunch:O,activeTab:E,fetchPublicLessons:T,fetchLessons:b,ADMIN_EMAIL:A,APP_VERSION:P,showNotification:N,setUserProfile:I,saveUserProfile:K,refreshProfile:fe})=>{const{modals:Y,toggleModal:ne,setReviewLesson:U,setNoteLesson:X,setActiveLesson:M}=nu(),{isActive:D,endTour:W,startTour:Z}=ru(),ee=()=>{U(null),X(null),ne("showAddModal",!1)},re=br.useRef({});return br.useEffect(()=>{const B=["showMenu","showCoinModal","showReferral","showAdminPanel"];let H=!1;B.forEach(ie=>{const pe=Y[ie],Ee=re.current[ie];pe&&!Ee&&(H=!0)}),re.current={...Y},H&&fe&&(console.log("[ModalRegistry] Syncing profile on modal open."),fe())},[Y,fe]),u.jsxs(Sn,{children:[Y.showMenu&&u.jsx(E9,{user:t,theme:a,onToggleTheme:l,soundsEnabled:d,onToggleSounds:h,onShowFeedback:()=>{ne("showMenu",!1),window.history.pushState({modal:"active"},"",window.location.pathname),ne("showFeedback",!0)},onShowReferral:()=>{ne("showMenu",!1),window.history.pushState({modal:"active"},"",window.location.pathname),ne("showReferral",!0)},onClose:()=>ne("showMenu",!1),onLogout:f,onLogin:()=>{ne("showMenu",!1),x("consent")},onDeleteData:p,onShowAdminPanel:()=>{ne("showMenu",!1),window.history.pushState({modal:"active"},"",window.location.pathname),ne("showAdminPanel",!0)},onShowTour:()=>{ne("showMenu",!1),W(),setTimeout(()=>Z(),300)},appVersion:P}),Y.showAddModal&&u.jsx(I9,{user:t,lesson:i,onClose:()=>window.history.back(),onSave:w,onDelete:_,showAlert:B=>N("alert",B),showConfirm:(B,H)=>N("confirm",B,H),availableLabels:[...new Set(e.map(B=>B.label).filter(B=>B))],allLessons:e,activeTab:E}),s&&u.jsx(W9,{lesson:s,user:t,onClose:ee,onUpdate:B=>w(B,!1),onEdit:()=>{L(s),U(null)},showAlert:B=>typeof B=="string"?N("alert",B):N(B.type,B.message,B.onConfirm),userCoins:(r==null?void 0:r.coins)||0,onDeductCoins:B=>{v||S(((r==null?void 0:r.coins)||0)-B)},isUnlimited:v,onReviewStart:j,displayName:r==null?void 0:r.displayName}),o&&u.jsx(LU,{lesson:o,user:t,onStart:()=>{U(o),X(null)},onClose:()=>window.history.back(),onEdit:()=>{L(o),X(null)},onDelete:()=>_(o),showConfirm:(B,H)=>N("confirm",B,H)}),Y.showFeedback&&u.jsx(q9,{user:t,onClose:()=>window.history.back(),showAlert:B=>N("alert",B)}),Y.showKnowMore&&u.jsx(H9,{isOpen:Y.showKnowMore,onClose:()=>window.history.back(),onLogin:()=>{ne("showKnowMore",!1),onLoginRequired(null)}}),Y.showCoinModal&&u.jsx(TU,{user:t,userCoins:(r==null?void 0:r.coins)||0,onClose:()=>window.history.back(),onShare:()=>{ne("showCoinModal",!1),window.history.pushState({modal:"active"},"",window.location.pathname),ne("showReferral",!0)},onShowFeedback:()=>{ne("showCoinModal",!1),window.history.pushState({modal:"active"},"",window.location.pathname),ne("showFeedback",!0)}}),Y.showReferral&&u.jsx(SU,{user:t,userProfile:r,onClose:()=>window.history.back(),onUpdateProfile:B=>{I(B),K(t.token,B)},showAlert:B=>N("alert",B),onShowFeedback:()=>{ne("showReferral",!1),window.history.pushState({modal:"active"},"",window.location.pathname),ne("showFeedback",!0)}}),Y.showAdminPanel&&u.jsx(jU,{user:t,onClose:()=>window.history.back(),publicLessons:n,onRefreshPublic:T,showAlert:B=>N("alert",B),showConfirm:(B,H)=>N("confirm",B,H),onEditLesson:L}),Y.showNamePrompt&&!D&&u.jsx(MU,{onSave:async B=>{const H={...r,displayName:B};I(H),ne("showNamePrompt",!1),await K(t.token,H)}})]})},OU=()=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,n=e.createOscillator(),r=e.createGain();n.connect(r),r.connect(e.destination),n.type="sine",n.frequency.setValueAtTime(1200,e.currentTime),n.frequency.exponentialRampToValueAtTime(1800,e.currentTime+.1),r.gain.setValueAtTime(.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.6),n.start(),n.stop(e.currentTime+.6)}catch(t){console.error("Audio play failed",t)}},FU=()=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,n=[523.25,659.25,783.99,1046.5];let r=e.currentTime;n.forEach((i,s)=>{const o=e.createOscillator(),a=e.createGain();o.connect(a),a.connect(e.destination),o.type="triangle",o.frequency.value=i,a.gain.setValueAtTime(.1,r),a.gain.exponentialRampToValueAtTime(.01,r+.5),o.start(r),o.stop(r+.5),r+=.1})}catch(t){console.error("Celebration audio failed",t)}},UU=({color:t})=>u.jsx("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%",fill:t},children:u.jsx("circle",{cx:"50",cy:"50",r:"40"})}),zU=({color:t})=>u.jsx("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%",fill:t},children:u.jsx("path",{d:"M50 15 L90 85 L10 85 Z"})}),BU=({color:t})=>u.jsxs("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%",fill:t},children:[u.jsx("rect",{x:"35",y:"10",width:"30",height:"80",rx:"5"}),u.jsx("rect",{x:"10",y:"35",width:"80",height:"30",rx:"5"})]}),$U=({amount:t,onClose:e,type:n="Daily Login"})=>{const[r,i]=R.useState(0);R.useEffect(()=>{FU();const l=setTimeout(()=>{OU()},200);let d=0;const h=parseInt(t,10)||0;if(d===h){i(h);return}const f=1e3,p=performance.now(),g=w=>{const _=w-p,k=Math.min(_/f,1),S=1-Math.pow(1-k,4);i(Math.floor(d+(h-d)*S)),k<1&&requestAnimationFrame(g)};return requestAnimationFrame(g),()=>clearTimeout(l)},[t]);const s=12,o=["#FBBF24","#3B82F6","#EF4444","#10B981"],a=180;return u.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",backdropFilter:"blur(4px)",background:"rgba(0,0,0,0.3)"},onClick:e,children:u.jsxs("div",{style:{position:"relative"},onClick:l=>l.stopPropagation(),children:[u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:0,height:0,pointerEvents:"none"},children:[...Array(s)].map((l,d)=>{const h=d/s*360,f=[UU,zU,BU][d%3];return u.jsx(Fe.div,{style:{position:"absolute",width:"32px",height:"32px"},initial:{x:0,y:0,scale:0,rotate:0},animate:{x:Math.cos(h*Math.PI/180)*a,y:Math.sin(h*Math.PI/180)*a,scale:[0,1.2,0],rotate:[0,180,360],opacity:[1,1,0]},transition:{duration:1.5,ease:"easeOut",delay:.1},children:u.jsx(f,{color:o[d%o.length]})},d)})}),u.jsxs(Fe.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:15},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",textAlign:"center"},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Fe.div,{animate:{y:[-10,10,-10],rotateY:[0,180,360]},transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},rotateY:{duration:4,repeat:1/0,ease:"linear"}},style:{width:"120px",height:"120px",background:"linear-gradient(135deg, #fbbf24, #d97706)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"4px solid #fef3c7",boxShadow:"0 10px 25px rgba(217, 119, 6, 0.4), inset 0 2px 5px rgba(255, 255, 255, 0.5)",position:"relative",zIndex:2},children:u.jsx(Rf,{size:60,color:"white"})}),u.jsx("div",{style:{position:"absolute",inset:"-20px",background:"radial-gradient(circle, rgba(251, 191, 36, 0.4) 0%, transparent 70%)",borderRadius:"50%",zIndex:1}})]}),u.jsxs("div",{children:[u.jsx(Fe.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},style:{color:"white",fontSize:"1.5rem",fontWeight:"900",textTransform:"uppercase",letterSpacing:"2px",textShadow:"0 2px 10px rgba(0,0,0,0.5)",marginBottom:"0.5rem"},children:n}),u.jsxs(Fe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring"},style:{color:"#fbbf24",fontSize:"4rem",fontWeight:"900",textShadow:"0 4px 15px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:["+",r]})]}),u.jsxs(Fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,style:{background:"white",border:"none",borderRadius:"50px",padding:"1rem 3rem",fontSize:"1.2rem",fontWeight:"800",color:"#d97706",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",boxShadow:"0 10px 20px rgba(0,0,0,0.2), 0 5px 0 #e5e7eb",marginTop:"1rem"},children:[u.jsx(xo,{size:24,strokeWidth:3}),"CONTINUE"]})]}),u.jsx("button",{onClick:e,style:{position:"absolute",top:"-4rem",right:"0",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"white",padding:"0.5rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)",transition:"background 0.2s"},onMouseEnter:l=>l.currentTarget.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:l=>l.currentTarget.style.background="rgba(255, 255, 255, 0.1)",children:u.jsx(fn,{size:24})})]})})},WU=({onStartDemo:t,onGoToMyLessons:e,userName:n,onLogin:r,onAddLesson:i})=>{const{isActive:s,currentStep:o,nextStep:a,setStep:l,endTour:d,isDemoGracePeriod:h}=ru(),[f,p]=R.useState(null),[g,w]=R.useState(window.innerWidth<768);R.useRef(null),R.useEffect(()=>{const E=()=>w(window.innerWidth<768);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const _=R.useMemo(()=>[{id:1,targetId:null,mobilePos:{bottom:"20px",left:0,right:0,margin:"0 auto",width:"90%"},desktopPos:{bottom:"50px",left:"50px"},text:`Welcome${n?" "+n:""}! Im Chethan.
Im here to guide you through a more efficient way to learn and retain information.`,actionLabel:"Begin Tour",layout:"duo-card",canSkip:!0},{id:2,targetId:null,mobilePos:{bottom:"20px",left:0,right:0,margin:"0 auto",width:"90%"},desktopPos:{bottom:"20px",left:"20px"},text:"Your progress and lessons are stored securely in your personal Google Drive, ensuring your data remains private and under your exclusive control.",actionLabel:"Sign in with Google",onAction:r,layout:"duo-card",isLoginStep:!0,canSkip:!0,onSkip:()=>l(3),extraContent:u.jsxs("div",{style:{marginTop:"12px",padding:"14px",background:"var(--accent-soft)",borderRadius:"16px",border:"1px solid var(--tour-border)",fontSize:"0.85rem",color:"var(--tour-text)",textAlign:"left"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontWeight:"700"},children:[u.jsx("div",{style:{background:"var(--accent-color)",color:"white",width:"22px",height:"22px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"},children:"!"}),"Setup Requirement"]}),"To enable synchronization, please ensure you ",u.jsx("strong",{children:"check the permission box"})," during sign-in."]})},{id:3,targetId:"tab-lessons",text:"Explore our collection of professionally curated lessons. You can easily add any of these to your personal library.",actionLabel:"Next",layout:"tooltip",placement:"bottom",canSkip:!0},{id:4,targetId:"fab-add-lesson",text:"Ready to create your own? Click the '+' button to start building your personal lesson.",onAction:()=>{i==null||i(),a()},layout:"tooltip",placement:"top",canSkip:!0},{id:5,targetId:"lesson-modal-title-input",text:"Give your lesson a catchy title and start adding questions. You can use text, images, and even voice recordings!",actionLabel:"Got it",layout:"tooltip",placement:"bottom",canSkip:!1},{id:6,targetId:null,text:"You are now fully equipped for success. Start creating your own personalized lessons whenever you're ready.",actionLabel:"Get Started",onAction:e,layout:"duo-card",isFinalAction:!0,canSkip:!1}],[n,r,t,e,l,g,i]),k=_.findIndex(E=>E.id===o),S=_[k]||_[0];R.useEffect(()=>{if(!s)return;const E=()=>{if(S.targetId){const b=document.getElementById(S.targetId),P=(S.highlightId?document.getElementById(S.highlightId):null)||b;if(P){const N=P.getBoundingClientRect();p(N),N.top>=0&&N.left>=0&&N.bottom<=window.innerHeight&&N.right<=window.innerWidth||P.scrollIntoView({behavior:"smooth",block:"center"})}else p(null)}else p(null)};E(),window.addEventListener("resize",E),window.addEventListener("scroll",E);const T=setInterval(E,500);return()=>{window.removeEventListener("resize",E),window.removeEventListener("scroll",E),clearInterval(T)}},[o,S,s]);const v=()=>{S.onAction?S.onAction():S.isFinalAction?d():a()},x=E=>{E.stopPropagation(),S.onSkip?S.onSkip():a()};if(!s)return null;const j=()=>{const E=window.innerWidth,T=window.innerHeight,b=E<768;let A=b?Math.min(E-32,340):S.layout==="duo-card"?550:380;const P=16,N=16,I={position:"fixed",width:A,zIndex:"var(--tour-z-index)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"};if(!f)return{...I,left:(E-A)/2,top:b?"auto":(T-200)/2,bottom:b?"24px":"auto",maxWidth:`calc(100vw - ${P*2}px)`};const K=f.left+f.width/2,fe=f.top+f.height/2;let Y=S.placement||"bottom";return b&&((Y==="left"||Y==="right")&&(Y=f.top>T/2?"top":"bottom"),Y==="bottom"&&f.bottom+220>T&&(Y="top"),Y==="top"&&f.top<220&&(Y="bottom")),Y==="top"?(I.left=K-A/2,I.bottom=T-f.top+N):Y==="bottom"?(I.left=K-A/2,I.top=f.bottom+N):Y==="left"?(I.left=f.left-A-N,I.top=fe-100):(I.left=f.right+N,I.top=fe-100),I.left<P?I.left=P:I.left+A>E-P&&(I.left=E-A-P),I.top!==void 0?I.top<P?I.top=P:I.top+200>T&&(I.top=T-200-P):I.bottom!==void 0&&I.bottom<P&&(I.bottom=P),I.activePlacement=Y,I.arrowLeft=K-I.left,I};if(!s||h)return null;const L=j(),O=g&&S.mobilePos?S.mobilePos:!g&&S.desktopPos?S.desktopPos:L;return u.jsxs("div",{className:"feature-tour-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:"var(--tour-z-index)",pointerEvents:"none"},children:[u.jsx(Sn,{children:!S.targetId&&u.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",inset:0,background:"var(--tour-overlay-bg)",backdropFilter:"blur(4px)",pointerEvents:"auto"}})}),u.jsx(Sn,{mode:"wait",children:u.jsx(Fe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},style:{position:"fixed",display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"auto",...O},children:u.jsxs("div",{className:"neo-flat tour-glass",style:{background:"var(--tour-bg)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",color:"var(--tour-text)",borderRadius:"24px",border:"1px solid var(--tour-border)",padding:"1.25rem",display:"flex",flexDirection:g?"column":"row",alignItems:"center",gap:"1.25rem",overflow:"hidden",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1)",width:"100%",position:"relative"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minWidth:g?"60px":S.layout==="duo-card"?"140px":"90px",width:g?"60px":S.layout==="duo-card"?"140px":"90px",flexShrink:0},children:u.jsx("img",{src:dv,alt:"Guide",style:{width:"100%",height:"auto",maxWidth:"120px"}})}),u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.75rem",textAlign:"left"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"8px"},children:[u.jsx("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:"1.6",fontWeight:"600",whiteSpace:"pre-line"},children:S.text}),u.jsx("button",{onClick:d,style:{background:"none",border:"none",color:"var(--tour-text-muted)",cursor:"pointer",padding:4,flexShrink:0},children:u.jsx(fn,{size:18})})]}),S.extraContent,u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"4px"},children:[S.canSkip&&u.jsx("button",{onClick:x,style:{padding:"0.6rem 1rem",background:"transparent",color:"var(--tour-text-muted)",fontWeight:"600",borderRadius:"12px",border:"1px solid var(--tour-border)",fontSize:"0.85rem"},children:"Skip"}),u.jsxs("button",{onClick:v,style:{flex:2,padding:"0.6rem 1.25rem",background:"var(--tour-accent)",color:"white",fontWeight:"700",borderRadius:"12px",boxShadow:"0 4px 0 var(--tour-accent-dark)",border:"none",fontSize:"0.9rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"},children:[S.isLoginStep&&u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"18px",height:"18px",style:{flexShrink:0},children:[u.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),u.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),u.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),u.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C40.483,35.58,44,30.2,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),S.actionLabel,S.actionIcon||u.jsx(zC,{size:16})]})]})]}),S.targetId&&L.activePlacement&&(L.activePlacement==="top"||L.activePlacement==="bottom")&&u.jsx("div",{style:{position:"absolute",[L.activePlacement==="top"?"bottom":"top"]:"-8px",left:`${L.arrowLeft}px`,transform:"translateX(-50%)",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",[L.activePlacement==="top"?"borderTop":"borderBottom"]:"8px solid var(--tour-bg)",zIndex:1}})]})},o)})]})},qU=()=>{const{user:t,signIn:e,signOut:n}=Ao(),{handleUpdateLocalLesson:r,deleteLesson:i,fetchLessons:s,fetchPublicLessons:o,lessons:a,setPublicLessons:l,publicLessons:d,setLessons:h}=QC(),{toggleModal:f,setReviewLesson:p,setNoteLesson:g,showNotification:w,setActiveLesson:_,showToast:k,modals:S,setHeaderLoading:v,showHeaderNotice:x}=nu(),{queuePostTourEvent:j,endTour:L}=ru(),O=async(N,I,K,fe)=>{var Y,ne;v(!0);try{if(I>0){if(!(t!=null&&t.uid))throw new Error("User must be logged in to purchase.");console.log("[AppActions] Initiating purchase transaction for:",N.title);const ee=N.id;await es.purchaseLesson(t.uid,ee,I),console.log("[AppActions] Purchase successful. Entitlement granted.")}let U={...N};console.log("[AppActions] Starting import for:",N.title);const X=U.questions||U.cards||[];if(U.isPublic&&X.length===0){const{getPublicFileContent:ee}=await Fr(()=>import("./publicDrive-fa900bb1.js"),[]),re=U.storagePath||U.driveFileId||U.id;console.log("[AppActions] Fetching full content from:",re);const B=await ee(re);if(B){let H=null;if(typeof B=="string"){const{decryptionService:pe}=await Fr(()=>import("./decryptionService-6b41949d.js"),[]);console.log("[AppActions] Requesting server-side decryption...");const Ee=await((Y=dr.currentUser)==null?void 0:Y.getIdToken());if(!Ee)throw console.error("[AppActions] Authentication Check Failed: auth.currentUser is null. Please refresh the page or sign in again."),new Error("User must be authenticated to decrypt lessons.");const me=U.lessonId||U.id,ke=await pe.decryptPublicLesson(B,me,Ee);H=Yp(ke),console.log("[AppActions] Server decryption successful. Normalized questions:",(ne=H.questions)==null?void 0:ne.length)}else H=B;U={...U,...H,isPublic:!0};const ie=U.questions||U.cards||[];if(console.log("[AppActions] Merged content. Questions count:",ie.length),ie.length===0)throw new Error("Imported lesson contains no questions.")}else throw new Error("Could not fetch lesson questions for import.")}const D=(U.questions||U.cards||[]).length,W={...U,id:Date.now().toString(),driveFileId:null,isPublic:!1,source:"local",isLocal:!0,cost:0,questionCount:D};console.log("[AppActions] Saving imported lesson as new local lesson. Questions:",D);const Z=await Ji.saveLesson(W);I>0&&fe&&fe(((K==null?void 0:K.coins)||0)-I),r({...W,driveFileId:Z.driveFileId||Z.id}),x(I>0?`Purchased "${N.title}"!`:`Added "${N.title}"!`)}catch(U){console.error("[AppActions] Import/Purchase failed:",U),w("alert",`Operation failed: ${U.message}`)}finally{v(!1)}},E=R.useCallback(async(N,I,K)=>{if(!t){j(()=>E(N,I,K)),e();return}const fe=N.cost||0;if(fe>0&&((I==null?void 0:I.coins)||0)<fe){w("alert",`Not enough coins! You need ${fe} coins.`);return}const Y=()=>{O(N,fe,I,K)};fe>0?w("confirm",`Buy "${N.title}" for ${fe} coins?`,Y):Y()},[t,j,e,w]),T=R.useCallback(N=>{h(K=>K.filter(fe=>fe.id!==N.id));let I=!1;k({message:`Deleted "${N.title}"`,type:"undo",duration:4e3,onUndo:()=>{I=!0,h(K=>[...K,N])},onClose:()=>{I||i(N)}}),f("showAddModal",!1),p(null),g(null)},[i,f,p,g,h,k]),b=R.useCallback(async N=>{if(t&&window.confirm("Are you sure? This will delete ALL your lessons. This cannot be undone."))try{const I=a.filter(K=>K.driveFileId&&!K.isPublic);for(const K of I)await i(K);w("alert","All local data deleted."),N(),n()}catch(I){w("alert",`Cleanup partially failed: ${I.message}`)}finally{f("showMenu",!1)}},[t,a,i,n,w,f]),A=R.useCallback(async(N,I=null)=>{var Y,ne,U;let K=N;const fe=K.questions||K.cards||[];if(K.isPublic&&!K.isLocal&&fe.length===0)try{const{getPublicFileContent:X}=await Fr(()=>import("./publicDrive-fa900bb1.js"),[]),M=K.storagePath||K.driveFileId||K.id,D=await X(M);if(D){let W=null;if(typeof D=="string"){const{decryptionService:Z}=await Fr(()=>import("./decryptionService-6b41949d.js"),[]),ee=await((Y=dr.currentUser)==null?void 0:Y.getIdToken());if(!ee){w("alert","Please sign in to edit this lesson.");return}const re=K.lessonId||K.id,B=await Z.decryptPublicLesson(D,re,ee);W=Yp(B)}else W=D;if(W&&(((ne=W.questions)==null?void 0:ne.length)>0||((U=W.cards)==null?void 0:U.length)>0))K={...K,...W,isPublic:!0},l(Z=>Z.map(ee=>ee.id===N.id?K:ee));else throw new Error("Decrypted content has no questions.")}}catch(X){console.error("[AppActions] Failed to fetch full content for edit:",X),w("alert","Failed to load lesson for editing.");return}_(K),window.history.pushState({modal:"active"},"",window.location.pathname),f("showAddModal",!0)},[t,l,_,f,w]),P=R.useCallback(async N=>{var fe;if(N.isPublic&&!N.isOwned&&!N.isLocal){x("Add to My Lessons to open");return}let I=N;if((I.questions||I.cards||[]).length===0&&I.isPublic&&!I.isLocal)try{const{getPublicFileContent:Y}=await Fr(()=>import("./publicDrive-fa900bb1.js"),[]),ne=I.driveFileId||I.storagePath||I.id,U=await Y(ne);if(U){let X=null;if(typeof U=="string"){if(!X&&(U.startsWith("v1:")||U.length>100)){const{decryptionService:M}=await Fr(()=>import("./decryptionService-6b41949d.js"),[]),D=await((fe=dr.currentUser)==null?void 0:fe.getIdToken());if(D){const W=I.lessonId||I.id,Z=await M.decryptPublicLesson(U,W,D);X=Yp(Z)}else{console.log("[AppActions] User not authenticated. Triggering sign-in..."),j(()=>P(N)),e("consent");return}}X||(X={})}else X=U;I={...I,...X}}}catch(Y){console.error("[AppActions] Failed to fetch full content for review:",Y),x("Add to My Lessons to open");return}I.importantNote?g(I):p(I)},[t,x,g,p,j,e]);return{handleImportLesson:E,handleDeleteLesson:T,handleDeleteAllData:b,handleEditLesson:A,handleReviewLaunch:P}},HU=()=>{const{user:t,signIn:e,signOut:n}=Ao(),{allowExit:r}=g9(!!t),{lessons:i,setLessons:s,publicLessons:o,setPublicLessons:a,loading:l,publicLoading:d,fetchLessons:h,fetchPublicLessons:f,handleUpdateLocalLesson:p}=QC(),{modals:g,toggleModal:w,activeLesson:_,setActiveLesson:k,reviewLesson:S,setReviewLesson:v,noteLesson:x,setNoteLesson:j,showNotification:L,headerLoading:O}=nu(),{isActive:E,currentStep:T,setStep:b,startTour:A,endTour:P,isDemoGracePeriod:N,setIsDemoGracePeriod:I}=ru(),[K,fe]=R.useState(!1),[Y,ne]=R.useState(null),[U,X]=R.useState(localStorage.getItem("theme")||"light"),[M,D]=R.useState("Creation Date"),[W,Z]=R.useState(null),[ee,re]=R.useState(""),[B,H]=R.useState("my-lessons"),[ie,pe]=R.useState({standard:"",syllabus:"",medium:"",subject:""}),[Ee,me]=R.useState(localStorage.getItem("soundsEnabled")!=="false"),[ke,q]=R.useState(!1),ce=R.useCallback(ye=>L(ye.type,ye.message,ye.onConfirm),[L]),{userProfile:Ce,setUserProfile:at,handleUpdateCoins:Ge,loadProfile:Ke,isProfileLoading:_t}=m9(t,ce,ne),{handleImportLesson:Ne,handleDeleteLesson:Qe,handleDeleteAllData:Gn,handleEditLesson:Rr,handleReviewLaunch:an}=qU(),lr=K||l,we="1.1.4";R.useEffect(()=>{const ye=ji.get("app_version");if(ye&&ye!==we){console.log(`[VersionControl] Upgrading to ${we}.`);const Ae=ji.get("theme"),tt=ji.get("soundsEnabled");ji.purge(),Ae&&ji.set("theme",Ae),tt&&ji.set("soundsEnabled",tt),ji.set("app_version",we),window.location.reload(!0)}else ji.set("app_version",we)},[]),R.useEffect(()=>{document.documentElement.setAttribute("data-theme",U),localStorage.setItem("theme",U)},[U]),R.useEffect(()=>{window.location.pathname.includes("/admin")&&w("showAdminPanel",!0),f(),t?(h(),w("showMenu",!1)):s([])},[t,h,f,s,w]),R.useEffect(()=>{E&&(T===3&&H("lessons"),T===4&&H("my-lessons"),T===2&&t&&b(3))},[E,T,t,b]),R.useEffect(()=>{N&&!S&&(I(!1),b(5),H("my-lessons"))},[S,N,b,I]),R.useEffect(()=>{const ye=Ae=>{Y?ne(null):x?j(null):g.showReferral?w("showReferral",!1):g.showFeedback?w("showFeedback",!1):g.showKnowMore?w("showKnowMore",!1):g.showAdminPanel?w("showAdminPanel",!1):g.showAdminQuickTools?w("showAdminQuickTools",!1):g.showCoinModal?w("showCoinModal",!1):g.showAddModal?w("showAddModal",!1):S?ke?(window.history.pushState({modalOpen:!0},"",window.location.pathname),L("confirm","End session?",()=>{v(null),q(!1),window.history.back()})):v(null):g.showMenu?w("showMenu",!1):t&&(!Ae.state||Ae.state.guard!=="active")&&(window.history.pushState({guard:"active"},"",window.location.pathname),L("confirm","Sign out and exit?",()=>{r(),n(),window.history.back()}))};return window.addEventListener("popstate",ye),()=>window.removeEventListener("popstate",ye)},[Y,g,x,S,ke,t,n,r,w,j,v,L]);const et=R.useMemo(()=>{let ye=W?i.filter(Ae=>Ae.label===W):i;return ee.trim()&&(ye=ye.filter(Ae=>Ae.title.toLowerCase().includes(ee.toLowerCase()))),[...ye].sort((Ae,tt)=>{if(E){if(Ae.id==="demo-lesson")return-1;if(tt.id==="demo-lesson")return 1}return(tt.id||0)-(Ae.id||0)})},[i,W,ee,E]),Be=(Ce==null?void 0:Ce.unlimitedCoinsExpiry)&&new Date(Ce.unlimitedCoinsExpiry).getTime()>Date.now();return u.jsxs(S9,{user:t,userProfile:Ce,isUnlimited:Be,isProfileLoading:_t,isAdmin:(t==null?void 0:t.email)===Ei,isTourActive:E,onShowCoinModal:()=>{window.history.pushState({modal:"active"},"",window.location.pathname),w("showCoinModal",!0)},onShowMenu:()=>w("showMenu",!0),onAddLesson:()=>{if(!t){e("consent");return}k(null),window.history.pushState({modal:"active"},"",window.location.pathname),w("showAddModal",!0)},headerLoading:O||lr,children:[u.jsx(_9,{activeTab:B,setActiveTab:H,lessons:et,publicLessons:o,user:t,onLogin:ye=>e(ye||"consent"),loading:lr,publicLoading:d,userCoins:(Ce==null?void 0:Ce.coins)||0,onReview:an,onEdit:Rr,onImport:ye=>Ne(ye,Ce,Ge),searchQuery:ee,setSearchQuery:re,onShowFeedback:()=>{window.history.pushState({modal:"active"},"",window.location.pathname),w("showFeedback",!0)},filters:ie,setFilters:pe,sortBy:M,onSortChange:D,filterLabel:W,onLabelChange:Z,availableLabels:[...new Set(i.map(ye=>ye.label).filter(ye=>ye))],onShowKnowMore:()=>{window.history.pushState({modal:"active"},"",window.location.pathname),w("showKnowMore",!0)},onDelete:Qe,showConfirm:(ye,Ae)=>L("confirm",ye,Ae),onAddLesson:()=>{k(null),window.history.pushState({modal:"active"},"",window.location.pathname),w("showAddModal",!0)},onRefresh:()=>{B==="my-lessons"&&t?(h(),Ke()):f()}}),u.jsx(VU,{user:t,lessons:i,publicLessons:o,userProfile:Ce,activeLesson:_,reviewLesson:S,noteLesson:x,theme:U,onToggleTheme:()=>X(ye=>ye==="light"?"dark":"light"),soundsEnabled:Ee,onToggleSounds:()=>{const ye=!Ee;return me(ye),localStorage.setItem("soundsEnabled",ye),ye},onLogout:()=>{r(),n()},onDeleteData:()=>Gn(r),onShowTour:()=>{w("showMenu",!1),P(),setTimeout(()=>A(),300)},onSaveLesson:(ye,Ae,tt)=>{p(ye),(ye.isPublic||tt)&&f(),Ae!==!1&&window.history.back()},onDeleteLesson:Qe,onImportLesson:ye=>Ne(ye,Ce,Ge),onUpdateCoins:Ge,isUnlimited:Be,signIn:e,onReviewStart:()=>q(!0),handleEditLesson:Rr,handleReviewLaunch:an,activeTab:B,fetchPublicLessons:f,fetchLessons:h,ADMIN_EMAIL:Ei,APP_VERSION:we,showNotification:L,setUserProfile:at,refreshProfile:Ke}),u.jsx(WU,{userName:Ce==null?void 0:Ce.displayName,onLogin:()=>e("consent"),onAddLesson:()=>{k(null),window.history.pushState({modal:"active"},"",window.location.pathname),w("showAddModal",!0)},onStartDemo:()=>{const ye=i.find(Ae=>Ae.id==="demo-lesson")||DEMO_LESSON;an(ye),I(!0)},onGoToMyLessons:()=>{H("my-lessons"),P()}}),u.jsx(Sn,{children:Y&&!E&&u.jsx($U,{amount:Y.amount,type:Y.type,onClose:()=>ne(null)})})]})},GU=()=>u.jsx(MC,{children:u.jsx(f9,{children:u.jsx(XC,{children:u.jsx(p9,{children:u.jsx(HU,{})})})})});console.log("%c Chethan in Cardland ","background: #4f46e5; color: #fff; font-weight: bold; padding: 4px; border-radius: 4px;");console.log(`Build Version: 1.1.1 | Sync: ${new Date().toISOString()}`);em.createRoot(document.getElementById("root")).render(u.jsx(br.StrictMode,{children:u.jsx(MC,{children:u.jsx(XC,{children:u.jsx(GU,{})})})}));"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(t=>{for(const e of t)console.log("Unregistering Service Worker:",e),e.unregister()});export{iz as D,tz as a,zs as b,$p as c,vn as d,C3 as e,rz as f,qp as g,k3 as h,ZU as o,Wp as q,nz as r,Lo as s,ez as u,__ as w};
